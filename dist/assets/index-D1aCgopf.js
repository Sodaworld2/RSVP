(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function ww(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tg={exports:{}},zu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function vx(){if($T)return zu;$T=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return zu.Fragment=e,zu.jsx=t,zu.jsxs=t,zu}var YT;function Ex(){return YT||(YT=1,tg.exports=vx()),tg.exports}var S=Ex(),ng={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function Tx(){if(QT)return Ce;QT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,z={};function L(O,se,fe){this.props=O,this.context=se,this.refs=z,this.updater=fe||R}L.prototype.isReactComponent={},L.prototype.setState=function(O,se){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,se,"setState")},L.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function te(){}te.prototype=L.prototype;function W(O,se,fe){this.props=O,this.context=se,this.refs=z,this.updater=fe||R}var $=W.prototype=new te;$.constructor=W,U($,L.prototype),$.isPureReactComponent=!0;var re=Array.isArray,ie={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function N(O,se,fe,ce,_e,ke){return fe=ke.ref,{$$typeof:n,type:O,key:se,ref:fe!==void 0?fe:null,props:ke}}function I(O,se){return N(O.type,se,void 0,void 0,void 0,O.props)}function x(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function M(O){var se={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return se[fe]})}var V=/\/+/g;function B(O,se){return typeof O=="object"&&O!==null&&O.key!=null?M(""+O.key):se.toString(36)}function D(){}function mt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(D,D):(O.status="pending",O.then(function(se){O.status==="pending"&&(O.status="fulfilled",O.value=se)},function(se){O.status==="pending"&&(O.status="rejected",O.reason=se)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function st(O,se,fe,ce,_e){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var we=!1;if(O===null)we=!0;else switch(ke){case"bigint":case"string":case"number":we=!0;break;case"object":switch(O.$$typeof){case n:case e:we=!0;break;case _:return we=O._init,st(we(O._payload),se,fe,ce,_e)}}if(we)return _e=_e(O),we=ce===""?"."+B(O,0):ce,re(_e)?(fe="",we!=null&&(fe=we.replace(V,"$&/")+"/"),st(_e,se,fe,"",function(nr){return nr})):_e!=null&&(x(_e)&&(_e=I(_e,fe+(_e.key==null||O&&O.key===_e.key?"":(""+_e.key).replace(V,"$&/")+"/")+we)),se.push(_e)),1;we=0;var Ht=ce===""?".":ce+":";if(re(O))for(var Xe=0;Xe<O.length;Xe++)ce=O[Xe],ke=Ht+B(ce,Xe),we+=st(ce,se,fe,ke,_e);else if(Xe=b(O),typeof Xe=="function")for(O=Xe.call(O),Xe=0;!(ce=O.next()).done;)ce=ce.value,ke=Ht+B(ce,Xe++),we+=st(ce,se,fe,ke,_e);else if(ke==="object"){if(typeof O.then=="function")return st(mt(O),se,fe,ce,_e);throw se=String(O),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return we}function J(O,se,fe){if(O==null)return O;var ce=[],_e=0;return st(O,ce,"","",function(ke){return se.call(fe,ke,_e++)}),ce}function he(O){if(O._status===-1){var se=O._result;se=se(),se.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=se)}if(O._status===1)return O._result.default;throw O._result}var ve=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function ze(){}return Ce.Children={map:J,forEach:function(O,se,fe){J(O,function(){se.apply(this,arguments)},fe)},count:function(O){var se=0;return J(O,function(){se++}),se},toArray:function(O){return J(O,function(se){return se})||[]},only:function(O){if(!x(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ce.Component=L,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=W,Ce.StrictMode=i,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ie.H.useMemoCache(O)}},Ce.cache=function(O){return function(){return O.apply(null,arguments)}},Ce.cloneElement=function(O,se,fe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ce=U({},O.props),_e=O.key,ke=void 0;if(se!=null)for(we in se.ref!==void 0&&(ke=void 0),se.key!==void 0&&(_e=""+se.key),se)!de.call(se,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&se.ref===void 0||(ce[we]=se[we]);var we=arguments.length-2;if(we===1)ce.children=fe;else if(1<we){for(var Ht=Array(we),Xe=0;Xe<we;Xe++)Ht[Xe]=arguments[Xe+2];ce.children=Ht}return N(O.type,_e,void 0,void 0,ke,ce)},Ce.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ce.createElement=function(O,se,fe){var ce,_e={},ke=null;if(se!=null)for(ce in se.key!==void 0&&(ke=""+se.key),se)de.call(se,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(_e[ce]=se[ce]);var we=arguments.length-2;if(we===1)_e.children=fe;else if(1<we){for(var Ht=Array(we),Xe=0;Xe<we;Xe++)Ht[Xe]=arguments[Xe+2];_e.children=Ht}if(O&&O.defaultProps)for(ce in we=O.defaultProps,we)_e[ce]===void 0&&(_e[ce]=we[ce]);return N(O,ke,void 0,void 0,null,_e)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(O){return{$$typeof:d,render:O}},Ce.isValidElement=x,Ce.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:he}},Ce.memo=function(O,se){return{$$typeof:g,type:O,compare:se===void 0?null:se}},Ce.startTransition=function(O){var se=ie.T,fe={};ie.T=fe;try{var ce=O(),_e=ie.S;_e!==null&&_e(fe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ze,ve)}catch(ke){ve(ke)}finally{ie.T=se}},Ce.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},Ce.use=function(O){return ie.H.use(O)},Ce.useActionState=function(O,se,fe){return ie.H.useActionState(O,se,fe)},Ce.useCallback=function(O,se){return ie.H.useCallback(O,se)},Ce.useContext=function(O){return ie.H.useContext(O)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(O,se){return ie.H.useDeferredValue(O,se)},Ce.useEffect=function(O,se,fe){var ce=ie.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(O,se)},Ce.useId=function(){return ie.H.useId()},Ce.useImperativeHandle=function(O,se,fe){return ie.H.useImperativeHandle(O,se,fe)},Ce.useInsertionEffect=function(O,se){return ie.H.useInsertionEffect(O,se)},Ce.useLayoutEffect=function(O,se){return ie.H.useLayoutEffect(O,se)},Ce.useMemo=function(O,se){return ie.H.useMemo(O,se)},Ce.useOptimistic=function(O,se){return ie.H.useOptimistic(O,se)},Ce.useReducer=function(O,se,fe){return ie.H.useReducer(O,se,fe)},Ce.useRef=function(O){return ie.H.useRef(O)},Ce.useState=function(O){return ie.H.useState(O)},Ce.useSyncExternalStore=function(O,se,fe){return ie.H.useSyncExternalStore(O,se,fe)},Ce.useTransition=function(){return ie.H.useTransition()},Ce.version="19.1.1",Ce}var XT;function py(){return XT||(XT=1,ng.exports=Tx()),ng.exports}var H=py();const Aw=ww(H);var rg={exports:{}},Fu={},ig={exports:{}},sg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT;function bx(){return WT||(WT=1,(function(n){function e(J,he){var ve=J.length;J.push(he);e:for(;0<ve;){var ze=ve-1>>>1,O=J[ze];if(0<a(O,he))J[ze]=he,J[ve]=O,ve=ze;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var he=J[0],ve=J.pop();if(ve!==he){J[0]=ve;e:for(var ze=0,O=J.length,se=O>>>1;ze<se;){var fe=2*(ze+1)-1,ce=J[fe],_e=fe+1,ke=J[_e];if(0>a(ce,ve))_e<O&&0>a(ke,ce)?(J[ze]=ke,J[_e]=ve,ze=_e):(J[ze]=ce,J[fe]=ve,ze=fe);else if(_e<O&&0>a(ke,ve))J[ze]=ke,J[_e]=ve,ze=_e;else break e}}return he}function a(J,he){var ve=J.sortIndex-he.sortIndex;return ve!==0?ve:J.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,v=null,b=3,R=!1,U=!1,z=!1,L=!1,te=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function re(J){for(var he=t(g);he!==null;){if(he.callback===null)i(g);else if(he.startTime<=J)i(g),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(g)}}function ie(J){if(z=!1,re(J),!U)if(t(m)!==null)U=!0,de||(de=!0,B());else{var he=t(g);he!==null&&st(ie,he.startTime-J)}}var de=!1,N=-1,I=5,x=-1;function M(){return L?!0:!(n.unstable_now()-x<I)}function V(){if(L=!1,de){var J=n.unstable_now();x=J;var he=!0;try{e:{U=!1,z&&(z=!1,W(N),N=-1),R=!0;var ve=b;try{t:{for(re(J),v=t(m);v!==null&&!(v.expirationTime>J&&M());){var ze=v.callback;if(typeof ze=="function"){v.callback=null,b=v.priorityLevel;var O=ze(v.expirationTime<=J);if(J=n.unstable_now(),typeof O=="function"){v.callback=O,re(J),he=!0;break t}v===t(m)&&i(m),re(J)}else i(m);v=t(m)}if(v!==null)he=!0;else{var se=t(g);se!==null&&st(ie,se.startTime-J),he=!1}}break e}finally{v=null,b=ve,R=!1}he=void 0}}finally{he?B():de=!1}}}var B;if(typeof $=="function")B=function(){$(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,mt=D.port2;D.port1.onmessage=V,B=function(){mt.postMessage(null)}}else B=function(){te(V,0)};function st(J,he){N=te(function(){J(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var he=3;break;default:he=b}var ve=b;b=he;try{return J()}finally{b=ve}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ve=b;b=J;try{return he()}finally{b=ve}},n.unstable_scheduleCallback=function(J,he,ve){var ze=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ze+ve:ze):ve=ze,J){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ve+O,J={id:_++,callback:he,priorityLevel:J,startTime:ve,expirationTime:O,sortIndex:-1},ve>ze?(J.sortIndex=ve,e(g,J),t(m)===null&&J===t(g)&&(z?(W(N),N=-1):z=!0,st(ie,ve-ze))):(J.sortIndex=O,e(m,J),U||R||(U=!0,de||(de=!0,B()))),J},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(J){var he=b;return function(){var ve=b;b=he;try{return J.apply(this,arguments)}finally{b=ve}}}})(sg)),sg}var JT;function wx(){return JT||(JT=1,ig.exports=bx()),ig.exports}var ag={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function Ax(){if(ZT)return tn;ZT=1;var n=py();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,tn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},tn.flushSync=function(m){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=_,i.d.f()}},tn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},tn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},tn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,v=d(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:R}):_==="script"&&i.d.X(m,{crossOrigin:v,integrity:b,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},tn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},tn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,v=d(_,g.crossOrigin);i.d.L(m,_,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},tn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},tn.requestFormReset=function(m){i.d.r(m)},tn.unstable_batchedUpdates=function(m,g){return m(g)},tn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.1.1",tn}var e0;function Sx(){if(e0)return ag.exports;e0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ag.exports=Ax(),ag.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function Ix(){if(t0)return Fu;t0=1;var n=wx(),e=py(),t=Sx();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),r;if(p===u)return d(f),s;p=p.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=p;else{for(var T=!1,w=f.child;w;){if(w===o){T=!0,o=f,u=p;break}if(w===u){T=!0,u=f,o=p;break}w=w.sibling}if(!T){for(w=p.child;w;){if(w===o){T=!0,o=p,u=f;break}if(w===u){T=!0,u=p,o=f;break}w=w.sibling}if(!T)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),$=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function mt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case U:return"Fragment";case L:return"Profiler";case z:return"StrictMode";case ie:return"Suspense";case de:return"SuspenseList";case x:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case $:return(r.displayName||"Context")+".Provider";case W:return(r._context.displayName||"Context")+".Consumer";case re:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return s=r.displayName||null,s!==null?s:mt(r.type)||"Memo";case I:s=r._payload,r=r._init;try{return mt(r(s))}catch{}}return null}var st=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},ze=[],O=-1;function se(r){return{current:r}}function fe(r){0>O||(r.current=ze[O],ze[O]=null,O--)}function ce(r,s){O++,ze[O]=r.current,r.current=s}var _e=se(null),ke=se(null),we=se(null),Ht=se(null);function Xe(r,s){switch(ce(we,s),ce(ke,r),ce(_e,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?TT(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=TT(s),r=bT(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}fe(_e),ce(_e,r)}function nr(){fe(_e),fe(ke),fe(we)}function Ml(r){r.memoizedState!==null&&ce(Ht,r);var s=_e.current,o=bT(s,r.type);s!==o&&(ce(ke,r),ce(_e,o))}function Za(r){ke.current===r&&(fe(_e),fe(ke)),Ht.current===r&&(fe(Ht),ku._currentValue=ve)}var eo=Object.prototype.hasOwnProperty,ks=n.unstable_scheduleCallback,to=n.unstable_cancelCallback,nm=n.unstable_shouldYield,kl=n.unstable_requestPaint,gn=n.unstable_now,$c=n.unstable_getCurrentPriorityLevel,Ot=n.unstable_ImmediatePriority,Ut=n.unstable_UserBlockingPriority,Kr=n.unstable_NormalPriority,rm=n.unstable_LowPriority,Ll=n.unstable_IdlePriority,im=n.log,Ls=n.unstable_setDisableYieldValue,Ri=null,Jt=null;function Ln(r){if(typeof im=="function"&&Ls(r),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Ri,r)}catch{}}var ln=Math.clz32?Math.clz32:Qc,sm=Math.log,Yc=Math.LN2;function Qc(r){return r>>>=0,r===0?32:31-(sm(r)/Yc|0)|0}var br=256,xi=4194304;function rr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Un(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,p=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var w=u&134217727;return w!==0?(u=w&~p,u!==0?f=rr(u):(T&=w,T!==0?f=rr(T):o||(o=w&~r,o!==0&&(f=rr(o))))):(w=u&~p,w!==0?f=rr(w):T!==0?f=rr(T):o||(o=u&~r,o!==0&&(f=rr(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Ci(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function no(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ul(){var r=br;return br<<=1,(br&4194048)===0&&(br=256),r}function Di(){var r=xi;return xi<<=1,(xi&62914560)===0&&(xi=4194304),r}function ro(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Et(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Xc(r,s,o,u,f,p){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var w=r.entanglements,C=r.expirationTimes,G=r.hiddenUpdates;for(o=T&~o;0<o;){var Z=31-ln(o),ne=1<<Z;w[Z]=0,C[Z]=-1;var K=G[Z];if(K!==null)for(G[Z]=null,Z=0;Z<K.length;Z++){var Y=K[Z];Y!==null&&(Y.lane&=-536870913)}o&=~ne}u!==0&&Ni(r,u,0),p!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=p&~(T&~s))}function Ni(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-ln(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function Oi(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-ln(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function Bl(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function jl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function $r(){var r=he.p;return r!==0?r:(r=window.event,r===void 0?32:zT(r.type))}function am(r,s){var o=he.p;try{return he.p=r,s()}finally{he.p=o}}var wr=Math.random().toString(36).slice(2),Tt="__reactFiber$"+wr,Gt="__reactProps$"+wr,Yr="__reactContainer$"+wr,Us="__reactEvents$"+wr,Bs="__reactListeners$"+wr,om="__reactHandles$"+wr,ir="__reactResources$"+wr,Vi="__reactMarker$"+wr;function io(r){delete r[Tt],delete r[Gt],delete r[Us],delete r[Bs],delete r[om]}function Ar(r){var s=r[Tt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Yr]||o[Tt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=IT(r);r!==null;){if(o=r[Tt])return o;r=IT(r)}return s}r=o,o=r.parentNode}return null}function Sr(r){if(r=r[Tt]||r[Yr]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Pi(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Mi(r){var s=r[ir];return s||(s=r[ir]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function bt(r){r[Vi]=!0}var Wc=new Set,js={};function Ir(r,s){Rr(r,s),Rr(r+"Capture",s)}function Rr(r,s){for(js[r]=s,r=0;r<s.length;r++)Wc.add(s[r])}var zs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xr={},so={};function lm(r){return eo.call(so,r)?!0:eo.call(xr,r)?!1:zs.test(r)?so[r]=!0:(xr[r]=!0,!1)}function Fs(r,s,o){if(lm(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function qs(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Bn(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Hs,ao;function Qr(r){if(Hs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Hs=s&&s[1]||"",ao=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hs+r+ao}var oo=!1;function lo(r,s){if(!r||oo)return"";oo=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Y){var K=Y}Reflect.construct(r,[],ne)}else{try{ne.call()}catch(Y){K=Y}r.call(ne.prototype)}}else{try{throw Error()}catch(Y){K=Y}(ne=r())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Y){if(Y&&K&&typeof Y.stack=="string")return[Y.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),T=p[0],w=p[1];if(T&&w){var C=T.split(`
`),G=w.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===G.length)for(u=C.length-1,f=G.length-1;1<=u&&0<=f&&C[u]!==G[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==G[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==G[f]){var Z=`
`+C[u].replace(" at new "," at ");return r.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",r.displayName)),Z}while(1<=u&&0<=f);break}}}finally{oo=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Qr(o):""}function um(r){switch(r.tag){case 26:case 27:case 5:return Qr(r.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 15:return lo(r.type,!1);case 11:return lo(r.type.render,!1);case 1:return lo(r.type,!0);case 31:return Qr("Activity");default:return""}}function sr(r){try{var s="";do s+=um(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function ht(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ki(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Gs(r){var s=ki(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(T){u=""+T,p.call(this,T)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Li(r){r._valueTracker||(r._valueTracker=Gs(r))}function We(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=ki(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Xr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ks=/[\n"\\]/g;function Bt(r){return r.replace(Ks,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function zl(r,s,o,u,f,p,T,w){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),s!=null?T==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+ht(s)):r.value!==""+ht(s)&&(r.value=""+ht(s)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),s!=null?ql(r,T,ht(s)):o!=null?ql(r,T,ht(o)):u!=null&&r.removeAttribute("value"),f==null&&p!=null&&(r.defaultChecked=!!p),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+ht(w):r.removeAttribute("name")}function Fl(r,s,o,u,f,p,T,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+ht(o):"",s=s!=null?""+ht(s):o,w||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=w?r.checked:!!u,r.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T)}function ql(r,s,o){s==="number"&&Xr(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ui(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+ht(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Jc(r,s,o){if(s!=null&&(s=""+ht(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+ht(o):""}function Zc(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(st(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=ht(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function jn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Wr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hl(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||Wr.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Gl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Hl(r,f,u)}else for(var p in s)s.hasOwnProperty(p)&&Hl(r,p,s[p])}function uo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),th=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ar(r){return th.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Kl=null;function $l(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Bi=null,un=null;function nh(r){var s=Sr(r);if(s&&(r=s.stateNode)){var o=r[Gt]||null;e:switch(r=s.stateNode,s.type){case"input":if(zl(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[Gt]||null;if(!f)throw Error(i(90));zl(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&We(u)}break e;case"textarea":Jc(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ui(r,!!o.multiple,s,!1)}}}var $s=!1;function Ys(r,s,o){if($s)return r(s,o);$s=!0;try{var u=r(s);return u}finally{if($s=!1,(Bi!==null||un!==null)&&(Gh(),Bi&&(s=Bi,r=un,un=Bi=null,nh(s),r)))for(s=0;s<r.length;s++)nh(r[s])}}function ji(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Gt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jr=!1;if(cn)try{var zi={};Object.defineProperty(zi,"passive",{get:function(){Jr=!0}}),window.addEventListener("test",zi,zi),window.removeEventListener("test",zi,zi)}catch{Jr=!1}var zn=null,nt=null,co=null;function rh(){if(co)return co;var r,s=nt,o=s.length,u,f="value"in zn?zn.value:zn.textContent,p=f.length;for(r=0;r<o&&s[r]===f[r];r++);var T=o-r;for(u=1;u<=T&&s[o-u]===f[p-u];u++);return co=f.slice(r,1<u?1-u:void 0)}function Qs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Xs(){return!0}function Yl(){return!1}function Vt(r){function s(o,u,f,p,T){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(o=r[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Xs:Yl,this.isPropagationStopped=Yl,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),s}var Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=Vt(Zt),Js=_({},Zt,{view:0,detail:0}),Zs=Vt(Js),ho,ea,Cr,ta=_({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:po,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Cr&&(Cr&&r.type==="mousemove"?(ho=r.screenX-Cr.screenX,ea=r.screenY-Cr.screenY):ea=ho=0,Cr=r),ho)},movementY:function(r){return"movementY"in r?r.movementY:ea}}),na=Vt(ta),cm=_({},ta,{dataTransfer:0}),ih=Vt(cm),ra=_({},Js,{relatedTarget:0}),fo=Vt(ra),sh=_({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ql=Vt(sh),Xl=_({},Zt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ah=Vt(Xl),mo=_({},Zt,{data:0}),Wl=Vt(mo),oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=lh[r])?!!s[r]:!1}function po(){return uh}var ch=_({},Js,{key:function(r){if(r.key){var s=oh[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Qs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Zr[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:po,charCode:function(r){return r.type==="keypress"?Qs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Qs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),go=Vt(ch),hn=_({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jl=Vt(hn),hh=_({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:po}),Fi=Vt(hh),h=_({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0}),y=Vt(h),E=_({},ta,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Vt(E),q=_({},Zt,{newState:0,oldState:0}),Q=Vt(q),le=[9,13,27,32],xe=cn&&"CompositionEvent"in window,it=null;cn&&"documentMode"in document&&(it=document.documentMode);var Ge=cn&&"TextEvent"in window&&!it,wt=cn&&(!xe||it&&8<it&&11>=it),wn=" ",Dr=!1;function or(r,s){switch(r){case"keyup":return le.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lr(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ur=!1;function Zl(r,s){switch(r){case"compositionend":return lr(s);case"keypress":return s.which!==32?null:(Dr=!0,wn);case"textInput":return r=s.data,r===wn&&Dr?null:r;default:return null}}function KR(r,s){if(ur)return r==="compositionend"||!xe&&or(r,s)?(r=rh(),co=nt=zn=null,ur=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return wt&&s.locale!=="ko"?null:s.data;default:return null}}var $R={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M_(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!$R[r.type]:s==="textarea"}function k_(r,s,o,u){Bi?un?un.push(u):un=[u]:Bi=u,s=Wh(s,"onChange"),0<s.length&&(o=new Ws("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var eu=null,tu=null;function YR(r){gT(r,0)}function fh(r){var s=Pi(r);if(We(s))return r}function L_(r,s){if(r==="change")return s}var U_=!1;if(cn){var hm;if(cn){var fm="oninput"in document;if(!fm){var B_=document.createElement("div");B_.setAttribute("oninput","return;"),fm=typeof B_.oninput=="function"}hm=fm}else hm=!1;U_=hm&&(!document.documentMode||9<document.documentMode)}function j_(){eu&&(eu.detachEvent("onpropertychange",z_),tu=eu=null)}function z_(r){if(r.propertyName==="value"&&fh(tu)){var s=[];k_(s,tu,r,$l(r)),Ys(YR,s)}}function QR(r,s,o){r==="focusin"?(j_(),eu=s,tu=o,eu.attachEvent("onpropertychange",z_)):r==="focusout"&&j_()}function XR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fh(tu)}function WR(r,s){if(r==="click")return fh(s)}function JR(r,s){if(r==="input"||r==="change")return fh(s)}function ZR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var An=typeof Object.is=="function"?Object.is:ZR;function nu(r,s){if(An(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!eo.call(s,f)||!An(r[f],s[f]))return!1}return!0}function F_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function q_(r,s){var o=F_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=F_(o)}}function H_(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?H_(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function G_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Xr(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Xr(r.document)}return s}function dm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var e1=cn&&"documentMode"in document&&11>=document.documentMode,yo=null,mm=null,ru=null,pm=!1;function K_(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;pm||yo==null||yo!==Xr(u)||(u=yo,"selectionStart"in u&&dm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ru&&nu(ru,u)||(ru=u,u=Wh(mm,"onSelect"),0<u.length&&(s=new Ws("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=yo)))}function ia(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var _o={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},gm={},$_={};cn&&($_=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function sa(r){if(gm[r])return gm[r];if(!_o[r])return r;var s=_o[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in $_)return gm[r]=s[o];return r}var Y_=sa("animationend"),Q_=sa("animationiteration"),X_=sa("animationstart"),t1=sa("transitionrun"),n1=sa("transitionstart"),r1=sa("transitioncancel"),W_=sa("transitionend"),J_=new Map,ym="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ym.push("scrollEnd");function cr(r,s){J_.set(r,s),Ir(s,[r])}var Z_=new WeakMap;function Fn(r,s){if(typeof r=="object"&&r!==null){var o=Z_.get(r);return o!==void 0?o:(s={value:r,source:s,stack:sr(s)},Z_.set(r,s),s)}return{value:r,source:s,stack:sr(s)}}var qn=[],vo=0,_m=0;function dh(){for(var r=vo,s=_m=vo=0;s<r;){var o=qn[s];qn[s++]=null;var u=qn[s];qn[s++]=null;var f=qn[s];qn[s++]=null;var p=qn[s];if(qn[s++]=null,u!==null&&f!==null){var T=u.pending;T===null?f.next=f:(f.next=T.next,T.next=f),u.pending=f}p!==0&&ev(o,f,p)}}function mh(r,s,o,u){qn[vo++]=r,qn[vo++]=s,qn[vo++]=o,qn[vo++]=u,_m|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function vm(r,s,o,u){return mh(r,s,o,u),ph(r)}function Eo(r,s){return mh(r,null,null,s),ph(r)}function ev(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(f=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,f&&s!==null&&(f=31-ln(o),r=p.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function ph(r){if(50<xu)throw xu=0,Sp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var To={};function i1(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(r,s,o,u){return new i1(r,s,o,u)}function Em(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ei(r,s){var o=r.alternate;return o===null?(o=Sn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function tv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function gh(r,s,o,u,f,p){var T=0;if(u=r,typeof r=="function")Em(r)&&(T=1);else if(typeof r=="string")T=ax(r,o,_e.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case x:return r=Sn(31,o,s,f),r.elementType=x,r.lanes=p,r;case U:return aa(o.children,f,p,s);case z:T=8,f|=24;break;case L:return r=Sn(12,o,s,f|2),r.elementType=L,r.lanes=p,r;case ie:return r=Sn(13,o,s,f),r.elementType=ie,r.lanes=p,r;case de:return r=Sn(19,o,s,f),r.elementType=de,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case te:case $:T=10;break e;case W:T=9;break e;case re:T=11;break e;case N:T=14;break e;case I:T=16,u=null;break e}T=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Sn(T,o,s,f),s.elementType=r,s.type=u,s.lanes=p,s}function aa(r,s,o,u){return r=Sn(7,r,u,s),r.lanes=o,r}function Tm(r,s,o){return r=Sn(6,r,null,s),r.lanes=o,r}function bm(r,s,o){return s=Sn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var bo=[],wo=0,yh=null,_h=0,Hn=[],Gn=0,oa=null,ti=1,ni="";function la(r,s){bo[wo++]=_h,bo[wo++]=yh,yh=r,_h=s}function nv(r,s,o){Hn[Gn++]=ti,Hn[Gn++]=ni,Hn[Gn++]=oa,oa=r;var u=ti;r=ni;var f=32-ln(u)-1;u&=~(1<<f),o+=1;var p=32-ln(s)+f;if(30<p){var T=f-f%5;p=(u&(1<<T)-1).toString(32),u>>=T,f-=T,ti=1<<32-ln(s)+f|o<<f|u,ni=p+r}else ti=1<<p|o<<f|u,ni=r}function wm(r){r.return!==null&&(la(r,1),nv(r,1,0))}function Am(r){for(;r===yh;)yh=bo[--wo],bo[wo]=null,_h=bo[--wo],bo[wo]=null;for(;r===oa;)oa=Hn[--Gn],Hn[Gn]=null,ni=Hn[--Gn],Hn[Gn]=null,ti=Hn[--Gn],Hn[Gn]=null}var fn=null,pt=null,qe=!1,ua=null,Nr=!1,Sm=Error(i(519));function ca(r){var s=Error(i(418,""));throw au(Fn(s,r)),Sm}function rv(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Tt]=r,s[Gt]=u,o){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(o=0;o<Du.length;o++)Me(Du[o],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Me("invalid",s),Fl(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Li(s);break;case"select":Me("invalid",s);break;case"textarea":Me("invalid",s),Zc(s,u.value,u.defaultValue,u.children),Li(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||ET(s.textContent,o)?(u.popover!=null&&(Me("beforetoggle",s),Me("toggle",s)),u.onScroll!=null&&Me("scroll",s),u.onScrollEnd!=null&&Me("scrollend",s),u.onClick!=null&&(s.onclick=Jh),s=!0):s=!1,s||ca(r)}function iv(r){for(fn=r.return;fn;)switch(fn.tag){case 5:case 13:Nr=!1;return;case 27:case 3:Nr=!0;return;default:fn=fn.return}}function iu(r){if(r!==fn)return!1;if(!qe)return iv(r),qe=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||zp(r.type,r.memoizedProps)),o=!o),o&&pt&&ca(r),iv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){pt=fr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}pt=null}}else s===27?(s=pt,is(r.type)?(r=Gp,Gp=null,pt=r):pt=s):pt=fn?fr(r.stateNode.nextSibling):null;return!0}function su(){pt=fn=null,qe=!1}function sv(){var r=ua;return r!==null&&(vn===null?vn=r:vn.push.apply(vn,r),ua=null),r}function au(r){ua===null?ua=[r]:ua.push(r)}var Im=se(null),ha=null,ri=null;function qi(r,s,o){ce(Im,s._currentValue),s._currentValue=o}function ii(r){r._currentValue=Im.current,fe(Im)}function Rm(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function xm(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=f;for(var C=0;C<s.length;C++)if(w.context===s[C]){p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),Rm(p.return,o,r),u||(T=null);break e}p=w.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(i(341));T.lanes|=o,p=T.alternate,p!==null&&(p.lanes|=o),Rm(T,o,r),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===r){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function ou(r,s,o,u){r=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var w=f.type;An(f.pendingProps.value,T.value)||(r!==null?r.push(w):r=[w])}}else if(f===Ht.current){if(T=f.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(ku):r=[ku])}f=f.return}r!==null&&xm(s,r,o,u),s.flags|=262144}function vh(r){for(r=r.firstContext;r!==null;){if(!An(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function fa(r){ha=r,ri=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function en(r){return av(ha,r)}function Eh(r,s){return ha===null&&fa(r),av(r,s)}function av(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ri===null){if(r===null)throw Error(i(308));ri=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ri=ri.next=s;return o}var s1=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},a1=n.unstable_scheduleCallback,o1=n.unstable_NormalPriority,Pt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cm(){return{controller:new s1,data:new Map,refCount:0}}function lu(r){r.refCount--,r.refCount===0&&a1(o1,function(){r.controller.abort()})}var uu=null,Dm=0,Ao=0,So=null;function l1(r,s){if(uu===null){var o=uu=[];Dm=0,Ao=Op(),So={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Dm++,s.then(ov,ov),s}function ov(){if(--Dm===0&&uu!==null){So!==null&&(So.status="fulfilled");var r=uu;uu=null,Ao=0,So=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function u1(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var lv=J.S;J.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&l1(r,s),lv!==null&&lv(r,s)};var da=se(null);function Nm(){var r=da.current;return r!==null?r:rt.pooledCache}function Th(r,s){s===null?ce(da,da.current):ce(da,s.pool)}function uv(){var r=Nm();return r===null?null:{parent:Pt._currentValue,pool:r}}var cu=Error(i(460)),cv=Error(i(474)),bh=Error(i(542)),Om={then:function(){}};function hv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function wh(){}function fv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(wh,wh),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,mv(r),r;default:if(typeof s.status=="string")s.then(wh,wh);else{if(r=rt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,mv(r),r}throw hu=s,cu}}var hu=null;function dv(){if(hu===null)throw Error(i(459));var r=hu;return hu=null,r}function mv(r){if(r===cu||r===bh)throw Error(i(483))}var Hi=!1;function Vm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Gi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ki(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Ke&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=ph(r),ev(r,null,o),s}return mh(r,u,s,o),ph(r)}function fu(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Oi(r,o)}}function Mm(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var km=!1;function du(){if(km){var r=So;if(r!==null)throw r}}function mu(r,s,o,u){km=!1;var f=r.updateQueue;Hi=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var C=w,G=C.next;C.next=null,T===null?p=G:T.next=G,T=C;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==T&&(w===null?Z.firstBaseUpdate=G:w.next=G,Z.lastBaseUpdate=C))}if(p!==null){var ne=f.baseState;T=0,Z=G=C=null,w=p;do{var K=w.lane&-536870913,Y=K!==w.lane;if(Y?(Be&K)===K:(u&K)===K){K!==0&&K===Ao&&(km=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ae=r,Te=w;K=s;var et=o;switch(Te.tag){case 1:if(Ae=Te.payload,typeof Ae=="function"){ne=Ae.call(et,ne,K);break e}ne=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Te.payload,K=typeof Ae=="function"?Ae.call(et,ne,K):Ae,K==null)break e;ne=_({},ne,K);break e;case 2:Hi=!0}}K=w.callback,K!==null&&(r.flags|=64,Y&&(r.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[K]:Y.push(K))}else Y={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(G=Z=Y,C=ne):Z=Z.next=Y,T|=K;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Y=w,w=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);Z===null&&(C=ne),f.baseState=C,f.firstBaseUpdate=G,f.lastBaseUpdate=Z,p===null&&(f.shared.lanes=0),es|=T,r.lanes=T,r.memoizedState=ne}}function pv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function gv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)pv(o[r],s)}var Io=se(null),Ah=se(0);function yv(r,s){r=hi,ce(Ah,r),ce(Io,s),hi=r|s.baseLanes}function Lm(){ce(Ah,hi),ce(Io,Io.current)}function Um(){hi=Ah.current,fe(Io),fe(Ah)}var $i=0,De=null,Je=null,Rt=null,Sh=!1,Ro=!1,ma=!1,Ih=0,pu=0,xo=null,c1=0;function At(){throw Error(i(321))}function Bm(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!An(r[o],s[o]))return!1;return!0}function jm(r,s,o,u,f,p){return $i=p,De=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=r===null||r.memoizedState===null?eE:tE,ma=!1,p=o(u,f),ma=!1,Ro&&(p=vv(s,o,u,f)),_v(r),p}function _v(r){J.H=Oh;var s=Je!==null&&Je.next!==null;if($i=0,Rt=Je=De=null,Sh=!1,pu=0,xo=null,s)throw Error(i(300));r===null||jt||(r=r.dependencies,r!==null&&vh(r)&&(jt=!0))}function vv(r,s,o,u){De=r;var f=0;do{if(Ro&&(xo=null),pu=0,Ro=!1,25<=f)throw Error(i(301));if(f+=1,Rt=Je=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}J.H=y1,p=s(o,u)}while(Ro);return p}function h1(){var r=J.H,s=r.useState()[0];return s=typeof s.then=="function"?gu(s):s,r=r.useState()[0],(Je!==null?Je.memoizedState:null)!==r&&(De.flags|=1024),s}function zm(){var r=Ih!==0;return Ih=0,r}function Fm(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function qm(r){if(Sh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sh=!1}$i=0,Rt=Je=De=null,Ro=!1,pu=Ih=0,xo=null}function yn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?De.memoizedState=Rt=r:Rt=Rt.next=r,Rt}function xt(){if(Je===null){var r=De.alternate;r=r!==null?r.memoizedState:null}else r=Je.next;var s=Rt===null?De.memoizedState:Rt.next;if(s!==null)Rt=s,Je=r;else{if(r===null)throw De.alternate===null?Error(i(467)):Error(i(310));Je=r,r={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Rt===null?De.memoizedState=Rt=r:Rt=Rt.next=r}return Rt}function Hm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gu(r){var s=pu;return pu+=1,xo===null&&(xo=[]),r=fv(xo,r,s),s=De,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?eE:tE),r}function Rh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return gu(r);if(r.$$typeof===$)return en(r)}throw Error(i(438,String(r)))}function Gm(r){var s=null,o=De.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Hm(),De.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=M;return s.index++,o}function si(r,s){return typeof s=="function"?s(r):s}function xh(r){var s=xt();return Km(s,Je,r)}function Km(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,p=u.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}s.baseQueue=f=p,u.pending=null}if(p=r.baseState,f===null)r.memoizedState=p;else{s=f.next;var w=T=null,C=null,G=s,Z=!1;do{var ne=G.lane&-536870913;if(ne!==G.lane?(Be&ne)===ne:($i&ne)===ne){var K=G.revertLane;if(K===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ne===Ao&&(Z=!0);else if(($i&K)===K){G=G.next,K===Ao&&(Z=!0);continue}else ne={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(w=C=ne,T=p):C=C.next=ne,De.lanes|=K,es|=K;ne=G.action,ma&&o(p,ne),p=G.hasEagerState?G.eagerState:o(p,ne)}else K={lane:ne,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(w=C=K,T=p):C=C.next=K,De.lanes|=ne,es|=ne;G=G.next}while(G!==null&&G!==s);if(C===null?T=p:C.next=w,!An(p,r.memoizedState)&&(jt=!0,Z&&(o=So,o!==null)))throw o;r.memoizedState=p,r.baseState=T,r.baseQueue=C,u.lastRenderedState=p}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function $m(r){var s=xt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var T=f=f.next;do p=r(p,T.action),T=T.next;while(T!==f);An(p,s.memoizedState)||(jt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function Ev(r,s,o){var u=De,f=xt(),p=qe;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=s();var T=!An((Je||f).memoizedState,o);T&&(f.memoizedState=o,jt=!0),f=f.queue;var w=wv.bind(null,u,f,r);if(yu(2048,8,w,[r]),f.getSnapshot!==s||T||Rt!==null&&Rt.memoizedState.tag&1){if(u.flags|=2048,Co(9,Ch(),bv.bind(null,u,f,o,s),null),rt===null)throw Error(i(349));p||($i&124)!==0||Tv(u,s,o)}return o}function Tv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=De.updateQueue,s===null?(s=Hm(),De.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function bv(r,s,o,u){s.value=o,s.getSnapshot=u,Av(s)&&Sv(r)}function wv(r,s,o){return o(function(){Av(s)&&Sv(r)})}function Av(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!An(r,o)}catch{return!0}}function Sv(r){var s=Eo(r,2);s!==null&&Dn(s,r,2)}function Ym(r){var s=yn();if(typeof r=="function"){var o=r;if(r=o(),ma){Ln(!0);try{o()}finally{Ln(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:r},s}function Iv(r,s,o,u){return r.baseState=o,Km(r,Je,typeof u=="function"?u:si)}function f1(r,s,o,u,f){if(Nh(r))throw Error(i(485));if(r=s.action,r!==null){var p={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};J.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,Rv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function Rv(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var p=J.T,T={};J.T=T;try{var w=o(f,u),C=J.S;C!==null&&C(T,w),xv(r,s,w)}catch(G){Qm(r,s,G)}finally{J.T=p}}else try{p=o(f,u),xv(r,s,p)}catch(G){Qm(r,s,G)}}function xv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Cv(r,s,u)},function(u){return Qm(r,s,u)}):Cv(r,s,o)}function Cv(r,s,o){s.status="fulfilled",s.value=o,Dv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Rv(r,o)))}function Qm(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Dv(s),s=s.next;while(s!==u)}r.action=null}function Dv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Nv(r,s){return s}function Ov(r,s){if(qe){var o=rt.formState;if(o!==null){e:{var u=De;if(qe){if(pt){t:{for(var f=pt,p=Nr;f.nodeType!==8;){if(!p){f=null;break t}if(f=fr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){pt=fr(f.nextSibling),u=f.data==="F!";break e}}ca(u)}u=!1}u&&(s=o[0])}}return o=yn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nv,lastRenderedState:s},o.queue=u,o=Wv.bind(null,De,u),u.dispatch=o,u=Ym(!1),p=ep.bind(null,De,!1,u.queue),u=yn(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=f1.bind(null,De,f,p,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function Vv(r){var s=xt();return Pv(s,Je,r)}function Pv(r,s,o){if(s=Km(r,s,Nv)[0],r=xh(si)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=gu(s)}catch(T){throw T===cu?bh:T}else u=s;s=xt();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(De.flags|=2048,Co(9,Ch(),d1.bind(null,f,o),null)),[u,p,r]}function d1(r,s){r.action=s}function Mv(r){var s=xt(),o=Je;if(o!==null)return Pv(s,o,r);xt(),s=s.memoizedState,o=xt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function Co(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=De.updateQueue,s===null&&(s=Hm(),De.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Ch(){return{destroy:void 0,resource:void 0}}function kv(){return xt().memoizedState}function Dh(r,s,o,u){var f=yn();u=u===void 0?null:u,De.flags|=r,f.memoizedState=Co(1|s,Ch(),o,u)}function yu(r,s,o,u){var f=xt();u=u===void 0?null:u;var p=f.memoizedState.inst;Je!==null&&u!==null&&Bm(u,Je.memoizedState.deps)?f.memoizedState=Co(s,p,o,u):(De.flags|=r,f.memoizedState=Co(1|s,p,o,u))}function Lv(r,s){Dh(8390656,8,r,s)}function Uv(r,s){yu(2048,8,r,s)}function Bv(r,s){return yu(4,2,r,s)}function jv(r,s){return yu(4,4,r,s)}function zv(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Fv(r,s,o){o=o!=null?o.concat([r]):null,yu(4,4,zv.bind(null,s,r),o)}function Xm(){}function qv(r,s){var o=xt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Bm(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function Hv(r,s){var o=xt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Bm(s,u[1]))return u[0];if(u=r(),ma){Ln(!0);try{r()}finally{Ln(!1)}}return o.memoizedState=[u,s],u}function Wm(r,s,o){return o===void 0||($i&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=$E(),De.lanes|=r,es|=r,o)}function Gv(r,s,o,u){return An(o,s)?o:Io.current!==null?(r=Wm(r,o,u),An(r,s)||(jt=!0),r):($i&42)===0?(jt=!0,r.memoizedState=o):(r=$E(),De.lanes|=r,es|=r,s)}function Kv(r,s,o,u,f){var p=he.p;he.p=p!==0&&8>p?p:8;var T=J.T,w={};J.T=w,ep(r,!1,s,o);try{var C=f(),G=J.S;if(G!==null&&G(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Z=u1(C,u);_u(r,s,Z,Cn(r))}else _u(r,s,u,Cn(r))}catch(ne){_u(r,s,{then:function(){},status:"rejected",reason:ne},Cn())}finally{he.p=p,J.T=T}}function m1(){}function Jm(r,s,o,u){if(r.tag!==5)throw Error(i(476));var f=$v(r).queue;Kv(r,f,s,ve,o===null?m1:function(){return Yv(r),o(u)})}function $v(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:ve},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Yv(r){var s=$v(r).next.queue;_u(r,s,{},Cn())}function Zm(){return en(ku)}function Qv(){return xt().memoizedState}function Xv(){return xt().memoizedState}function p1(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Cn();r=Gi(o);var u=Ki(s,r,o);u!==null&&(Dn(u,s,o),fu(u,s,o)),s={cache:Cm()},r.payload=s;return}s=s.return}}function g1(r,s,o){var u=Cn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Nh(r)?Jv(s,o):(o=vm(r,s,o,u),o!==null&&(Dn(o,r,u),Zv(o,s,u)))}function Wv(r,s,o){var u=Cn();_u(r,s,o,u)}function _u(r,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Nh(r))Jv(s,f);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var T=s.lastRenderedState,w=p(T,o);if(f.hasEagerState=!0,f.eagerState=w,An(w,T))return mh(r,s,f,0),rt===null&&dh(),!1}catch{}finally{}if(o=vm(r,s,f,u),o!==null)return Dn(o,r,u),Zv(o,s,u),!0}return!1}function ep(r,s,o,u){if(u={lane:2,revertLane:Op(),action:u,hasEagerState:!1,eagerState:null,next:null},Nh(r)){if(s)throw Error(i(479))}else s=vm(r,o,u,2),s!==null&&Dn(s,r,2)}function Nh(r){var s=r.alternate;return r===De||s!==null&&s===De}function Jv(r,s){Ro=Sh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Zv(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Oi(r,o)}}var Oh={readContext:en,use:Rh,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},eE={readContext:en,use:Rh,useCallback:function(r,s){return yn().memoizedState=[r,s===void 0?null:s],r},useContext:en,useEffect:Lv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Dh(4194308,4,zv.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Dh(4194308,4,r,s)},useInsertionEffect:function(r,s){Dh(4,2,r,s)},useMemo:function(r,s){var o=yn();s=s===void 0?null:s;var u=r();if(ma){Ln(!0);try{r()}finally{Ln(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=yn();if(o!==void 0){var f=o(s);if(ma){Ln(!0);try{o(s)}finally{Ln(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=g1.bind(null,De,r),[u.memoizedState,r]},useRef:function(r){var s=yn();return r={current:r},s.memoizedState=r},useState:function(r){r=Ym(r);var s=r.queue,o=Wv.bind(null,De,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Xm,useDeferredValue:function(r,s){var o=yn();return Wm(o,r,s)},useTransition:function(){var r=Ym(!1);return r=Kv.bind(null,De,r.queue,!0,!1),yn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=De,f=yn();if(qe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),rt===null)throw Error(i(349));(Be&124)!==0||Tv(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,Lv(wv.bind(null,u,p,r),[r]),u.flags|=2048,Co(9,Ch(),bv.bind(null,u,p,o,s),null),o},useId:function(){var r=yn(),s=rt.identifierPrefix;if(qe){var o=ni,u=ti;o=(u&~(1<<32-ln(u)-1)).toString(32)+o,s=""+s+"R"+o,o=Ih++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=c1++,s=""+s+"r"+o.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:Zm,useFormState:Ov,useActionState:Ov,useOptimistic:function(r){var s=yn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=ep.bind(null,De,!0,o),o.dispatch=s,[r,s]},useMemoCache:Gm,useCacheRefresh:function(){return yn().memoizedState=p1.bind(null,De)}},tE={readContext:en,use:Rh,useCallback:qv,useContext:en,useEffect:Uv,useImperativeHandle:Fv,useInsertionEffect:Bv,useLayoutEffect:jv,useMemo:Hv,useReducer:xh,useRef:kv,useState:function(){return xh(si)},useDebugValue:Xm,useDeferredValue:function(r,s){var o=xt();return Gv(o,Je.memoizedState,r,s)},useTransition:function(){var r=xh(si)[0],s=xt().memoizedState;return[typeof r=="boolean"?r:gu(r),s]},useSyncExternalStore:Ev,useId:Qv,useHostTransitionStatus:Zm,useFormState:Vv,useActionState:Vv,useOptimistic:function(r,s){var o=xt();return Iv(o,Je,r,s)},useMemoCache:Gm,useCacheRefresh:Xv},y1={readContext:en,use:Rh,useCallback:qv,useContext:en,useEffect:Uv,useImperativeHandle:Fv,useInsertionEffect:Bv,useLayoutEffect:jv,useMemo:Hv,useReducer:$m,useRef:kv,useState:function(){return $m(si)},useDebugValue:Xm,useDeferredValue:function(r,s){var o=xt();return Je===null?Wm(o,r,s):Gv(o,Je.memoizedState,r,s)},useTransition:function(){var r=$m(si)[0],s=xt().memoizedState;return[typeof r=="boolean"?r:gu(r),s]},useSyncExternalStore:Ev,useId:Qv,useHostTransitionStatus:Zm,useFormState:Mv,useActionState:Mv,useOptimistic:function(r,s){var o=xt();return Je!==null?Iv(o,Je,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Gm,useCacheRefresh:Xv},Do=null,vu=0;function Vh(r){var s=vu;return vu+=1,Do===null&&(Do=[]),fv(Do,r,s)}function Eu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Ph(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function nE(r){var s=r._init;return s(r._payload)}function rE(r){function s(k,P){if(r){var F=k.deletions;F===null?(k.deletions=[P],k.flags|=16):F.push(P)}}function o(k,P){if(!r)return null;for(;P!==null;)s(k,P),P=P.sibling;return null}function u(k){for(var P=new Map;k!==null;)k.key!==null?P.set(k.key,k):P.set(k.index,k),k=k.sibling;return P}function f(k,P){return k=ei(k,P),k.index=0,k.sibling=null,k}function p(k,P,F){return k.index=F,r?(F=k.alternate,F!==null?(F=F.index,F<P?(k.flags|=67108866,P):F):(k.flags|=67108866,P)):(k.flags|=1048576,P)}function T(k){return r&&k.alternate===null&&(k.flags|=67108866),k}function w(k,P,F,ee){return P===null||P.tag!==6?(P=Tm(F,k.mode,ee),P.return=k,P):(P=f(P,F),P.return=k,P)}function C(k,P,F,ee){var me=F.type;return me===U?Z(k,P,F.props.children,ee,F.key):P!==null&&(P.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===I&&nE(me)===P.type)?(P=f(P,F.props),Eu(P,F),P.return=k,P):(P=gh(F.type,F.key,F.props,null,k.mode,ee),Eu(P,F),P.return=k,P)}function G(k,P,F,ee){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=bm(F,k.mode,ee),P.return=k,P):(P=f(P,F.children||[]),P.return=k,P)}function Z(k,P,F,ee,me){return P===null||P.tag!==7?(P=aa(F,k.mode,ee,me),P.return=k,P):(P=f(P,F),P.return=k,P)}function ne(k,P,F){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Tm(""+P,k.mode,F),P.return=k,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case b:return F=gh(P.type,P.key,P.props,null,k.mode,F),Eu(F,P),F.return=k,F;case R:return P=bm(P,k.mode,F),P.return=k,P;case I:var ee=P._init;return P=ee(P._payload),ne(k,P,F)}if(st(P)||B(P))return P=aa(P,k.mode,F,null),P.return=k,P;if(typeof P.then=="function")return ne(k,Vh(P),F);if(P.$$typeof===$)return ne(k,Eh(k,P),F);Ph(k,P)}return null}function K(k,P,F,ee){var me=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return me!==null?null:w(k,P,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return F.key===me?C(k,P,F,ee):null;case R:return F.key===me?G(k,P,F,ee):null;case I:return me=F._init,F=me(F._payload),K(k,P,F,ee)}if(st(F)||B(F))return me!==null?null:Z(k,P,F,ee,null);if(typeof F.then=="function")return K(k,P,Vh(F),ee);if(F.$$typeof===$)return K(k,P,Eh(k,F),ee);Ph(k,F)}return null}function Y(k,P,F,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return k=k.get(F)||null,w(P,k,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return k=k.get(ee.key===null?F:ee.key)||null,C(P,k,ee,me);case R:return k=k.get(ee.key===null?F:ee.key)||null,G(P,k,ee,me);case I:var Oe=ee._init;return ee=Oe(ee._payload),Y(k,P,F,ee,me)}if(st(ee)||B(ee))return k=k.get(F)||null,Z(P,k,ee,me,null);if(typeof ee.then=="function")return Y(k,P,F,Vh(ee),me);if(ee.$$typeof===$)return Y(k,P,F,Eh(P,ee),me);Ph(P,ee)}return null}function Ae(k,P,F,ee){for(var me=null,Oe=null,ye=P,be=P=0,Ft=null;ye!==null&&be<F.length;be++){ye.index>be?(Ft=ye,ye=null):Ft=ye.sibling;var Fe=K(k,ye,F[be],ee);if(Fe===null){ye===null&&(ye=Ft);break}r&&ye&&Fe.alternate===null&&s(k,ye),P=p(Fe,P,be),Oe===null?me=Fe:Oe.sibling=Fe,Oe=Fe,ye=Ft}if(be===F.length)return o(k,ye),qe&&la(k,be),me;if(ye===null){for(;be<F.length;be++)ye=ne(k,F[be],ee),ye!==null&&(P=p(ye,P,be),Oe===null?me=ye:Oe.sibling=ye,Oe=ye);return qe&&la(k,be),me}for(ye=u(ye);be<F.length;be++)Ft=Y(ye,k,be,F[be],ee),Ft!==null&&(r&&Ft.alternate!==null&&ye.delete(Ft.key===null?be:Ft.key),P=p(Ft,P,be),Oe===null?me=Ft:Oe.sibling=Ft,Oe=Ft);return r&&ye.forEach(function(us){return s(k,us)}),qe&&la(k,be),me}function Te(k,P,F,ee){if(F==null)throw Error(i(151));for(var me=null,Oe=null,ye=P,be=P=0,Ft=null,Fe=F.next();ye!==null&&!Fe.done;be++,Fe=F.next()){ye.index>be?(Ft=ye,ye=null):Ft=ye.sibling;var us=K(k,ye,Fe.value,ee);if(us===null){ye===null&&(ye=Ft);break}r&&ye&&us.alternate===null&&s(k,ye),P=p(us,P,be),Oe===null?me=us:Oe.sibling=us,Oe=us,ye=Ft}if(Fe.done)return o(k,ye),qe&&la(k,be),me;if(ye===null){for(;!Fe.done;be++,Fe=F.next())Fe=ne(k,Fe.value,ee),Fe!==null&&(P=p(Fe,P,be),Oe===null?me=Fe:Oe.sibling=Fe,Oe=Fe);return qe&&la(k,be),me}for(ye=u(ye);!Fe.done;be++,Fe=F.next())Fe=Y(ye,k,be,Fe.value,ee),Fe!==null&&(r&&Fe.alternate!==null&&ye.delete(Fe.key===null?be:Fe.key),P=p(Fe,P,be),Oe===null?me=Fe:Oe.sibling=Fe,Oe=Fe);return r&&ye.forEach(function(_x){return s(k,_x)}),qe&&la(k,be),me}function et(k,P,F,ee){if(typeof F=="object"&&F!==null&&F.type===U&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case b:e:{for(var me=F.key;P!==null;){if(P.key===me){if(me=F.type,me===U){if(P.tag===7){o(k,P.sibling),ee=f(P,F.props.children),ee.return=k,k=ee;break e}}else if(P.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===I&&nE(me)===P.type){o(k,P.sibling),ee=f(P,F.props),Eu(ee,F),ee.return=k,k=ee;break e}o(k,P);break}else s(k,P);P=P.sibling}F.type===U?(ee=aa(F.props.children,k.mode,ee,F.key),ee.return=k,k=ee):(ee=gh(F.type,F.key,F.props,null,k.mode,ee),Eu(ee,F),ee.return=k,k=ee)}return T(k);case R:e:{for(me=F.key;P!==null;){if(P.key===me)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){o(k,P.sibling),ee=f(P,F.children||[]),ee.return=k,k=ee;break e}else{o(k,P);break}else s(k,P);P=P.sibling}ee=bm(F,k.mode,ee),ee.return=k,k=ee}return T(k);case I:return me=F._init,F=me(F._payload),et(k,P,F,ee)}if(st(F))return Ae(k,P,F,ee);if(B(F)){if(me=B(F),typeof me!="function")throw Error(i(150));return F=me.call(F),Te(k,P,F,ee)}if(typeof F.then=="function")return et(k,P,Vh(F),ee);if(F.$$typeof===$)return et(k,P,Eh(k,F),ee);Ph(k,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,P!==null&&P.tag===6?(o(k,P.sibling),ee=f(P,F),ee.return=k,k=ee):(o(k,P),ee=Tm(F,k.mode,ee),ee.return=k,k=ee),T(k)):o(k,P)}return function(k,P,F,ee){try{vu=0;var me=et(k,P,F,ee);return Do=null,me}catch(ye){if(ye===cu||ye===bh)throw ye;var Oe=Sn(29,ye,null,k.mode);return Oe.lanes=ee,Oe.return=k,Oe}finally{}}}var No=rE(!0),iE=rE(!1),Kn=se(null),Or=null;function Yi(r){var s=r.alternate;ce(Mt,Mt.current&1),ce(Kn,r),Or===null&&(s===null||Io.current!==null||s.memoizedState!==null)&&(Or=r)}function sE(r){if(r.tag===22){if(ce(Mt,Mt.current),ce(Kn,r),Or===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Or=r)}}else Qi()}function Qi(){ce(Mt,Mt.current),ce(Kn,Kn.current)}function ai(r){fe(Kn),Or===r&&(Or=null),fe(Mt)}var Mt=se(0);function Mh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Hp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function tp(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var np={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Cn(),f=Gi(u);f.payload=s,o!=null&&(f.callback=o),s=Ki(r,f,u),s!==null&&(Dn(s,r,u),fu(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Cn(),f=Gi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Ki(r,f,u),s!==null&&(Dn(s,r,u),fu(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Cn(),u=Gi(o);u.tag=2,s!=null&&(u.callback=s),s=Ki(r,u,o),s!==null&&(Dn(s,r,o),fu(s,r,o))}};function aE(r,s,o,u,f,p,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,T):s.prototype&&s.prototype.isPureReactComponent?!nu(o,u)||!nu(f,p):!0}function oE(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&np.enqueueReplaceState(s,s.state,null)}function pa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=_({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var kh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function lE(r){kh(r)}function uE(r){console.error(r)}function cE(r){kh(r)}function Lh(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function hE(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function rp(r,s,o){return o=Gi(o),o.tag=3,o.payload={element:null},o.callback=function(){Lh(r,s)},o}function fE(r){return r=Gi(r),r.tag=3,r}function dE(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;r.payload=function(){return f(p)},r.callback=function(){hE(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){hE(s,o,u),typeof f!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function _1(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&ou(s,o,f,!0),o=Kn.current,o!==null){switch(o.tag){case 13:return Or===null?Rp():o.alternate===null&&gt===0&&(gt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Om?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Cp(r,u,f)),!1;case 22:return o.flags|=65536,u===Om?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Cp(r,u,f)),!1}throw Error(i(435,o.tag))}return Cp(r,u,f),Rp(),!1}if(qe)return s=Kn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Sm&&(r=Error(i(422),{cause:u}),au(Fn(r,o)))):(u!==Sm&&(s=Error(i(423),{cause:u}),au(Fn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Fn(u,o),f=rp(r.stateNode,u,f),Mm(r,f),gt!==4&&(gt=2)),!1;var p=Error(i(520),{cause:u});if(p=Fn(p,o),Ru===null?Ru=[p]:Ru.push(p),gt!==4&&(gt=2),s===null)return!0;u=Fn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=rp(o.stateNode,u,r),Mm(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ts===null||!ts.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=fE(f),dE(f,r,o,u),Mm(o,f),!1}o=o.return}while(o!==null);return!1}var mE=Error(i(461)),jt=!1;function Kt(r,s,o,u){s.child=r===null?iE(s,null,o,u):No(s,r.child,o,u)}function pE(r,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var T={};for(var w in u)w!=="ref"&&(T[w]=u[w])}else T=u;return fa(s),u=jm(r,s,o,T,p,f),w=zm(),r!==null&&!jt?(Fm(r,s,f),oi(r,s,f)):(qe&&w&&wm(s),s.flags|=1,Kt(r,s,u,f),s.child)}function gE(r,s,o,u,f){if(r===null){var p=o.type;return typeof p=="function"&&!Em(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,yE(r,s,p,u,f)):(r=gh(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!hp(r,f)){var T=p.memoizedProps;if(o=o.compare,o=o!==null?o:nu,o(T,u)&&r.ref===s.ref)return oi(r,s,f)}return s.flags|=1,r=ei(p,u),r.ref=s.ref,r.return=s,s.child=r}function yE(r,s,o,u,f){if(r!==null){var p=r.memoizedProps;if(nu(p,u)&&r.ref===s.ref)if(jt=!1,s.pendingProps=u=p,hp(r,f))(r.flags&131072)!==0&&(jt=!0);else return s.lanes=r.lanes,oi(r,s,f)}return ip(r,s,o,u,f)}function _E(r,s,o){var u=s.pendingProps,f=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,r!==null){for(f=s.child=r.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return vE(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Th(s,p!==null?p.cachePool:null),p!==null?yv(s,p):Lm(),sE(s);else return s.lanes=s.childLanes=536870912,vE(r,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Th(s,p.cachePool),yv(s,p),Qi(),s.memoizedState=null):(r!==null&&Th(s,null),Lm(),Qi());return Kt(r,s,f,o),s.child}function vE(r,s,o,u){var f=Nm();return f=f===null?null:{parent:Pt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&Th(s,null),Lm(),sE(s),r!==null&&ou(r,s,u,!0),null}function Uh(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function ip(r,s,o,u,f){return fa(s),o=jm(r,s,o,u,void 0,f),u=zm(),r!==null&&!jt?(Fm(r,s,f),oi(r,s,f)):(qe&&u&&wm(s),s.flags|=1,Kt(r,s,o,f),s.child)}function EE(r,s,o,u,f,p){return fa(s),s.updateQueue=null,o=vv(s,u,o,f),_v(r),u=zm(),r!==null&&!jt?(Fm(r,s,p),oi(r,s,p)):(qe&&u&&wm(s),s.flags|=1,Kt(r,s,o,p),s.child)}function TE(r,s,o,u,f){if(fa(s),s.stateNode===null){var p=To,T=o.contextType;typeof T=="object"&&T!==null&&(p=en(T)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=np,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Vm(s),T=o.contextType,p.context=typeof T=="object"&&T!==null?en(T):To,p.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(tp(s,o,T,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&np.enqueueReplaceState(p,p.state,null),mu(s,u,p,f),du(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){p=s.stateNode;var w=s.memoizedProps,C=pa(o,w);p.props=C;var G=p.context,Z=o.contextType;T=To,typeof Z=="object"&&Z!==null&&(T=en(Z));var ne=o.getDerivedStateFromProps;Z=typeof ne=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||G!==T)&&oE(s,p,u,T),Hi=!1;var K=s.memoizedState;p.state=K,mu(s,u,p,f),du(),G=s.memoizedState,w||K!==G||Hi?(typeof ne=="function"&&(tp(s,o,ne,u),G=s.memoizedState),(C=Hi||aE(s,o,C,u,K,G,T))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=G),p.props=u,p.state=G,p.context=T,u=C):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Pm(r,s),T=s.memoizedProps,Z=pa(o,T),p.props=Z,ne=s.pendingProps,K=p.context,G=o.contextType,C=To,typeof G=="object"&&G!==null&&(C=en(G)),w=o.getDerivedStateFromProps,(G=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==ne||K!==C)&&oE(s,p,u,C),Hi=!1,K=s.memoizedState,p.state=K,mu(s,u,p,f),du();var Y=s.memoizedState;T!==ne||K!==Y||Hi||r!==null&&r.dependencies!==null&&vh(r.dependencies)?(typeof w=="function"&&(tp(s,o,w,u),Y=s.memoizedState),(Z=Hi||aE(s,o,Z,u,K,Y,C)||r!==null&&r.dependencies!==null&&vh(r.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Y,C),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Y,C)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Y),p.props=u,p.state=Y,p.context=C,u=Z):(typeof p.componentDidUpdate!="function"||T===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),u=!1)}return p=u,Uh(r,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&u?(s.child=No(s,r.child,null,f),s.child=No(s,null,o,f)):Kt(r,s,o,f),s.memoizedState=p.state,r=s.child):r=oi(r,s,f),r}function bE(r,s,o,u){return su(),s.flags|=256,Kt(r,s,o,u),s.child}var sp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ap(r){return{baseLanes:r,cachePool:uv()}}function op(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=$n),r}function wE(r,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,T;if((T=p)||(T=r!==null&&r.memoizedState===null?!1:(Mt.current&2)!==0),T&&(f=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,r===null){if(qe){if(f?Yi(s):Qi(),qe){var w=pt,C;if(C=w){e:{for(C=w,w=Nr;C.nodeType!==8;){if(!w){w=null;break e}if(C=fr(C.nextSibling),C===null){w=null;break e}}w=C}w!==null?(s.memoizedState={dehydrated:w,treeContext:oa!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},C=Sn(18,null,null,0),C.stateNode=w,C.return=s,s.child=C,fn=s,pt=null,C=!0):C=!1}C||ca(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Hp(w)?s.lanes=32:s.lanes=536870912,null;ai(s)}return w=u.children,u=u.fallback,f?(Qi(),f=s.mode,w=Bh({mode:"hidden",children:w},f),u=aa(u,f,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,f=s.child,f.memoizedState=ap(o),f.childLanes=op(r,T,o),s.memoizedState=sp,u):(Yi(s),lp(s,w))}if(C=r.memoizedState,C!==null&&(w=C.dehydrated,w!==null)){if(p)s.flags&256?(Yi(s),s.flags&=-257,s=up(r,s,o)):s.memoizedState!==null?(Qi(),s.child=r.child,s.flags|=128,s=null):(Qi(),f=u.fallback,w=s.mode,u=Bh({mode:"visible",children:u.children},w),f=aa(f,w,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,No(s,r.child,null,o),u=s.child,u.memoizedState=ap(o),u.childLanes=op(r,T,o),s.memoizedState=sp,s=f);else if(Yi(s),Hp(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var G=T.dgst;T=G,u=Error(i(419)),u.stack="",u.digest=T,au({value:u,source:null,stack:null}),s=up(r,s,o)}else if(jt||ou(r,s,o,!1),T=(o&r.childLanes)!==0,jt||T){if(T=rt,T!==null&&(u=o&-o,u=(u&42)!==0?1:Bl(u),u=(u&(T.suspendedLanes|o))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,Eo(r,u),Dn(T,r,u),mE;w.data==="$?"||Rp(),s=up(r,s,o)}else w.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=C.treeContext,pt=fr(w.nextSibling),fn=s,qe=!0,ua=null,Nr=!1,r!==null&&(Hn[Gn++]=ti,Hn[Gn++]=ni,Hn[Gn++]=oa,ti=r.id,ni=r.overflow,oa=s),s=lp(s,u.children),s.flags|=4096);return s}return f?(Qi(),f=u.fallback,w=s.mode,C=r.child,G=C.sibling,u=ei(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,G!==null?f=ei(G,f):(f=aa(f,w,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,w=r.child.memoizedState,w===null?w=ap(o):(C=w.cachePool,C!==null?(G=Pt._currentValue,C=C.parent!==G?{parent:G,pool:G}:C):C=uv(),w={baseLanes:w.baseLanes|o,cachePool:C}),f.memoizedState=w,f.childLanes=op(r,T,o),s.memoizedState=sp,u):(Yi(s),o=r.child,r=o.sibling,o=ei(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(T=s.deletions,T===null?(s.deletions=[r],s.flags|=16):T.push(r)),s.child=o,s.memoizedState=null,o)}function lp(r,s){return s=Bh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Bh(r,s){return r=Sn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function up(r,s,o){return No(s,r.child,null,o),r=lp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function AE(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Rm(r.return,s,o)}function cp(r,s,o,u,f){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function SE(r,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(Kt(r,s,u.children,o),u=Mt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&AE(r,o,s);else if(r.tag===19)AE(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(ce(Mt,u),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&Mh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),cp(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Mh(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}cp(s,!0,o,null,p);break;case"together":cp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function oi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),es|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(ou(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=ei(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=ei(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function hp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&vh(r)))}function v1(r,s,o){switch(s.tag){case 3:Xe(s,s.stateNode.containerInfo),qi(s,Pt,r.memoizedState.cache),su();break;case 27:case 5:Ml(s);break;case 4:Xe(s,s.stateNode.containerInfo);break;case 10:qi(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Yi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?wE(r,s,o):(Yi(s),r=oi(r,s,o),r!==null?r.sibling:null);Yi(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(ou(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return SE(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Mt,Mt.current),u)break;return null;case 22:case 23:return s.lanes=0,_E(r,s,o);case 24:qi(s,Pt,r.memoizedState.cache)}return oi(r,s,o)}function IE(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)jt=!0;else{if(!hp(r,o)&&(s.flags&128)===0)return jt=!1,v1(r,s,o);jt=(r.flags&131072)!==0}else jt=!1,qe&&(s.flags&1048576)!==0&&nv(s,_h,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Em(u)?(r=pa(u,r),s.tag=1,s=TE(null,s,u,r,o)):(s.tag=0,s=ip(null,s,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===re){s.tag=11,s=pE(null,s,u,r,o);break e}else if(f===N){s.tag=14,s=gE(null,s,u,r,o);break e}}throw s=mt(u)||u,Error(i(306,s,""))}}return s;case 0:return ip(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=pa(u,s.pendingProps),TE(r,s,u,f,o);case 3:e:{if(Xe(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Pm(r,s),mu(s,u,null,o);var T=s.memoizedState;if(u=T.cache,qi(s,Pt,u),u!==p.cache&&xm(s,[Pt],o,!0),du(),u=T.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=bE(r,s,u,o);break e}else if(u!==f){f=Fn(Error(i(424)),s),au(f),s=bE(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(pt=fr(r.firstChild),fn=s,qe=!0,ua=null,Nr=!0,o=iE(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(su(),u===f){s=oi(r,s,o);break e}Kt(r,s,u,o)}s=s.child}return s;case 26:return Uh(r,s),r===null?(o=DT(s.type,null,s.pendingProps,null))?s.memoizedState=o:qe||(o=s.type,r=s.pendingProps,u=Zh(we.current).createElement(o),u[Tt]=s,u[Gt]=r,Yt(u,o,r),bt(u),s.stateNode=u):s.memoizedState=DT(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ml(s),r===null&&qe&&(u=s.stateNode=RT(s.type,s.pendingProps,we.current),fn=s,Nr=!0,f=pt,is(s.type)?(Gp=f,pt=fr(u.firstChild)):pt=f),Kt(r,s,s.pendingProps.children,o),Uh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&qe&&((f=u=pt)&&(u=$1(u,s.type,s.pendingProps,Nr),u!==null?(s.stateNode=u,fn=s,pt=fr(u.firstChild),Nr=!1,f=!0):f=!1),f||ca(s)),Ml(s),f=s.type,p=s.pendingProps,T=r!==null?r.memoizedProps:null,u=p.children,zp(f,p)?u=null:T!==null&&zp(f,T)&&(s.flags|=32),s.memoizedState!==null&&(f=jm(r,s,h1,null,null,o),ku._currentValue=f),Uh(r,s),Kt(r,s,u,o),s.child;case 6:return r===null&&qe&&((r=o=pt)&&(o=Y1(o,s.pendingProps,Nr),o!==null?(s.stateNode=o,fn=s,pt=null,r=!0):r=!1),r||ca(s)),null;case 13:return wE(r,s,o);case 4:return Xe(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=No(s,null,u,o):Kt(r,s,u,o),s.child;case 11:return pE(r,s,s.type,s.pendingProps,o);case 7:return Kt(r,s,s.pendingProps,o),s.child;case 8:return Kt(r,s,s.pendingProps.children,o),s.child;case 12:return Kt(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,qi(s,s.type,u.value),Kt(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,fa(s),f=en(f),u=u(f),s.flags|=1,Kt(r,s,u,o),s.child;case 14:return gE(r,s,s.type,s.pendingProps,o);case 15:return yE(r,s,s.type,s.pendingProps,o);case 19:return SE(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Bh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ei(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return _E(r,s,o);case 24:return fa(s),u=en(Pt),r===null?(f=Nm(),f===null&&(f=rt,p=Cm(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Vm(s),qi(s,Pt,f)):((r.lanes&o)!==0&&(Pm(r,s),mu(s,null,null,o),du()),f=r.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),qi(s,Pt,u)):(u=p.cache,qi(s,Pt,u),u!==f.cache&&xm(s,[Pt],o,!0))),Kt(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function li(r){r.flags|=4}function RE(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!MT(s)){if(s=Kn.current,s!==null&&((Be&4194048)===Be?Or!==null:(Be&62914560)!==Be&&(Be&536870912)===0||s!==Or))throw hu=Om,cv;r.flags|=8192}}function jh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Di():536870912,r.lanes|=s,Mo|=s)}function Tu(r,s){if(!qe)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function E1(r,s,o){var u=s.pendingProps;switch(Am(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ii(Pt),nr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(iu(s)?li(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sv())),ft(s),null;case 26:return o=s.memoizedState,r===null?(li(s),o!==null?(ft(s),RE(s,o)):(ft(s),s.flags&=-16777217)):o?o!==r.memoizedState?(li(s),ft(s),RE(s,o)):(ft(s),s.flags&=-16777217):(r.memoizedProps!==u&&li(s),ft(s),s.flags&=-16777217),null;case 27:Za(s),o=we.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&li(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}r=_e.current,iu(s)?rv(s):(r=RT(f,u,o),s.stateNode=r,li(s))}return ft(s),null;case 5:if(Za(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&li(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}if(r=_e.current,iu(s))rv(s);else{switch(f=Zh(we.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Tt]=s,r[Gt]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(Yt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&li(s)}}return ft(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&li(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=we.current,iu(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=fn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Tt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||ET(r.nodeValue,o)),r||ca(s)}else r=Zh(r).createTextNode(u),r[Tt]=s,s.stateNode=r}return ft(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=iu(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Tt]=s}else su(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),f=!1}else f=sv(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ai(s),s):(ai(s),null)}if(ai(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),jh(s,s.updateQueue),ft(s),null;case 4:return nr(),r===null&&kp(s.stateNode.containerInfo),ft(s),null;case 10:return ii(s.type),ft(s),null;case 19:if(fe(Mt),f=s.memoizedState,f===null)return ft(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)Tu(f,!1);else{if(gt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=Mh(r),p!==null){for(s.flags|=128,Tu(f,!1),r=p.updateQueue,s.updateQueue=r,jh(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)tv(o,r),o=o.sibling;return ce(Mt,Mt.current&1|2),s.child}r=r.sibling}f.tail!==null&&gn()>qh&&(s.flags|=128,u=!0,Tu(f,!1),s.lanes=4194304)}else{if(!u)if(r=Mh(p),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,jh(s,r),Tu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!qe)return ft(s),null}else 2*gn()-f.renderingStartTime>qh&&o!==536870912&&(s.flags|=128,u=!0,Tu(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(r=f.last,r!==null?r.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=gn(),s.sibling=null,r=Mt.current,ce(Mt,u?r&1|2:r&1),s):(ft(s),null);case 22:case 23:return ai(s),Um(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),o=s.updateQueue,o!==null&&jh(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&fe(da),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ii(Pt),ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function T1(r,s){switch(Am(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ii(Pt),nr(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Za(s),null;case 13:if(ai(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));su()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return fe(Mt),null;case 4:return nr(),null;case 10:return ii(s.type),null;case 22:case 23:return ai(s),Um(),r!==null&&fe(da),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ii(Pt),null;case 25:return null;default:return null}}function xE(r,s){switch(Am(s),s.tag){case 3:ii(Pt),nr();break;case 26:case 27:case 5:Za(s);break;case 4:nr();break;case 13:ai(s);break;case 19:fe(Mt);break;case 10:ii(s.type);break;case 22:case 23:ai(s),Um(),r!==null&&fe(da);break;case 24:ii(Pt)}}function bu(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var p=o.create,T=o.inst;u=p(),T.destroy=u}o=o.next}while(o!==f)}}catch(w){tt(s,s.return,w)}}function Xi(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&r)===r){var T=u.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,f=s;var C=o,G=w;try{G()}catch(Z){tt(f,C,Z)}}}u=u.next}while(u!==p)}}catch(Z){tt(s,s.return,Z)}}function CE(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{gv(s,o)}catch(u){tt(r,r.return,u)}}}function DE(r,s,o){o.props=pa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){tt(r,s,u)}}function wu(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){tt(r,s,f)}}function Vr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){tt(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){tt(r,s,f)}else o.current=null}function NE(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){tt(r,r.return,f)}}function fp(r,s,o){try{var u=r.stateNode;F1(u,r.type,o,s),u[Gt]=s}catch(f){tt(r,r.return,f)}}function OE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&is(r.type)||r.tag===4}function dp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||OE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&is(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function mp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Jh));else if(u!==4&&(u===27&&is(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(mp(r,s,o),r=r.sibling;r!==null;)mp(r,s,o),r=r.sibling}function zh(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&is(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(zh(r,s,o),r=r.sibling;r!==null;)zh(r,s,o),r=r.sibling}function VE(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Yt(s,u,o),s[Tt]=r,s[Gt]=o}catch(p){tt(r,r.return,p)}}var ui=!1,St=!1,pp=!1,PE=typeof WeakSet=="function"?WeakSet:Set,zt=null;function b1(r,s){if(r=r.containerInfo,Bp=af,r=G_(r),dm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var T=0,w=-1,C=-1,G=0,Z=0,ne=r,K=null;t:for(;;){for(var Y;ne!==o||f!==0&&ne.nodeType!==3||(w=T+f),ne!==p||u!==0&&ne.nodeType!==3||(C=T+u),ne.nodeType===3&&(T+=ne.nodeValue.length),(Y=ne.firstChild)!==null;)K=ne,ne=Y;for(;;){if(ne===r)break t;if(K===o&&++G===f&&(w=T),K===p&&++Z===u&&(C=T),(Y=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=Y}o=w===-1||C===-1?null:{start:w,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(jp={focusedElem:r,selectionRange:o},af=!1,zt=s;zt!==null;)if(s=zt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,zt=r;else for(;zt!==null;){switch(s=zt,p=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ae=pa(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Ae,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Te){tt(o,o.return,Te)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)qp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":qp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,zt=r;break}zt=s.return}}function ME(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Wi(r,o),u&4&&bu(5,o);break;case 1:if(Wi(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(T){tt(o,o.return,T)}else{var f=pa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(T){tt(o,o.return,T)}}u&64&&CE(o),u&512&&wu(o,o.return);break;case 3:if(Wi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{gv(r,s)}catch(T){tt(o,o.return,T)}}break;case 27:s===null&&u&4&&VE(o);case 26:case 5:Wi(r,o),s===null&&u&4&&NE(o),u&512&&wu(o,o.return);break;case 12:Wi(r,o);break;case 13:Wi(r,o),u&4&&UE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=N1.bind(null,o),Q1(r,o))));break;case 22:if(u=o.memoizedState!==null||ui,!u){s=s!==null&&s.memoizedState!==null||St,f=ui;var p=St;ui=u,(St=s)&&!p?Ji(r,o,(o.subtreeFlags&8772)!==0):Wi(r,o),ui=f,St=p}break;case 30:break;default:Wi(r,o)}}function kE(r){var s=r.alternate;s!==null&&(r.alternate=null,kE(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&io(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var at=null,_n=!1;function ci(r,s,o){for(o=o.child;o!==null;)LE(r,s,o),o=o.sibling}function LE(r,s,o){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Ri,o)}catch{}switch(o.tag){case 26:St||Vr(o,s),ci(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:St||Vr(o,s);var u=at,f=_n;is(o.type)&&(at=o.stateNode,_n=!1),ci(r,s,o),Ou(o.stateNode),at=u,_n=f;break;case 5:St||Vr(o,s);case 6:if(u=at,f=_n,at=null,ci(r,s,o),at=u,_n=f,at!==null)if(_n)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(o.stateNode)}catch(p){tt(o,s,p)}else try{at.removeChild(o.stateNode)}catch(p){tt(o,s,p)}break;case 18:at!==null&&(_n?(r=at,ST(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),ju(r)):ST(at,o.stateNode));break;case 4:u=at,f=_n,at=o.stateNode.containerInfo,_n=!0,ci(r,s,o),at=u,_n=f;break;case 0:case 11:case 14:case 15:St||Xi(2,o,s),St||Xi(4,o,s),ci(r,s,o);break;case 1:St||(Vr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&DE(o,s,u)),ci(r,s,o);break;case 21:ci(r,s,o);break;case 22:St=(u=St)||o.memoizedState!==null,ci(r,s,o),St=u;break;default:ci(r,s,o)}}function UE(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ju(r)}catch(o){tt(s,s.return,o)}}function w1(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new PE),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new PE),s;default:throw Error(i(435,r.tag))}}function gp(r,s){var o=w1(r);s.forEach(function(u){var f=O1.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function In(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=r,T=s,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(is(w.type)){at=w.stateNode,_n=!1;break e}break;case 5:at=w.stateNode,_n=!1;break e;case 3:case 4:at=w.stateNode.containerInfo,_n=!0;break e}w=w.return}if(at===null)throw Error(i(160));LE(p,T,f),at=null,_n=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)BE(s,r),s=s.sibling}var hr=null;function BE(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:In(s,r),Rn(r),u&4&&(Xi(3,r,r.return),bu(3,r),Xi(5,r,r.return));break;case 1:In(s,r),Rn(r),u&512&&(St||o===null||Vr(o,o.return)),u&64&&ui&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=hr;if(In(s,r),Rn(r),u&512&&(St||o===null||Vr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Vi]||p[Tt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),Yt(p,u,o),p[Tt]=r,bt(p),u=p;break e;case"link":var T=VT("link","href",f).get(u+(o.href||""));if(T){for(var w=0;w<T.length;w++)if(p=T[w],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(w,1);break t}}p=f.createElement(u),Yt(p,u,o),f.head.appendChild(p);break;case"meta":if(T=VT("meta","content",f).get(u+(o.content||""))){for(w=0;w<T.length;w++)if(p=T[w],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(w,1);break t}}p=f.createElement(u),Yt(p,u,o),f.head.appendChild(p);break;default:throw Error(i(468,u))}p[Tt]=r,bt(p),u=p}r.stateNode=u}else PT(f,r.type,r.stateNode);else r.stateNode=OT(f,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?PT(f,r.type,r.stateNode):OT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&fp(r,r.memoizedProps,o.memoizedProps)}break;case 27:In(s,r),Rn(r),u&512&&(St||o===null||Vr(o,o.return)),o!==null&&u&4&&fp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(In(s,r),Rn(r),u&512&&(St||o===null||Vr(o,o.return)),r.flags&32){f=r.stateNode;try{jn(f,"")}catch(Y){tt(r,r.return,Y)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,fp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(pp=!0);break;case 6:if(In(s,r),Rn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Y){tt(r,r.return,Y)}}break;case 3:if(nf=null,f=hr,hr=ef(s.containerInfo),In(s,r),hr=f,Rn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ju(s.containerInfo)}catch(Y){tt(r,r.return,Y)}pp&&(pp=!1,jE(r));break;case 4:u=hr,hr=ef(r.stateNode.containerInfo),In(s,r),Rn(r),hr=u;break;case 12:In(s,r),Rn(r);break;case 13:In(s,r),Rn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(bp=gn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,gp(r,u)));break;case 22:f=r.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,G=ui,Z=St;if(ui=G||f,St=Z||C,In(s,r),St=Z,ui=G,Rn(r),u&8192)e:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||C||ui||St||ga(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(p=C.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=C.stateNode;var ne=C.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Y){tt(C,C.return,Y)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(Y){tt(C,C.return,Y)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,gp(r,o))));break;case 19:In(s,r),Rn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,gp(r,u)));break;case 30:break;case 21:break;default:In(s,r),Rn(r)}}function Rn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(OE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,p=dp(r);zh(r,p,f);break;case 5:var T=o.stateNode;o.flags&32&&(jn(T,""),o.flags&=-33);var w=dp(r);zh(r,w,T);break;case 3:case 4:var C=o.stateNode.containerInfo,G=dp(r);mp(r,G,C);break;default:throw Error(i(161))}}catch(Z){tt(r,r.return,Z)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function jE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;jE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Wi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ME(r,s.alternate,s),s=s.sibling}function ga(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Xi(4,s,s.return),ga(s);break;case 1:Vr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&DE(s,s.return,o),ga(s);break;case 27:Ou(s.stateNode);case 26:case 5:Vr(s,s.return),ga(s);break;case 22:s.memoizedState===null&&ga(s);break;case 30:ga(s);break;default:ga(s)}r=r.sibling}}function Ji(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,p=s,T=p.flags;switch(p.tag){case 0:case 11:case 15:Ji(f,p,o),bu(4,p);break;case 1:if(Ji(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){tt(u,u.return,G)}if(u=p,f=u.updateQueue,f!==null){var w=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)pv(C[f],w)}catch(G){tt(u,u.return,G)}}o&&T&64&&CE(p),wu(p,p.return);break;case 27:VE(p);case 26:case 5:Ji(f,p,o),o&&u===null&&T&4&&NE(p),wu(p,p.return);break;case 12:Ji(f,p,o);break;case 13:Ji(f,p,o),o&&T&4&&UE(f,p);break;case 22:p.memoizedState===null&&Ji(f,p,o),wu(p,p.return);break;case 30:break;default:Ji(f,p,o)}s=s.sibling}}function yp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&lu(o))}function _p(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&lu(r))}function Pr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zE(r,s,o,u),s=s.sibling}function zE(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Pr(r,s,o,u),f&2048&&bu(9,s);break;case 1:Pr(r,s,o,u);break;case 3:Pr(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&lu(r)));break;case 12:if(f&2048){Pr(r,s,o,u),r=s.stateNode;try{var p=s.memoizedProps,T=p.id,w=p.onPostCommit;typeof w=="function"&&w(T,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(C){tt(s,s.return,C)}}else Pr(r,s,o,u);break;case 13:Pr(r,s,o,u);break;case 23:break;case 22:p=s.stateNode,T=s.alternate,s.memoizedState!==null?p._visibility&2?Pr(r,s,o,u):Au(r,s):p._visibility&2?Pr(r,s,o,u):(p._visibility|=2,Oo(r,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&yp(T,s);break;case 24:Pr(r,s,o,u),f&2048&&_p(s.alternate,s);break;default:Pr(r,s,o,u)}}function Oo(r,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=r,T=s,w=o,C=u,G=T.flags;switch(T.tag){case 0:case 11:case 15:Oo(p,T,w,C,f),bu(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&2?Oo(p,T,w,C,f):Au(p,T):(Z._visibility|=2,Oo(p,T,w,C,f)),f&&G&2048&&yp(T.alternate,T);break;case 24:Oo(p,T,w,C,f),f&&G&2048&&_p(T.alternate,T);break;default:Oo(p,T,w,C,f)}s=s.sibling}}function Au(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:Au(o,u),f&2048&&yp(u.alternate,u);break;case 24:Au(o,u),f&2048&&_p(u.alternate,u);break;default:Au(o,u)}s=s.sibling}}var Su=8192;function Vo(r){if(r.subtreeFlags&Su)for(r=r.child;r!==null;)FE(r),r=r.sibling}function FE(r){switch(r.tag){case 26:Vo(r),r.flags&Su&&r.memoizedState!==null&&lx(hr,r.memoizedState,r.memoizedProps);break;case 5:Vo(r);break;case 3:case 4:var s=hr;hr=ef(r.stateNode.containerInfo),Vo(r),hr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Su,Su=16777216,Vo(r),Su=s):Vo(r));break;default:Vo(r)}}function qE(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Iu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];zt=u,GE(u,r)}qE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)HE(r),r=r.sibling}function HE(r){switch(r.tag){case 0:case 11:case 15:Iu(r),r.flags&2048&&Xi(9,r,r.return);break;case 3:Iu(r);break;case 12:Iu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Fh(r)):Iu(r);break;default:Iu(r)}}function Fh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];zt=u,GE(u,r)}qE(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Xi(8,s,s.return),Fh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Fh(s));break;default:Fh(s)}r=r.sibling}}function GE(r,s){for(;zt!==null;){var o=zt;switch(o.tag){case 0:case 11:case 15:Xi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:lu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,zt=u;else e:for(o=r;zt!==null;){u=zt;var f=u.sibling,p=u.return;if(kE(u),u===o){zt=null;break e}if(f!==null){f.return=p,zt=f;break e}zt=p}}}var A1={getCacheForType:function(r){var s=en(Pt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},S1=typeof WeakMap=="function"?WeakMap:Map,Ke=0,rt=null,Pe=null,Be=0,$e=0,xn=null,Zi=!1,Po=!1,vp=!1,hi=0,gt=0,es=0,ya=0,Ep=0,$n=0,Mo=0,Ru=null,vn=null,Tp=!1,bp=0,qh=1/0,Hh=null,ts=null,$t=0,ns=null,ko=null,Lo=0,wp=0,Ap=null,KE=null,xu=0,Sp=null;function Cn(){if((Ke&2)!==0&&Be!==0)return Be&-Be;if(J.T!==null){var r=Ao;return r!==0?r:Op()}return $r()}function $E(){$n===0&&($n=(Be&536870912)===0||qe?Ul():536870912);var r=Kn.current;return r!==null&&(r.flags|=32),$n}function Dn(r,s,o){(r===rt&&($e===2||$e===9)||r.cancelPendingCommit!==null)&&(Uo(r,0),rs(r,Be,$n,!1)),Et(r,o),((Ke&2)===0||r!==rt)&&(r===rt&&((Ke&2)===0&&(ya|=o),gt===4&&rs(r,Be,$n,!1)),Mr(r))}function YE(r,s,o){if((Ke&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Ci(r,s),f=u?x1(r,s):xp(r,s,!0),p=u;do{if(f===0){Po&&!u&&rs(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!I1(o)){f=xp(r,s,!1),p=!1;continue}if(f===2){if(p=s,r.errorRecoveryDisabledLanes&p)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var w=r;f=Ru;var C=w.current.memoizedState.isDehydrated;if(C&&(Uo(w,T).flags|=256),T=xp(w,T,!1),T!==2){if(vp&&!C){w.errorRecoveryDisabledLanes|=p,ya|=p,f=4;break e}p=vn,vn=f,p!==null&&(vn===null?vn=p:vn.push.apply(vn,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){Uo(r,0),rs(r,s,0,!0);break}e:{switch(u=r,p=f,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:rs(u,s,$n,!Zi);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=bp+300-gn(),10<f)){if(rs(u,s,$n,!Zi),Un(u,0,!0)!==0)break e;u.timeoutHandle=wT(QE.bind(null,u,o,vn,Hh,Tp,s,$n,ya,Mo,Zi,p,2,-0,0),f);break e}QE(u,o,vn,Hh,Tp,s,$n,ya,Mo,Zi,p,0,-0,0)}}break}while(!0);Mr(r)}function QE(r,s,o,u,f,p,T,w,C,G,Z,ne,K,Y){if(r.timeoutHandle=-1,ne=s.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Mu={stylesheets:null,count:0,unsuspend:ox},FE(s),ne=ux(),ne!==null)){r.cancelPendingCommit=ne(nT.bind(null,r,s,p,o,u,f,T,w,C,Z,1,K,Y)),rs(r,p,T,!G);return}nT(r,s,p,o,u,f,T,w,C)}function I1(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!An(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rs(r,s,o,u){s&=~Ep,s&=~ya,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var p=31-ln(f),T=1<<p;u[p]=-1,f&=~T}o!==0&&Ni(r,o,s)}function Gh(){return(Ke&6)===0?(Cu(0),!1):!0}function Ip(){if(Pe!==null){if($e===0)var r=Pe.return;else r=Pe,ri=ha=null,qm(r),Do=null,vu=0,r=Pe;for(;r!==null;)xE(r.alternate,r),r=r.return;Pe=null}}function Uo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,H1(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Ip(),rt=r,Pe=o=ei(r.current,null),Be=s,$e=0,xn=null,Zi=!1,Po=Ci(r,s),vp=!1,Mo=$n=Ep=ya=es=gt=0,vn=Ru=null,Tp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-ln(u),p=1<<f;s|=r[f],u&=~p}return hi=s,dh(),o}function XE(r,s){De=null,J.H=Oh,s===cu||s===bh?(s=dv(),$e=3):s===cv?(s=dv(),$e=4):$e=s===mE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xn=s,Pe===null&&(gt=1,Lh(r,Fn(s,r.current)))}function WE(){var r=J.H;return J.H=Oh,r===null?Oh:r}function JE(){var r=J.A;return J.A=A1,r}function Rp(){gt=4,Zi||(Be&4194048)!==Be&&Kn.current!==null||(Po=!0),(es&134217727)===0&&(ya&134217727)===0||rt===null||rs(rt,Be,$n,!1)}function xp(r,s,o){var u=Ke;Ke|=2;var f=WE(),p=JE();(rt!==r||Be!==s)&&(Hh=null,Uo(r,s)),s=!1;var T=gt;e:do try{if($e!==0&&Pe!==null){var w=Pe,C=xn;switch($e){case 8:Ip(),T=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(s=!0);var G=$e;if($e=0,xn=null,Bo(r,w,C,G),o&&Po){T=0;break e}break;default:G=$e,$e=0,xn=null,Bo(r,w,C,G)}}R1(),T=gt;break}catch(Z){XE(r,Z)}while(!0);return s&&r.shellSuspendCounter++,ri=ha=null,Ke=u,J.H=f,J.A=p,Pe===null&&(rt=null,Be=0,dh()),T}function R1(){for(;Pe!==null;)ZE(Pe)}function x1(r,s){var o=Ke;Ke|=2;var u=WE(),f=JE();rt!==r||Be!==s?(Hh=null,qh=gn()+500,Uo(r,s)):Po=Ci(r,s);e:do try{if($e!==0&&Pe!==null){s=Pe;var p=xn;t:switch($e){case 1:$e=0,xn=null,Bo(r,s,p,1);break;case 2:case 9:if(hv(p)){$e=0,xn=null,eT(s);break}s=function(){$e!==2&&$e!==9||rt!==r||($e=7),Mr(r)},p.then(s,s);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:hv(p)?($e=0,xn=null,eT(s)):($e=0,xn=null,Bo(r,s,p,7));break;case 5:var T=null;switch(Pe.tag){case 26:T=Pe.memoizedState;case 5:case 27:var w=Pe;if(!T||MT(T)){$e=0,xn=null;var C=w.sibling;if(C!==null)Pe=C;else{var G=w.return;G!==null?(Pe=G,Kh(G)):Pe=null}break t}}$e=0,xn=null,Bo(r,s,p,5);break;case 6:$e=0,xn=null,Bo(r,s,p,6);break;case 8:Ip(),gt=6;break e;default:throw Error(i(462))}}C1();break}catch(Z){XE(r,Z)}while(!0);return ri=ha=null,J.H=u,J.A=f,Ke=o,Pe!==null?0:(rt=null,Be=0,dh(),gt)}function C1(){for(;Pe!==null&&!nm();)ZE(Pe)}function ZE(r){var s=IE(r.alternate,r,hi);r.memoizedProps=r.pendingProps,s===null?Kh(r):Pe=s}function eT(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=EE(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=EE(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:qm(s);default:xE(o,s),s=Pe=tv(s,hi),s=IE(o,s,hi)}r.memoizedProps=r.pendingProps,s===null?Kh(r):Pe=s}function Bo(r,s,o,u){ri=ha=null,qm(s),Do=null,vu=0;var f=s.return;try{if(_1(r,f,s,o,Be)){gt=1,Lh(r,Fn(o,r.current)),Pe=null;return}}catch(p){if(f!==null)throw Pe=f,p;gt=1,Lh(r,Fn(o,r.current)),Pe=null;return}s.flags&32768?(qe||u===1?r=!0:Po||(Be&536870912)!==0?r=!1:(Zi=r=!0,(u===2||u===9||u===3||u===6)&&(u=Kn.current,u!==null&&u.tag===13&&(u.flags|=16384))),tT(s,r)):Kh(s)}function Kh(r){var s=r;do{if((s.flags&32768)!==0){tT(s,Zi);return}r=s.return;var o=E1(s.alternate,s,hi);if(o!==null){Pe=o;return}if(s=s.sibling,s!==null){Pe=s;return}Pe=s=r}while(s!==null);gt===0&&(gt=5)}function tT(r,s){do{var o=T1(r.alternate,r);if(o!==null){o.flags&=32767,Pe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Pe=r;return}Pe=r=o}while(r!==null);gt=6,Pe=null}function nT(r,s,o,u,f,p,T,w,C){r.cancelPendingCommit=null;do $h();while($t!==0);if((Ke&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=_m,Xc(r,o,p,T,w,C),r===rt&&(Pe=rt=null,Be=0),ko=s,ns=r,Lo=o,wp=p,Ap=f,KE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,V1(Kr,function(){return oT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=he.p,he.p=2,T=Ke,Ke|=4;try{b1(r,s,o)}finally{Ke=T,he.p=f,J.T=u}}$t=1,rT(),iT(),sT()}}function rT(){if($t===1){$t=0;var r=ns,s=ko,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=he.p;he.p=2;var f=Ke;Ke|=4;try{BE(s,r);var p=jp,T=G_(r.containerInfo),w=p.focusedElem,C=p.selectionRange;if(T!==w&&w&&w.ownerDocument&&H_(w.ownerDocument.documentElement,w)){if(C!==null&&dm(w)){var G=C.start,Z=C.end;if(Z===void 0&&(Z=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(Z,w.value.length);else{var ne=w.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var Y=K.getSelection(),Ae=w.textContent.length,Te=Math.min(C.start,Ae),et=C.end===void 0?Te:Math.min(C.end,Ae);!Y.extend&&Te>et&&(T=et,et=Te,Te=T);var k=q_(w,Te),P=q_(w,et);if(k&&P&&(Y.rangeCount!==1||Y.anchorNode!==k.node||Y.anchorOffset!==k.offset||Y.focusNode!==P.node||Y.focusOffset!==P.offset)){var F=ne.createRange();F.setStart(k.node,k.offset),Y.removeAllRanges(),Te>et?(Y.addRange(F),Y.extend(P.node,P.offset)):(F.setEnd(P.node,P.offset),Y.addRange(F))}}}}for(ne=[],Y=w;Y=Y.parentNode;)Y.nodeType===1&&ne.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var ee=ne[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}af=!!Bp,jp=Bp=null}finally{Ke=f,he.p=u,J.T=o}}r.current=s,$t=2}}function iT(){if($t===2){$t=0;var r=ns,s=ko,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=he.p;he.p=2;var f=Ke;Ke|=4;try{ME(r,s.alternate,s)}finally{Ke=f,he.p=u,J.T=o}}$t=3}}function sT(){if($t===4||$t===3){$t=0,kl();var r=ns,s=ko,o=Lo,u=KE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?$t=5:($t=0,ko=ns=null,aT(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(ts=null),jl(o),s=s.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Ri,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=J.T,f=he.p,he.p=2,J.T=null;try{for(var p=r.onRecoverableError,T=0;T<u.length;T++){var w=u[T];p(w.value,{componentStack:w.stack})}}finally{J.T=s,he.p=f}}(Lo&3)!==0&&$h(),Mr(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===Sp?xu++:(xu=0,Sp=r):xu=0,Cu(0)}}function aT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,lu(s)))}function $h(r){return rT(),iT(),sT(),oT()}function oT(){if($t!==5)return!1;var r=ns,s=wp;wp=0;var o=jl(Lo),u=J.T,f=he.p;try{he.p=32>o?32:o,J.T=null,o=Ap,Ap=null;var p=ns,T=Lo;if($t=0,ko=ns=null,Lo=0,(Ke&6)!==0)throw Error(i(331));var w=Ke;if(Ke|=4,HE(p.current),zE(p,p.current,T,o),Ke=w,Cu(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Ri,p)}catch{}return!0}finally{he.p=f,J.T=u,aT(r,s)}}function lT(r,s,o){s=Fn(o,s),s=rp(r.stateNode,s,2),r=Ki(r,s,2),r!==null&&(Et(r,2),Mr(r))}function tt(r,s,o){if(r.tag===3)lT(r,r,o);else for(;s!==null;){if(s.tag===3){lT(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ts===null||!ts.has(u))){r=Fn(o,r),o=fE(2),u=Ki(s,o,2),u!==null&&(dE(o,u,s,r),Et(u,2),Mr(u));break}}s=s.return}}function Cp(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new S1;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(vp=!0,f.add(o),r=D1.bind(null,r,s,o),s.then(r,r))}function D1(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,rt===r&&(Be&o)===o&&(gt===4||gt===3&&(Be&62914560)===Be&&300>gn()-bp?(Ke&2)===0&&Uo(r,0):Ep|=o,Mo===Be&&(Mo=0)),Mr(r)}function uT(r,s){s===0&&(s=Di()),r=Eo(r,s),r!==null&&(Et(r,s),Mr(r))}function N1(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),uT(r,o)}function O1(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),uT(r,o)}function V1(r,s){return ks(r,s)}var Yh=null,jo=null,Dp=!1,Qh=!1,Np=!1,_a=0;function Mr(r){r!==jo&&r.next===null&&(jo===null?Yh=jo=r:jo=jo.next=r),Qh=!0,Dp||(Dp=!0,M1())}function Cu(r,s){if(!Np&&Qh){Np=!0;do for(var o=!1,u=Yh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var T=u.suspendedLanes,w=u.pingedLanes;p=(1<<31-ln(42|r)+1)-1,p&=f&~(T&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,dT(u,p))}else p=Be,p=Un(u,u===rt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Ci(u,p)||(o=!0,dT(u,p));u=u.next}while(o);Np=!1}}function P1(){cT()}function cT(){Qh=Dp=!1;var r=0;_a!==0&&(q1()&&(r=_a),_a=0);for(var s=gn(),o=null,u=Yh;u!==null;){var f=u.next,p=hT(u,s);p===0?(u.next=null,o===null?Yh=f:o.next=f,f===null&&(jo=o)):(o=u,(r!==0||(p&3)!==0)&&(Qh=!0)),u=f}Cu(r)}function hT(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var T=31-ln(p),w=1<<T,C=f[T];C===-1?((w&o)===0||(w&u)!==0)&&(f[T]=no(w,s)):C<=s&&(r.expiredLanes|=w),p&=~w}if(s=rt,o=Be,o=Un(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&($e===2||$e===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&to(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Ci(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&to(u),jl(o)){case 2:case 8:o=Ut;break;case 32:o=Kr;break;case 268435456:o=Ll;break;default:o=Kr}return u=fT.bind(null,r),o=ks(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&to(u),r.callbackPriority=2,r.callbackNode=null,2}function fT(r,s){if($t!==0&&$t!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if($h()&&r.callbackNode!==o)return null;var u=Be;return u=Un(r,r===rt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(YE(r,u,s),hT(r,gn()),r.callbackNode!=null&&r.callbackNode===o?fT.bind(null,r):null)}function dT(r,s){if($h())return null;YE(r,s,!0)}function M1(){G1(function(){(Ke&6)!==0?ks(Ot,P1):cT()})}function Op(){return _a===0&&(_a=Ul()),_a}function mT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ar(""+r)}function pT(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function k1(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=mT((f[Gt]||null).action),T=u.submitter;T&&(s=(s=T[Gt]||null)?mT(s.formAction):T.getAttribute("formAction"),s!==null&&(p=s,T=null));var w=new Ws("action","action",null,u,f);r.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(_a!==0){var C=T?pT(f,T):new FormData(f);Jm(o,{pending:!0,data:C,method:f.method,action:p},null,C)}}else typeof p=="function"&&(w.preventDefault(),C=T?pT(f,T):new FormData(f),Jm(o,{pending:!0,data:C,method:f.method,action:p},p,C))},currentTarget:f}]})}}for(var Vp=0;Vp<ym.length;Vp++){var Pp=ym[Vp],L1=Pp.toLowerCase(),U1=Pp[0].toUpperCase()+Pp.slice(1);cr(L1,"on"+U1)}cr(Y_,"onAnimationEnd"),cr(Q_,"onAnimationIteration"),cr(X_,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(t1,"onTransitionRun"),cr(n1,"onTransitionStart"),cr(r1,"onTransitionCancel"),cr(W_,"onTransitionEnd"),Rr("onMouseEnter",["mouseout","mouseover"]),Rr("onMouseLeave",["mouseout","mouseover"]),Rr("onPointerEnter",["pointerout","pointerover"]),Rr("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Du));function gT(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var T=u.length-1;0<=T;T--){var w=u[T],C=w.instance,G=w.currentTarget;if(w=w.listener,C!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=G;try{p(f)}catch(Z){kh(Z)}f.currentTarget=null,p=C}else for(T=0;T<u.length;T++){if(w=u[T],C=w.instance,G=w.currentTarget,w=w.listener,C!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=G;try{p(f)}catch(Z){kh(Z)}f.currentTarget=null,p=C}}}}function Me(r,s){var o=s[Us];o===void 0&&(o=s[Us]=new Set);var u=r+"__bubble";o.has(u)||(yT(s,r,2,!1),o.add(u))}function Mp(r,s,o){var u=0;s&&(u|=4),yT(o,r,u,s)}var Xh="_reactListening"+Math.random().toString(36).slice(2);function kp(r){if(!r[Xh]){r[Xh]=!0,Wc.forEach(function(o){o!=="selectionchange"&&(B1.has(o)||Mp(o,!1,r),Mp(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Xh]||(s[Xh]=!0,Mp("selectionchange",!1,s))}}function yT(r,s,o,u){switch(zT(s)){case 2:var f=fx;break;case 8:f=dx;break;default:f=Xp}o=f.bind(null,s,o,r),f=void 0,!Jr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function Lp(r,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var w=u.stateNode.containerInfo;if(w===f)break;if(T===4)for(T=u.return;T!==null;){var C=T.tag;if((C===3||C===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;w!==null;){if(T=Ar(w),T===null)return;if(C=T.tag,C===5||C===6||C===26||C===27){u=p=T;continue e}w=w.parentNode}}u=u.return}Ys(function(){var G=p,Z=$l(o),ne=[];e:{var K=J_.get(r);if(K!==void 0){var Y=Ws,Ae=r;switch(r){case"keypress":if(Qs(o)===0)break e;case"keydown":case"keyup":Y=go;break;case"focusin":Ae="focus",Y=fo;break;case"focusout":Ae="blur",Y=fo;break;case"beforeblur":case"afterblur":Y=fo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Fi;break;case Y_:case Q_:case X_:Y=Ql;break;case W_:Y=y;break;case"scroll":case"scrollend":Y=Zs;break;case"wheel":Y=A;break;case"copy":case"cut":case"paste":Y=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Jl;break;case"toggle":case"beforetoggle":Y=Q}var Te=(s&4)!==0,et=!Te&&(r==="scroll"||r==="scrollend"),k=Te?K!==null?K+"Capture":null:K;Te=[];for(var P=G,F;P!==null;){var ee=P;if(F=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||F===null||k===null||(ee=ji(P,k),ee!=null&&Te.push(Nu(P,ee,F))),et)break;P=P.return}0<Te.length&&(K=new Y(K,Ae,null,o,Z),ne.push({event:K,listeners:Te}))}}if((s&7)===0){e:{if(K=r==="mouseover"||r==="pointerover",Y=r==="mouseout"||r==="pointerout",K&&o!==Kl&&(Ae=o.relatedTarget||o.fromElement)&&(Ar(Ae)||Ae[Yr]))break e;if((Y||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,Y?(Ae=o.relatedTarget||o.toElement,Y=G,Ae=Ae?Ar(Ae):null,Ae!==null&&(et=l(Ae),Te=Ae.tag,Ae!==et||Te!==5&&Te!==27&&Te!==6)&&(Ae=null)):(Y=null,Ae=G),Y!==Ae)){if(Te=na,ee="onMouseLeave",k="onMouseEnter",P="mouse",(r==="pointerout"||r==="pointerover")&&(Te=Jl,ee="onPointerLeave",k="onPointerEnter",P="pointer"),et=Y==null?K:Pi(Y),F=Ae==null?K:Pi(Ae),K=new Te(ee,P+"leave",Y,o,Z),K.target=et,K.relatedTarget=F,ee=null,Ar(Z)===G&&(Te=new Te(k,P+"enter",Ae,o,Z),Te.target=F,Te.relatedTarget=et,ee=Te),et=ee,Y&&Ae)t:{for(Te=Y,k=Ae,P=0,F=Te;F;F=zo(F))P++;for(F=0,ee=k;ee;ee=zo(ee))F++;for(;0<P-F;)Te=zo(Te),P--;for(;0<F-P;)k=zo(k),F--;for(;P--;){if(Te===k||k!==null&&Te===k.alternate)break t;Te=zo(Te),k=zo(k)}Te=null}else Te=null;Y!==null&&_T(ne,K,Y,Te,!1),Ae!==null&&et!==null&&_T(ne,et,Ae,Te,!0)}}e:{if(K=G?Pi(G):window,Y=K.nodeName&&K.nodeName.toLowerCase(),Y==="select"||Y==="input"&&K.type==="file")var me=L_;else if(M_(K))if(U_)me=JR;else{me=XR;var Oe=QR}else Y=K.nodeName,!Y||Y.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&uo(G.elementType)&&(me=L_):me=WR;if(me&&(me=me(r,G))){k_(ne,me,o,Z);break e}Oe&&Oe(r,K,G),r==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&ql(K,"number",K.value)}switch(Oe=G?Pi(G):window,r){case"focusin":(M_(Oe)||Oe.contentEditable==="true")&&(yo=Oe,mm=G,ru=null);break;case"focusout":ru=mm=yo=null;break;case"mousedown":pm=!0;break;case"contextmenu":case"mouseup":case"dragend":pm=!1,K_(ne,o,Z);break;case"selectionchange":if(e1)break;case"keydown":case"keyup":K_(ne,o,Z)}var ye;if(xe)e:{switch(r){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else ur?or(r,o)&&(be="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(be="onCompositionStart");be&&(wt&&o.locale!=="ko"&&(ur||be!=="onCompositionStart"?be==="onCompositionEnd"&&ur&&(ye=rh()):(zn=Z,nt="value"in zn?zn.value:zn.textContent,ur=!0)),Oe=Wh(G,be),0<Oe.length&&(be=new Wl(be,r,null,o,Z),ne.push({event:be,listeners:Oe}),ye?be.data=ye:(ye=lr(o),ye!==null&&(be.data=ye)))),(ye=Ge?Zl(r,o):KR(r,o))&&(be=Wh(G,"onBeforeInput"),0<be.length&&(Oe=new Wl("onBeforeInput","beforeinput",null,o,Z),ne.push({event:Oe,listeners:be}),Oe.data=ye)),k1(ne,r,G,o,Z)}gT(ne,s)})}function Nu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Wh(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=ji(r,o),f!=null&&u.unshift(Nu(r,f,p)),f=ji(r,s),f!=null&&u.push(Nu(r,f,p))),r.tag===3)return u;r=r.return}return[]}function zo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function _T(r,s,o,u,f){for(var p=s._reactName,T=[];o!==null&&o!==u;){var w=o,C=w.alternate,G=w.stateNode;if(w=w.tag,C!==null&&C===u)break;w!==5&&w!==26&&w!==27||G===null||(C=G,f?(G=ji(o,p),G!=null&&T.unshift(Nu(o,G,C))):f||(G=ji(o,p),G!=null&&T.push(Nu(o,G,C)))),o=o.return}T.length!==0&&r.push({event:s,listeners:T})}var j1=/\r\n?/g,z1=/\u0000|\uFFFD/g;function vT(r){return(typeof r=="string"?r:""+r).replace(j1,`
`).replace(z1,"")}function ET(r,s){return s=vT(s),vT(r)===s}function Jh(){}function Ze(r,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||jn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&jn(r,""+u);break;case"className":qs(r,"class",u);break;case"tabIndex":qs(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":qs(r,o,u);break;case"style":Gl(r,u,p);break;case"data":if(s!=="object"){qs(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=ar(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&Ze(r,s,"name",f.name,f,null),Ze(r,s,"formEncType",f.formEncType,f,null),Ze(r,s,"formMethod",f.formMethod,f,null),Ze(r,s,"formTarget",f.formTarget,f,null)):(Ze(r,s,"encType",f.encType,f,null),Ze(r,s,"method",f.method,f,null),Ze(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=ar(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Jh);break;case"onScroll":u!=null&&Me("scroll",r);break;case"onScrollEnd":u!=null&&Me("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=ar(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Me("beforetoggle",r),Me("toggle",r),Fs(r,"popover",u);break;case"xlinkActuate":Bn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Bn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Bn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Bn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Bn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Bn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Bn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Bn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Bn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Fs(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=eh.get(o)||o,Fs(r,o,u))}}function Up(r,s,o,u,f,p){switch(o){case"style":Gl(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?jn(r,u):(typeof u=="number"||typeof u=="bigint")&&jn(r,""+u);break;case"onScroll":u!=null&&Me("scroll",r);break;case"onScrollEnd":u!=null&&Me("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Jh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!js.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=r[Gt]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Fs(r,o,u)}}}function Yt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",r),Me("load",r);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var T=o[p];if(T!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ze(r,s,p,T,o,null)}}f&&Ze(r,s,"srcSet",o.srcSet,o,null),u&&Ze(r,s,"src",o.src,o,null);return;case"input":Me("invalid",r);var w=p=T=f=null,C=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":T=Z;break;case"checked":C=Z;break;case"defaultChecked":G=Z;break;case"value":p=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Ze(r,s,u,Z,o,null)}}Fl(r,p,w,C,G,T,f,!1),Li(r);return;case"select":Me("invalid",r),u=T=p=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":p=w;break;case"defaultValue":T=w;break;case"multiple":u=w;default:Ze(r,s,f,w,o,null)}s=p,o=T,r.multiple=!!u,s!=null?Ui(r,!!u,s,!1):o!=null&&Ui(r,!!u,o,!0);return;case"textarea":Me("invalid",r),p=f=u=null;for(T in o)if(o.hasOwnProperty(T)&&(w=o[T],w!=null))switch(T){case"value":u=w;break;case"defaultValue":f=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Ze(r,s,T,w,o,null)}Zc(r,u,f,p),Li(r);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ze(r,s,C,u,o,null)}return;case"dialog":Me("beforetoggle",r),Me("toggle",r),Me("cancel",r),Me("close",r);break;case"iframe":case"object":Me("load",r);break;case"video":case"audio":for(u=0;u<Du.length;u++)Me(Du[u],r);break;case"image":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"embed":case"source":case"link":Me("error",r),Me("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ze(r,s,G,u,o,null)}return;default:if(uo(s)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&Up(r,s,Z,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&Ze(r,s,w,u,o,null))}function F1(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,w=null,C=null,G=null,Z=null;for(Y in o){var ne=o[Y];if(o.hasOwnProperty(Y)&&ne!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":C=ne;default:u.hasOwnProperty(Y)||Ze(r,s,Y,null,u,ne)}}for(var K in u){var Y=u[K];if(ne=o[K],u.hasOwnProperty(K)&&(Y!=null||ne!=null))switch(K){case"type":p=Y;break;case"name":f=Y;break;case"checked":G=Y;break;case"defaultChecked":Z=Y;break;case"value":T=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:Y!==ne&&Ze(r,s,K,Y,u,ne)}}zl(r,T,w,C,G,Z,p,f);return;case"select":Y=T=w=K=null;for(p in o)if(C=o[p],o.hasOwnProperty(p)&&C!=null)switch(p){case"value":break;case"multiple":Y=C;default:u.hasOwnProperty(p)||Ze(r,s,p,null,u,C)}for(f in u)if(p=u[f],C=o[f],u.hasOwnProperty(f)&&(p!=null||C!=null))switch(f){case"value":K=p;break;case"defaultValue":w=p;break;case"multiple":T=p;default:p!==C&&Ze(r,s,f,p,u,C)}s=w,o=T,u=Y,K!=null?Ui(r,!!o,K,!1):!!u!=!!o&&(s!=null?Ui(r,!!o,s,!0):Ui(r,!!o,o?[]:"",!1));return;case"textarea":Y=K=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ze(r,s,w,null,u,f)}for(T in u)if(f=u[T],p=o[T],u.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":K=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==p&&Ze(r,s,T,f,u,p)}Jc(r,K,Y);return;case"option":for(var Ae in o)if(K=o[Ae],o.hasOwnProperty(Ae)&&K!=null&&!u.hasOwnProperty(Ae))switch(Ae){case"selected":r.selected=!1;break;default:Ze(r,s,Ae,null,u,K)}for(C in u)if(K=u[C],Y=o[C],u.hasOwnProperty(C)&&K!==Y&&(K!=null||Y!=null))switch(C){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Ze(r,s,C,K,u,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)K=o[Te],o.hasOwnProperty(Te)&&K!=null&&!u.hasOwnProperty(Te)&&Ze(r,s,Te,null,u,K);for(G in u)if(K=u[G],Y=o[G],u.hasOwnProperty(G)&&K!==Y&&(K!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:Ze(r,s,G,K,u,Y)}return;default:if(uo(s)){for(var et in o)K=o[et],o.hasOwnProperty(et)&&K!==void 0&&!u.hasOwnProperty(et)&&Up(r,s,et,void 0,u,K);for(Z in u)K=u[Z],Y=o[Z],!u.hasOwnProperty(Z)||K===Y||K===void 0&&Y===void 0||Up(r,s,Z,K,u,Y);return}}for(var k in o)K=o[k],o.hasOwnProperty(k)&&K!=null&&!u.hasOwnProperty(k)&&Ze(r,s,k,null,u,K);for(ne in u)K=u[ne],Y=o[ne],!u.hasOwnProperty(ne)||K===Y||K==null&&Y==null||Ze(r,s,ne,K,u,Y)}var Bp=null,jp=null;function Zh(r){return r.nodeType===9?r:r.ownerDocument}function TT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function zp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Fp=null;function q1(){var r=window.event;return r&&r.type==="popstate"?r===Fp?!1:(Fp=r,!0):(Fp=null,!1)}var wT=typeof setTimeout=="function"?setTimeout:void 0,H1=typeof clearTimeout=="function"?clearTimeout:void 0,AT=typeof Promise=="function"?Promise:void 0,G1=typeof queueMicrotask=="function"?queueMicrotask:typeof AT<"u"?function(r){return AT.resolve(null).then(r).catch(K1)}:wT;function K1(r){setTimeout(function(){throw r})}function is(r){return r==="head"}function ST(r,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var T=r.ownerDocument;if(o&1&&Ou(T.documentElement),o&2&&Ou(T.body),o&4)for(o=T.head,Ou(o),T=o.firstChild;T;){var w=T.nextSibling,C=T.nodeName;T[Vi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=w}}if(f===0){r.removeChild(p),ju(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);ju(s)}function qp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":qp(o),io(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function $1(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Vi])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=fr(r.nextSibling),r===null)break}return null}function Y1(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=fr(r.nextSibling),r===null))return null;return r}function Hp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function Q1(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function fr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Gp=null;function IT(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function RT(r,s,o){switch(s=Zh(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ou(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);io(r)}var Yn=new Map,xT=new Set;function ef(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var fi=he.d;he.d={f:X1,r:W1,D:J1,C:Z1,L:ex,m:tx,X:rx,S:nx,M:ix};function X1(){var r=fi.f(),s=Gh();return r||s}function W1(r){var s=Sr(r);s!==null&&s.tag===5&&s.type==="form"?Yv(s):fi.r(r)}var Fo=typeof document>"u"?null:document;function CT(r,s,o){var u=Fo;if(u&&typeof s=="string"&&s){var f=Bt(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),xT.has(f)||(xT.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Yt(s,"link",r),bt(s),u.head.appendChild(s)))}}function J1(r){fi.D(r),CT("dns-prefetch",r,null)}function Z1(r,s){fi.C(r,s),CT("preconnect",r,s)}function ex(r,s,o){fi.L(r,s,o);var u=Fo;if(u&&r&&s){var f='link[rel="preload"][as="'+Bt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Bt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Bt(o.imageSizes)+'"]')):f+='[href="'+Bt(r)+'"]';var p=f;switch(s){case"style":p=qo(r);break;case"script":p=Ho(r)}Yn.has(p)||(r=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Yn.set(p,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(Vu(p))||s==="script"&&u.querySelector(Pu(p))||(s=u.createElement("link"),Yt(s,"link",r),bt(s),u.head.appendChild(s)))}}function tx(r,s){fi.m(r,s);var o=Fo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Bt(u)+'"][href="'+Bt(r)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ho(r)}if(!Yn.has(p)&&(r=_({rel:"modulepreload",href:r},s),Yn.set(p,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Pu(p)))return}u=o.createElement("link"),Yt(u,"link",r),bt(u),o.head.appendChild(u)}}}function nx(r,s,o){fi.S(r,s,o);var u=Fo;if(u&&r){var f=Mi(u).hoistableStyles,p=qo(r);s=s||"default";var T=f.get(p);if(!T){var w={loading:0,preload:null};if(T=u.querySelector(Vu(p)))w.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Yn.get(p))&&Kp(r,o);var C=T=u.createElement("link");bt(C),Yt(C,"link",r),C._p=new Promise(function(G,Z){C.onload=G,C.onerror=Z}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,tf(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:w},f.set(p,T)}}}function rx(r,s){fi.X(r,s);var o=Fo;if(o&&r){var u=Mi(o).hoistableScripts,f=Ho(r),p=u.get(f);p||(p=o.querySelector(Pu(f)),p||(r=_({src:r,async:!0},s),(s=Yn.get(f))&&$p(r,s),p=o.createElement("script"),bt(p),Yt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function ix(r,s){fi.M(r,s);var o=Fo;if(o&&r){var u=Mi(o).hoistableScripts,f=Ho(r),p=u.get(f);p||(p=o.querySelector(Pu(f)),p||(r=_({src:r,async:!0,type:"module"},s),(s=Yn.get(f))&&$p(r,s),p=o.createElement("script"),bt(p),Yt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function DT(r,s,o,u){var f=(f=we.current)?ef(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=qo(o.href),o=Mi(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=qo(o.href);var p=Mi(f).hoistableStyles,T=p.get(r);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,T),(p=f.querySelector(Vu(r)))&&!p._p&&(T.instance=p,T.state.loading=5),Yn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Yn.set(r,o),p||sx(f,r,o,T.state))),s&&u===null)throw Error(i(528,""));return T}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ho(o),o=Mi(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function qo(r){return'href="'+Bt(r)+'"'}function Vu(r){return'link[rel="stylesheet"]['+r+"]"}function NT(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function sx(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Yt(s,"link",o),bt(s),r.head.appendChild(s))}function Ho(r){return'[src="'+Bt(r)+'"]'}function Pu(r){return"script[async]"+r}function OT(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Bt(o.href)+'"]');if(u)return s.instance=u,bt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),bt(u),Yt(u,"style",f),tf(u,o.precedence,r),s.instance=u;case"stylesheet":f=qo(o.href);var p=r.querySelector(Vu(f));if(p)return s.state.loading|=4,s.instance=p,bt(p),p;u=NT(o),(f=Yn.get(f))&&Kp(u,f),p=(r.ownerDocument||r).createElement("link"),bt(p);var T=p;return T._p=new Promise(function(w,C){T.onload=w,T.onerror=C}),Yt(p,"link",u),s.state.loading|=4,tf(p,o.precedence,r),s.instance=p;case"script":return p=Ho(o.src),(f=r.querySelector(Pu(p)))?(s.instance=f,bt(f),f):(u=o,(f=Yn.get(p))&&(u=_({},o),$p(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),bt(f),Yt(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,tf(u,o.precedence,r));return s.instance}function tf(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,T=0;T<u.length;T++){var w=u[T];if(w.dataset.precedence===s)p=w;else if(p!==f)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Kp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function $p(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var nf=null;function VT(r,s,o){if(nf===null){var u=new Map,f=nf=new Map;f.set(o,u)}else f=nf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var p=o[f];if(!(p[Vi]||p[Tt]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(s)||"";T=r+T;var w=u.get(T);w?w.push(p):u.set(T,[p])}}return u}function PT(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function ax(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function MT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Mu=null;function ox(){}function lx(r,s,o){if(Mu===null)throw Error(i(475));var u=Mu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=qo(o.href),p=r.querySelector(Vu(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=rf.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=p,bt(p);return}p=r.ownerDocument||r,o=NT(o),(f=Yn.get(f))&&Kp(o,f),p=p.createElement("link"),bt(p);var T=p;T._p=new Promise(function(w,C){T.onload=w,T.onerror=C}),Yt(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=rf.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function ux(){if(Mu===null)throw Error(i(475));var r=Mu;return r.stylesheets&&r.count===0&&Yp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Yp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function rf(){if(this.count--,this.count===0){if(this.stylesheets)Yp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var sf=null;function Yp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,sf=new Map,s.forEach(cx,r),sf=null,rf.call(r))}function cx(r,s){if(!(s.state.loading&4)){var o=sf.get(r);if(o)var u=o.get(null);else{o=new Map,sf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}f=s.instance,T=f.getAttribute("data-precedence"),p=o.get(T)||u,p===u&&o.set(null,f),o.set(T,f),this.count++,u=rf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var ku={$$typeof:$,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function hx(r,s,o,u,f,p,T,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ro(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ro(0),this.hiddenUpdates=ro(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function kT(r,s,o,u,f,p,T,w,C,G,Z,ne){return r=new hx(r,s,o,T,w,C,G,ne),s=1,p===!0&&(s|=24),p=Sn(3,null,null,s),r.current=p,p.stateNode=r,s=Cm(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Vm(p),r}function LT(r){return r?(r=To,r):To}function UT(r,s,o,u,f,p){f=LT(f),u.context===null?u.context=f:u.pendingContext=f,u=Gi(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ki(r,u,s),o!==null&&(Dn(o,r,s),fu(o,r,s))}function BT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Qp(r,s){BT(r,s),(r=r.alternate)&&BT(r,s)}function jT(r){if(r.tag===13){var s=Eo(r,67108864);s!==null&&Dn(s,r,67108864),Qp(r,67108864)}}var af=!0;function fx(r,s,o,u){var f=J.T;J.T=null;var p=he.p;try{he.p=2,Xp(r,s,o,u)}finally{he.p=p,J.T=f}}function dx(r,s,o,u){var f=J.T;J.T=null;var p=he.p;try{he.p=8,Xp(r,s,o,u)}finally{he.p=p,J.T=f}}function Xp(r,s,o,u){if(af){var f=Wp(u);if(f===null)Lp(r,s,u,of,o),FT(r,u);else if(px(f,r,s,o,u))u.stopPropagation();else if(FT(r,u),s&4&&-1<mx.indexOf(r)){for(;f!==null;){var p=Sr(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=rr(p.pendingLanes);if(T!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var C=1<<31-ln(T);w.entanglements[1]|=C,T&=~C}Mr(p),(Ke&6)===0&&(qh=gn()+500,Cu(0))}}break;case 13:w=Eo(p,2),w!==null&&Dn(w,p,2),Gh(),Qp(p,2)}if(p=Wp(u),p===null&&Lp(r,s,u,of,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Lp(r,s,u,null,o)}}function Wp(r){return r=$l(r),Jp(r)}var of=null;function Jp(r){if(of=null,r=Ar(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return of=r,null}function zT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($c()){case Ot:return 2;case Ut:return 8;case Kr:case rm:return 32;case Ll:return 268435456;default:return 32}default:return 32}}var Zp=!1,ss=null,as=null,os=null,Lu=new Map,Uu=new Map,ls=[],mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FT(r,s){switch(r){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Lu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(s.pointerId)}}function Bu(r,s,o,u,f,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=Sr(s),s!==null&&jT(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function px(r,s,o,u,f){switch(s){case"focusin":return ss=Bu(ss,r,s,o,u,f),!0;case"dragenter":return as=Bu(as,r,s,o,u,f),!0;case"mouseover":return os=Bu(os,r,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return Lu.set(p,Bu(Lu.get(p)||null,r,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Uu.set(p,Bu(Uu.get(p)||null,r,s,o,u,f)),!0}return!1}function qT(r){var s=Ar(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,am(r.priority,function(){if(o.tag===13){var u=Cn();u=Bl(u);var f=Eo(o,u);f!==null&&Dn(f,o,u),Qp(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function lf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Wp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Kl=u,o.target.dispatchEvent(u),Kl=null}else return s=Sr(o),s!==null&&jT(s),r.blockedOn=o,!1;s.shift()}return!0}function HT(r,s,o){lf(r)&&o.delete(s)}function gx(){Zp=!1,ss!==null&&lf(ss)&&(ss=null),as!==null&&lf(as)&&(as=null),os!==null&&lf(os)&&(os=null),Lu.forEach(HT),Uu.forEach(HT)}function uf(r,s){r.blockedOn===s&&(r.blockedOn=null,Zp||(Zp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gx)))}var cf=null;function GT(r){cf!==r&&(cf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cf===r&&(cf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(Jp(u||o)===null)continue;break}var p=Sr(o);p!==null&&(r.splice(s,3),s-=3,Jm(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function ju(r){function s(C){return uf(C,r)}ss!==null&&uf(ss,r),as!==null&&uf(as,r),os!==null&&uf(os,r),Lu.forEach(s),Uu.forEach(s);for(var o=0;o<ls.length;o++){var u=ls[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ls.length&&(o=ls[0],o.blockedOn===null);)qT(o),o.blockedOn===null&&ls.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],T=f[Gt]||null;if(typeof p=="function")T||GT(o);else if(T){var w=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[Gt]||null)w=T.formAction;else if(Jp(f)!==null)continue}else w=T.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),GT(o)}}}function eg(r){this._internalRoot=r}hf.prototype.render=eg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Cn();UT(o,u,r,s,null,null)},hf.prototype.unmount=eg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;UT(r.current,2,null,r,null,null),Gh(),s[Yr]=null}};function hf(r){this._internalRoot=r}hf.prototype.unstable_scheduleHydration=function(r){if(r){var s=$r();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ls.length&&s!==0&&s<ls[o].priority;o++);ls.splice(o,0,r),o===0&&qT(r)}};var KT=e.version;if(KT!=="19.1.1")throw Error(i(527,KT,"19.1.1"));he.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var yx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{Ri=ff.inject(yx),Jt=ff}catch{}}return Fu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",f=lE,p=uE,T=cE,w=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=kT(r,1,!1,null,null,o,u,f,p,T,w,null),r[Yr]=s.current,kp(r),new eg(s)},Fu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,f="",p=lE,T=uE,w=cE,C=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),s=kT(r,1,!0,s,o??null,u,f,p,T,w,C,G),s.context=LT(null),o=s.current,u=Cn(),u=Bl(u),f=Gi(u),f.callback=null,Ki(o,f,u),o=u,s.current.lanes=o,Et(s,o),Mr(s),r[Yr]=s.current,kp(r),new hf(s)},Fu.version="19.1.1",Fu}var n0;function Rx(){if(n0)return rg.exports;n0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rg.exports=Ix(),rg.exports}var xx=Rx();const Cx=ww(xx);/**
 * react-router v7.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r0="popstate";function Dx(n={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return Dg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:mc(a)}return Ox(e,t,null,n)}function lt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _r(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nx(){return Math.random().toString(36).substring(2,10)}function i0(n,e){return{usr:n.state,key:n.key,idx:e}}function Dg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Rl(e):e,state:t,key:e&&e.key||i||Nx()}}function mc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Rl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Ox(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function v(){d="POP";let L=_(),te=L==null?null:L-g;g=L,m&&m({action:d,location:z.location,delta:te})}function b(L,te){d="PUSH";let W=Dg(z.location,L,te);g=_()+1;let $=i0(W,g),re=z.createHref(W);try{c.pushState($,"",re)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;a.location.assign(re)}l&&m&&m({action:d,location:z.location,delta:1})}function R(L,te){d="REPLACE";let W=Dg(z.location,L,te);g=_();let $=i0(W,g),re=z.createHref(W);c.replaceState($,"",re),l&&m&&m({action:d,location:z.location,delta:0})}function U(L){return Vx(L)}let z={get action(){return d},get location(){return n(a,c)},listen(L){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(r0,v),m=L,()=>{a.removeEventListener(r0,v),m=null}},createHref(L){return e(a,L)},createURL:U,encodeLocation(L){let te=U(L);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:b,replace:R,go(L){return c.go(L)}};return z}function Vx(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),lt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:mc(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Sw(n,e,t="/"){return Px(n,e,t,!1)}function Px(n,e,t,i){let a=typeof e=="string"?Rl(e):e,l=Ei(a.pathname||"/",t);if(l==null)return null;let c=Iw(n);Mx(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=Kx(l);d=Hx(c[m],g,i)}return d}function Iw(n,e=[],t=[],i="",a=!1){let l=(c,d,m=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&m)return;lt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let v=vi([i,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(lt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Iw(c.children,e,b,v,m)),!(c.path==null&&!c.index)&&e.push({path:v,score:Fx(v,c.index),routesMeta:b})};return n.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,d);else for(let g of Rw(c.path))l(c,d,!0,g)}),e}function Rw(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=Rw(i.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function Mx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:qx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var kx=/^:[\w-]+$/,Lx=3,Ux=2,Bx=1,jx=10,zx=-2,s0=n=>n==="*";function Fx(n,e){let t=n.split("/"),i=t.length;return t.some(s0)&&(i+=zx),e&&(i+=Ux),t.filter(a=>!s0(a)).reduce((a,l)=>a+(kx.test(l)?Lx:l===""?Bx:jx),i)}function qx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function Hx(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let d=0;d<i.length;++d){let m=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",v=Gf({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),b=m.route;if(!v&&g&&t&&!i[i.length-1].route.index&&(v=Gf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:vi([l,v.pathname]),pathnameBase:Xx(vi([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=vi([l,v.pathnameBase]))}return c}function Gf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Gx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:v},b)=>{if(_==="*"){let U=d[b]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const R=d[b];return v&&!R?g[_]=void 0:g[_]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function Gx(n,e=!1,t=!0){_r(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function Kx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _r(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ei(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function $x(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Rl(n):n;return{pathname:t?t.startsWith("/")?t:Yx(t,e):e,search:Wx(i),hash:Jx(a)}}function Yx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function og(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Qx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gy(n){let e=Qx(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function yy(n,e,t,i=!1){let a;typeof n=="string"?a=Rl(n):(a={...n},lt(!a.pathname||!a.pathname.includes("?"),og("?","pathname","search",a)),lt(!a.pathname||!a.pathname.includes("#"),og("#","pathname","hash",a)),lt(!a.search||!a.search.includes("#"),og("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}d=v>=0?e[v]:"/"}let m=$x(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var vi=n=>n.join("/").replace(/\/\/+/g,"/"),Xx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Wx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Jx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Zx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var xw=["POST","PUT","PATCH","DELETE"];new Set(xw);var eC=["GET",...xw];new Set(eC);var xl=H.createContext(null);xl.displayName="DataRouter";var vd=H.createContext(null);vd.displayName="DataRouterState";H.createContext(!1);var Cw=H.createContext({isTransitioning:!1});Cw.displayName="ViewTransition";var tC=H.createContext(new Map);tC.displayName="Fetchers";var nC=H.createContext(null);nC.displayName="Await";var Er=H.createContext(null);Er.displayName="Navigation";var Nc=H.createContext(null);Nc.displayName="Location";var Tr=H.createContext({outlet:null,matches:[],isDataRoute:!1});Tr.displayName="Route";var _y=H.createContext(null);_y.displayName="RouteError";function rC(n,{relative:e}={}){lt(Cl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=H.useContext(Er),{hash:a,pathname:l,search:c}=Oc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:vi([t,l])),i.createHref({pathname:d,search:c,hash:a})}function Cl(){return H.useContext(Nc)!=null}function Ds(){return lt(Cl(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Nc).location}var Dw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Nw(n){H.useContext(Er).static||H.useLayoutEffect(n)}function Ow(){let{isDataRoute:n}=H.useContext(Tr);return n?yC():iC()}function iC(){lt(Cl(),"useNavigate() may be used only in the context of a <Router> component.");let n=H.useContext(xl),{basename:e,navigator:t}=H.useContext(Er),{matches:i}=H.useContext(Tr),{pathname:a}=Ds(),l=JSON.stringify(gy(i)),c=H.useRef(!1);return Nw(()=>{c.current=!0}),H.useCallback((m,g={})=>{if(_r(c.current,Dw),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=yy(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:vi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,n])}H.createContext(null);function sC(){let{matches:n}=H.useContext(Tr),e=n[n.length-1];return e?e.params:{}}function Oc(n,{relative:e}={}){let{matches:t}=H.useContext(Tr),{pathname:i}=Ds(),a=JSON.stringify(gy(t));return H.useMemo(()=>yy(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function aC(n,e){return Vw(n,e)}function Vw(n,e,t,i,a){var W;lt(Cl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=H.useContext(Er),{matches:c}=H.useContext(Tr),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",v=d&&d.route;{let $=v&&v.path||"";Pw(g,!v||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let b=Ds(),R;if(e){let $=typeof e=="string"?Rl(e):e;lt(_==="/"||((W=$.pathname)==null?void 0:W.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${$.pathname}" was given in the \`location\` prop.`),R=$}else R=b;let U=R.pathname||"/",z=U;if(_!=="/"){let $=_.replace(/^\//,"").split("/");z="/"+U.replace(/^\//,"").split("/").slice($.length).join("/")}let L=Sw(n,{pathname:z});_r(v||L!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),_r(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=hC(L&&L.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:vi([_,l.encodeLocation?l.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?_:vi([_,l.encodeLocation?l.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),c,t,i,a);return e&&te?H.createElement(Nc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},te):te}function oC(){let n=gC(),e=Zx(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:l},"ErrorBoundary")," or"," ",H.createElement("code",{style:l},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:a},t):null,c)}var lC=H.createElement(oC,null),uC=class extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?H.createElement(Tr.Provider,{value:this.props.routeContext},H.createElement(_y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cC({routeContext:n,match:e,children:t}){let i=H.useContext(xl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(Tr.Provider,{value:n},t)}function hC(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let g=l.findIndex(_=>_.route.id&&(c==null?void 0:c[_.route.id])!==void 0);lt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,m=-1;if(t)for(let g=0;g<l.length;g++){let _=l[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=g),_.route.id){let{loaderData:v,errors:b}=t,R=_.route.loader&&!v.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||R){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((g,_,v)=>{let b,R=!1,U=null,z=null;t&&(b=c&&_.route.id?c[_.route.id]:void 0,U=_.route.errorElement||lC,d&&(m<0&&v===0?(Pw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,z=null):m===v&&(R=!0,z=_.route.hydrateFallbackElement||null)));let L=e.concat(l.slice(0,v+1)),te=()=>{let W;return b?W=U:R?W=z:_.route.Component?W=H.createElement(_.route.Component,null):_.route.element?W=_.route.element:W=g,H.createElement(cC,{match:_,routeContext:{outlet:g,matches:L,isDataRoute:t!=null},children:W})};return t&&(_.route.ErrorBoundary||_.route.errorElement||v===0)?H.createElement(uC,{location:t.location,revalidation:t.revalidation,component:U,error:b,children:te(),routeContext:{outlet:null,matches:L,isDataRoute:!0},unstable_onError:i}):te()},null)}function vy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fC(n){let e=H.useContext(xl);return lt(e,vy(n)),e}function dC(n){let e=H.useContext(vd);return lt(e,vy(n)),e}function mC(n){let e=H.useContext(Tr);return lt(e,vy(n)),e}function Ey(n){let e=mC(n),t=e.matches[e.matches.length-1];return lt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function pC(){return Ey("useRouteId")}function gC(){var i;let n=H.useContext(_y),e=dC("useRouteError"),t=Ey("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function yC(){let{router:n}=fC("useNavigate"),e=Ey("useNavigate"),t=H.useRef(!1);return Nw(()=>{t.current=!0}),H.useCallback(async(a,l={})=>{_r(t.current,Dw),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var a0={};function Pw(n,e,t){!e&&!a0[n]&&(a0[n]=!0,_r(!1,t))}H.memo(_C);function _C({routes:n,future:e,state:t,unstable_onError:i}){return Vw(n,void 0,t,i,e)}function Ng({to:n,replace:e,state:t,relative:i}){lt(Cl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=H.useContext(Er);_r(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=H.useContext(Tr),{pathname:c}=Ds(),d=Ow(),m=yy(n,gy(l),c,i==="path"),g=JSON.stringify(m);return H.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:i})},[d,g,i,e,t]),null}function Zo(n){lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vC({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){lt(!Cl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=H.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Rl(t));let{pathname:m="/",search:g="",hash:_="",state:v=null,key:b="default"}=t,R=H.useMemo(()=>{let U=Ei(m,c);return U==null?null:{location:{pathname:U,search:g,hash:_,state:v,key:b},navigationType:i}},[c,m,g,_,v,b,i]);return _r(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:H.createElement(Er.Provider,{value:d},H.createElement(Nc.Provider,{children:e,value:R}))}function EC({children:n,location:e}){return aC(Og(n),e)}function Og(n,e=[]){let t=[];return H.Children.forEach(n,(i,a)=>{if(!H.isValidElement(i))return;let l=[...e,a];if(i.type===H.Fragment){t.push.apply(t,Og(i.props.children,l));return}lt(i.type===Zo,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Og(i.props.children,l)),t.push(c)}),t}var If="get",Rf="application/x-www-form-urlencoded";function Ed(n){return n!=null&&typeof n.tagName=="string"}function TC(n){return Ed(n)&&n.tagName.toLowerCase()==="button"}function bC(n){return Ed(n)&&n.tagName.toLowerCase()==="form"}function wC(n){return Ed(n)&&n.tagName.toLowerCase()==="input"}function AC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function SC(n,e){return n.button===0&&(!e||e==="_self")&&!AC(n)}var df=null;function IC(){if(df===null)try{new FormData(document.createElement("form"),0),df=!1}catch{df=!0}return df}var RC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lg(n){return n!=null&&!RC.has(n)?(_r(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rf}"`),null):n}function xC(n,e){let t,i,a,l,c;if(bC(n)){let d=n.getAttribute("action");i=d?Ei(d,e):null,t=n.getAttribute("method")||If,a=lg(n.getAttribute("enctype"))||Rf,l=new FormData(n)}else if(TC(n)||wC(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?Ei(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||If,a=lg(n.getAttribute("formenctype"))||lg(d.getAttribute("enctype"))||Rf,l=new FormData(d,n),!IC()){let{name:g,type:_,value:v}=n;if(_==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,v)}}else{if(Ed(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=If,i=null,a=Rf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ty(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function CC(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Ei(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function DC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function OC(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await DC(l,t);return c.links?c.links():[]}return[]}));return kC(i.flat(1).filter(NC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function o0(n,e,t,i,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>{var _;return t[g].pathname!==m.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{var v;let _=i.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function VC(n,e,{includeHydrateFallback:t}={}){return PC(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function PC(n){return[...new Set(n)]}function MC(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function kC(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(MC(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function Mw(){let n=H.useContext(xl);return Ty(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function LC(){let n=H.useContext(vd);return Ty(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var by=H.createContext(void 0);by.displayName="FrameworkContext";function kw(){let n=H.useContext(by);return Ty(n,"You must render this element inside a <HydratedRouter> element"),n}function UC(n,e){let t=H.useContext(by),[i,a]=H.useState(!1),[l,c]=H.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:v}=e,b=H.useRef(null);H.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=te=>{te.forEach(W=>{c(W.isIntersecting)})},L=new IntersectionObserver(z,{threshold:.5});return b.current&&L.observe(b.current),()=>{L.disconnect()}}},[n]),H.useEffect(()=>{if(i){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[i]);let R=()=>{a(!0)},U=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:qu(d,R),onBlur:qu(m,U),onMouseEnter:qu(g,R),onMouseLeave:qu(_,U),onTouchStart:qu(v,R)}]:[!1,b,{}]}function qu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function BC({page:n,...e}){let{router:t}=Mw(),i=H.useMemo(()=>Sw(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?H.createElement(zC,{page:n,matches:i,...e}):null}function jC(n){let{manifest:e,routeModules:t}=kw(),[i,a]=H.useState([]);return H.useEffect(()=>{let l=!1;return OC(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function zC({page:n,matches:e,...t}){let i=Ds(),{manifest:a,routeModules:l}=kw(),{basename:c}=Mw(),{loaderData:d,matches:m}=LC(),g=H.useMemo(()=>o0(n,e,m,a,i,"data"),[n,e,m,a,i]),_=H.useMemo(()=>o0(n,e,m,a,i,"assets"),[n,e,m,a,i]),v=H.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let U=new Set,z=!1;if(e.forEach(te=>{var $;let W=a.routes[te.route.id];!W||!W.hasLoader||(!g.some(re=>re.route.id===te.route.id)&&te.route.id in d&&(($=l[te.route.id])!=null&&$.shouldRevalidate)||W.hasClientLoader?z=!0:U.add(te.route.id))}),U.size===0)return[];let L=CC(n,c,"data");return z&&U.size>0&&L.searchParams.set("_routes",e.filter(te=>U.has(te.route.id)).map(te=>te.route.id).join(",")),[L.pathname+L.search]},[c,d,i,a,g,e,n,l]),b=H.useMemo(()=>VC(_,a),[_,a]),R=jC(_);return H.createElement(H.Fragment,null,v.map(U=>H.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...t})),b.map(U=>H.createElement("link",{key:U,rel:"modulepreload",href:U,...t})),R.map(({key:U,link:z})=>H.createElement("link",{key:U,nonce:t.nonce,...z})))}function FC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Lw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lw&&(window.__reactRouterVersion="7.9.2")}catch{}function qC({basename:n,children:e,window:t}){let i=H.useRef();i.current==null&&(i.current=Dx({window:t,v5Compat:!0}));let a=i.current,[l,c]=H.useState({action:a.action,location:a.location}),d=H.useCallback(m=>{H.startTransition(()=>c(m))},[c]);return H.useLayoutEffect(()=>a.listen(d),[a,d]),H.createElement(vC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var Uw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bw=H.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:_,viewTransition:v,...b},R){let{basename:U}=H.useContext(Er),z=typeof g=="string"&&Uw.test(g),L,te=!1;if(typeof g=="string"&&z&&(L=g,Lw))try{let x=new URL(window.location.href),M=g.startsWith("//")?new URL(x.protocol+g):new URL(g),V=Ei(M.pathname,U);M.origin===x.origin&&V!=null?g=V+M.search+M.hash:te=!0}catch{_r(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=rC(g,{relative:a}),[$,re,ie]=UC(i,b),de=$C(g,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:v});function N(x){e&&e(x),x.defaultPrevented||de(x)}let I=H.createElement("a",{...b,...ie,href:L||W,onClick:te||l?e:N,ref:FC(R,re),target:m,"data-discover":!z&&t==="render"?"true":void 0});return $&&!z?H.createElement(H.Fragment,null,I,H.createElement(BC,{page:W})):I});Bw.displayName="Link";var HC=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},_){let v=Oc(c,{relative:g.relative}),b=Ds(),R=H.useContext(vd),{navigator:U,basename:z}=H.useContext(Er),L=R!=null&&JC(v)&&d===!0,te=U.encodeLocation?U.encodeLocation(v).pathname:v.pathname,W=b.pathname,$=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(W=W.toLowerCase(),$=$?$.toLowerCase():null,te=te.toLowerCase()),$&&z&&($=Ei($,z)||$);const re=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let ie=W===te||!a&&W.startsWith(te)&&W.charAt(re)==="/",de=$!=null&&($===te||!a&&$.startsWith(te)&&$.charAt(te.length)==="/"),N={isActive:ie,isPending:de,isTransitioning:L},I=ie?e:void 0,x;typeof i=="function"?x=i(N):x=[i,ie?"active":null,de?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(N):l;return H.createElement(Bw,{...g,"aria-current":I,className:x,ref:_,style:M,to:c,viewTransition:d},typeof m=="function"?m(N):m)});HC.displayName="NavLink";var GC=H.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=If,action:d,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:v,...b},R)=>{let U=XC(),z=WC(d,{relative:g}),L=c.toLowerCase()==="get"?"get":"post",te=typeof d=="string"&&Uw.test(d),W=$=>{if(m&&m($),$.defaultPrevented)return;$.preventDefault();let re=$.nativeEvent.submitter,ie=(re==null?void 0:re.getAttribute("formmethod"))||c;U(re||$.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:v})};return H.createElement("form",{ref:R,method:L,action:z,onSubmit:i?m:W,...b,"data-discover":!te&&n==="render"?"true":void 0})});GC.displayName="Form";function KC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jw(n){let e=H.useContext(xl);return lt(e,KC(n)),e}function $C(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=Ow(),m=Ds(),g=Oc(n,{relative:l});return H.useCallback(_=>{if(SC(_,e)){_.preventDefault();let v=t!==void 0?t:mc(m)===mc(g);d(n,{replace:v,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,g,t,i,e,n,a,l,c])}var YC=0,QC=()=>`__${String(++YC)}__`;function XC(){let{router:n}=jw("useSubmit"),{basename:e}=H.useContext(Er),t=pC();return H.useCallback(async(i,a={})=>{let{action:l,method:c,encType:d,formData:m,body:g}=xC(i,e);if(a.navigate===!1){let _=a.fetcherKey||QC();await n.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function WC(n,{relative:e}={}){let{basename:t}=H.useContext(Er),i=H.useContext(Tr);lt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Oc(n||".",{relative:e})},c=Ds();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(v=>v).forEach(v=>d.append("index",v));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:vi([t,l.pathname])),mc(l)}function JC(n,{relative:e}={}){let t=H.useContext(Cw);lt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jw("useViewTransitionState"),a=Oc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Ei(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ei(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Gf(a.pathname,c)!=null||Gf(a.pathname,l)!=null}const zw=H.createContext(void 0),Vc=()=>{const n=H.useContext(zw);if(n===void 0)throw new Error("useAuthContext must be used within an AuthProvider");return n},ZC=()=>{};var l0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},eD=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,_=l>>2,v=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,R=g&63;m||(R=64,c||(b=64)),i.push(t[_],t[v],t[b],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Fw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||v==null)throw new tD;const b=l<<2|d>>4;if(i.push(b),g!==64){const R=d<<4&240|g>>2;if(i.push(R),v!==64){const U=g<<6&192|v;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nD=function(n){const e=Fw(n);return qw.encodeByteArray(e,!0)},Kf=function(n){return nD(n).replace(/\./g,"")},Hw=function(n){try{return qw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=()=>Gw().__FIREBASE_DEFAULTS__,iD=()=>{if(typeof process>"u"||typeof l0>"u")return;const n=l0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Hw(n[1]);return e&&JSON.parse(e)},Td=()=>{try{return ZC()||rD()||iD()||sD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Kw=n=>{var e,t;return(t=(e=Td())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},$w=n=>{const e=Kw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Yw=()=>{var n;return(n=Td())==null?void 0:n.config},Qw=n=>{var e;return(e=Td())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Kf(JSON.stringify(t)),Kf(JSON.stringify(c)),""].join(".")}const nc={};function oD(){const n={prod:[],emulator:[]};for(const e of Object.keys(nc))nc[e]?n.emulator.push(e):n.prod.push(e);return n}function lD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let u0=!1;function Ay(n,e){if(typeof window>"u"||typeof document>"u"||!Ns(window.location.host)||nc[n]===e||nc[n]||u0)return;nc[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=oD().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,R){b.setAttribute("width","24"),b.setAttribute("id",R),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{u0=!0,c()},b}function _(b,R){b.setAttribute("id",R),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=lD(i),R=t("text"),U=document.getElementById(R)||document.createElement("span"),z=t("learnmore"),L=document.getElementById(z)||document.createElement("a"),te=t("preprendIcon"),W=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const $=b.element;d($),_(L,z);const re=g();m(W,te),$.append(W,U,L,re),document.body.appendChild($)}l?(U.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function Ww(){var e;const n=(e=Td())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fD(){const n=kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Zw(){return!Ww()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eA(){return!Ww()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Sy(){try{return typeof indexedDB=="object"}catch{return!1}}function tA(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}function dD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="FirebaseError";class tr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=mD,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ya.prototype.create)}}class Ya{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?pD(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new tr(a,d,i)}}function pD(n,e){return n.replace(gD,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const gD=/\{\$([^}]+)}/g;function yD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ss(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(c0(l)&&c0(c)){if(!Ss(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function c0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _D(n,e){const t=new vD(n,e);return t.subscribe.bind(t)}class vD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ED(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=ug),a.error===void 0&&(a.error=ug),a.complete===void 0&&(a.complete=ug);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ED(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ug(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=1e3,bD=2,wD=14400*1e3,AD=.5;function h0(n,e=TD,t=bD){const i=e*Math.pow(t,n),a=Math.round(AD*i*(Math.random()-.5)*2);return Math.min(wD,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(n){return n&&n._delegate?n._delegate:n}class Zn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new aD;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RD(e))try{this.getOrInitializeService({instanceIdentifier:Ea})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ea){return this.instances.has(e)}getOptions(e=Ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ID(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ea){return this.component?this.component.multipleInstances?e:Ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ID(n){return n===Ea?void 0:n}function RD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const CD={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},DD=Le.INFO,ND={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},OD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=ND[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bd{constructor(e){this.name=e,this._logLevel=DD,this._logHandler=OD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const VD=(n,e)=>e.some(t=>n instanceof t);let f0,d0;function PD(){return f0||(f0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MD(){return d0||(d0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nA=new WeakMap,Vg=new WeakMap,rA=new WeakMap,cg=new WeakMap,Iy=new WeakMap;function kD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Es(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&nA.set(t,n)}).catch(()=>{}),Iy.set(e,n),e}function LD(n){if(Vg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Vg.set(n,e)}let Pg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UD(n){Pg=n(Pg)}function BD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(hg(this),e,...t);return rA.set(i,e.sort?e.sort():[e]),Es(i)}:MD().includes(n)?function(...e){return n.apply(hg(this),e),Es(nA.get(this))}:function(...e){return Es(n.apply(hg(this),e))}}function jD(n){return typeof n=="function"?BD(n):(n instanceof IDBTransaction&&LD(n),VD(n,PD())?new Proxy(n,Pg):n)}function Es(n){if(n instanceof IDBRequest)return kD(n);if(cg.has(n))return cg.get(n);const e=jD(n);return e!==n&&(cg.set(n,e),Iy.set(e,n)),e}const hg=n=>Iy.get(n);function iA(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=Es(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Es(c.result),m.oldVersion,m.newVersion,Es(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const zD=["get","getKey","getAll","getAllKeys","count"],FD=["put","add","delete","clear"],fg=new Map;function m0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fg.get(e))return fg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=FD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||zD.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return fg.set(e,l),l}UD(n=>({...n,get:(e,t,i)=>m0(e,t)||n.get(e,t,i),has:(e,t)=>!!m0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function HD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mg="@firebase/app",p0="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new bd("@firebase/app"),GD="@firebase/app-compat",KD="@firebase/analytics-compat",$D="@firebase/analytics",YD="@firebase/app-check-compat",QD="@firebase/app-check",XD="@firebase/auth",WD="@firebase/auth-compat",JD="@firebase/database",ZD="@firebase/data-connect",eN="@firebase/database-compat",tN="@firebase/functions",nN="@firebase/functions-compat",rN="@firebase/installations",iN="@firebase/installations-compat",sN="@firebase/messaging",aN="@firebase/messaging-compat",oN="@firebase/performance",lN="@firebase/performance-compat",uN="@firebase/remote-config",cN="@firebase/remote-config-compat",hN="@firebase/storage",fN="@firebase/storage-compat",dN="@firebase/firestore",mN="@firebase/ai",pN="@firebase/firestore-compat",gN="firebase",yN="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="[DEFAULT]",_N={[Mg]:"fire-core",[GD]:"fire-core-compat",[$D]:"fire-analytics",[KD]:"fire-analytics-compat",[QD]:"fire-app-check",[YD]:"fire-app-check-compat",[XD]:"fire-auth",[WD]:"fire-auth-compat",[JD]:"fire-rtdb",[ZD]:"fire-data-connect",[eN]:"fire-rtdb-compat",[tN]:"fire-fn",[nN]:"fire-fn-compat",[rN]:"fire-iid",[iN]:"fire-iid-compat",[sN]:"fire-fcm",[aN]:"fire-fcm-compat",[oN]:"fire-perf",[lN]:"fire-perf-compat",[uN]:"fire-rc",[cN]:"fire-rc-compat",[hN]:"fire-gcs",[fN]:"fire-gcs-compat",[dN]:"fire-fst",[pN]:"fire-fst-compat",[mN]:"fire-vertex","fire-js":"fire-js",[gN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Map,vN=new Map,Lg=new Map;function g0(n,e){try{n.container.addComponent(e)}catch(t){Ti.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vr(n){const e=n.name;if(Lg.has(e))return Ti.debug(`There were multiple attempts to register component ${e}.`),!1;Lg.set(e,n);for(const t of $f.values())g0(t,n);for(const t of vN.values())g0(t,n);return!0}function Os(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new Ya("app","Firebase",EN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=yN;function sA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:kg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Ts.create("bad-app-name",{appName:String(a)});if(t||(t=Yw()),!t)throw Ts.create("no-options");const l=$f.get(a);if(l){if(Ss(t,l.options)&&Ss(i,l.config))return l;throw Ts.create("duplicate-app",{appName:a})}const c=new xD(a);for(const m of Lg.values())c.addComponent(m);const d=new TN(t,i,c);return $f.set(a,d),d}function wd(n=kg){const e=$f.get(n);if(!e&&n===kg&&Yw())return sA();if(!e)throw Ts.create("no-app",{appName:n});return e}function Tn(n,e,t){let i=_N[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ti.warn(c.join(" "));return}vr(new Zn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="firebase-heartbeat-database",wN=1,pc="firebase-heartbeat-store";let dg=null;function aA(){return dg||(dg=iA(bN,wN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ts.create("idb-open",{originalErrorMessage:n.message})})),dg}async function AN(n){try{const t=(await aA()).transaction(pc),i=await t.objectStore(pc).get(oA(n));return await t.done,i}catch(e){if(e instanceof tr)Ti.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ti.warn(t.message)}}}async function y0(n,e){try{const i=(await aA()).transaction(pc,"readwrite");await i.objectStore(pc).put(e,oA(n)),await i.done}catch(t){if(t instanceof tr)Ti.warn(t.message);else{const i=Ts.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ti.warn(i.message)}}}function oA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1024,IN=30;class RN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=_0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>IN){const c=DN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ti.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_0(),{heartbeatsToSend:i,unsentEntries:a}=xN(this._heartbeatsCache.heartbeats),l=Kf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ti.warn(t),""}}}function _0(){return new Date().toISOString().substring(0,10)}function xN(n,e=SN){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),v0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),v0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class CN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sy()?tA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return y0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return y0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function v0(n){return Kf(JSON.stringify({version:2,heartbeats:n})).length}function DN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n){vr(new Zn("platform-logger",e=>new qD(e),"PRIVATE")),vr(new Zn("heartbeat",e=>new RN(e),"PRIVATE")),Tn(Mg,p0,n),Tn(Mg,p0,"esm2020"),Tn("fire-js","")}NN("");var ON="firebase",VN="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn(ON,VN,"app");var E0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bs,lA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function x(){}x.prototype=I.prototype,N.F=I.prototype,N.prototype=new x,N.prototype.constructor=N,N.D=function(M,V,B){for(var D=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)D[mt-2]=arguments[mt];return I.prototype[V].apply(M,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,I,x){x||(x=0);const M=Array(16);if(typeof I=="string")for(var V=0;V<16;++V)M[V]=I.charCodeAt(x++)|I.charCodeAt(x++)<<8|I.charCodeAt(x++)<<16|I.charCodeAt(x++)<<24;else for(V=0;V<16;++V)M[V]=I[x++]|I[x++]<<8|I[x++]<<16|I[x++]<<24;I=N.g[0],x=N.g[1],V=N.g[2];let B=N.g[3],D;D=I+(B^x&(V^B))+M[0]+3614090360&4294967295,I=x+(D<<7&4294967295|D>>>25),D=B+(V^I&(x^V))+M[1]+3905402710&4294967295,B=I+(D<<12&4294967295|D>>>20),D=V+(x^B&(I^x))+M[2]+606105819&4294967295,V=B+(D<<17&4294967295|D>>>15),D=x+(I^V&(B^I))+M[3]+3250441966&4294967295,x=V+(D<<22&4294967295|D>>>10),D=I+(B^x&(V^B))+M[4]+4118548399&4294967295,I=x+(D<<7&4294967295|D>>>25),D=B+(V^I&(x^V))+M[5]+1200080426&4294967295,B=I+(D<<12&4294967295|D>>>20),D=V+(x^B&(I^x))+M[6]+2821735955&4294967295,V=B+(D<<17&4294967295|D>>>15),D=x+(I^V&(B^I))+M[7]+4249261313&4294967295,x=V+(D<<22&4294967295|D>>>10),D=I+(B^x&(V^B))+M[8]+1770035416&4294967295,I=x+(D<<7&4294967295|D>>>25),D=B+(V^I&(x^V))+M[9]+2336552879&4294967295,B=I+(D<<12&4294967295|D>>>20),D=V+(x^B&(I^x))+M[10]+4294925233&4294967295,V=B+(D<<17&4294967295|D>>>15),D=x+(I^V&(B^I))+M[11]+2304563134&4294967295,x=V+(D<<22&4294967295|D>>>10),D=I+(B^x&(V^B))+M[12]+1804603682&4294967295,I=x+(D<<7&4294967295|D>>>25),D=B+(V^I&(x^V))+M[13]+4254626195&4294967295,B=I+(D<<12&4294967295|D>>>20),D=V+(x^B&(I^x))+M[14]+2792965006&4294967295,V=B+(D<<17&4294967295|D>>>15),D=x+(I^V&(B^I))+M[15]+1236535329&4294967295,x=V+(D<<22&4294967295|D>>>10),D=I+(V^B&(x^V))+M[1]+4129170786&4294967295,I=x+(D<<5&4294967295|D>>>27),D=B+(x^V&(I^x))+M[6]+3225465664&4294967295,B=I+(D<<9&4294967295|D>>>23),D=V+(I^x&(B^I))+M[11]+643717713&4294967295,V=B+(D<<14&4294967295|D>>>18),D=x+(B^I&(V^B))+M[0]+3921069994&4294967295,x=V+(D<<20&4294967295|D>>>12),D=I+(V^B&(x^V))+M[5]+3593408605&4294967295,I=x+(D<<5&4294967295|D>>>27),D=B+(x^V&(I^x))+M[10]+38016083&4294967295,B=I+(D<<9&4294967295|D>>>23),D=V+(I^x&(B^I))+M[15]+3634488961&4294967295,V=B+(D<<14&4294967295|D>>>18),D=x+(B^I&(V^B))+M[4]+3889429448&4294967295,x=V+(D<<20&4294967295|D>>>12),D=I+(V^B&(x^V))+M[9]+568446438&4294967295,I=x+(D<<5&4294967295|D>>>27),D=B+(x^V&(I^x))+M[14]+3275163606&4294967295,B=I+(D<<9&4294967295|D>>>23),D=V+(I^x&(B^I))+M[3]+4107603335&4294967295,V=B+(D<<14&4294967295|D>>>18),D=x+(B^I&(V^B))+M[8]+1163531501&4294967295,x=V+(D<<20&4294967295|D>>>12),D=I+(V^B&(x^V))+M[13]+2850285829&4294967295,I=x+(D<<5&4294967295|D>>>27),D=B+(x^V&(I^x))+M[2]+4243563512&4294967295,B=I+(D<<9&4294967295|D>>>23),D=V+(I^x&(B^I))+M[7]+1735328473&4294967295,V=B+(D<<14&4294967295|D>>>18),D=x+(B^I&(V^B))+M[12]+2368359562&4294967295,x=V+(D<<20&4294967295|D>>>12),D=I+(x^V^B)+M[5]+4294588738&4294967295,I=x+(D<<4&4294967295|D>>>28),D=B+(I^x^V)+M[8]+2272392833&4294967295,B=I+(D<<11&4294967295|D>>>21),D=V+(B^I^x)+M[11]+1839030562&4294967295,V=B+(D<<16&4294967295|D>>>16),D=x+(V^B^I)+M[14]+4259657740&4294967295,x=V+(D<<23&4294967295|D>>>9),D=I+(x^V^B)+M[1]+2763975236&4294967295,I=x+(D<<4&4294967295|D>>>28),D=B+(I^x^V)+M[4]+1272893353&4294967295,B=I+(D<<11&4294967295|D>>>21),D=V+(B^I^x)+M[7]+4139469664&4294967295,V=B+(D<<16&4294967295|D>>>16),D=x+(V^B^I)+M[10]+3200236656&4294967295,x=V+(D<<23&4294967295|D>>>9),D=I+(x^V^B)+M[13]+681279174&4294967295,I=x+(D<<4&4294967295|D>>>28),D=B+(I^x^V)+M[0]+3936430074&4294967295,B=I+(D<<11&4294967295|D>>>21),D=V+(B^I^x)+M[3]+3572445317&4294967295,V=B+(D<<16&4294967295|D>>>16),D=x+(V^B^I)+M[6]+76029189&4294967295,x=V+(D<<23&4294967295|D>>>9),D=I+(x^V^B)+M[9]+3654602809&4294967295,I=x+(D<<4&4294967295|D>>>28),D=B+(I^x^V)+M[12]+3873151461&4294967295,B=I+(D<<11&4294967295|D>>>21),D=V+(B^I^x)+M[15]+530742520&4294967295,V=B+(D<<16&4294967295|D>>>16),D=x+(V^B^I)+M[2]+3299628645&4294967295,x=V+(D<<23&4294967295|D>>>9),D=I+(V^(x|~B))+M[0]+4096336452&4294967295,I=x+(D<<6&4294967295|D>>>26),D=B+(x^(I|~V))+M[7]+1126891415&4294967295,B=I+(D<<10&4294967295|D>>>22),D=V+(I^(B|~x))+M[14]+2878612391&4294967295,V=B+(D<<15&4294967295|D>>>17),D=x+(B^(V|~I))+M[5]+4237533241&4294967295,x=V+(D<<21&4294967295|D>>>11),D=I+(V^(x|~B))+M[12]+1700485571&4294967295,I=x+(D<<6&4294967295|D>>>26),D=B+(x^(I|~V))+M[3]+2399980690&4294967295,B=I+(D<<10&4294967295|D>>>22),D=V+(I^(B|~x))+M[10]+4293915773&4294967295,V=B+(D<<15&4294967295|D>>>17),D=x+(B^(V|~I))+M[1]+2240044497&4294967295,x=V+(D<<21&4294967295|D>>>11),D=I+(V^(x|~B))+M[8]+1873313359&4294967295,I=x+(D<<6&4294967295|D>>>26),D=B+(x^(I|~V))+M[15]+4264355552&4294967295,B=I+(D<<10&4294967295|D>>>22),D=V+(I^(B|~x))+M[6]+2734768916&4294967295,V=B+(D<<15&4294967295|D>>>17),D=x+(B^(V|~I))+M[13]+1309151649&4294967295,x=V+(D<<21&4294967295|D>>>11),D=I+(V^(x|~B))+M[4]+4149444226&4294967295,I=x+(D<<6&4294967295|D>>>26),D=B+(x^(I|~V))+M[11]+3174756917&4294967295,B=I+(D<<10&4294967295|D>>>22),D=V+(I^(B|~x))+M[2]+718787259&4294967295,V=B+(D<<15&4294967295|D>>>17),D=x+(B^(V|~I))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+B&4294967295}i.prototype.v=function(N,I){I===void 0&&(I=N.length);const x=I-this.blockSize,M=this.C;let V=this.h,B=0;for(;B<I;){if(V==0)for(;B<=x;)a(this,N,B),B+=this.blockSize;if(typeof N=="string"){for(;B<I;)if(M[V++]=N.charCodeAt(B++),V==this.blockSize){a(this,M),V=0;break}}else for(;B<I;)if(M[V++]=N[B++],V==this.blockSize){a(this,M),V=0;break}}this.h=V,this.o+=I},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;I=this.o*8;for(var x=N.length-8;x<N.length;++x)N[x]=I&255,I/=256;for(this.v(N),N=Array(16),I=0,x=0;x<4;++x)for(let M=0;M<32;M+=8)N[I++]=this.g[x]>>>M&255;return N};function l(N,I){var x=d;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=I(N)}function c(N,I){this.h=I;const x=[];let M=!0;for(let V=N.length-1;V>=0;V--){const B=N[V]|0;M&&B==I||(x[V]=B,M=!1)}this.g=x}var d={};function m(N){return-128<=N&&N<128?l(N,function(I){return new c([I|0],I<0?-1:0)}):new c([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return v;if(N<0)return L(g(-N));const I=[];let x=1;for(let M=0;N>=x;M++)I[M]=N/x|0,x*=4294967296;return new c(I,0)}function _(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return L(_(N.substring(1),I));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=g(Math.pow(I,8));let M=v;for(let B=0;B<N.length;B+=8){var V=Math.min(8,N.length-B);const D=parseInt(N.substring(B,B+V),I);V<8?(V=g(Math.pow(I,V)),M=M.j(V).add(g(D))):(M=M.j(x),M=M.add(g(D)))}return M}var v=m(0),b=m(1),R=m(16777216);n=c.prototype,n.m=function(){if(z(this))return-L(this).m();let N=0,I=1;for(let x=0;x<this.g.length;x++){const M=this.i(x);N+=(M>=0?M:4294967296+M)*I,I*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(U(this))return"0";if(z(this))return"-"+L(this).toString(N);const I=g(Math.pow(N,6));var x=this;let M="";for(;;){const V=re(x,I).g;x=te(x,V.j(I));let B=((x.g.length>0?x.g[0]:x.h)>>>0).toString(N);if(x=V,U(x))return B+M;for(;B.length<6;)B="0"+B;M=B+M}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function U(N){if(N.h!=0)return!1;for(let I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function z(N){return N.h==-1}n.l=function(N){return N=te(this,N),z(N)?-1:U(N)?0:1};function L(N){const I=N.g.length,x=[];for(let M=0;M<I;M++)x[M]=~N.g[M];return new c(x,~N.h).add(b)}n.abs=function(){return z(this)?L(this):this},n.add=function(N){const I=Math.max(this.g.length,N.g.length),x=[];let M=0;for(let V=0;V<=I;V++){let B=M+(this.i(V)&65535)+(N.i(V)&65535),D=(B>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);M=D>>>16,B&=65535,D&=65535,x[V]=D<<16|B}return new c(x,x[x.length-1]&-2147483648?-1:0)};function te(N,I){return N.add(L(I))}n.j=function(N){if(U(this)||U(N))return v;if(z(this))return z(N)?L(this).j(L(N)):L(L(this).j(N));if(z(N))return L(this.j(L(N)));if(this.l(R)<0&&N.l(R)<0)return g(this.m()*N.m());const I=this.g.length+N.g.length,x=[];for(var M=0;M<2*I;M++)x[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<N.g.length;V++){const B=this.i(M)>>>16,D=this.i(M)&65535,mt=N.i(V)>>>16,st=N.i(V)&65535;x[2*M+2*V]+=D*st,W(x,2*M+2*V),x[2*M+2*V+1]+=B*st,W(x,2*M+2*V+1),x[2*M+2*V+1]+=D*mt,W(x,2*M+2*V+1),x[2*M+2*V+2]+=B*mt,W(x,2*M+2*V+2)}for(N=0;N<I;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=I;N<2*I;N++)x[N]=0;return new c(x,0)};function W(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function $(N,I){this.g=N,this.h=I}function re(N,I){if(U(I))throw Error("division by zero");if(U(N))return new $(v,v);if(z(N))return I=re(L(N),I),new $(L(I.g),L(I.h));if(z(I))return I=re(N,L(I)),new $(L(I.g),I.h);if(N.g.length>30){if(z(N)||z(I))throw Error("slowDivide_ only works with positive integers.");for(var x=b,M=I;M.l(N)<=0;)x=ie(x),M=ie(M);var V=de(x,1),B=de(M,1);for(M=de(M,2),x=de(x,2);!U(M);){var D=B.add(M);D.l(N)<=0&&(V=V.add(x),B=D),M=de(M,1),x=de(x,1)}return I=te(N,V.j(I)),new $(V,I)}for(V=v;N.l(I)>=0;){for(x=Math.max(1,Math.floor(N.m()/I.m())),M=Math.ceil(Math.log(x)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),B=g(x),D=B.j(I);z(D)||D.l(N)>0;)x-=M,B=g(x),D=B.j(I);U(B)&&(B=b),V=V.add(B),N=te(N,D)}return new $(V,N)}n.B=function(N){return re(this,N).h},n.and=function(N){const I=Math.max(this.g.length,N.g.length),x=[];for(let M=0;M<I;M++)x[M]=this.i(M)&N.i(M);return new c(x,this.h&N.h)},n.or=function(N){const I=Math.max(this.g.length,N.g.length),x=[];for(let M=0;M<I;M++)x[M]=this.i(M)|N.i(M);return new c(x,this.h|N.h)},n.xor=function(N){const I=Math.max(this.g.length,N.g.length),x=[];for(let M=0;M<I;M++)x[M]=this.i(M)^N.i(M);return new c(x,this.h^N.h)};function ie(N){const I=N.g.length+1,x=[];for(let M=0;M<I;M++)x[M]=N.i(M)<<1|N.i(M-1)>>>31;return new c(x,N.h)}function de(N,I){const x=I>>5;I%=32;const M=N.g.length-x,V=[];for(let B=0;B<M;B++)V[B]=I>0?N.i(B+x)>>>I|N.i(B+x+1)<<32-I:N.i(B+x);return new c(V,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,lA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,bs=c}).apply(typeof E0<"u"?E0:typeof self<"u"?self:typeof window<"u"?window:{});var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uA,Wu,cA,xf,Ug,hA,fA,dA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof mf=="object"&&mf];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var q=h[A];if(!(q in E))break e;E=E[q]}h=h[h.length-1],A=E[h],y=y(A),y!=A&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&E.push([A,y[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=m,g.apply(null,arguments)}function _(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function v(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(A,q,Q){for(var le=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)le[xe-2]=arguments[xe];return y.prototype[q].apply(A,le)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const E=Array(y);for(let A=0;A<y;A++)E[A]=h[A];return E}return[]}function U(h,y){for(let A=1;A<arguments.length;A++){const q=arguments[A];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=h.length||0;const Q=q.length||0;h.length=E+Q;for(let le=0;le<Q;le++)h[E+le]=q[le]}else h.push(q)}}class z{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(h){c.setTimeout(()=>{throw h},0)}function te(){var h=N;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class W{constructor(){this.h=this.g=null}add(y,E){const A=$.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var $=new z(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,de=!1,N=new W,I=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(x)}};function x(){for(var h;h=te();){try{h.h.call(h.g)}catch(E){L(E)}var y=$;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}de=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function mt(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}v(mt,V),mt.prototype.init=function(h,y){const E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&mt.Z.h.call(this)},mt.prototype.h=function(){mt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),J=0;function he(h,y,E,A,q){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=q,this.key=++J,this.da=this.fa=!1}function ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ze(h,y,E){for(const A in h)y.call(E,h[A],A,h)}function O(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function se(h){const y={};for(const E in h)y[E]=h[E];return y}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,y){let E,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(E in A)h[E]=A[E];for(let Q=0;Q<fe.length;Q++)E=fe[Q],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function _e(h){this.src=h,this.g={},this.h=0}_e.prototype.add=function(h,y,E,A,q){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const le=we(h,y,A,q);return le>-1?(y=h[le],E||(y.fa=!1)):(y=new he(y,this.src,Q,!!A,q),y.fa=E,h.push(y)),y};function ke(h,y){const E=y.type;if(E in h.g){var A=h.g[E],q=Array.prototype.indexOf.call(A,y,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(A,q,1),Q&&(ve(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function we(h,y,E,A){for(let q=0;q<h.length;++q){const Q=h[q];if(!Q.da&&Q.listener==y&&Q.capture==!!E&&Q.ha==A)return q}return-1}var Ht="closure_lm_"+(Math.random()*1e6|0),Xe={};function nr(h,y,E,A,q){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)nr(h,y[Q],E,A,q);return null}return E=$c(E),h&&h[st]?h.J(y,E,d(A)?!!A.capture:!1,q):Ml(h,y,E,!1,A,q)}function Ml(h,y,E,A,q,Q){if(!y)throw Error("Invalid event type");const le=d(q)?!!q.capture:!!q;let xe=kl(h);if(xe||(h[Ht]=xe=new _e(h)),E=xe.add(y,E,A,le,Q),E.proxy)return E;if(A=Za(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)B||(q=le),q===void 0&&(q=!1),h.addEventListener(y.toString(),A,q);else if(h.attachEvent)h.attachEvent(to(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Za(){function h(E){return y.call(h.src,h.listener,E)}const y=nm;return h}function eo(h,y,E,A,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)eo(h,y[Q],E,A,q);else A=d(A)?!!A.capture:!!A,E=$c(E),h&&h[st]?(h=h.i,Q=String(y).toString(),Q in h.g&&(y=h.g[Q],E=we(y,E,A,q),E>-1&&(ve(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[Q],h.h--)))):h&&(h=kl(h))&&(y=h.g[y.toString()],h=-1,y&&(h=we(y,E,A,q)),(E=h>-1?y[h]:null)&&ks(E))}function ks(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[st])ke(y.i,h);else{var E=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(E,A,h.capture):y.detachEvent?y.detachEvent(to(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=kl(y))?(ke(E,h),E.h==0&&(E.src=null,y[Ht]=null)):ve(h)}}}function to(h){return h in Xe?Xe[h]:Xe[h]="on"+h}function nm(h,y){if(h.da)h=!0;else{y=new mt(y,this);const E=h.listener,A=h.ha||h.src;h.fa&&ks(h),h=E.call(A,y)}return h}function kl(h){return h=h[Ht],h instanceof _e?h:null}var gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function $c(h){return typeof h=="function"?h:(h[gn]||(h[gn]=function(y){return h.handleEvent(y)}),h[gn])}function Ot(){M.call(this),this.i=new _e(this),this.M=this,this.G=null}v(Ot,M),Ot.prototype[st]=!0,Ot.prototype.removeEventListener=function(h,y,E,A){eo(this,h,y,E,A)};function Ut(h,y){var E,A=h.G;if(A)for(E=[];A;A=A.G)E.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var q=y;y=new V(A,h),ce(y,q)}q=!0;let Q,le;if(E)for(le=E.length-1;le>=0;le--)Q=y.g=E[le],q=Kr(Q,A,!0,y)&&q;if(Q=y.g=h,q=Kr(Q,A,!0,y)&&q,q=Kr(Q,A,!1,y)&&q,E)for(le=0;le<E.length;le++)Q=y.g=E[le],q=Kr(Q,A,!1,y)&&q}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let A=0;A<E.length;A++)ve(E[A]);delete h.g[y],h.h--}}this.G=null},Ot.prototype.J=function(h,y,E,A){return this.i.add(String(h),y,!1,E,A)},Ot.prototype.K=function(h,y,E,A){return this.i.add(String(h),y,!0,E,A)};function Kr(h,y,E,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Q=0;Q<y.length;++Q){const le=y[Q];if(le&&!le.da&&le.capture==E){const xe=le.listener,it=le.ha||le.src;le.fa&&ke(h.i,le),q=xe.call(it,A)!==!1&&q}}return q&&!A.defaultPrevented}function rm(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Ll(h){h.g=rm(()=>{h.g=null,h.i&&(h.i=!1,Ll(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class im extends M{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ll(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(h){M.call(this),this.h=h,this.g={}}v(Ls,M);var Ri=[];function Jt(h){ze(h.g,function(y,E){this.g.hasOwnProperty(E)&&ks(y)},h),h.g={}}Ls.prototype.N=function(){Ls.Z.N.call(this),Jt(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=c.JSON.stringify,ln=c.JSON.parse,sm=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Yc(){}function Qc(){}var br={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xi(){V.call(this,"d")}v(xi,V);function rr(){V.call(this,"c")}v(rr,V);var Un={},Ci=null;function no(){return Ci=Ci||new Ot}Un.Ia="serverreachability";function Ul(h){V.call(this,Un.Ia,h)}v(Ul,V);function Di(h){const y=no();Ut(y,new Ul(y))}Un.STAT_EVENT="statevent";function ro(h,y){V.call(this,Un.STAT_EVENT,h),this.stat=y}v(ro,V);function Et(h){const y=no();Ut(y,new ro(y,h))}Un.Ja="timingevent";function Xc(h,y){V.call(this,Un.Ja,h),this.size=y}v(Xc,V);function Ni(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Oi(){this.g=!0}Oi.prototype.ua=function(){this.g=!1};function Bl(h,y,E,A,q,Q){h.info(function(){if(h.g)if(Q){var le="",xe=Q.split("&");for(let Ge=0;Ge<xe.length;Ge++){var it=xe[Ge].split("=");if(it.length>1){const wt=it[0];it=it[1];const wn=wt.split("_");le=wn.length>=2&&wn[1]=="type"?le+(wt+"="+it+"&"):le+(wt+"=redacted&")}}}else le=null;else le=Q;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+y+`
`+E+`
`+le})}function jl(h,y,E,A,q,Q,le){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+y+`
`+E+`
`+Q+" "+le})}function $r(h,y,E,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+wr(h,E)+(A?" "+A:"")})}function am(h,y){h.info(function(){return"TIMEOUT: "+y})}Oi.prototype.info=function(){};function wr(h,y){if(!h.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var E=Q[h];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let le=1;le<A.length;le++)A[le]=""}}}}return Ln(Q)}catch{return y}}var Tt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yr;function Us(){}v(Us,Yc),Us.prototype.g=function(){return new XMLHttpRequest},Yr=new Us;function Bs(h){return encodeURIComponent(String(h))}function om(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function ir(h,y,E,A){this.j=h,this.i=y,this.l=E,this.S=A||1,this.V=new Ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vi}function Vi(){this.i=null,this.g="",this.h=!1}var io={},Ar={};function Sr(h,y,E){h.M=1,h.A=Xr(ht(y)),h.u=E,h.R=!0,Pi(h,null)}function Pi(h,y){h.F=Date.now(),js(h),h.B=ht(h.A);var E=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),eh(E.i,"t",A),h.C=0,E=h.j.L,h.h=new Vi,h.g=po(h.j,E?y:null,!h.u),h.P>0&&(h.O=new im(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,A=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Ri[0]=q.toString()),q=Ri);for(let Q=0;Q<q.length;Q++){const le=nr(E,q[Q],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=h.J?se(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Di(),Bl(h.i,h.v,h.B,h.l,h.S,h.u)}ir.prototype.ba=function(h){h=h.target;const y=this.O;y&&Zt(h)==3?y.j():this.Y(h)},ir.prototype.Y=function(h){try{if(h==this.g)e:{const xe=Zt(this.g),it=this.g.ya(),Ge=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||Ws(this.g)))){this.K||xe!=4||it==7||(it==8||Ge<=0?Di(3):Di(2)),Rr(this);var y=this.g.ca();this.X=y;var E=Mi(this);if(this.o=y==200,jl(this.i,this.v,this.B,this.l,this.S,xe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(A)){var Q=A;break t}}Q=null}if(h=Q)$r(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,so(this,h);else{this.o=!1,this.m=3,Et(12),xr(this),zs(this);break e}}if(this.R){h=!0;let wt;for(;!this.K&&this.C<E.length;)if(wt=Wc(this,E),wt==Ar){xe==4&&(this.m=4,Et(14),h=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==io){this.m=4,Et(15),$r(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else $r(this.i,this.l,wt,null),so(this,wt);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||E.length!=0||this.h.h||(this.m=1,Et(16),h=!1),this.o=this.o&&h,!h)$r(this.i,this.l,E,"[Invalid Chunked Response]"),xr(this),zs(this);else if(E.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Xl(le),le.P=!0,Et(11))}}else $r(this.i,this.l,E,null),so(this,E);xe==4&&xr(this),this.o&&!this.K&&(xe==4?Wl(this.j,this):(this.o=!1,js(this)))}else Js(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),xr(this),zs(this)}}}catch{}finally{}};function Mi(h){if(!bt(h))return h.g.la();const y=Ws(h.g);if(y==="")return"";let E="";const A=y.length,q=Zt(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return xr(h),zs(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<A;Q++)h.h.h=!0,E+=h.h.i.decode(y[Q],{stream:!(q&&Q==A-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function bt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Wc(h,y){var E=h.C,A=y.indexOf(`
`,E);return A==-1?Ar:(E=Number(y.substring(E,A)),isNaN(E)?io:(A+=1,A+E>y.length?Ar:(y=y.slice(A,A+E),h.C=A+E,y)))}ir.prototype.cancel=function(){this.K=!0,xr(this)};function js(h){h.T=Date.now()+h.H,Ir(h,h.H)}function Ir(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ni(g(h.aa,h),y)}function Rr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ir.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(am(this.i,this.B),this.M!=2&&(Di(),Et(17)),xr(this),this.m=2,zs(this)):Ir(this,this.T-h)};function zs(h){h.j.I==0||h.K||Wl(h.j,h)}function xr(h){Rr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Jt(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function so(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Hs(E.h,h))){if(!h.L&&Hs(E.h,h)&&E.I==3){try{var A=E.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)mo(E),Cr(E);else break e;Ql(E),Et(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ni(g(E.Va,E),6e3));Bn(E.h)<=1&&E.ta&&(E.ta=void 0)}else Zr(E,11)}else if((h.L||E.g==h)&&mo(E),!D(y))for(q=E.Ba.g.parse(y),y=0;y<q.length;y++){let Ge=q[y];const wt=Ge[0];if(!(wt<=E.K))if(E.K=wt,Ge=Ge[1],E.I==2)if(Ge[0]=="c"){E.M=Ge[1],E.ba=Ge[2];const wn=Ge[3];wn!=null&&(E.ka=wn,E.j.info("VER="+E.ka));const Dr=Ge[4];Dr!=null&&(E.za=Dr,E.j.info("SVER="+E.za));const or=Ge[5];or!=null&&typeof or=="number"&&or>0&&(A=1.5*or,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const lr=h.g;if(lr){const ur=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ur){var Q=A.h;Q.g||ur.indexOf("spdy")==-1&&ur.indexOf("quic")==-1&&ur.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ao(Q,Q.h),Q.h=null))}if(A.G){const Zl=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zl&&(A.wa=Zl,We(A.J,A.G,Zl))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var le=h;if(A.na=uh(A,A.L?A.ba:null,A.W),le.L){Qr(A.h,le);var xe=le,it=A.O;it&&(xe.H=it),xe.D&&(Rr(xe),js(xe)),A.g=le}else sh(A);E.i.length>0&&na(E)}else Ge[0]!="stop"&&Ge[0]!="close"||Zr(E,7);else E.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Zr(E,7):ea(E):Ge[0]!="noop"&&E.l&&E.l.qa(Ge),E.A=0)}}Di(4)}catch{}}var lm=class{constructor(h,y){this.g=h,this.map=y}};function Fs(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qs(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Bn(h){return h.h?1:h.g?h.g.size:0}function Hs(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ao(h,y){h.g?h.g.add(y):h.h=y}function Qr(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Fs.prototype.cancel=function(){if(this.i=oo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function oo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return R(h.i)}var lo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function um(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const A=h[E].indexOf("=");let q,Q=null;A>=0?(q=h[E].substring(0,A),Q=h[E].substring(A+1)):q=h[E],y(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function sr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof sr?(this.l=h.l,ki(this,h.j),this.o=h.o,this.g=h.g,Gs(this,h.u),this.h=h.h,Li(this,th(h.i)),this.m=h.m):h&&(y=String(h).match(lo))?(this.l=!1,ki(this,y[1]||"",!0),this.o=Ks(y[2]||""),this.g=Ks(y[3]||"",!0),Gs(this,y[4]),this.h=Ks(y[5]||"",!0),Li(this,y[6]||"",!0),this.m=Ks(y[7]||"")):(this.l=!1,this.i=new jn(null,this.l))}sr.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Bt(y,Fl,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Bt(y,Fl,!0),"@"),h.push(Bs(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Bt(E,E.charAt(0)=="/"?Ui:ql,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Bt(E,Zc)),h.join("")},sr.prototype.resolve=function(h){const y=ht(this);let E=!!h.j;E?ki(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var A=h.h;if(E)Gs(y,h.u);else if(E=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=y.h.lastIndexOf("/");q!=-1&&(A=y.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let le=0;le<q.length;){const xe=q[le++];xe=="."?A&&le==q.length&&Q.push(""):xe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),A&&le==q.length&&Q.push("")):(Q.push(xe),A=!0)}A=Q.join("/")}else A=q}return E?y.h=A:E=h.i.toString()!=="",E?Li(y,th(h.i)):E=!!h.m,E&&(y.m=h.m),y};function ht(h){return new sr(h)}function ki(h,y,E){h.j=E?Ks(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Gs(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Li(h,y,E){y instanceof jn?(h.i=y,Kl(h.i,h.l)):(E||(y=Bt(y,Jc)),h.i=new jn(y,h.l))}function We(h,y,E){h.i.set(y,E)}function Xr(h){return We(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ks(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bt(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,zl),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function zl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fl=/[#\/\?@]/g,ql=/[#\?:]/g,Ui=/[#\?]/g,Jc=/[#\?@]/g,Zc=/#/g;function jn(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Wr(h){h.g||(h.g=new Map,h.h=0,h.i&&um(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=jn.prototype,n.add=function(h,y){Wr(this),this.i=null,h=ar(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function Hl(h,y){Wr(h),y=ar(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Gl(h,y){return Wr(h),y=ar(h,y),h.g.has(y)}n.forEach=function(h,y){Wr(this),this.g.forEach(function(E,A){E.forEach(function(q){h.call(y,q,A,this)},this)},this)};function uo(h,y){Wr(h);let E=[];if(typeof y=="string")Gl(h,y)&&(E=E.concat(h.g.get(ar(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}n.set=function(h,y){return Wr(this),this.i=null,h=ar(this,h),Gl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=uo(this,h),h.length>0?String(h[0]):y):y};function eh(h,y,E){Hl(h,y),E.length>0&&(h.i=null,h.g.set(ar(h,y),R(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var E=y[A];const q=Bs(E);E=uo(this,E);for(let Q=0;Q<E.length;Q++){let le=q;E[Q]!==""&&(le+="="+Bs(E[Q])),h.push(le)}}return this.i=h.join("&")};function th(h){const y=new jn;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function ar(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Kl(h,y){y&&!h.j&&(Wr(h),h.i=null,h.g.forEach(function(E,A){const q=A.toLowerCase();A!=q&&(Hl(this,A),eh(this,q,E))},h)),h.j=y}function $l(h,y){const E=new Oi;if(c.Image){const A=new Image;A.onload=_(un,E,"TestLoadImage: loaded",!0,y,A),A.onerror=_(un,E,"TestLoadImage: error",!1,y,A),A.onabort=_(un,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=_(un,E,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function Bi(h,y){const E=new Oi,A=new AbortController,q=setTimeout(()=>{A.abort(),un(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(Q=>{clearTimeout(q),Q.ok?un(E,"TestPingServer: ok",!0,y):un(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),un(E,"TestPingServer: error",!1,y)})}function un(h,y,E,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(E)}catch{}}function nh(){this.g=new sm}function $s(h){this.i=h.Sb||null,this.h=h.ab||!1}v($s,Yc),$s.prototype.g=function(){return new Ys(this.i,this.h)};function Ys(h,y){Ot.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ys,Ot),n=Ys.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Jr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cn(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ji(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ji(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?cn(this):Jr(this),this.readyState==3&&ji(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,cn(this))},n.Na=function(h){this.g&&(this.response=h,cn(this))},n.ga=function(){this.g&&cn(this)};function cn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Jr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function Jr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function zi(h){let y="";return ze(h,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function zn(h,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=zi(E),typeof h=="string"?E!=null&&Bs(E):We(h,y,E))}function nt(h){Ot.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(nt,Ot);var co=/^https?$/i,rh=["POST","PUT"];n=nt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yr.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){Qs(this,Q);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)E.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())E.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(rh,y,void 0)>=0)||A||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of E)this.g.setRequestHeader(Q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){Qs(this,Q)}};function Qs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Xs(h),Vt(h)}function Xs(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Vt(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Yl(this):this.Xa())},n.Xa=function(){Yl(this)};function Yl(h){if(h.h&&typeof l<"u"){if(h.v&&Zt(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),Zt(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=Q===0){let le=String(h.D).match(lo)[1]||null;!le&&c.self&&c.self.location&&(le=c.self.location.protocol.slice(0,-1)),A=!co.test(le?le.toLowerCase():"")}E=A}if(E)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var q=Zt(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Xs(h)}}finally{Vt(h)}}}}function Vt(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||Ut(h,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zt(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Zt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ln(y)}};function Ws(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Js(h){const y={};h=(h.g&&Zt(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(D(h[A]))continue;var E=om(h[A]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=y[q]||[];y[q]=Q,Q.push(E)}O(y,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function ho(h){this.za=0,this.i=[],this.j=new Oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zs("baseRetryDelayMs",5e3,h),this.Za=Zs("retryDelaySeedMs",1e4,h),this.Ta=Zs("forwardChannelMaxRetries",2,h),this.va=Zs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Fs(h&&h.concurrentRequestLimit),this.Ba=new nh,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ho.prototype,n.ka=8,n.I=1,n.connect=function(h,y,E,A){Et(0),this.W=h,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=uh(this,null,this.W),na(this)};function ea(h){if(ta(h),h.I==3){var y=h.V++,E=ht(h.J);if(We(E,"SID",h.M),We(E,"RID",y),We(E,"TYPE","terminate"),ra(h,E),y=new ir(h,h.j,y),y.M=2,y.A=Xr(ht(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=po(y.j,null),y.g.ea(y.A)),y.F=Date.now(),js(y)}lh(h)}function Cr(h){h.g&&(Xl(h),h.g.cancel(),h.g=null)}function ta(h){Cr(h),h.v&&(c.clearTimeout(h.v),h.v=null),mo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function na(h){if(!qs(h.h)&&!h.m){h.m=!0;var y=h.Ea;ie||I(),de||(ie(),de=!0),N.add(y,h),h.D=0}}function cm(h,y){return Bn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ni(g(h.Ea,h,y),oh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new ir(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=se(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=fo(this,q,y),E=ht(this.J),We(E,"RID",h),We(E,"CVER",22),this.G&&We(E,"X-HTTP-Session-Id",this.G),ra(this,E),Q&&(this.R?y="headers="+Bs(zi(Q))+"&"+y:this.u&&zn(E,this.u,Q)),ao(this.h,q),this.Ra&&We(E,"TYPE","init"),this.S?(We(E,"$req",y),We(E,"SID","null"),q.U=!0,Sr(q,E,null)):Sr(q,E,y),this.I=2}}else this.I==3&&(h?ih(this,h):this.i.length==0||qs(this.h)||ih(this))};function ih(h,y){var E;y?E=y.l:E=h.V++;const A=ht(h.J);We(A,"SID",h.M),We(A,"RID",E),We(A,"AID",h.K),ra(h,A),h.u&&h.o&&zn(A,h.u,h.o),E=new ir(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=fo(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ao(h.h,E),Sr(E,A,y)}function ra(h,y){h.H&&ze(h.H,function(E,A){We(y,A,E)}),h.l&&ze({},function(E,A){We(y,A,E)})}function fo(h,y,E){E=Math.min(h.i.length,E);const A=h.l?g(h.l.Ka,h.l,h):null;e:{var q=h.i;let xe=-1;for(;;){const it=["count="+E];xe==-1?E>0?(xe=q[0].g,it.push("ofs="+xe)):xe=0:it.push("ofs="+xe);let Ge=!0;for(let wt=0;wt<E;wt++){var Q=q[wt].g;const wn=q[wt].map;if(Q-=xe,Q<0)xe=Math.max(0,q[wt].g-100),Ge=!1;else try{Q="req"+Q+"_"||"";try{var le=wn instanceof Map?wn:Object.entries(wn);for(const[Dr,or]of le){let lr=or;d(or)&&(lr=Ln(or)),it.push(Q+Dr+"="+encodeURIComponent(lr))}}catch(Dr){throw it.push(Q+"type="+encodeURIComponent("_badmap")),Dr}}catch{A&&A(wn)}}if(Ge){le=it.join("&");break e}}le=void 0}return h=h.i.splice(0,E),y.G=h,le}function sh(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ie||I(),de||(ie(),de=!0),N.add(y,h),h.A=0}}function Ql(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ni(g(h.Da,h),oh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ah(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ni(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Cr(this),ah(this))};function Xl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ah(h){h.g=new ir(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=ht(h.na);We(y,"RID","rpc"),We(y,"SID",h.M),We(y,"AID",h.K),We(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&We(y,"TO",h.ia),We(y,"TYPE","xmlhttp"),ra(h,y),h.u&&h.o&&zn(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Xr(ht(y)),E.u=null,E.R=!0,Pi(E,h)}n.Va=function(){this.C!=null&&(this.C=null,Cr(this),Ql(this),Et(19))};function mo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Wl(h,y){var E=null;if(h.g==y){mo(h),Xl(h),h.g=null;var A=2}else if(Hs(h.h,y))E=y.G,Qr(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;A=no(),Ut(A,new Xc(A,E)),na(h)}else sh(h);else if(q=y.m,q==3||q==0&&y.X>0||!(A==1&&cm(h,y)||A==2&&Ql(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),q){case 1:Zr(h,5);break;case 4:Zr(h,10);break;case 3:Zr(h,6);break;default:Zr(h,2)}}}function oh(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function Zr(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),A=h.Ua;const q=!A;A=new sr(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ki(A,"https"),Xr(A),q?$l(A.toString(),E):Bi(A.toString(),E)}else Et(2);h.I=0,h.l&&h.l.pa(y),lh(h),ta(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function lh(h){if(h.I=0,h.ja=[],h.l){const y=oo(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ja,y),U(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function uh(h,y,E){var A=E instanceof sr?ht(E):new sr(E);if(A.g!="")y&&(A.g=y+"."+A.g),Gs(A,A.u);else{var q=c.location;A=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Q=new sr(null);A&&ki(Q,A),y&&(Q.g=y),q&&Gs(Q,q),E&&(Q.h=E),A=Q}return E=h.G,y=h.wa,E&&y&&We(A,E,y),We(A,"VER",h.ka),ra(h,A),A}function po(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new nt(new $s({ab:E})):new nt(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ch(){}n=ch.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function go(){}go.prototype.g=function(h,y){return new hn(h,y)};function hn(h,y){Ot.call(this),this.g=new ho(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!D(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!D(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Fi(this)}v(hn,Ot),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){ea(this.g)},hn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Ln(h),h=E);y.i.push(new lm(y.Ya++,h)),y.I==3&&na(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,ea(this.g),delete this.g,hn.Z.N.call(this)};function Jl(h){xi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}v(Jl,xi);function hh(){rr.call(this),this.status=1}v(hh,rr);function Fi(h){this.g=h}v(Fi,ch),Fi.prototype.ra=function(){Ut(this.g,"a")},Fi.prototype.qa=function(h){Ut(this.g,new Jl(h))},Fi.prototype.pa=function(h){Ut(this.g,new hh)},Fi.prototype.oa=function(){Ut(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,dA=function(){return new go},fA=function(){return no()},hA=Un,Ug={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tt.NO_ERROR=0,Tt.TIMEOUT=8,Tt.HTTP_ERROR=6,xf=Tt,Gt.COMPLETE="complete",cA=Gt,Qc.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Wu=Qc,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,uA=nt}).apply(typeof mf<"u"?mf:typeof self<"u"?self:typeof window<"u"?window:{});const T0="@firebase/firestore",b0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new bd("@firebase/firestore");function el(){return ka.logLevel}function ae(n,...e){if(ka.logLevel<=Le.DEBUG){const t=e.map(Ry);ka.debug(`Firestore (${Dl}): ${n}`,...t)}}function mn(n,...e){if(ka.logLevel<=Le.ERROR){const t=e.map(Ry);ka.error(`Firestore (${Dl}): ${n}`,...t)}}function La(n,...e){if(ka.logLevel<=Le.WARN){const t=e.map(Ry);ka.warn(`Firestore (${Dl}): ${n}`,...t)}}function Ry(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,mA(n,i,t)}function mA(n,e,t){let i=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw mn(i),new Error(i)}function ge(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||mA(e,a,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Qt.UNAUTHENTICATED)))}shutdown(){}}class MN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kN{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new jr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new jr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ge(typeof i.accessToken=="string",31837,{l:i}),new pA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class LN{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UN{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new LN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class w0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);const i=l=>{l.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new w0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new w0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=jN(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ie(n,e){return n<e?-1:n>e?1:0}function Bg(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return mg(a)===mg(l)?Ie(a,l):mg(a)?1:-1}return Ie(n.length,e.length)}const zN=55296,FN=57343;function mg(n){const e=n.charCodeAt(0);return e>=zN&&e<=FN}function dl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}function gA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="__name__";class kr{constructor(e,t,i){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&pe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return kr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=kr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ie(e.length,t.length)}static compareSegments(e,t){const i=kr.isNumericId(e),a=kr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?kr.extractNumericId(e).compare(kr.extractNumericId(t)):Bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bs.fromString(e.substring(4,e.length-2))}}class He extends kr{construct(e,t,i){return new He(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new oe(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new He(t)}static emptyPath(){return new He([])}}const qN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends kr{construct(e,t,i){return new dt(e,t,i)}static isValidIdentifier(e){return qN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===A0}static keyField(){return new dt([A0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new oe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new oe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new oe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(He.fromString(e))}static fromName(e){return new ue(He.fromString(e).popFirst(5))}static empty(){return new ue(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n,e,t){if(!t)throw new oe(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HN(n,e,t,i){if(e===!0&&i===!0)throw new oe(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function S0(n){if(!ue.isDocumentKey(n))throw new oe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I0(n){if(ue.isDocumentKey(n))throw new oe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _A(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ad(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe(12329,{type:typeof n})}function er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ad(n);throw new oe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Mc(n,e){if(!_A(n))throw new oe(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new oe(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=-62135596800,x0=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*x0);return new Ve(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<R0)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x0}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mc(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-R0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:Dt("string",Ve._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ve(0,0))}static max(){return new Ee(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=-1;class Yf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function jg(n){return n.fields.find((e=>e.kind===2))}function Ta(n){return n.fields.filter((e=>e.kind!==2))}Yf.UNKNOWN_ID=-1;class Cf{constructor(e,t){this.fieldPath=e,this.kind=t}}class yc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yc(0,kn.min())}}function GN(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(i===1e9?new Ve(t+1,0):new Ve(t,i));return new kn(a,ue.empty(),e)}function vA(n){return new kn(n.readTime,n.key,gc)}class kn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new kn(Ee.min(),ue.empty(),gc)}static max(){return new kn(Ee.max(),ue.empty(),gc)}}function Cy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:Ie(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==EA)throw n;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,i)=>{t(e)}))}static reject(e){return new j(((t,i)=>{i(e)}))}static waitFor(e){return new j(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>i(m)))})),c=!0,l===a&&t()}))}static or(e){let t=j.resolve(!1);for(const i of e)t=t.next((a=>a?j.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new j(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++d,d===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new j(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="SimpleDb";class Sd{static open(e,t,i,a){try{return new Sd(t,e.transaction(a,i))}catch(l){throw new rc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new jr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new rc(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=Dy(i.target.error);this.S.reject(new rc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ae(Nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $N(t)}}class ws{static delete(e){return ae(Nn,"Removing database:",e),wa(Gw().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Sy())return!1;if(ws.F())return!0;const e=kt(),t=ws.M(e),i=0<t&&t<10,a=bA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,ws.M(kt())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ae(Nn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new rc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new oe(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new oe(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new rc(e,c))},a.onupgradeneeded=l=>{ae(Nn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{ae(Nn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=Sd.open(this.db,e,l?"readonly":"readwrite",i),m=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),j.reject(g)))).toPromise();return m.catch((()=>{})),await d.D,m}catch(d){const m=d,g=m.name!=="FirebaseError"&&c<3;if(ae(Nn,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function bA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class KN{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return wa(this.U.delete())}}class rc extends oe{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vs(n){return n.name==="IndexedDbTransactionError"}class $N{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ae(Nn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(ae(Nn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),wa(i)}add(e){return ae(Nn,"ADD",this.store.name,e,e),wa(this.store.add(e))}get(e){return wa(this.store.get(e)).next((t=>(t===void 0&&(t=null),ae(Nn,"GET",this.store.name,e,t),t)))}delete(e){return ae(Nn,"DELETE",this.store.name,e),wa(this.store.delete(e))}count(){return ae(Nn,"COUNT",this.store.name),wa(this.store.count())}J(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new j(((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(i),c=[];return this.H(l,((d,m)=>{c.push(m)})).next((()=>c))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new j(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){ae(Nn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}te(e){const t=this.cursor({});return new j(((i,a)=>{t.onerror=l=>{const c=Dy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}H(e,t){const i=[];return new j(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new KN(d),g=t(d.primaryKey,d.value,m);if(g instanceof j){const _=g.catch((v=>(m.done(),j.reject(v))));i.push(_)}m.isDone?a():m.G===null?d.continue():d.continue(m.G)}})).next((()=>j.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wa(n){return new j(((e,t)=>{n.onsuccess=i=>{const a=i.target.result;e(a)},n.onerror=i=>{const a=Dy(i.target.error);t(a)}}))}let C0=!1;function Dy(n){const e=ws.M(kt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return C0||(C0=!0,setTimeout((()=>{throw i}),0)),i}}return n}const ic="IndexBackfiller";class YN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ae(ic,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ae(ic,`Documents written: ${t}`)}catch(t){Vs(t)?ae(ic,"Ignoring IndexedDB error during index backfill: ",t):await Xa(t)}await this.re(6e4)}))}}class QN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return j.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return ae(ic,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(ae(ic,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=vA(l);Cy(c,i)>0&&(i=c)})),new kn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=-1;function Id(n){return n==null}function _c(n){return n===0&&1/n==-1/0}function XN(n){return typeof n=="number"&&Number.isInteger(n)&&!_c(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="";function on(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D0(e)),e=WN(n.get(t),e);return D0(e)}function WN(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Qf:t+="";break;default:t+=l}}return t}function D0(n){return n+Qf+""}function Lr(n){const e=n.length;if(ge(e>=2,64408,{path:n}),e===2)return ge(n.charAt(0)===Qf&&n.charAt(1)==="",56145,{path:n}),He.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=n.indexOf(Qf,l);switch((c<0||c>t)&&pe(50515,{path:n}),n.charAt(c+1)){case"":const d=n.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),i.push(m);break;case"":a+=n.substring(l,c),a+="\0";break;case"":a+=n.substring(l,c+1);break;default:pe(61167,{path:n})}l=c+2}return new He(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="remoteDocuments",kc="owner",Go="owner",vc="mutationQueues",JN="userId",dr="mutations",N0="batchId",Ra="userMutationsIndex",O0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(n,e){return[n,on(e)]}function wA(n,e,t){return[n,on(e),t]}const ZN={},ml="documentMutations",Xf="remoteDocumentsV14",e2=["prefixPath","collectionGroup","readTime","documentId"],Nf="documentKeyIndex",t2=["prefixPath","collectionGroup","documentId"],AA="collectionGroupIndex",n2=["collectionGroup","readTime","prefixPath","documentId"],Ec="remoteDocumentGlobal",zg="remoteDocumentGlobalKey",pl="targets",SA="queryTargetsIndex",r2=["canonicalId","targetId"],gl="targetDocuments",i2=["targetId","path"],Ny="documentTargetsIndex",s2=["path","targetId"],Wf="targetGlobalKey",Na="targetGlobal",Tc="collectionParents",a2=["collectionId","parent"],yl="clientMetadata",o2="clientId",Rd="bundles",l2="bundleId",xd="namedQueries",u2="name",Oy="indexConfiguration",c2="indexId",Fg="collectionGroupIndex",h2="collectionGroup",sc="indexState",f2=["indexId","uid"],IA="sequenceNumberIndex",d2=["uid","sequenceNumber"],ac="indexEntries",m2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RA="documentKeyIndex",p2=["indexId","uid","orderedDocumentKey"],Cd="documentOverlays",g2=["userId","collectionPath","documentId"],qg="collectionPathOverlayIndex",y2=["userId","collectionPath","largestBatchId"],xA="collectionGroupOverlayIndex",_2=["userId","collectionGroup","largestBatchId"],Vy="globals",v2="name",CA=[vc,dr,ml,ba,pl,kc,Na,gl,yl,Ec,Tc,Rd,xd],E2=[...CA,Cd],DA=[vc,dr,ml,Xf,pl,kc,Na,gl,yl,Ec,Tc,Rd,xd,Cd],NA=DA,Py=[...NA,Oy,sc,ac],T2=Py,OA=[...Py,Vy],b2=OA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg extends TA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Lt(n,e){const t=Re(n);return ws.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ps(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pf(this.root,e,this.comparator,!0)}}class pf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Xt.RED,this.left=a??Xt.EMPTY,this.right=l??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Xt(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Xt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P0(this.data.getIterator())}getIteratorFrom(e){return new P0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qe(this.comparator);return t.data=e,t}}class P0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ko(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new En([])}unionWith(e){let t=new Qe(dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new En(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new PA("Invalid base64 string: "+l):l}})(e);return new Nt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const w2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(n){if(ge(!!n,39018),typeof n=="string"){let e=0;const t=w2.exec(n);if(ge(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wi(n){return typeof n=="string"?Nt.fromBase64String(n):Nt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="server_timestamp",kA="__type__",LA="__previous_value__",UA="__local_write_time__";function My(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[kA])==null?void 0:i.stringValue)===MA}function Dd(n){const e=n.mapValue.fields[LA];return My(e)?Dd(e):e}function bc(n){const e=bi(n.mapValue.fields[UA].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t,i,a,l,c,d,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const Jf="(default)";class Ua{constructor(e,t){this.projectId=e,this.database=t||Jf}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database===Jf}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="__type__",BA="__max__",vs={mapValue:{fields:{__type__:{stringValue:BA}}}},Ly="__vector__",_l="value",Of={nullValue:"NULL_VALUE"};function Is(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?My(n)?4:jA(n)?9007199254740991:Nd(n)?10:11:pe(28295,{value:n})}function Hr(n,e){if(n===e)return!0;const t=Is(n);if(t!==Is(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bc(n).isEqual(bc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=bi(a.timestampValue),d=bi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return wi(a.bytesValue).isEqual(wi(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return ot(a.geoPointValue.latitude)===ot(l.geoPointValue.latitude)&&ot(a.geoPointValue.longitude)===ot(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return ot(a.integerValue)===ot(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ot(a.doubleValue),d=ot(l.doubleValue);return c===d?_c(c)===_c(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return dl(n.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(V0(c)!==V0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Hr(c[m],d[m])))return!1;return!0})(n,e);default:return pe(52216,{left:n})}}function wc(n,e){return(n.values||[]).find((t=>Hr(t,e)))!==void 0}function Rs(n,e){if(n===e)return 0;const t=Is(n),i=Is(e);if(t!==i)return Ie(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=ot(l.integerValue||l.doubleValue),m=ot(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return M0(n.timestampValue,e.timestampValue);case 4:return M0(bc(n),bc(e));case 5:return Bg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=wi(l),m=wi(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=Ie(d[g],m[g]);if(_!==0)return _}return Ie(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ie(ot(l.latitude),ot(c.latitude));return d!==0?d:Ie(ot(l.longitude),ot(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return k0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,R,U,z;const d=l.fields||{},m=c.fields||{},g=(b=d[_l])==null?void 0:b.arrayValue,_=(R=m[_l])==null?void 0:R.arrayValue,v=Ie(((U=g==null?void 0:g.values)==null?void 0:U.length)||0,((z=_==null?void 0:_.values)==null?void 0:z.length)||0);return v!==0?v:k0(g,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===vs.mapValue&&c===vs.mapValue)return 0;if(l===vs.mapValue)return 1;if(c===vs.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let v=0;v<m.length&&v<_.length;++v){const b=Bg(m[v],_[v]);if(b!==0)return b;const R=Rs(d[m[v]],g[_[v]]);if(R!==0)return R}return Ie(m.length,_.length)})(n.mapValue,e.mapValue);default:throw pe(23264,{he:t})}}function M0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ie(n,e);const t=bi(n),i=bi(e),a=Ie(t.seconds,i.seconds);return a!==0?a:Ie(t.nanos,i.nanos)}function k0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Rs(t[a],i[a]);if(l)return l}return Ie(t.length,i.length)}function vl(n){return Gg(n)}function Gg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=bi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return wi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ue.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Gg(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Gg(t.fields[c])}`;return a+"}"})(n.mapValue):pe(61005,{value:n})}function Vf(n){switch(Is(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dd(n);return e?16+Vf(e):16;case 5:return 2*n.stringValue.length;case 6:return wi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Vf(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ps(i.fields,((l,c)=>{a+=l.length+Vf(c)})),a})(n.mapValue);default:throw pe(13486,{value:n})}}function Ac(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kg(n){return!!n&&"integerValue"in n}function Sc(n){return!!n&&"arrayValue"in n}function L0(n){return!!n&&"nullValue"in n}function U0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pf(n){return!!n&&"mapValue"in n}function Nd(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[ky])==null?void 0:i.stringValue)===Ly}function oc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ps(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=oc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oc(n.arrayValue.values[t]);return e}return{...n}}function jA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===BA}const zA={mapValue:{fields:{[ky]:{stringValue:Ly},[_l]:{arrayValue:{}}}}};function S2(n){return"nullValue"in n?Of:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ac(Ua.empty(),ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Nd(n)?zA:{mapValue:{}}:pe(35942,{value:n})}function I2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ac(Ua.empty(),ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?zA:"mapValue"in n?Nd(n)?{mapValue:{}}:vs:pe(61959,{value:n})}function B0(n,e){const t=Rs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function j0(n,e){const t=Rs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Pf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(t)}setAll(e){let t=dt.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=oc(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Pf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Pf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ps(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new sn(oc(this.value))}}function FA(n){const e=[];return Ps(n.fields,((t,i)=>{const a=new dt([t]);if(Pf(i)){const l=FA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new yt(e,0,Ee.min(),Ee.min(),Ee.min(),sn.empty(),0)}static newFoundDocument(e,t,i,a){return new yt(e,1,t,Ee.min(),i,a,0)}static newNoDocument(e,t){return new yt(e,2,t,Ee.min(),Ee.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,Ee.min(),Ee.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t){this.position=e,this.inclusive=t}}function z0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=ue.comparator(ue.fromName(c.referenceValue),t.key):i=Rs(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function F0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function R2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{}class Ue extends qA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new x2(e,t,i):t==="array-contains"?new N2(e,i):t==="in"?new QA(e,i):t==="not-in"?new O2(e,i):t==="array-contains-any"?new V2(e,i):new Ue(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new C2(e,i):new D2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Rs(t,this.value)):t!==null&&Is(this.value)===Is(t)&&this.matchesComparison(Rs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends qA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ye(e,t)}matches(e){return Tl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Tl(n){return n.op==="and"}function $g(n){return n.op==="or"}function Uy(n){return HA(n)&&Tl(n)}function HA(n){for(const e of n.filters)if(e instanceof Ye)return!1;return!0}function Yg(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+vl(n.value);if(Uy(n))return n.filters.map((e=>Yg(e))).join(",");{const e=n.filters.map((t=>Yg(t))).join(",");return`${n.op}(${e})`}}function GA(n,e){return n instanceof Ue?(function(i,a){return a instanceof Ue&&i.op===a.op&&i.field.isEqual(a.field)&&Hr(i.value,a.value)})(n,e):n instanceof Ye?(function(i,a){return a instanceof Ye&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&GA(c,a.filters[d])),!0):!1})(n,e):void pe(19439)}function KA(n,e){const t=n.filters.concat(e);return Ye.create(t,n.op)}function $A(n){return n instanceof Ue?(function(t){return`${t.field.canonicalString()} ${t.op} ${vl(t.value)}`})(n):n instanceof Ye?(function(t){return t.op.toString()+" {"+t.getFilters().map($A).join(" ,")+"}"})(n):"Filter"}class x2 extends Ue{constructor(e,t,i){super(e,t,i),this.key=ue.fromName(i.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class C2 extends Ue{constructor(e,t){super(e,"in",t),this.keys=YA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class D2 extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=YA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function YA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ue.fromName(i.referenceValue)))}class N2 extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sc(t)&&wc(t.arrayValue,this.value)}}class QA extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wc(this.value.arrayValue,t)}}class O2 extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wc(this.value.arrayValue,t)}}class V2 extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>wc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Qg(n,e=null,t=[],i=[],a=null,l=null,c=null){return new P2(n,e,t,i,a,l,c)}function Ba(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Yg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Id(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>vl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>vl(i))).join(",")),e.Te=t}return e.Te}function Lc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!R2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!GA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!F0(n.startAt,e.startAt)&&F0(n.endAt,e.endAt)}function Zf(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ed(n,e){return n.filters.filter((t=>t instanceof Ue&&t.field.isEqual(e)))}function q0(n,e,t){let i=Of,a=!0;for(const l of ed(n,e)){let c=Of,d=!0;switch(l.op){case"<":case"<=":c=S2(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Of}B0({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];B0({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function H0(n,e,t){let i=vs,a=!0;for(const l of ed(n,e)){let c=vs,d=!0;switch(l.op){case">=":case">":c=I2(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=vs}j0({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];j0({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function M2(n,e,t,i,a,l,c,d){return new Nl(n,e,t,i,a,l,c,d)}function Od(n){return new Nl(n)}function G0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function XA(n){return n.collectionGroup!==null}function lc(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Qe(dt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ic(l,i))})),t.has(dt.keyField().canonicalString())||e.Ie.push(new Ic(dt.keyField(),i))}return e.Ie}function Jn(n){const e=Re(n);return e.Ee||(e.Ee=k2(e,lc(n))),e.Ee}function k2(n,e){if(n.limitType==="F")return Qg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Ic(a.field,l)}));const t=n.endAt?new El(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new El(n.startAt.position,n.startAt.inclusive):null;return Qg(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Xg(n,e){const t=n.filters.concat([e]);return new Nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wg(n,e,t){return new Nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vd(n,e){return Lc(Jn(n),Jn(e))&&n.limitType===e.limitType}function WA(n){return`${Ba(Jn(n))}|lt:${n.limitType}`}function tl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>$A(a))).join(", ")}]`),Id(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>vl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>vl(a))).join(",")),`Target(${i})`})(Jn(n))}; limitType=${n.limitType})`}function Uc(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ue.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of lc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,m){const g=z0(c,d,m);return c.inclusive?g<=0:g<0})(i.startAt,lc(i),a)||i.endAt&&!(function(c,d,m){const g=z0(c,d,m);return c.inclusive?g>=0:g>0})(i.endAt,lc(i),a))})(n,e)}function L2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JA(n){return(e,t)=>{let i=!1;for(const a of lc(n)){const l=U2(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function U2(n,e,t){const i=n.field.isKeyField()?ue.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Rs(m,g):pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return VA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=new ct(ue.comparator);function Vn(){return B2}const ZA=new ct(ue.comparator);function Ju(...n){let e=ZA;for(const t of n)e=e.insert(t.key,t);return e}function eS(n){let e=ZA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ur(){return uc()}function tS(){return uc()}function uc(){return new Si((n=>n.toString()),((n,e)=>n.isEqual(e)))}const j2=new ct(ue.comparator),z2=new Qe(ue.comparator);function Ne(...n){let e=z2;for(const t of n)e=e.add(t);return e}const F2=new Qe(Ie);function q2(){return F2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(e)?"-0":e}}function nS(n){return{integerValue:""+n}}function H2(n,e){return XN(e)?nS(e):By(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this._=void 0}}function G2(n,e,t){return n instanceof Rc?(function(a,l){const c={fields:{[kA]:{stringValue:MA},[UA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&My(l)&&(l=Dd(l)),l&&(c.fields[LA]=l),{mapValue:c}})(t,e):n instanceof bl?iS(n,e):n instanceof wl?sS(n,e):(function(a,l){const c=rS(a,l),d=K0(c)+K0(a.Ae);return Kg(c)&&Kg(a.Ae)?nS(d):By(a.serializer,d)})(n,e)}function K2(n,e,t){return n instanceof bl?iS(n,e):n instanceof wl?sS(n,e):t}function rS(n,e){return n instanceof xc?(function(i){return Kg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Rc extends Pd{}class bl extends Pd{constructor(e){super(),this.elements=e}}function iS(n,e){const t=aS(e);for(const i of n.elements)t.some((a=>Hr(a,i)))||t.push(i);return{arrayValue:{values:t}}}class wl extends Pd{constructor(e){super(),this.elements=e}}function sS(n,e){let t=aS(e);for(const i of n.elements)t=t.filter((a=>!Hr(a,i)));return{arrayValue:{values:t}}}class xc extends Pd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function K0(n){return ot(n.integerValue||n.doubleValue)}function aS(n){return Sc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,t){this.field=e,this.transform=t}}function Y2(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof bl&&a instanceof bl||i instanceof wl&&a instanceof wl?dl(i.elements,a.elements,Hr):i instanceof xc&&a instanceof xc?Hr(i.Ae,a.Ae):i instanceof Rc&&a instanceof Rc})(n.transform,e.transform)}class Q2{constructor(e,t){this.version=e,this.transformResults=t}}class an{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Md{}function oS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kd(n.key,an.none()):new Ol(n.key,n.data,an.none());{const t=n.data,i=sn.empty();let a=new Qe(dt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Ii(n.key,i,new En(a.toArray()),an.none())}}function X2(n,e,t){n instanceof Ol?(function(a,l,c){const d=a.value.clone(),m=Y0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ii?(function(a,l,c){if(!Mf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Y0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(lS(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function cc(n,e,t,i){return n instanceof Ol?(function(l,c,d,m){if(!Mf(l.precondition,c))return d;const g=l.value.clone(),_=Q0(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ii?(function(l,c,d,m){if(!Mf(l.precondition,c))return d;const g=Q0(l.fieldTransforms,m,c),_=c.data;return _.setAll(lS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(l,c,d){return Mf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function W2(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=rS(i.transform,a||null);l!=null&&(t===null&&(t=sn.empty()),t.set(i.field,l))}return t||null}function $0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&dl(i,a,((l,c)=>Y2(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ol extends Md{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ii extends Md{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function lS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Y0(n,e,t){const i=new Map;ge(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,K2(c,d,t[a]))}return i}function Q0(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,G2(l,c,e))}return i}class kd extends Md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uS extends Md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&X2(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=cc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=cc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=tS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=oS(c,d);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,((t,i)=>$0(t,i)))&&dl(this.baseMutations,e.baseMutations,((t,i)=>$0(t,i)))}}class zy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ge(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return j2})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new zy(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,je;function Z2(n){switch(n){case X.OK:return pe(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return pe(15467,{code:n})}}function cS(n){if(n===void 0)return mn("GRPC error has no .code"),X.UNKNOWN;switch(n){case Ct.OK:return X.OK;case Ct.CANCELLED:return X.CANCELLED;case Ct.UNKNOWN:return X.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return X.INTERNAL;case Ct.UNAVAILABLE:return X.UNAVAILABLE;case Ct.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Ct.NOT_FOUND:return X.NOT_FOUND;case Ct.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Ct.ABORTED:return X.ABORTED;case Ct.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Ct.DATA_LOSS:return X.DATA_LOSS;default:return pe(39323,{code:n})}}(je=Ct||(Ct={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new bs([4294967295,4294967295],0);function X0(n){const e=eO().encode(n),t=new lA;return t.update(e),new Uint8Array(t.digest())}function W0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new bs([t,i],0),new bs([a,l],0)]}class qy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Zu(`Invalid padding: ${t}`);if(i<0)throw new Zu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Zu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=bs.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(bs.fromNumber(i)));return a.compare(tO)===1&&(a=new bs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=X0(e),[i,a]=W0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new qy(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=X0(e),[i,a]=W0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Bc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ld(Ee.min(),a,new ct(Ie),Vn(),Ne())}}class Bc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Bc(i,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class hS{constructor(e,t){this.targetId=e,this.Ce=t}}class fS{constructor(e,t,i=Nt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class J0{constructor(){this.ve=0,this.Fe=Z0(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),i=Ne();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:pe(38017,{changeType:l})}})),new Bc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Z0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vn(),this.Je=gf(),this.He=gf(),this.Ye=new ct(Ie)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Zf(l))if(i===0){const c=new ue(l.path);this.et(t,c,yt.newNoDocument(c,Ee.min()))}else ge(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=wi(i).toUint8Array()}catch(m){if(m instanceof PA)return La("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new qy(c,a,l)}catch(m){return La(m instanceof Zu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Zf(d.target)){const m=new ue(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,yt.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Ne();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Ld(e,t,this.Ye,this.je,i);return this.je=Vn(),this.Je=gf(),this.He=gf(),this.Ye=new ct(Ie),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new J0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qe(Ie),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qe(Ie),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new J0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gf(){return new ct(ue.comparator)}function Z0(){return new ct(ue.comparator)}const rO={asc:"ASCENDING",desc:"DESCENDING"},iO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sO={and:"AND",or:"OR"};class aO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jg(n,e){return n.useProto3Json||Id(e)?e:{value:e}}function Al(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oO(n,e){return Al(n,e.toTimestamp())}function pn(n){return ge(!!n,49232),Ee.fromTimestamp((function(t){const i=bi(t);return new Ve(i.seconds,i.nanos)})(n))}function Hy(n,e){return Zg(n,e).canonicalString()}function Zg(n,e){const t=(function(a){return new He(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mS(n){const e=He.fromString(n);return ge(wS(e),10190,{key:e.toString()}),e}function td(n,e){return Hy(n.databaseId,e.path)}function Oa(n,e){const t=mS(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(yS(t))}function pS(n,e){return Hy(n.databaseId,e)}function gS(n){const e=mS(n);return e.length===4?He.emptyPath():yS(e)}function ey(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yS(n){return ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function eb(n,e,t){return{name:td(n,e),fields:t.value.mapValue.fields}}function lO(n,e,t){const i=Oa(n,e.name),a=pn(e.updateTime),l=e.createTime?pn(e.createTime):Ee.min(),c=new sn({mapValue:{fields:e.fields}}),d=yt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function uO(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:pe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(ge(_===void 0||typeof _=="string",58123),Nt.fromBase64String(_||"")):(ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Nt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?X.UNKNOWN:cS(g.code);return new oe(_,g.message||"")})(c);t=new fS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Oa(n,i.document.name),l=pn(i.document.updateTime),c=i.document.createTime?pn(i.document.createTime):Ee.min(),d=new sn({mapValue:{fields:i.document.fields}}),m=yt.newFoundDocument(a,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new kf(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Oa(n,i.document),l=i.readTime?pn(i.readTime):Ee.min(),c=yt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new kf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Oa(n,i.document),l=i.removedTargetIds||[];t=new kf([],l,a,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new J2(a,l),d=i.targetId;t=new hS(d,c)}}return t}function nd(n,e){let t;if(e instanceof Ol)t={update:eb(n,e.key,e.value)};else if(e instanceof kd)t={delete:td(n,e.key)};else if(e instanceof Ii)t={update:eb(n,e.key,e.data),updateMask:pO(e.fieldMask)};else{if(!(e instanceof uS))return pe(16599,{Vt:e.type});t={verify:td(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof Rc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof bl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw pe(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:oO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:pe(27497)})(n,e.precondition)),t}function ty(n,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?an.updateTime(pn(l.updateTime)):l.exists!==void 0?an.exists(l.exists):an.none()})(e.currentDocument):an.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let m=null;if("setToServerValue"in d)ge(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),m=new Rc;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new bl(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new wl(_)}else"increment"in d?m=new xc(c,d.increment):pe(16584,{proto:d});const g=dt.fromServerFormat(d.fieldPath);return new $2(g,m)})(n,a))):[];if(e.update){e.update.name;const a=Oa(n,e.update.name),l=new sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new En(g.map((_=>dt.fromServerFormat(_))))})(e.updateMask);return new Ii(a,l,c,t,i)}return new Ol(a,l,t,i)}if(e.delete){const a=Oa(n,e.delete);return new kd(a,t)}if(e.verify){const a=Oa(n,e.verify);return new uS(a,t)}return pe(1463,{proto:e})}function cO(n,e){return n&&n.length>0?(ge(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?pn(a.updateTime):pn(l);return c.isEqual(Ee.min())&&(c=pn(l)),new Q2(c,a.transformResults||[])})(t,e)))):[]}function _S(n,e){return{documents:[pS(n,e.path)]}}function vS(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=pS(n,a);const l=(function(g){if(g.length!==0)return bS(Ye.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:nl(b.field),direction:fO(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Jg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function ES(n){let e=gS(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ge(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(v){const b=TS(v);return b instanceof Ye&&Uy(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((b=>(function(U){return new Ic(rl(U.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(v){let b;return b=typeof v=="object"?v.value:v,Id(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(v){const b=!!v.before,R=v.values||[];return new El(R,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(v){const b=!v.before,R=v.values||[];return new El(R,b)})(t.endAt)),M2(e,a,c,l,d,"F",m,g)}function hO(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=rl(t.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=rl(t.unaryFilter.field);return Ue.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=rl(t.unaryFilter.field);return Ue.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=rl(t.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ue.create(rl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ye.create(t.compositeFilter.filters.map((i=>TS(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(n):pe(30097,{filter:n})}function fO(n){return rO[n]}function dO(n){return iO[n]}function mO(n){return sO[n]}function nl(n){return{fieldPath:n.canonicalString()}}function rl(n){return dt.fromServerFormat(n.fieldPath)}function bS(n){return n instanceof Ue?(function(t){if(t.op==="=="){if(U0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NAN"}};if(L0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(U0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NAN"}};if(L0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(t.field),op:dO(t.op),value:t.value}}})(n):n instanceof Ye?(function(t){const i=t.getFilters().map((a=>bS(a)));return i.length===1?i[0]:{compositeFilter:{op:mO(t.op),filters:i}}})(n):pe(54877,{filter:n})}function pO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function wS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t,i,a,l=Ee.min(),c=Ee.min(),d=Nt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.yt=e}}function gO(n,e){let t;if(e.document)t=lO(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ue.fromSegments(e.noDocument.path),a=za(e.noDocument.readTime);t=yt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const i=ue.fromSegments(e.unknownDocument.path),a=za(e.unknownDocument.version);t=yt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new Ve(a[0],a[1]);return Ee.fromTimestamp(l)})(e.readTime)),t}function tb(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:td(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Al(l,c.version.toTimestamp()),createTime:Al(l,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ja(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:ja(e.version)}}return i}function rd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ja(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function za(n){const e=new Ve(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function Aa(n,e){const t=(e.baseMutations||[]).map((l=>ty(n.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>ty(n.yt,l))),a=Ve.fromMillis(e.localWriteTimeMs);return new jy(e.batchId,a,t,i)}function ec(n){const e=za(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?za(n.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=(function(l){return l.documents!==void 0})(n.query)?(function(l){const c=l.documents.length;return ge(c===1,1966,{count:c}),Jn(Od(gS(l.documents[0])))})(n.query):(function(l){return Jn(ES(l))})(n.query),new mi(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Nt.fromBase64String(n.resumeToken))}function SS(n,e){const t=ja(e.snapshotVersion),i=ja(e.lastLimboFreeSnapshotVersion);let a;a=Zf(e.target)?_S(n.yt,e.target):vS(n.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ba(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function IS(n){const e=ES({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wg(e,e.limit,"L"):e}function pg(n,e){return new Fy(e.largestBatchId,ty(n.yt,e.overlayMutation))}function nb(n,e){const t=e.path.lastSegment();return[n,on(e.path.popLast()),t]}function rb(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:ja(i.readTime),documentKey:on(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{getBundleMetadata(e,t){return ib(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:za(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return ib(e).put((function(a){return{bundleId:a.id,createTime:ja(pn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return sb(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:IS(l.bundledQuery),readTime:za(l.readTime)}})(i)}))}saveNamedQuery(e,t){return sb(e).put((function(a){return{name:a.name,readTime:ja(pn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function ib(n){return Lt(n,Rd)}function sb(n){return Lt(n,xd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Ud(e,i)}getOverlay(e,t){return Hu(e).get(nb(this.userId,t)).next((i=>i?pg(this.serializer,i):null))}getOverlays(e,t){const i=Ur();return j.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new Fy(t,c);a.push(this.St(e,d))})),j.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(on(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Hu(e).Z(qg,d))})),j.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Ur(),l=on(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Hu(e).J(qg,c).next((d=>{for(const m of d){const g=pg(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Ur();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hu(e).ee({index:xA,range:d},((m,g,_)=>{const v=pg(this.serializer,g);l.size()<a||v.largestBatchId===c?(l.set(v.getKey(),v),c=v.largestBatchId):_.done()})).next((()=>l))}St(e,t){return Hu(e).put((function(a,l,c){const[d,m,g]=nb(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:nd(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Hu(n){return Lt(n,Cd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{bt(e){return Lt(e,Vy)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?Nt.fromUint8Array(i):Nt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ot(e.integerValue));else if("doubleValue"in e){const i=ot(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),_c(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=bi(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(wi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?jA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Nd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):pe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){var c,d;const i=e.fields||{};this.Ft(t,53);const a=_l,l=((d=(c=i[a].arrayValue)==null?void 0:c.values)==null?void 0:d.length)||0;this.Ft(t,15),t.Mt(ot(l)),this.Ot(a,t),this.Ct(i[a],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ue.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Sa.Kt=new Sa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=255;function vO(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function ab(n){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=vO(255&i[l]);if(a+=c,c!==8)break}return a})(n);return Math.ceil(e/8)}class EO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),i=ab(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=ab(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn($o),this.sn(255)}_n(){this.an($o),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===$o?(this.sn($o),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===$o?(this.an($o),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class TO{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class bO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Gu{constructor(){this.cn=new EO,this.ln=new TO(this.cn),this.hn=new bO(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,i,a){this.Tn=e,this.In=t,this.En=i,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Ia(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Lf(this.En),directionalValue:Lf(this.dn),orderedDocumentKey:Lf(t),documentKey:i.path.toArray()}}Vn(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function cs(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=ob(n.En,e.En),t!==0?t:(t=ob(n.dn,e.dn),t!==0?t:ue.comparator(n.In,e.In)))}function ob(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Lf(n){return eA()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(n):n}function lb(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(n)}class ub{constructor(e){this.mn=new Qe(((t,i)=>dt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(ge(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=jg(e);if(t!==void 0&&!this.wn(t))return!1;const i=Ta(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.wn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=i[l];if(!this.Sn(d,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new Qe(dt.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Cf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Cf(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Cf(i.field,i.dir==="asc"?0:1)));return new Yf(Yf.UNKNOWN_ID,this.collectionId,t,yc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(n){var t,i;if(ge(n instanceof Ue||n instanceof Ye,20012),n instanceof Ue){if(n instanceof QA){const a=((i=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((l=>Ue.create(n.field,"==",l))))||[];return Ye.create(a,"or")}return n}const e=n.filters.map((a=>RS(a)));return Ye.create(e,n.op)}function wO(n){if(n.getFilters().length===0)return[];const e=iy(RS(n));return ge(xS(e),7391),ny(e)||ry(e)?[e]:e.getFilters()}function ny(n){return n instanceof Ue}function ry(n){return n instanceof Ye&&Uy(n)}function xS(n){return ny(n)||ry(n)||(function(t){if(t instanceof Ye&&$g(t)){for(const i of t.getFilters())if(!ny(i)&&!ry(i))return!1;return!0}return!1})(n)}function iy(n){if(ge(n instanceof Ue||n instanceof Ye,34018),n instanceof Ue)return n;if(n.filters.length===1)return iy(n.filters[0]);const e=n.filters.map((i=>iy(i)));let t=Ye.create(e,n.op);return t=id(t),xS(t)?t:(ge(t instanceof Ye,64498),ge(Tl(t),40251),ge(t.filters.length>1,57927),t.filters.reduce(((i,a)=>Gy(i,a))))}function Gy(n,e){let t;return ge(n instanceof Ue||n instanceof Ye,38388),ge(e instanceof Ue||e instanceof Ye,25473),t=n instanceof Ue?e instanceof Ue?(function(a,l){return Ye.create([a,l],"and")})(n,e):cb(n,e):e instanceof Ue?cb(e,n):(function(a,l){if(ge(a.filters.length>0&&l.filters.length>0,48005),Tl(a)&&Tl(l))return KA(a,l.getFilters());const c=$g(a)?a:l,d=$g(a)?l:a,m=c.filters.map((g=>Gy(g,d)));return Ye.create(m,"or")})(n,e),id(t)}function cb(n,e){if(Tl(e))return KA(e,n.getFilters());{const t=e.filters.map((i=>Gy(n,i)));return Ye.create(t,"or")}}function id(n){if(ge(n instanceof Ue||n instanceof Ye,11850),n instanceof Ue)return n;const e=n.getFilters();if(e.length===1)return id(e[0]);if(HA(n))return n;const t=e.map((a=>id(a))),i=[];return t.forEach((a=>{a instanceof Ue?i.push(a):a instanceof Ye&&(a.op===n.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:Ye.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.Cn=new Ky}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(kn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(kn.min())}updateCollectionGroup(e,t,i){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class Ky{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Qe(He.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Qe(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="IndexedDbIndexManager",yf=new Uint8Array(0);class SO{constructor(e,t){this.databaseId=t,this.vn=new Ky,this.Fn=new Si((i=>Ba(i)),((i,a)=>Lc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:on(a)};return fb(e).put(l)}return j.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[gA(t),""],!1,!0);return fb(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Lr(c.parent))}return i}))}addFieldIndex(e,t){const i=Ku(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=Qo(e);return l.next((d=>{c.put(rb(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Ku(e),a=Qo(e),l=Yo(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ku(e),i=Yo(e),a=Qo(e);return t.Z().next((()=>i.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return j.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new ub(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=Yo(e);let a=!0;const l=new Map;return j.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Ne();const d=[];return j.forEach(l,((m,g)=>{ae(hb,`Using index ${(function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map((re=>`${re.fieldPath}:${re.kind}`)).join(",")}`})(m)} to execute ${Ba(t)}`);const _=(function($,re){const ie=jg(re);if(ie===void 0)return null;for(const de of ed($,ie.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null})(g,m),v=(function($,re){const ie=new Map;for(const de of Ta(re))for(const N of ed($,de.fieldPath))switch(N.op){case"==":case"in":ie.set(de.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return ie.set(de.fieldPath.canonicalString(),N.value),Array.from(ie.values())}return null})(g,m),b=(function($,re){const ie=[];let de=!0;for(const N of Ta(re)){const I=N.kind===0?q0($,N.fieldPath,$.startAt):H0($,N.fieldPath,$.startAt);ie.push(I.value),de&&(de=I.inclusive)}return new El(ie,de)})(g,m),R=(function($,re){const ie=[];let de=!0;for(const N of Ta(re)){const I=N.kind===0?H0($,N.fieldPath,$.endAt):q0($,N.fieldPath,$.endAt);ie.push(I.value),de&&(de=I.inclusive)}return new El(ie,de)})(g,m),U=this.On(m,g,b),z=this.On(m,g,R),L=this.Nn(m,g,v),te=this.Bn(m.indexId,_,U,b.inclusive,z,R.inclusive,L);return j.forEach(te,(W=>i.Y(W,t.limit).next(($=>{$.forEach((re=>{const ie=ue.fromSegments(re.documentKey);c.has(ie)||(c=c.add(ie),d.push(ie))}))}))))})).next((()=>d))}return j.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=wO(Ye.create(e.filters,"and")).map((i=>Qg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(i.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let v=0;v<m;++v){const b=t?this.Ln(t[v/g]):yf,R=this.kn(e,b,i[v%g],a),U=this.qn(e,b,l[v%g],c),z=d.map((L=>this.kn(e,b,L,!0)));_.push(...this.createRange(R,U,z))}return _}kn(e,t,i,a){const l=new Ia(e,ue.empty(),t,i);return a?l:l.An()}qn(e,t,i,a){const l=new Ia(e,ue.empty(),t,i);return a?l.An():l}xn(e,t){const i=new ub(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.Mn(t);return j.forEach(a,(l=>this.xn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(m){let g=new Qe(dt.comparator),_=!1;for(const v of m.filters)for(const b of v.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:g=g.add(b.field));for(const v of m.orderBy)v.field.isKeyField()||(g=g.add(v.field));return g.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}Qn(e,t){const i=new Gu;for(const a of Ta(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.Pn(a.kind);Sa.Kt.Dt(l,c)}return i.un()}Ln(e){const t=new Gu;return Sa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Gu;return Sa.Kt.Dt(Ac(this.databaseId,t),i.Pn((function(l){const c=Ta(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let a=[];a.push(new Gu);let l=0;for(const c of Ta(e)){const d=i[l++];for(const m of a)if(this.Un(t,c.fieldPath)&&Sc(d))a=this.Kn(a,c,d);else{const g=m.Pn(c.kind);Sa.Kt.Dt(d,g)}}return this.Wn(a)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const m=new Gu;m.seed(d.un()),Sa.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof Ue&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Ku(e),a=Qo(e);return(t?i.J(Fg,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const c=[];return j.forEach(l,(d=>a.get([d.indexId,this.uid]).next((m=>{c.push((function(_,v){const b=v?new yc(v.sequenceNumber,new kn(za(v.readTime),new ue(Lr(v.documentKey)),v.largestBatchId)):yc.empty(),R=_.fields.map((([U,z])=>new Cf(dt.fromServerFormat(U),z)));return new Yf(_.indexId,_.collectionGroup,R,b)})(d,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ie(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Ku(e),l=Qo(e);return this.Gn(e).next((c=>a.J(Fg,IDBKeyRange.bound(t,t)).next((d=>j.forEach(d,(m=>l.put(rb(m.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return j.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),j.forEach(d,(m=>this.zn(e,a,m).next((g=>{const _=this.jn(l,m);return g.isEqual(_)?j.resolve():this.Jn(e,l,m,g,_)})))))))}))}Hn(e,t,i,a){return Yo(e).put(a.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,a){return Yo(e).delete(a.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const a=Yo(e);let l=new Qe(cs);return a.ee({index:RA,range:IDBKeyRange.only([i.indexId,this.uid,Lf(this.$n(i,t))])},((c,d)=>{l=l.add(new Ia(i.indexId,t,lb(d.arrayValue),lb(d.directionalValue)))})).next((()=>l))}jn(e,t){let i=new Qe(cs);const a=this.Qn(t,e);if(a==null)return i;const l=jg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Sc(c))for(const d of c.arrayValue.values||[])i=i.add(new Ia(t.indexId,e.key,this.Ln(d),a))}else i=i.add(new Ia(t.indexId,e.key,yf,a));return i}Jn(e,t,i,a,l){ae(hb,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,_,v,b){const R=m.getIterator(),U=g.getIterator();let z=Ko(R),L=Ko(U);for(;z||L;){let te=!1,W=!1;if(z&&L){const $=_(z,L);$<0?W=!0:$>0&&(te=!0)}else z!=null?W=!0:te=!0;te?(v(L),L=Ko(U)):W?(b(z),z=Ko(R)):(z=Ko(R),L=Ko(U))}})(a,l,cs,(d=>{c.push(this.Hn(e,t,i,d))}),(d=>{c.push(this.Yn(e,t,i,d))})),j.waitFor(c)}Gn(e){let t=1;return Qo(e).ee({index:IA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>cs(c,d))).filter(((c,d,m)=>!d||cs(c,m[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=cs(c,e),m=cs(c,t);if(d===0)a[0]=e.An();else if(d>0&&m<0)a.push(c),a.push(c.An());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,yf,ue.empty()),m=a[c+1].Vn(this.uid,yf,ue.empty());l.push(IDBKeyRange.bound(d,m))}return l}Zn(e,t){return cs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(db)}getMinOffset(e,t){return j.mapArray(this.Mn(t),(i=>this.xn(e,i).next((a=>a||pe(44426))))).next(db)}}function fb(n){return Lt(n,Tc)}function Yo(n){return Lt(n,ac)}function Ku(n){return Lt(n,Oy)}function Qo(n){return Lt(n,sc)}function db(n){ge(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;Cy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new kn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CS=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(n,e,t){const i=n.store(dr),a=n.store(ml),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=i.ee({range:c},((_,v,b)=>(d++,b.delete())));l.push(m.next((()=>{ge(d===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const v=wA(e,_.key.path,t.batchId);l.push(a.delete(v)),g.push(_.key)}return j.waitFor(l).next((()=>g))}function sd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pe(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(CS,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class Bd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Xn={}}static wt(e,t,i,a){ge(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Bd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hs(e).ee({index:Ra,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=il(e),c=hs(e);return c.add({}).next((d=>{ge(typeof d=="number",49019);const m=new jy(d,t,i,a),g=(function(R,U,z){const L=z.baseMutations.map((W=>nd(R.yt,W))),te=z.mutations.map((W=>nd(R.yt,W)));return{userId:U,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:L,mutations:te}})(this.serializer,this.userId,m),_=[];let v=new Qe(((b,R)=>Ie(b.canonicalString(),R.canonicalString())));for(const b of a){const R=wA(this.userId,b.key.path,d);v=v.add(b.key.path.popLast()),_.push(c.put(g)),_.push(l.put(R,ZN))}return v.forEach((b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Xn[d]=m.keys()})),j.waitFor(_).next((()=>m))}))}lookupMutationBatch(e,t){return hs(e).get(t).next((i=>i?(ge(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Aa(this.serializer,i)):null))}er(e,t){return this.Xn[t]?j.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return hs(e).ee({index:Ra,range:a},((c,d,m)=>{d.userId===this.userId&&(ge(d.batchId>=i,47524,{tr:i}),l=Aa(this.serializer,d)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Da;return hs(e).ee({index:Ra,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Da],[this.userId,Number.POSITIVE_INFINITY]);return hs(e).J(Ra,t).next((i=>i.map((a=>Aa(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Df(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return il(e).ee({range:a},((c,d,m)=>{const[g,_,v]=c,b=Lr(_);if(g===this.userId&&t.path.isEqual(b))return hs(e).get(v).next((R=>{if(!R)throw pe(61480,{nr:c,batchId:v});ge(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:v}),l.push(Aa(this.serializer,R))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qe(Ie);const a=[];return t.forEach((l=>{const c=Df(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=il(e).ee({range:d},((g,_,v)=>{const[b,R,U]=g,z=Lr(R);b===this.userId&&l.path.isEqual(z)?i=i.add(U):v.done()}));a.push(m)})),j.waitFor(a).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Df(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new Qe(Ie);return il(e).ee({range:c},((m,g,_)=>{const[v,b,R]=m,U=Lr(b);v===this.userId&&i.isPrefixOf(U)?U.length===a&&(d=d.add(R)):_.done()})).next((()=>this.rr(e,d)))}rr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(hs(e).get(l).next((c=>{if(c===null)throw pe(35274,{batchId:l});ge(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(Aa(this.serializer,c))})))})),j.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return DS(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),j.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return il(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const m=Lr(l[1]);a.push(m)}else d.done()})).next((()=>{ge(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return NS(e,this.userId,t)}_r(e){return OS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Da,lastStreamToken:""}))}}function NS(n,e,t){const i=Df(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return il(n).ee({range:l,X:!0},((d,m,g)=>{const[_,v,b]=d;_===e&&v===a&&(c=!0),g.done()})).next((()=>c))}function hs(n){return Lt(n,dr)}function il(n){return Lt(n,ml)}function OS(n){return Lt(n,vc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fa(0)}static cr(){return new Fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Fa(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new Ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Xo(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(ge(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Xo(e).ee(((c,d)=>{const m=ec(d);m.sequenceNumber<=t&&i.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>j.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Xo(e).ee(((i,a)=>{const l=ec(a);t(l)}))}lr(e){return pb(e).get(Wf).next((t=>(ge(t!==null,2888),t)))}hr(e,t){return pb(e).put(Wf,t)}Pr(e,t){return Xo(e).put(SS(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Ba(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Xo(e).ee({range:a,index:SA},((c,d,m)=>{const g=ec(d);Lc(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=ms(e);return t.forEach((c=>{const d=on(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),j.waitFor(a)}removeMatchingKeys(e,t,i){const a=ms(e);return j.forEach(t,(l=>{const c=on(l.path);return j.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=ms(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=ms(e);let l=Ne();return a.ee({range:i,X:!0},((c,d,m)=>{const g=Lr(c[1]),_=new ue(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=on(t.path),a=IDBKeyRange.bound([i],[gA(i)],!1,!0);let l=0;return ms(e).ee({index:Ny,X:!0,range:a},(([c,d],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Xo(e).get(t).next((i=>i?ec(i):null))}}function Xo(n){return Lt(n,pl)}function pb(n){return Lt(n,Na)}function ms(n){return Lt(n,gl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="LruGarbageCollector",RO=1048576;function yb([n,e],[t,i]){const a=Ie(n,t);return a===0?Ie(e,i):a}class xO{constructor(e){this.Ir=e,this.buffer=new Qe(yb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();yb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VS{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(gb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vs(t)?ae(gb,"Ignoring IndexedDB error during garbage collection: ",t):await Xa(t)}await this.Vr(3e5)}))}}class CO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Wn.ce);const i=new xO(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(mb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,d=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(g=Date.now(),el()<=Le.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${v} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function PS(n,e){return new CO(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t){this.db=e,this.garbageCollector=PS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,a)=>t(a)))}addReference(e,t,i){return _f(e,i)}removeReference(e,t,i){return _f(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return _f(e,t)}br(e,t){return(function(a,l){let c=!1;return OS(a).te((d=>NS(a,d,l).next((m=>(m&&(c=!0),j.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,d)=>{if(d<=t){const m=this.br(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Ee.min()),ms(e).delete((function(v){return[0,on(v.path)]})(c)))))}));a.push(m)}})).next((()=>j.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return _f(e,t)}Sr(e,t){const i=ms(e);let a,l=Wn.ce;return i.ee({index:Ny},(([c,d],{path:m,sequenceNumber:g})=>{c===0?(l!==Wn.ce&&t(new ue(Lr(a)),l),l=g,a=m):l=Wn.ce})).next((()=>{l!==Wn.ce&&t(new ue(Lr(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _f(n,e){return ms(n).put((function(i,a){return{targetId:0,path:on(i.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.changes=new Si((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?j.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return va(e).put(i)}removeEntry(e,t,i){return va(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],rd(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=yt.newInvalidDocument(t);return va(e).ee({index:Nf,range:IDBKeyRange.only($u(t))},((a,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:yt.newInvalidDocument(t)};return va(e).ee({index:Nf,range:IDBKeyRange.only($u(t))},((a,l)=>{i={document:this.Cr(t,l),size:sd(l)}})).next((()=>i))}getEntries(e,t){let i=Vn();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c)})).next((()=>i))}Mr(e,t){let i=Vn(),a=new ct(ue.comparator);return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);i=i.insert(l,d),a=a.insert(l,sd(c))})).next((()=>({documents:i,Or:a})))}Fr(e,t,i){if(t.isEmpty())return j.resolve();let a=new Qe(Eb);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound($u(a.first()),$u(a.last())),c=a.getIterator();let d=c.getNext();return va(e).ee({index:Nf,range:l},((m,g,_)=>{const v=ue.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&Eb(d,v)<0;)i(d,null),d=c.getNext();d&&d.isEqual(v)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?_.j($u(d)):_.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),rd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return va(e).J(IDBKeyRange.bound(d,m,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let _=Vn();for(const v of g){const b=this.Cr(ue.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);b.isFoundDocument()&&(Uc(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=Vn();const c=vb(t,i),d=vb(t,kn.max());return va(e).ee({index:AA,range:IDBKeyRange.bound(c,d,!0)},((m,g,_)=>{const v=this.Cr(ue.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(v.key,v),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new OO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return _b(e).get(zg).next((t=>(ge(!!t,20021),t)))}Dr(e,t){return _b(e).put(zg,t)}Cr(e,t){if(t){const i=gO(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return yt.newInvalidDocument(e)}}function kS(n){return new NO(n)}class OO extends MS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Si((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new Qe(((l,c)=>Ie(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=tb(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=sd(m);i+=g-d.size,t.push(this.Nr.addEntry(e,l,m))}else if(i-=d.size,this.trackRemovals){const m=tb(this.Nr.serializer,c.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),j.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function _b(n){return Lt(n,Ec)}function va(n){return Lt(n,Xf)}function $u(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vb(n,e){const t=e.documentKey.path.toArray();return[n,rd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Eb(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Ie(t[l],i[l]),a)return a;return a=Ie(t.length,i.length),a||(a=Ie(t[t.length-2],i[i.length-2]),a||Ie(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&cc(i.mutation,a,En.empty(),Ve.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ne()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ne()){const a=Ur();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Ju();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Ur();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ne())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=Vn();const c=uc(),d=(function(){return uc()})();return t.forEach(((m,g)=>{const _=i.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Ii)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),cc(_.mutation,g,_.mutation.getFieldMask(),Ve.now())):c.set(g.key,En.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new VO(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=uc();let a=new ct(((c,d)=>c-d)),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=i.get(m)||En.empty();_=d.applyToLocalView(g,_),i.set(m,_);const v=(a.get(d.batchId)||Ne()).add(m);a=a.insert(d.batchId,v)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,v=tS();_.forEach((b=>{if(!l.has(b)){const R=oS(t.get(b),i.get(b));R!==null&&v.set(b,R),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,v))}return j.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return ue.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):XA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):j.resolve(Ur());let d=gc,m=l;return c.next((g=>j.forEach(g,((_,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(_)?j.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Ne()))).next((_=>({batchId:d,changes:eS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next((i=>{let a=Ju();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Ju();return this.indexManager.getCollectionParents(e,l).next((d=>j.forEach(d,(m=>{const g=(function(v,b){return new Nl(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((_=>{_.forEach(((v,b)=>{c=c.insert(v,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,yt.newInvalidDocument(_)))}));let d=Ju();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&cc(_.mutation,g,En.empty(),Ve.now()),Uc(t,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:pn(a.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:IS(a.bundledQuery),readTime:pn(a.readTime)}})(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.overlays=new ct(ue.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ur();return j.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),j.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),j.resolve()}getOverlaysForCollection(e,t,i){const a=Ur(),l=t.length+1,c=new ue(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return j.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new ct(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=Ur(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Ur(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return j.resolve(d)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Fy(t,i));let l=this.qr.get(t);l===void 0&&(l=Ne(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.Qr=new Qe(qt.$r),this.Ur=new Qe(qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new qt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new qt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ue(new He([])),i=new qt(t,e),a=new qt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ue(new He([])),i=new qt(t,e),a=new qt(t,e+1);let l=Ne();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new qt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ue.comparator(e.key,t.key)||Ie(e.Yr,t.Yr)}static Kr(e,t){return Ie(e.Yr,t.Yr)||ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qe(qt.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new jy(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new qt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return j.resolve(c)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Da:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new qt(t,0),a=new qt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qe(Ie);return t.forEach((a=>{const l=new qt(a,0),c=new qt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{i=i.add(d.Yr)}))})),j.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ue.isDocumentKey(l)||(l=l.child(""));const c=new qt(new ue(l),0);let d=new Qe(Ie);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Yr)),!0)}),c),j.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return j.forEach(t.mutations,(a=>{const l=new qt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new qt(t,0),a=this.Zr.firstAfterOrEqual(i);return j.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.ri=e,this.docs=(function(){return new ct(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return j.resolve(i?i.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let i=Vn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():yt.newInvalidDocument(a))})),j.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Vn();const c=t.path,d=new ue(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Cy(vA(_),i)<=0||(a.has(_.key)||Uc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,i,a){pe(9500)}ii(e,t){return j.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new BO(this)}getSize(e){return j.resolve(this.size)}}class BO extends MS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.persistence=e,this.si=new Si((t=>Ba(t)),Lc),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new $y,this.targetCount=0,this.ai=Fa.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Fa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),j.waitFor(l).next((()=>a))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return j.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),j.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return j.resolve(i)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wn(0),this.li=!1,this.li=!0,this.hi=new kO,this.referenceDelegate=e(this),this.Pi=new jO(this),this.indexManager=new AO,this.remoteDocumentCache=(function(a){return new UO(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new AS(t),this.Ii=new PO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new LO(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ae("MemoryPersistence","Starting transaction:",e);const a=new zO(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return j.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class zO extends TA{constructor(e){super(),this.currentSequenceNumber=e}}class jd{constructor(e){this.persistence=e,this.Ri=new $y,this.Vi=null}static mi(e){return new jd(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),j.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(i=>{const a=ue.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ad{constructor(e,t){this.persistence=e,this.pi=new Si((i=>on(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=PS(this,t)}static mi(e,t){return new ad(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return j.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?j.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Ee.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vf(e.data.value)),t}br(e,t,i){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return j.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.serializer=e}k(e,t,i,a){const l=new Sd("createOrUpgrade",t);i<1&&a>=1&&((function(m){m.createObjectStore(kc)})(e),(function(m){m.createObjectStore(vc,{keyPath:JN}),m.createObjectStore(dr,{keyPath:N0,autoIncrement:!0}).createIndex(Ra,O0,{unique:!0}),m.createObjectStore(ml)})(e),Tb(e),(function(m){m.createObjectStore(ba)})(e));let c=j.resolve();return i<3&&a>=3&&(i!==0&&((function(m){m.deleteObjectStore(gl),m.deleteObjectStore(pl),m.deleteObjectStore(Na)})(e),Tb(e)),c=c.next((()=>(function(m){const g=m.store(Na),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return g.put(Wf,_)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(m,g){return g.store(dr).J().next((v=>{m.deleteObjectStore(dr),m.createObjectStore(dr,{keyPath:N0,autoIncrement:!0}).createIndex(Ra,O0,{unique:!0});const b=g.store(dr),R=v.map((U=>b.put(U)));return j.waitFor(R)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(yl,{keyPath:o2})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.yi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore(Ec)})(e),this.wi(l))))),i<7&&a>=7&&(c=c.next((()=>this.Si(l)))),i<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.Di(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Rd,{keyPath:l2})})(e),(function(m){m.createObjectStore(xd,{keyPath:u2})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(Cd,{keyPath:g2});g.createIndex(qg,y2,{unique:!1}),g.createIndex(xA,_2,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(Xf,{keyPath:e2});g.createIndex(Nf,t2),g.createIndex(AA,n2)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(ba)))),i<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore(Oy,{keyPath:c2,autoIncrement:!0}).createIndex(Fg,h2,{unique:!1}),m.createObjectStore(sc,{keyPath:f2}).createIndex(IA,d2,{unique:!1}),m.createObjectStore(ac,{keyPath:m2}).createIndex(RA,p2,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(sc).clear()})).next((()=>{t.objectStore(ac).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(Vy,{keyPath:v2})})(e)}))),i<18&&a>=18&&eA()&&(c=c.next((()=>{t.objectStore(sc).clear()})).next((()=>{t.objectStore(ac).clear()}))),c}wi(e){let t=0;return e.store(ba).ee(((i,a)=>{t+=sd(a)})).next((()=>{const i={byteSize:t};return e.store(Ec).put(zg,i)}))}yi(e){const t=e.store(vc),i=e.store(dr);return t.J().next((a=>j.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Da],[l.userId,l.lastAcknowledgedBatchId]);return i.J(Ra,c).next((d=>j.forEach(d,(m=>{ge(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=Aa(this.serializer,m);return DS(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(gl),i=e.store(ba);return e.store(Na).get(Wf).next((a=>{const l=[];return i.ee(((c,d)=>{const m=new He(c),g=(function(v){return[0,on(v)]})(m);l.push(t.get(g).next((_=>_?j.resolve():(v=>t.put({targetId:0,path:on(v),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>j.waitFor(l)))}))}bi(e,t){e.createObjectStore(Tc,{keyPath:a2});const i=t.store(Tc),a=new Ky,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return i.put({collectionId:d,parent:on(m)})}};return t.store(ba).ee({X:!0},((c,d)=>{const m=new He(c);return l(m.popLast())})).next((()=>t.store(ml).ee({X:!0},(([c,d,m],g)=>{const _=Lr(d);return l(_.popLast())}))))}Di(e){const t=e.store(pl);return t.ee(((i,a)=>{const l=ec(a),c=SS(this.serializer,l);return t.put(c)}))}Ci(e,t){const i=t.store(ba),a=[];return i.ee(((l,c)=>{const d=t.store(Xf),m=(function(v){return v.document?new ue(He.fromString(v.document.name).popFirst(5)):v.noDocument?ue.fromSegments(v.noDocument.path):v.unknownDocument?ue.fromSegments(v.unknownDocument.path):pe(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>j.waitFor(a)))}Fi(e,t){const i=t.store(dr),a=kS(this.serializer),l=new Yy(jd.mi,this.serializer.yt);return i.J().next((c=>{const d=new Map;return c.forEach((m=>{let g=d.get(m.userId)??Ne();Aa(this.serializer,m).keys().forEach((_=>g=g.add(_))),d.set(m.userId,g)})),j.forEach(d,((m,g)=>{const _=new Qt(g),v=Ud.wt(this.serializer,_),b=l.getIndexManager(_),R=Bd.wt(_,this.serializer,b,l.referenceDelegate);return new LS(a,R,v,b).recalculateAndSaveOverlaysForDocumentKeys(new Hg(t,Wn.ce),m).next()}))}))}}function Tb(n){n.createObjectStore(gl,{keyPath:i2}).createIndex(Ny,s2,{unique:!0}),n.createObjectStore(pl,{keyPath:"targetId"}).createIndex(SA,r2,{unique:!0}),n.createObjectStore(Na)}const fs="IndexedDbPersistence",gg=18e5,yg=5e3,_g="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qO="main";class Qy{constructor(e,t,i,a,l,c,d,m,g,_,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=c,this.document=d,this.xi=g,this.Oi=_,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=b=>Promise.resolve(),!Qy.v())throw new oe(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new DO(this,a),this.$i=t+qO,this.serializer=new AS(m),this.Ui=new ws(this.$i,this.Ni,new FO(this.serializer)),this.hi=new _O,this.Pi=new IO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kS(this.serializer),this.Ii=new yO,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&mn(fs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oe(X.FAILED_PRECONDITION,_g);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Wn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Vs(e))return ae(fs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ae(fs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Yu(e).get(Go).next((t=>j.resolve(this.es(t))))}ts(e){return vf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,gg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Lt(t,yl);return i.J().next((a=>{const l=this.ss(a,gg),c=a.filter((d=>l.indexOf(d)===-1));return j.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):Yu(e).get(Go).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,yg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new oe(X.FAILED_PRECONDITION,_g);return!1}}return!(!this.networkEnabled||!this.inForeground)||vf(e).J().next((i=>this.ss(i,yg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ae(fs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[kc,yl],(e=>{const t=new Hg(e,Wn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>vf(e).J().next((t=>this.ss(t,gg).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Bd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new SO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ud.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){ae(fs,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?b2:m===17?OA:m===16?T2:m===15?Py:m===14?NA:m===13?DA:m===12?E2:m===11?CA:void pe(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(d=>(c=new Hg(d,this.ci?this.ci.next():Wn.ce),t==="readwrite-primary"?this.Hi(c).next((m=>!!m||this.Yi(c))).next((m=>{if(!m)throw mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new oe(X.FAILED_PRECONDITION,EA);return i(c)})).next((m=>this.Xi(c).next((()=>m)))):this.Is(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return Yu(e).get(Go).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,yg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new oe(X.FAILED_PRECONDITION,_g)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yu(e).put(Go,t)}static v(){return ws.v()}Zi(e){const t=Yu(e);return t.get(Go).next((i=>this.es(i)?(ae(fs,"Releasing primary lease."),t.delete(Go)):j.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(mn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;Zw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const i=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return ae(fs,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return mn(fs,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yu(n){return Lt(n,kc)}function vf(n){return Lt(n,yl)}function HO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Ne(),a=Ne();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Xy(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Zw()?8:bA(kt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new GO;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(el()<=Le.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(el()<=Le.DEBUG&&ae("QueryEngine","Query:",tl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(el()<=Le.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):j.resolve())}ys(e,t){if(G0(t))return j.resolve(null);let i=Jn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Wg(t,null,"F"),i=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Ne(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const g=this.Ds(t,d);return this.Cs(t,g,c,m.readTime)?this.ys(e,Wg(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,i,a){return G0(t)||a.isEqual(Ee.min())?j.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?j.resolve(null):(el()<=Le.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),tl(t)),this.vs(e,c,t,GN(a,gc)).next((d=>d)))}))}Ds(e,t){let i=new Qe(JA(e));return t.forEach(((a,l)=>{Uc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return el()<=Le.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",tl(t)),this.ps.getDocumentsMatchingQuery(e,t,kn.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="LocalStore",KO=3e8;class $O{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new ct(Ie),this.xs=new Si((l=>Ba(l)),Lc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function BS(n,e,t,i){return new $O(n,e,t,i)}async function jS(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let m=Ne();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(i,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function YO(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,_){const v=g.batch,b=v.keys();let R=j.resolve();return b.forEach((U=>{R=R.next((()=>_.getEntry(m,U))).next((z=>{const L=g.docVersions.get(U);ge(L!==null,48541),z.version.compareTo(L)<0&&(v.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),_.addEntry(z)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(m,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=Ne();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function zS(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function QO(n,e){const t=Re(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((_,v)=>{const b=a.get(v);if(!b)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,v))));let R=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(Nt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),a=a.insert(v,R),(function(z,L,te){return z.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=KO?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(b,R,_)&&d.push(t.Pi.updateTargetData(l,R))}));let m=Vn(),g=Ne();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(XO(l,c,e.documentUpdates).next((_=>{m=_.ks,g=_.qs}))),!i.isEqual(Ee.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((v=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return j.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function XO(n,e,t){let i=Ne(),a=Ne();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=Vn();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ee.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ae(Wy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function WO(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Da),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function JO(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,j.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new mi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function sy(n,e,t){const i=Re(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Vs(c))throw c;ae(Wy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function bb(n,e,t){const i=Re(n);let a=Ee.min(),l=Ne();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const v=Re(m),b=v.xs.get(_);return b!==void 0?j.resolve(v.Ms.get(b)):v.Pi.getTargetData(g,_)})(i,c,Jn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:Ne()))).next((d=>(ZO(i,L2(e),d),{documents:d,Qs:l})))))}function ZO(n,e,t){let i=n.Os.get(e)||Ee.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class wb{constructor(){this.activeTargetIds=q2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FS{constructor(){this.Mo=new wb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wb,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="ConnectivityMonitor";class Sb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(Ab,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(Ab,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef=null;function ay(){return Ef===null?Ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ef++,"0x"+Ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="RestConnection",tV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Jf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=ay(),d=this.zo(e,t.toUriEncodedString());ae(vg,`Sending RPC '${e}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(d),_=Ns(g);return this.Jo(e,d,m,i,_).then((v=>(ae(vg,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw La(vg,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",i),v}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=tV[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class iV extends nV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=ay();return new Promise(((d,m)=>{const g=new uA;g.setWithCredentials(!0),g.listenOnce(cA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case xf.NO_ERROR:const v=g.getResponseJson();ae(nn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case xf.TIMEOUT:ae(nn,`RPC '${e}' ${c} timed out`),m(new oe(X.DEADLINE_EXCEEDED,"Request time out"));break;case xf.HTTP_ERROR:const b=g.getStatus();if(ae(nn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const U=R==null?void 0:R.error;if(U&&U.status&&U.message){const z=(function(te){const W=te.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(W)>=0?W:X.UNKNOWN})(U.status);m(new oe(z,U.message))}else m(new oe(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new oe(X.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ae(nn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);ae(nn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=ay(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=dA(),d=fA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const _=l.join("");ae(nn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const v=c.createWebChannel(_,m);this.I_(v);let b=!1,R=!1;const U=new rV({Yo:L=>{R?ae(nn,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(b||(ae(nn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),ae(nn,`RPC '${e}' stream ${a} sending:`,L),v.send(L))},Zo:()=>v.close()}),z=(L,te,W)=>{L.listen(te,($=>{try{W($)}catch(re){setTimeout((()=>{throw re}),0)}}))};return z(v,Wu.EventType.OPEN,(()=>{R||(ae(nn,`RPC '${e}' stream ${a} transport opened.`),U.o_())})),z(v,Wu.EventType.CLOSE,(()=>{R||(R=!0,ae(nn,`RPC '${e}' stream ${a} transport closed`),U.a_(),this.E_(v))})),z(v,Wu.EventType.ERROR,(L=>{R||(R=!0,La(nn,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),U.a_(new oe(X.UNAVAILABLE,"The operation could not be completed")))})),z(v,Wu.EventType.MESSAGE,(L=>{var te;if(!R){const W=L.data[0];ge(!!W,16349);const $=W,re=($==null?void 0:$.error)||((te=$[0])==null?void 0:te.error);if(re){ae(nn,`RPC '${e}' stream ${a} received error:`,re);const ie=re.status;let de=(function(x){const M=Ct[x];if(M!==void 0)return cS(M)})(ie),N=re.message;de===void 0&&(de=X.INTERNAL,N="Unknown error status: "+ie+" with message "+re.message),R=!0,U.a_(new oe(de,N)),v.close()}else ae(nn,`RPC '${e}' stream ${a} received:`,W),U.u_(W)}})),z(d,hA.STAT_EVENT,(L=>{L.stat===Ug.PROXY?ae(nn,`RPC '${e}' stream ${a} detected buffering proxy`):L.stat===Ug.NOPROXY&&ae(nn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(){return typeof window<"u"?window:null}function Uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(n){return new aO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="PersistentStream";class HS{constructor(e,t,i,a,l,c,d,m){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(mn(t.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new oe(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(Ib,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ae(Ib,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aV extends HS{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=uO(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?pn(c.readTime):Ee.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ey(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Zf(m)?{documents:_S(l,m)}:{query:vS(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=dS(l,c.resumeToken);const g=Jg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ee.min())>0){d.readTime=Al(l,c.snapshotVersion.toTimestamp());const g=Jg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=hO(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ey(this.serializer),t.removeTarget=e,this.q_(t)}}class oV extends HS{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=cO(e.writeResults,e.commitTime),i=pn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ey(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>nd(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{}class uV extends lV{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Zg(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(X.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Zg(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new oe(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class cV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(t),this.aa=!1):ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa="RemoteStore";class hV{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Wa(this)&&(ae(qa,"Restarting streams for network reachability change."),await(async function(m){const g=Re(m);g.Ea.add(4),await jc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Fd(g)})(this))}))})),this.Ra=new cV(i,a)}}async function Fd(n){if(Wa(n))for(const e of n.da)await e(!0)}async function jc(n){for(const e of n.da)await e(!1)}function GS(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),t_(t)?e_(t):Vl(t).O_()&&Zy(t,e))}function Jy(n,e){const t=Re(n),i=Vl(t);t.Ia.delete(e),i.O_()&&KS(t,e),t.Ia.size===0&&(i.O_()?i.L_():Wa(t)&&t.Ra.set("Unknown"))}function Zy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(n).Y_(e)}function KS(n,e){n.Va.Ue(e),Vl(n).Z_(e)}function e_(n){n.Va=new nO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Vl(n).start(),n.Ra.ua()}function t_(n){return Wa(n)&&!Vl(n).x_()&&n.Ia.size>0}function Wa(n){return Re(n).Ea.size===0}function $S(n){n.Va=void 0}async function fV(n){n.Ra.set("Online")}async function dV(n){n.Ia.forEach(((e,t)=>{Zy(n,e)}))}async function mV(n,e){$S(n),t_(n)?(n.Ra.ha(e),e_(n)):n.Ra.set("Unknown")}async function pV(n,e,t){if(n.Ra.set("Online"),e instanceof fS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(i){ae(qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await od(n,i)}else if(e instanceof kf?n.Va.Ze(e):e instanceof hS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ee.min()))try{const i=await zS(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Nt.EMPTY_BYTE_STRING,_.snapshotVersion)),KS(l,m);const v=new mi(_.target,m,g,_.sequenceNumber);Zy(l,v)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ae(qa,"Failed to raise snapshot:",i),await od(n,i)}}async function od(n,e,t){if(!Vs(e))throw e;n.Ea.add(1),await jc(n),n.Ra.set("Offline"),t||(t=()=>zS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ae(qa,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Fd(n)}))}function YS(n,e){return e().catch((t=>od(n,t,e)))}async function zc(n){const e=Re(n),t=xs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Da;for(;gV(e);)try{const a=await WO(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,yV(e,a)}catch(a){await od(e,a)}QS(e)&&XS(e)}function gV(n){return Wa(n)&&n.Ta.length<10}function yV(n,e){n.Ta.push(e);const t=xs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function QS(n){return Wa(n)&&!xs(n).x_()&&n.Ta.length>0}function XS(n){xs(n).start()}async function _V(n){xs(n).ra()}async function vV(n){const e=xs(n);for(const t of n.Ta)e.ea(t.mutations)}async function EV(n,e,t){const i=n.Ta.shift(),a=zy.from(i,e,t);await YS(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await zc(n)}async function TV(n,e){e&&xs(n).X_&&await(async function(i,a){if((function(c){return Z2(c)&&c!==X.ABORTED})(a.code)){const l=i.Ta.shift();xs(i).B_(),await YS(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await zc(i)}})(n,e),QS(n)&&XS(n)}async function Rb(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ae(qa,"RemoteStore received new credentials");const i=Wa(t);t.Ea.add(3),await jc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fd(t)}async function bV(n,e){const t=Re(n);e?(t.Ea.delete(2),await Fd(t)):e||(t.Ea.add(2),await jc(t),t.Ra.set("Unknown"))}function Vl(n){return n.ma||(n.ma=(function(t,i,a){const l=Re(t);return l.sa(),new aV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:fV.bind(null,n),t_:dV.bind(null,n),r_:mV.bind(null,n),H_:pV.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),t_(n)?e_(n):n.Ra.set("Unknown")):(await n.ma.stop(),$S(n))}))),n.ma}function xs(n){return n.fa||(n.fa=(function(t,i,a){const l=Re(t);return l.sa(),new oV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:_V.bind(null,n),r_:TV.bind(null,n),ta:vV.bind(null,n),na:EV.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await zc(n)):(await n.fa.stop(),n.Ta.length>0&&(ae(qa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new n_(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r_(n,e){if(mn("AsyncQueue",`${e}: ${n}`),Vs(n))return new oe(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{static emptySet(e){return new al(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ue.comparator(t.key,i.key):(t,i)=>ue.comparator(t.key,i.key),this.keyedMap=Ju(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof al)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new al;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.ga=new ct(ue.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Sl{constructor(e,t,i,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Sl(e,t,al.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class AV{constructor(){this.queries=Cb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Re(t),l=a.queries;a.queries=Cb(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(i)}))})(this,new oe(X.ABORTED,"Firestore shutting down"))}}function Cb(){return new Si((n=>WA(n)),Vd)}async function WS(n,e){const t=Re(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new wV,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=r_(c,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&i_(t)}async function JS(n,e){const t=Re(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function SV(n,e){const t=Re(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&i_(t)}function IV(n,e,t){const i=Re(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function i_(n){n.Ca.forEach((e=>{e.next()}))}var oy,Db;(Db=oy||(oy={})).Ma="default",Db.Cache="cache";class ZS{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Sl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==oy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.key=e}}class tI{constructor(e){this.key=e}}class RV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=JA(e),this.tu=new al(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new xb,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,v)=>{const b=a.get(_),R=Uc(this.query,v)?v:null,U=!!b&&this.mutatedKeys.has(b.key),z=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;b&&R?b.data.isEqual(R.data)?U!==z&&(i.track({type:3,doc:R}),L=!0):this.su(b,R)||(i.track({type:2,doc:R}),L=!0,(m&&this.eu(R,m)>0||g&&this.eu(R,g)<0)&&(d=!0)):!b&&R?(i.track({type:0,doc:R}),L=!0):b&&!R&&(i.track({type:1,doc:b}),L=!0,(m||g)&&(d=!0)),L&&(R?(c=c.add(R),l=z?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,v)=>(function(R,U){const z=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:L})}};return z(R)-z(U)})(_.type,v.type)||this.eu(_.doc,v.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Sl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new tI(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new eI(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const s_="SyncEngine";class xV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class CV{constructor(e){this.key=e,this.hu=!1}}class DV{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Si((d=>WA(d)),Vd),this.Iu=new Map,this.Eu=new Set,this.du=new ct(ue.comparator),this.Au=new Map,this.Ru=new $y,this.Vu={},this.mu=new Map,this.fu=Fa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NV(n,e,t=!0){const i=oI(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await nI(i,e,t,!0),a}async function OV(n,e){const t=oI(n);await nI(t,e,!0,!1)}async function nI(n,e,t,i){const a=await JO(n.localStore,Jn(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await VV(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&GS(n.remoteStore,a),d}async function VV(n,e,t,i,a){n.pu=(v,b,R)=>(async function(z,L,te,W){let $=L.view.ru(te);$.Cs&&($=await bb(z.localStore,L.query,!1).then((({documents:N})=>L.view.ru(N,$))));const re=W&&W.targetChanges.get(L.targetId),ie=W&&W.targetMismatches.get(L.targetId)!=null,de=L.view.applyChanges($,z.isPrimaryClient,re,ie);return Ob(z,L.targetId,de.au),de.snapshot})(n,v,b,R);const l=await bb(n.localStore,e,!0),c=new RV(e,l.Qs),d=c.ru(l.documents),m=Bc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,m);Ob(n,t,g.au);const _=new xV(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function PV(n,e,t){const i=Re(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Vd(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await sy(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Jy(i.remoteStore,a.targetId),ly(i,a.targetId)})).catch(Xa)):(ly(i,a.targetId),await sy(i.localStore,a.targetId,!0))}async function MV(n,e){const t=Re(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Jy(t.remoteStore,i.targetId))}async function kV(n,e,t){const i=lI(n);try{const a=await(function(c,d){const m=Re(c),g=Ve.now(),_=d.reduce(((R,U)=>R.add(U.key)),Ne());let v,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let U=Vn(),z=Ne();return m.Ns.getEntries(R,_).next((L=>{U=L,U.forEach(((te,W)=>{W.isValidDocument()||(z=z.add(te))}))})).next((()=>m.localDocuments.getOverlayedDocuments(R,U))).next((L=>{v=L;const te=[];for(const W of d){const $=W2(W,v.get(W.key).overlayedDocument);$!=null&&te.push(new Ii(W.key,$,FA($.value.mapValue),an.exists(!0)))}return m.mutationQueue.addMutationBatch(R,g,te,d)})).next((L=>{b=L;const te=L.applyToLocalDocumentSet(v,z);return m.documentOverlayCache.saveOverlays(R,L.batchId,te)}))})).then((()=>({batchId:b.batchId,changes:eS(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new ct(Ie)),g=g.insert(d,m),c.Vu[c.currentUser.toKey()]=g})(i,a.batchId,t),await Fc(i,a.changes),await zc(i.remoteStore)}catch(a){const l=r_(a,"Failed to persist write");t.reject(l)}}async function rI(n,e){const t=Re(n);try{const i=await QO(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(ge(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ge(c.hu,14607):a.removedDocuments.size>0&&(ge(c.hu,42227),c.hu=!1))})),await Fc(t,i,e)}catch(i){await Xa(i)}}function Nb(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=Re(c);m.onlineState=d;let g=!1;m.queries.forEach(((_,v)=>{for(const b of v.Sa)b.va(d)&&(g=!0)})),g&&i_(m)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function LV(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new ct(ue.comparator);c=c.insert(l,yt.newNoDocument(l,Ee.min()));const d=Ne().add(l),m=new Ld(Ee.min(),new Map,new ct(Ie),c,d);await rI(i,m),i.du=i.du.remove(l),i.Au.delete(e),a_(i)}else await sy(i.localStore,e,!1).then((()=>ly(i,e,t))).catch(Xa)}async function UV(n,e){const t=Re(n),i=e.batch.batchId;try{const a=await YO(t.localStore,e);sI(t,i,null),iI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Fc(t,a)}catch(a){await Xa(a)}}async function BV(n,e,t){const i=Re(n);try{const a=await(function(c,d){const m=Re(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next((v=>(ge(v!==null,37113),_=v.keys(),m.mutationQueue.removeMutationBatch(g,v)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(i.localStore,e);sI(i,e,t),iI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Fc(i,a)}catch(a){await Xa(a)}}function iI(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function sI(n,e,t){const i=Re(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function ly(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||aI(n,i)}))}function aI(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Jy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),a_(n))}function Ob(n,e,t){for(const i of t)i instanceof eI?(n.Ru.addReference(i.key,e),jV(n,i)):i instanceof tI?(ae(s_,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||aI(n,i.key)):pe(19791,{wu:i})}function jV(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ae(s_,"New document in limbo: "+t),n.Eu.add(i),a_(n))}function a_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ue(He.fromString(e)),i=n.fu.next();n.Au.set(i,new CV(t)),n.du=n.du.insert(t,i),GS(n.remoteStore,new mi(Jn(Od(t.path)),i,"TargetPurposeLimboResolution",Wn.ce))}}async function Fc(n,e,t){const i=Re(n),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{c.push(i.pu(m,e,t).then((g=>{var _;if((g||t)&&i.isPrimaryClient){const v=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(g){a.push(g);const v=Xy.As(m.targetId,g);l.push(v)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(m,g){const _=Re(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>j.forEach(g,(b=>j.forEach(b.Es,(R=>_.persistence.referenceDelegate.addReference(v,b.targetId,R))).next((()=>j.forEach(b.ds,(R=>_.persistence.referenceDelegate.removeReference(v,b.targetId,R)))))))))}catch(v){if(!Vs(v))throw v;ae(Wy,"Failed to update sequence numbers: "+v)}for(const v of g){const b=v.targetId;if(!v.fromCache){const R=_.Ms.get(b),U=R.snapshotVersion,z=R.withLastLimboFreeSnapshotVersion(U);_.Ms=_.Ms.insert(b,z)}}})(i.localStore,l))}async function zV(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ae(s_,"User change. New user:",e.toKey());const i=await jS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new oe(X.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Fc(t,i.Ls)}}function FV(n,e){const t=Re(n),i=t.Au.get(e);if(i&&i.hu)return Ne().add(i.key);{let a=Ne();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function oI(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LV.bind(null,e),e.Pu.H_=SV.bind(null,e.eventManager),e.Pu.yu=IV.bind(null,e.eventManager),e}function lI(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BV.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BS(this.persistence,new US,e.initialUser,this.serializer)}Cu(e){return new Yy(jd.mi,this.serializer)}Du(e){return new FS}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class qV extends Cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ge(this.persistence.referenceDelegate instanceof ad,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new VS(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Yy((i=>ad.mi(i,t)),this.serializer)}}class HV extends Cc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await lI(this.xu.syncEngine),await zc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return BS(this.persistence,new US,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new VS(i,e.asyncQueue,t)}Mu(e,t){const i=new QN(t,this.persistence);return new YN(e.asyncQueue,i)}Cu(e){const t=HO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Qy(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,sV(),Uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new FS}}class ld{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Nb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zV.bind(null,this.syncEngine),await bV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new AV})()}createDatastore(e){const t=zd(e.databaseInfo.databaseId),i=(function(l){return new iV(l)})(e.databaseInfo);return(function(l,c,d,m){return new uV(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new hV(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Nb(this.syncEngine,t,0)),(function(){return Sb.v()?new Sb:new eV})())}createSyncEngine(e,t){return(function(a,l,c,d,m,g,_){const v=new DV(a,l,c,d,m,g);return _&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Re(a);ae(qa,"RemoteStore shutting down."),l.Ea.add(5),await jc(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ld.provider={build:()=>new ld};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class GV{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Qt.UNAUTHENTICATED,this.clientId=xy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ae(Cs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ae(Cs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=r_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Eg(n,e){n.asyncQueue.verifyOperationInProgress(),ae(Cs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await jS(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Vb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KV(n);ae(Cs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Rb(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>Rb(e.remoteStore,a))),n._onlineComponents=e}async function KV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae(Cs,"Using user provided OfflineComponentProvider");try{await Eg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;La("Error using user provided cache. Falling back to memory cache: "+t),await Eg(n,new Cc)}}else ae(Cs,"Using default OfflineComponentProvider"),await Eg(n,new qV(void 0));return n._offlineComponents}async function cI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae(Cs,"Using user provided OnlineComponentProvider"),await Vb(n,n._uninitializedComponentsProvider._online)):(ae(Cs,"Using default OnlineComponentProvider"),await Vb(n,new ld))),n._onlineComponents}function $V(n){return cI(n).then((e=>e.syncEngine))}async function hI(n){const e=await cI(n),t=e.eventManager;return t.onListen=NV.bind(null,e.syncEngine),t.onUnlisten=PV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MV.bind(null,e.syncEngine),t}function YV(n,e,t={}){const i=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const _=new uI({next:b=>{_.Nu(),c.enqueueAndForget((()=>JS(l,v)));const R=b.docs.has(d);!R&&b.fromCache?g.reject(new oe(X.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&b.fromCache&&m&&m.source==="server"?g.reject(new oe(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),v=new ZS(Od(d.path),_,{includeMetadataChanges:!0,qa:!0});return WS(l,v)})(await hI(n),n.asyncQueue,e,t,i))),i.promise}function QV(n,e,t={}){const i=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const _=new uI({next:b=>{_.Nu(),c.enqueueAndForget((()=>JS(l,v))),b.fromCache&&m.source==="server"?g.reject(new oe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),v=new ZS(d,_,{includeMetadataChanges:!0,qa:!0});return WS(l,v)})(await hI(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="firestore.googleapis.com",Mb=!0;class kb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dI,this.ssl=Mb}else this.host=e.host,this.ssl=e.ssl??Mb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RO)throw new oe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fI(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qd{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new PN;switch(i.type){case"firstParty":return new UN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new oe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Pb.get(t);i&&(ae("ComponentProvider","Removing Datastore"),Pb.delete(t),i.terminate())})(this),Promise.resolve()}}function XV(n,e,t,i={}){var g;n=er(n,qd);const a=Ns(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(wy(`https://${d}`),Ay("Firestore",!0)),l.host!==dI&&l.host!==d&&La("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:i};if(!Ss(m,c)&&(n._setSettings(m),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=Qt.MOCK_USER;else{_=Xw(i.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new oe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Qt(b)}n._authCredentials=new MN(new pA(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ja(this.firestore,e,this._query)}}class It{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new As(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Mc(t,It._jsonSchema))return new It(e,i||null,new ue(He.fromString(t.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:Dt("string",It._jsonSchemaVersion),referencePath:Dt("string")};class As extends Ja{constructor(e,t,i){super(e,t,Od(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new ue(e))}withConverter(e){return new As(this.firestore,e,this._path)}}function pr(n,e,...t){if(n=ut(n),yA("collection","path",e),n instanceof qd){const i=He.fromString(e,...t);return I0(i),new As(n,null,i)}{if(!(n instanceof It||n instanceof As))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return I0(i),new As(n.firestore,null,i)}}function pi(n,e,...t){if(n=ut(n),arguments.length===1&&(e=xy.newId()),yA("doc","path",e),n instanceof qd){const i=He.fromString(e,...t);return S0(i),new It(n,null,new ue(i))}{if(!(n instanceof It||n instanceof As))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return S0(i),new It(n.firestore,n instanceof As?n.converter:null,new ue(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="AsyncQueue";class Ub{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qS(this,"async_queue_retry"),this._c=()=>{const i=Uf();i&&ae(Lb,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vs(e))throw e;ae(Lb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",Bb(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=n_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&pe(47125,{Pc:Bb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Bb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ms extends qd{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Ub,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ub(e),this._firestoreClient=void 0,await e}}}function WV(n,e){const t=typeof n=="object"?n:wd(),i=typeof n=="string"?n:Jf,a=Os(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=$w("firestore");l&&XV(a,...l)}return a}function o_(n){if(n._terminated)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mI(n),n._firestoreClient}function mI(n){var i,a,l;const e=n._freezeSettings(),t=(function(d,m,g,_){return new A2(d,m,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,fI(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new GV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}function JV(n,e){La("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return ZV(n,ld.provider,{build:i=>new HV(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function ZV(n,e,t){if((n=er(n,Ms))._firestoreClient||n._terminated)throw new oe(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new oe(X.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},mI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(Nt.fromBase64String(e))}catch(t){throw new oe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xn(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mc(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Dt("string",Xn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zr._jsonSchemaVersion}}static fromJSON(e){if(Mc(e,zr._jsonSchema))return new zr(e.latitude,e.longitude)}}zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:Dt("string",zr._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mc(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fr(e.vectorValues);throw new oe(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:Dt("string",Fr._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=/^__.*__$/;class tP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ol(e,this.data,t,this.fieldTransforms)}}class pI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ii(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:n})}}class u_{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new u_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ud(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gI(this.Ac)&&eP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zd(e)}Cc(e,t,i,a=!1){return new u_({Ac:e,methodName:t,Dc:i,path:dt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gd(n){const e=n._freezeSettings(),t=zd(n._databaseId);return new nP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yI(n,e,t,i,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);c_("Data must be an object, but it was:",c,i);const d=_I(i,c);let m,g;if(l.merge)m=new En(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const v of l.mergeFields){const b=uy(e,v,t);if(!c.contains(b))throw new oe(X.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);EI(_,b)||_.push(b)}m=new En(_),g=c.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,g=c.fieldTransforms;return new tP(new sn(d),m,g)}class Kd extends l_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kd}}function rP(n,e,t,i){const a=n.Cc(1,e,t);c_("Data must be an object, but it was:",a,i);const l=[],c=sn.empty();Ps(i,((m,g)=>{const _=h_(e,m,t);g=ut(g);const v=a.yc(_);if(g instanceof Kd)l.push(_);else{const b=qc(g,v);b!=null&&(l.push(_),c.set(_,b))}}));const d=new En(l);return new pI(c,d,a.fieldTransforms)}function iP(n,e,t,i,a,l){const c=n.Cc(1,e,t),d=[uy(e,i,t)],m=[a];if(l.length%2!=0)throw new oe(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(uy(e,l[b])),m.push(l[b+1]);const g=[],_=sn.empty();for(let b=d.length-1;b>=0;--b)if(!EI(g,d[b])){const R=d[b];let U=m[b];U=ut(U);const z=c.yc(R);if(U instanceof Kd)g.push(R);else{const L=qc(U,z);L!=null&&(g.push(R),_.set(R,L))}}const v=new En(g);return new pI(_,v,c.fieldTransforms)}function sP(n,e,t,i=!1){return qc(t,n.Cc(i?4:3,e))}function qc(n,e){if(vI(n=ut(n)))return c_("Unsupported field value:",e,n),_I(n,e);if(n instanceof l_)return(function(i,a){if(!gI(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let m=qc(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=ut(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return H2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ve.fromDate(i);return{timestampValue:Al(a.serializer,l)}}if(i instanceof Ve){const l=new Ve(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Al(a.serializer,l)}}if(i instanceof zr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Xn)return{bytesValue:dS(a.serializer,i._byteString)};if(i instanceof It){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Hy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Fr)return(function(c,d){return{mapValue:{fields:{[ky]:{stringValue:Ly},[_l]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return By(d.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Ad(i)}`)})(n,e)}function _I(n,e){const t={};return VA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(n,((i,a)=>{const l=qc(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function vI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof zr||n instanceof Xn||n instanceof It||n instanceof l_||n instanceof Fr)}function c_(n,e,t){if(!vI(t)||!_A(t)){const i=Ad(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function uy(n,e,t){if((e=ut(e))instanceof Hd)return e._internalPath;if(typeof e=="string")return h_(n,e);throw ud("Field path arguments must be of type string or ",n,!1,void 0,t)}const aP=new RegExp("[~\\*/\\[\\]]");function h_(n,e,t){if(e.search(aP)>=0)throw ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hd(...e.split("."))._internalPath}catch{throw ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ud(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new oe(X.INVALID_ARGUMENT,d+n+m)}function EI(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($d("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oP extends TI{data(){return super.data()}}function $d(n,e){return typeof e=="string"?h_(n,e):e instanceof Hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f_{}class bI extends f_{}function ol(n,e,...t){let i=[];e instanceof f_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((m=>m instanceof d_)).length,d=l.filter((m=>m instanceof Yd)).length;if(c>1||c>0&&d>0)throw new oe(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class Yd extends bI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Yd(e,t,i)}_apply(e){const t=this._parse(e);return wI(e._query,t),new Ja(e.firestore,e.converter,Xg(e._query,t))}_parse(e){const t=Gd(e.firestore);return(function(l,c,d,m,g,_,v){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new oe(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zb(v,_);const U=[];for(const z of v)U.push(jb(m,l,z));b={arrayValue:{values:U}}}else b=jb(m,l,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zb(v,_),b=sP(d,c,v,_==="in"||_==="not-in");return Ue.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mr(n,e,t){const i=e,a=$d("where",n);return Yd._create(a,i,t)}class d_ extends f_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new d_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ye.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)wI(c,m),c=Xg(c,m)})(e._query,t),new Ja(e.firestore,e.converter,Xg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class m_ extends bI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new m_(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ic(l,c)})(e._query,this._field,this._direction);return new Ja(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Nl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function cd(n,e="asc"){const t=e,i=$d("orderBy",n);return m_._create(i,t)}function jb(n,e,t){if(typeof(t=ut(t))=="string"){if(t==="")throw new oe(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XA(e)&&t.indexOf("/")!==-1)throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(He.fromString(t));if(!ue.isDocumentKey(i))throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ac(n,new ue(i))}if(t instanceof It)return Ac(n,t._key);throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ad(t)}.`)}function zb(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wI(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uP{convertValue(e,t="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ps(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[_l].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>ot(c.doubleValue)));return new Fr(t)}convertGeoPoint(e){return new zr(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Dd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(bc(e));default:return null}}convertTimestamp(e){const t=bi(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=He.fromString(e);ge(wS(i),9688,{name:e});const a=new Ua(i.get(1),i.get(3)),l=new ue(i.popFirst(5));return a.isEqual(t)||mn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class tc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Va extends TI{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field($d("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Va._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Va._jsonSchemaVersion="firestore/documentSnapshot/1.0",Va._jsonSchema={type:Dt("string",Va._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Bf extends Va{data(e={}){return super.data(e)}}class ll{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new tc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Bf(this._firestore,this._userDataWriter,i.key,i,new tc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new Bf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new tc(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Bf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new tc(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:cP(d.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ll._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(n){n=er(n,It);const e=er(n.firestore,Ms);return YV(o_(e),n._key).then((t=>dP(e,n,t)))}ll._jsonSchemaVersion="firestore/querySnapshot/1.0",ll._jsonSchema={type:Dt("string",ll._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class SI extends uP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}function ul(n){n=er(n,Ja);const e=er(n.firestore,Ms),t=o_(e),i=new SI(e);return lP(n._query),QV(t,n._query).then((a=>new ll(e,i,n,a)))}function Tf(n,e,t){n=er(n,It);const i=er(n.firestore,Ms),a=AI(n.converter,e,t);return Qd(i,[yI(Gd(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,an.none())])}function II(n,e,t,...i){n=er(n,It);const a=er(n.firestore,Ms),l=Gd(a);let c;return c=typeof(e=ut(e))=="string"||e instanceof Hd?iP(l,"updateDoc",n._key,e,t,i):rP(l,"updateDoc",n._key,e),Qd(a,[c.toMutation(n._key,an.exists(!0))])}function fP(n){return Qd(er(n.firestore,Ms),[new kd(n._key,an.none())])}function RI(n,e){const t=er(n.firestore,Ms),i=pi(n),a=AI(n.converter,e);return Qd(t,[yI(Gd(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,an.exists(!1))]).then((()=>i))}function Qd(n,e){return(function(i,a){const l=new jr;return i.asyncQueue.enqueueAndForget((async()=>kV(await $V(i),a,l))),l.promise})(o_(n),e)}function dP(n,e,t){const i=t.docs.get(e._key),a=new SI(n);return new Va(n,a,e._key,i,new tc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Dl=a})(Qa),vr(new Zn("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Ms(new kN(i.getProvider("auth-internal")),new BN(c,i.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new oe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(g.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Tn(T0,b0,e),Tn(T0,b0,"esm2020")})();function xI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mP=xI,CI=new Ya("auth","Firebase",xI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=new bd("@firebase/auth");function pP(n,...e){hd.logLevel<=Le.WARN&&hd.warn(`Auth (${Qa}): ${n}`,...e)}function jf(n,...e){hd.logLevel<=Le.ERROR&&hd.error(`Auth (${Qa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n,...e){throw g_(n,...e)}function yr(n,...e){return g_(n,...e)}function p_(n,e,t){const i={...mP(),[e]:t};return new Ya("auth","Firebase",i).create(e,{appName:n.name})}function Pa(n){return p_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gP(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Gr(n,"argument-error"),p_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function g_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return CI.create(n,...e)}function Se(n,e,...t){if(!n)throw g_(e,...t)}function gi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw jf(e),new Error(e)}function Ai(n,e){n||gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function yP(){return Fb()==="http:"||Fb()==="https:"}function Fb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yP()||Jw()||"connection"in navigator)?navigator.onLine:!0}function vP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ai(t>e,"Short delay should be less than long delay!"),this.isMobile=uD()||hD()}get(){return _P()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(n,e){Ai(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bP=new Hc(3e4,6e4);function __(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Pl(n,e,t,i,a={}){return NI(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Pc({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return cD()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Ns(n.emulatorConfig.host)&&(g.credentials="include"),DI.fetch()(await OI(n,n.config.apiHost,t,d),g)})}async function NI(n,e,t){n._canInitEmulator=!1;const i={...EP,...e};try{const a=new AP(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw bf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw bf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw bf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw bf(n,"user-disabled",c);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw p_(n,_,g);Gr(n,_)}}catch(a){if(a instanceof tr)throw a;Gr(n,"network-request-failed",{message:String(a)})}}async function wP(n,e,t,i,a={}){const l=await Pl(n,e,t,i,a);return"mfaPendingCredential"in l&&Gr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function OI(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?y_(n.config,a):`${n.config.apiScheme}://${a}`;return TP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class AP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yr(this.auth,"network-request-failed")),bP.get())})}}function bf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=yr(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(n,e){return Pl(n,"POST","/v1/accounts:delete",e)}async function fd(n,e){return Pl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IP(n,e=!1){const t=ut(n),i=await t.getIdToken(e),a=v_(i);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:hc(Tg(a.auth_time)),issuedAtTime:hc(Tg(a.iat)),expirationTime:hc(Tg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Tg(n){return Number(n)*1e3}function v_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return jf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Hw(t);return a?JSON.parse(a):(jf("Failed to decode base64 JWT payload"),null)}catch(a){return jf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function qb(n){const e=v_(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof tr&&RP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function RP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(n){var v;const e=n.auth,t=await n.getIdToken(),i=await Dc(n,fd(e,{idToken:t}));Se(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=(v=a.providerUserInfo)!=null&&v.length?VI(a.providerUserInfo):[],c=DP(n.providerData,l),d=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new hy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function CP(n){const e=ut(n);await dd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DP(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function VI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(n,e){const t=await NI(n,{},async()=>{const i=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await OI(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&Ns(n.emulatorConfig.host)&&(m.credentials="include"),DI.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OP(n,e){return Pl(n,"POST","/v2/accounts:revokeToken",__(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=qb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await NP(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new cl;return i&&(Se(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Se(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class gr{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new xP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return IP(this,e)}reload(){return CP(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await dd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Pa(this.auth));const e=await this.getIdToken();return await Dc(this,SP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:R,providerData:U,stsTokenManager:z}=t;Se(v&&z,e,"internal-error");const L=cl.fromJSON(this.name,z);Se(typeof v=="string",e,"internal-error"),ds(i,e.name),ds(a,e.name),Se(typeof b=="boolean",e,"internal-error"),Se(typeof R=="boolean",e,"internal-error"),ds(l,e.name),ds(c,e.name),ds(d,e.name),ds(m,e.name),ds(g,e.name),ds(_,e.name);const te=new gr({uid:v,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:L,createdAt:g,lastLoginAt:_});return U&&Array.isArray(U)&&(te.providerData=U.map(W=>({...W}))),m&&(te._redirectEventId=m),te}static async _fromIdTokenResponse(e,t,i=!1){const a=new cl;a.updateFromServerResponse(t);const l=new gr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await dd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?VI(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new cl;d.updateFromIdToken(i);const m=new gr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=new Map;function yi(n){Ai(n instanceof Function,"Expected a class definition");let e=Hb.get(n);return e?(Ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Hb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}PI.type="NONE";const Gb=PI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n,e,t){return`firebase:${n}:${e}:${t}`}class hl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=zf(this.userKey,a.apiKey,l),this.fullPersistenceKey=zf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fd(this.auth,{idToken:e}).catch(()=>{});return t?gr._fromGetAccountInfoResponse(this.auth,t,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new hl(yi(Gb),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||yi(Gb);const c=zf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let v;if(typeof _=="string"){const b=await fd(e,{idToken:_}).catch(()=>{});if(!b)break;v=await gr._fromGetAccountInfoResponse(e,b,_)}else v=gr._fromJSON(e,_);g!==l&&(d=v),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new hl(l,e,i):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new hl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jI(e))return"Blackberry";if(zI(e))return"Webos";if(kI(e))return"Safari";if((e.includes("chrome/")||LI(e))&&!e.includes("edge/"))return"Chrome";if(BI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function MI(n=kt()){return/firefox\//i.test(n)}function kI(n=kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LI(n=kt()){return/crios\//i.test(n)}function UI(n=kt()){return/iemobile/i.test(n)}function BI(n=kt()){return/android/i.test(n)}function jI(n=kt()){return/blackberry/i.test(n)}function zI(n=kt()){return/webos/i.test(n)}function E_(n=kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VP(n=kt()){var e;return E_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function PP(){return fD()&&document.documentMode===10}function FI(n=kt()){return E_(n)||BI(n)||zI(n)||jI(n)||/windows phone/i.test(n)||UI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(n,e=[]){let t;switch(n){case"Browser":t=Kb(kt());break;case"Worker":t=`${Kb(kt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(n,e={}){return Pl(n,"GET","/v2/passwordPolicy",__(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=6;class UP{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??LP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $b(this),this.idTokenSubscription=new $b(this),this.beforeStateQueue=new MP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fd(this,{idToken:e}),i=await gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Qn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(i=m.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Pa(this));const t=e?ut(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kP(this),t=new UP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ya("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await OP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yi(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&pP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xd(n){return ut(n)}class $b{constructor(e){this.auth=e,this.observer=null,this.addObserver=_D(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jP(n){T_=n}function zP(n){return T_.loadJS(n)}function FP(){return T_.gapiScript}function qP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(n,e){const t=Os(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ss(l,e??{}))return a;Gr(a,"already-initialized")}return t.initialize({options:e})}function GP(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(yi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function KP(n,e,t){const i=Xd(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=HI(e),{host:c,port:d}=$P(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(Ss(g,i.config.emulator)&&Ss(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ns(c)?(wy(`${l}//${c}${m}`),Ay("Auth",!0)):YP()}function HI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $P(n){const e=HI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:Yb(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Yb(c)}}}function Yb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function YP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,t){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(n,e){return wP(n,"POST","/v1/accounts:signInWithIdp",__(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="http://localhost";class Ha extends GI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Ha(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return fl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,fl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fl(e,t)}buildRequest(){const e={requestUri:QP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends b_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends Gc{constructor(){super("facebook.com")}static credential(e){return Ha._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ha._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return di.credential(t,i)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Gc{constructor(){super("github.com")}static credential(e){return Ha._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Gc{constructor(){super("twitter.com")}static credential(e,t){return Ha._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ys.credential(t,i)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await gr._fromIdTokenResponse(e,i,a),c=Qb(i);return new Il({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Qb(i);return new Il({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Qb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends tr{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,md.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new md(e,t,i,a)}}function KI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?md._fromErrorAndOperation(n,l,e,i):l})}async function XP(n,e,t=!1){const i=await Dc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Il._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(n,e,t=!1){const{auth:i}=n;if(Qn(i.app))return Promise.reject(Pa(i));const a="reauthenticate";try{const l=await Dc(n,KI(i,a,e,n),t);Se(l.idToken,i,"internal-error");const c=v_(l.idToken);Se(c,i,"internal-error");const{sub:d}=c;return Se(n.uid===d,i,"user-mismatch"),Il._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Gr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP(n,e,t=!1){if(Qn(n.app))return Promise.reject(Pa(n));const i="signIn",a=await KI(n,i,e),l=await Il._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(n,e){return ut(n).setPersistence(e)}function eM(n,e,t,i){return ut(n).onIdTokenChanged(e,t,i)}function tM(n,e,t){return ut(n).beforeAuthStateChanged(e,t)}function nM(n,e,t,i){return ut(n).onAuthStateChanged(e,t,i)}function rM(n){return ut(n).signOut()}const pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pd,"1"),this.storage.removeItem(pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=1e3,sM=10;class YI extends $I{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);PP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,sM):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},iM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}YI.type="LOCAL";const QI=YI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI extends $I{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XI.type="SESSION";const WI=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Wd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await aM(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=w_("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){return window}function lM(n){qr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){return typeof qr().WorkerGlobalScope<"u"&&typeof qr().importScripts=="function"}async function uM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function hM(){return JI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firebaseLocalStorageDb",fM=1,gd="firebaseLocalStorage",eR="fbase_key";class Kc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jd(n,e){return n.transaction([gd],e?"readwrite":"readonly").objectStore(gd)}function dM(){const n=indexedDB.deleteDatabase(ZI);return new Kc(n).toPromise()}function fy(){const n=indexedDB.open(ZI,fM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(gd,{keyPath:eR})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(gd)?e(i):(i.close(),await dM(),e(await fy()))})})}async function Xb(n,e,t){const i=Jd(n,!0).put({[eR]:e,value:t});return new Kc(i).toPromise()}async function mM(n,e){const t=Jd(n,!1).get(e),i=await new Kc(t).toPromise();return i===void 0?null:i.value}function Wb(n,e){const t=Jd(n,!0).delete(e);return new Kc(t).toPromise()}const pM=800,gM=3;class tR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>gM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance(hM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await uM(),!this.activeServiceWorker)return;this.sender=new oM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fy();return await Xb(e,pd,"1"),await Wb(e,pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Xb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>mM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Jd(a,!1).getAll();return new Kc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tR.type="LOCAL";const yM=tR;new Hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n,e){return e?yi(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends GI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _M(n){return JP(n.auth,new A_(n),n.bypassAuthState)}function vM(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),WP(t,new A_(n),n.bypassAuthState)}async function EM(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),XP(t,new A_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _M;case"linkViaPopup":case"linkViaRedirect":return EM;case"reauthViaPopup":case"reauthViaRedirect":return vM;default:Gr(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=new Hc(2e3,1e4);async function bM(n,e,t){if(Qn(n.app))return Promise.reject(yr(n,"operation-not-supported-in-this-environment"));const i=Xd(n);gP(n,e,b_);const a=nR(i,t);return new xa(i,"signInViaPopup",e,a).executeNotNull()}class xa extends rR{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,xa.currentPopupAction&&xa.currentPopupAction.cancel(),xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=w_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TM.get())};e()}}xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="pendingRedirect",Ff=new Map;class AM extends rR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ff.get(this.auth._key());if(!e){try{const i=await SM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ff.set(this.auth._key(),e)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SM(n,e){const t=xM(e),i=RM(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function IM(n,e){Ff.set(n._key(),e)}function RM(n){return yi(n._redirectPersistence)}function xM(n){return zf(wM,n.config.apiKey,n.name)}async function CM(n,e,t=!1){if(Qn(n.app))return Promise.reject(Pa(n));const i=Xd(n),a=nR(i,e),c=await new AM(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=600*1e3;class NM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!iR(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jb(e))}saveEventToCache(e){this.cachedEventUids.add(Jb(e)),this.lastProcessedEventTime=Date.now()}}function Jb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function iR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(n,e={}){return Pl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MM=/^https?/;async function kM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await VM(n);for(const t of e)try{if(LM(t))return}catch{}Gr(n,"unauthorized-domain")}function LM(n){const e=cy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!MM.test(t))return!1;if(PM.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new Hc(3e4,6e4);function Zb(){const n=qr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function BM(n){return new Promise((e,t)=>{var a,l,c;function i(){Zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zb(),t(yr(n,"network-request-failed"))},timeout:UM.get()})}if((l=(a=qr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=qr().gapi)!=null&&c.load)i();else{const d=qP("iframefcb");return qr()[d]=()=>{gapi.load?i():t(yr(n,"network-request-failed"))},zP(`${FP()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw qf=null,e})}let qf=null;function jM(n){return qf=qf||BM(n),qf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=new Hc(5e3,15e3),FM="__/auth/iframe",qM="emulator/auth/iframe",HM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KM(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?y_(e,qM):`https://${n.config.authDomain}/${FM}`,i={apiKey:e.apiKey,appName:n.name,v:Qa},a=GM.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Pc(i).slice(1)}`}async function $M(n){const e=await jM(n),t=qr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:KM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HM,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=yr(n,"network-request-failed"),d=qr().setTimeout(()=>{l(c)},zM.get());function m(){qr().clearTimeout(d),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QM=500,XM=600,WM="_blank",JM="http://localhost";class ew{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZM(n,e,t,i=QM,a=XM){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...YM,width:i.toString(),height:a.toString(),top:l,left:c},g=kt().toLowerCase();t&&(d=LI(g)?WM:t),MI(g)&&(e=e||JM,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[R,U])=>`${b}${R}=${U},`,"");if(VP(g)&&d!=="_self")return ek(e||"",d),new ew(null);const v=window.open(e||"",d,_);Se(v,n,"popup-blocked");try{v.focus()}catch{}return new ew(v)}function ek(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="__/auth/handler",nk="emulator/auth/handler",rk=encodeURIComponent("fac");async function tw(n,e,t,i,a,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Qa,eventId:a};if(e instanceof b_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",yD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(e instanceof Gc){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await n._getAppCheckToken(),g=m?`#${rk}=${encodeURIComponent(m)}`:"";return`${ik(n)}?${Pc(d).slice(1)}${g}`}function ik({config:n}){return n.emulator?y_(n,nk):`https://${n.authDomain}/${tk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="webStorageSupport";class sk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WI,this._completeRedirectFn=CM,this._overrideRedirectResult=IM}async _openPopup(e,t,i,a){var c;Ai((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await tw(e,t,i,cy(),a);return ZM(e,l,w_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await tw(e,t,i,cy(),a);return lM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ai(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await $M(e),i=new NM(e);return t.register("authEvent",a=>(Se(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bg,{type:bg},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[bg];l!==void 0&&t(!!l),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return FI()||kI()||E_()}}const ak=sk;var nw="@firebase/auth",rw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uk(n){vr(new Zn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qI(n)},g=new BP(i,a,l,m);return GP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),vr(new Zn("auth-internal",e=>{const t=Xd(e.getProvider("auth").getImmediate());return(i=>new ok(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(nw,rw,lk(n)),Tn(nw,rw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=300,hk=Qw("authIdTokenMaxAge")||ck;let iw=null;const fk=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>hk)return;const a=t==null?void 0:t.token;iw!==a&&(iw=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function dk(n=wd()){const e=Os(n,"auth");if(e.isInitialized())return e.getImmediate();const t=HP(n,{popupRedirectResolver:ak,persistence:[yM,QI,WI]}),i=Qw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=fk(l.toString());tM(t,c,()=>c(t.currentUser)),eM(t,d=>c(d))}}const a=Kw("auth");return a&&KP(t,`http://${a}`),t}function mk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}jP({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=yr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",mk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uk("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="firebasestorage.googleapis.com",aR="storageBucket",pk=120*1e3,gk=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt extends tr{constructor(e,t,i=0){super(wg(e),`Firebase Storage: ${t} (${wg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _t;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_t||(_t={}));function wg(n){return"storage/"+n}function S_(){const n="An unknown error occurred, please check the error payload for server response.";return new vt(_t.UNKNOWN,n)}function yk(n){return new vt(_t.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function _k(n){return new vt(_t.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vk(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vt(_t.UNAUTHENTICATED,n)}function Ek(){return new vt(_t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Tk(n){return new vt(_t.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function bk(){return new vt(_t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wk(){return new vt(_t.CANCELED,"User canceled the upload/download.")}function Ak(n){return new vt(_t.INVALID_URL,"Invalid URL '"+n+"'.")}function Sk(n){return new vt(_t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Ik(){return new vt(_t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aR+"' property when initializing the app?")}function Rk(){return new vt(_t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xk(){return new vt(_t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ck(n){return new vt(_t.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dy(n){return new vt(_t.INVALID_ARGUMENT,n)}function oR(){return new vt(_t.APP_DELETED,"The Firebase app was deleted.")}function Dk(n){return new vt(_t.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fc(n,e){return new vt(_t.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Qu(n){throw new vt(_t.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Pn.makeFromUrl(e,t)}catch{return new Pn(e,"")}if(i.path==="")return i;throw Sk(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(re){re.path_=decodeURIComponent(re.path)}const _="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",R=new RegExp(`^https?://${v}/${_}/b/${a}/o${b}`,"i"),U={bucket:1,path:3},z=t===sR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",te=new RegExp(`^https?://${z}/${a}/${L}`,"i"),$=[{regex:d,indices:m,postModify:l},{regex:R,indices:U,postModify:g},{regex:te,indices:{bucket:1,path:2},postModify:g}];for(let re=0;re<$.length;re++){const ie=$[re],de=ie.regex.exec(e);if(de){const N=de[ie.indices.bucket];let I=de[ie.indices.path];I||(I=""),i=new Pn(N,I),ie.postModify(i);break}}if(i==null)throw Ak(e);return i}}class Nk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n,e,t){let i=1,a=null,l=null,c=!1,d=0;function m(){return d===2}let g=!1;function _(...L){g||(g=!0,e.apply(null,L))}function v(L){a=setTimeout(()=>{a=null,n(R,m())},L)}function b(){l&&clearTimeout(l)}function R(L,...te){if(g){b();return}if(L){b(),_.call(null,L,...te);return}if(m()||c){b(),_.call(null,L,...te);return}i<64&&(i*=2);let $;d===1?(d=2,$=0):$=(i+Math.random())*1e3,v($)}let U=!1;function z(L){U||(U=!0,b(),!g&&(a!==null?(L||(d=2),clearTimeout(a),v(0)):L||(d=1)))}return v(0),l=setTimeout(()=>{c=!0,z(!0)},t),z}function Vk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n){return n!==void 0}function Mk(n){return typeof n=="object"&&!Array.isArray(n)}function I_(n){return typeof n=="string"||n instanceof String}function sw(n){return R_()&&n instanceof Blob}function R_(){return typeof Blob<"u"}function aw(n,e,t,i){if(i<e)throw dy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw dy(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function lR(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var Ma;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ma||(Ma={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t,i,a,l,c,d,m,g,_,v,b=!0,R=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=v,this.retry=b,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,z)=>{this.resolve_=U,this.reject_=z,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new wf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Ma.NO_ERROR,m=l.getStatus();if(!d||kk(m,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Ma.ABORT;i(!1,new wf(!1,null,_));return}const g=this.successCodes_.indexOf(m)!==-1;i(!0,new wf(g,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());Pk(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=S_();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(a.canceled){const m=this.appDelete_?oR():wk();c(m)}else{const m=bk();c(m)}};this.canceled_?t(!1,new wf(!1,null,!0)):this.backoffId_=Ok(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Vk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Uk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Bk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jk(n,e){e&&(n["X-Firebase-GMPID"]=e)}function zk(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Fk(n,e,t,i,a,l,c=!0,d=!1){const m=lR(n.urlParams),g=n.url+m,_=Object.assign({},n.headers);return jk(_,e),Uk(_,t),Bk(_,l),zk(_,i),new Lk(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Hk(...n){const e=qk();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(R_())return new Blob(n);throw new vt(_t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Gk(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(n){if(typeof atob>"u")throw Ck("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ag{constructor(e,t){this.data=e,this.contentType=t||null}}function $k(n,e){switch(n){case Br.RAW:return new Ag(uR(e));case Br.BASE64:case Br.BASE64URL:return new Ag(cR(n,e));case Br.DATA_URL:return new Ag(Qk(e),Xk(e))}throw S_()}function uR(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,c=n.charCodeAt(++t);i=65536|(l&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Yk(n){let e;try{e=decodeURIComponent(n)}catch{throw fc(Br.DATA_URL,"Malformed data URL.")}return uR(e)}function cR(n,e){switch(n){case Br.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw fc(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Br.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw fc(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Kk(e)}catch(a){throw a.message.includes("polyfill")?a:fc(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}class hR{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw fc(Br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Wk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Qk(n){const e=new hR(n);return e.base64?cR(Br.BASE64,e.rest):Yk(e.rest)}function Xk(n){return new hR(n).contentType}function Wk(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t){let i=0,a="";sw(e)?(this.data_=e,i=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(sw(this.data_)){const i=this.data_,a=Gk(i,e,t);return a===null?null:new _s(a)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new _s(i,!0)}}static getBlob(...e){if(R_()){const t=e.map(i=>i instanceof _s?i.data_:i);return new _s(Hk.apply(null,t))}else{const t=e.map(c=>I_(c)?$k(Br.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const a=new Uint8Array(i);let l=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)a[l++]=c[d]}),new _s(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(n){let e;try{e=JSON.parse(n)}catch{return null}return Mk(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Zk(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function dR(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(n,e){return e}class dn{constructor(e,t,i,a){this.server=e,this.local=t||e,this.writable=!!i,this.xform=a||e4}}let Af=null;function t4(n){return!I_(n)||n.length<2?n:dR(n)}function mR(){if(Af)return Af;const n=[];n.push(new dn("bucket")),n.push(new dn("generation")),n.push(new dn("metageneration")),n.push(new dn("name","fullPath",!0));function e(l,c){return t4(c)}const t=new dn("name");t.xform=e,n.push(t);function i(l,c){return c!==void 0?Number(c):c}const a=new dn("size");return a.xform=i,n.push(a),n.push(new dn("timeCreated")),n.push(new dn("updated")),n.push(new dn("md5Hash",null,!0)),n.push(new dn("cacheControl",null,!0)),n.push(new dn("contentDisposition",null,!0)),n.push(new dn("contentEncoding",null,!0)),n.push(new dn("contentLanguage",null,!0)),n.push(new dn("contentType",null,!0)),n.push(new dn("metadata","customMetadata",!0)),Af=n,Af}function n4(n,e){function t(){const i=n.bucket,a=n.fullPath,l=new Pn(i,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function r4(n,e,t){const i={};i.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];i[c.local]=c.xform(i,e[c.server])}return n4(i,n),i}function pR(n,e,t){const i=fR(e);return i===null?null:r4(n,i,t)}function i4(n,e,t,i){const a=fR(e);if(a===null||!I_(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(g=>{const _=n.bucket,v=n.fullPath,b="/b/"+c(_)+"/o/"+c(v),R=x_(b,t,i),U=lR({alt:"media",token:g});return R+U})[0]}function s4(n,e){const t={},i=e.length;for(let a=0;a<i;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class gR{constructor(e,t,i,a){this.url=e,this.method=t,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n){if(!n)throw S_()}function a4(n,e){function t(i,a){const l=pR(n,a,e);return yR(l!==null),l}return t}function o4(n,e){function t(i,a){const l=pR(n,a,e);return yR(l!==null),i4(l,a,n.host,n._protocol)}return t}function _R(n){function e(t,i){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=Ek():a=vk():t.getStatus()===402?a=_k(n.bucket):t.getStatus()===403?a=Tk(n.path):a=i,a.status=t.getStatus(),a.serverResponse=i.serverResponse,a}return e}function l4(n){const e=_R(n);function t(i,a){let l=e(i,a);return i.getStatus()===404&&(l=yk(n.path)),l.serverResponse=a.serverResponse,l}return t}function u4(n,e,t){const i=e.fullServerUrl(),a=x_(i,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new gR(a,l,o4(n,t),c);return d.errorHandler=l4(e),d}function c4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function h4(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=c4(null,e)),i}function f4(n,e,t,i,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let $="";for(let re=0;re<2;re++)$=$+Math.random().toString().slice(2);return $}const m=d();c["Content-Type"]="multipart/related; boundary="+m;const g=h4(e,i,a),_=s4(g,t),v="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,b=`\r
--`+m+"--",R=_s.getBlob(v,i,b);if(R===null)throw Rk();const U={name:g.fullPath},z=x_(l,n.host,n._protocol),L="POST",te=n.maxUploadRetryTime,W=new gR(z,L,a4(n,t),te);return W.urlParams=U,W.headers=c,W.body=R.uploadData(),W.errorHandler=_R(e),W}class d4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ma.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ma.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ma.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,a,l){if(this.sent_)throw Qu("cannot .send() more than once");if(Ns(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class m4 extends d4{initXhr(){this.xhr_.responseType="text"}}function vR(){return new m4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t){this._service=e,t instanceof Pn?this._location=t:this._location=Pn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ga(e,t)}get root(){const e=new Pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dR(this._location.path)}get storage(){return this._service}get parent(){const e=Jk(this._location.path);if(e===null)return null;const t=new Pn(this._location.bucket,e);return new Ga(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Dk(e)}}function p4(n,e,t){n._throwIfRoot("uploadBytes");const i=f4(n.storage,n._location,mR(),new _s(e,!0),t);return n.storage.makeRequestWithTokens(i,vR).then(a=>({metadata:a,ref:n}))}function g4(n){n._throwIfRoot("getDownloadURL");const e=u4(n.storage,n._location,mR());return n.storage.makeRequestWithTokens(e,vR).then(t=>{if(t===null)throw xk();return t})}function y4(n,e){const t=Zk(n._location.path,e),i=new Pn(n._location.bucket,t);return new Ga(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(n){return/^[A-Za-z]+:\/\//.test(n)}function v4(n,e){return new Ga(n,e)}function ER(n,e){if(n instanceof C_){const t=n;if(t._bucket==null)throw Ik();const i=new Ga(t,t._bucket);return e!=null?ER(i,e):i}else return e!==void 0?y4(n,e):n}function E4(n,e){if(e&&_4(e)){if(n instanceof C_)return v4(n,e);throw dy("To use ref(service, url), the first argument must be a Storage instance.")}else return ER(n,e)}function ow(n,e){const t=e==null?void 0:e[aR];return t==null?null:Pn.makeFromBucketSpec(t,n)}function T4(n,e,t,i={}){n.host=`${e}:${t}`;const a=Ns(e);a&&(wy(`https://${n.host}/b`),Ay("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:Xw(l,n.app.options.projectId))}class C_{constructor(e,t,i,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=sR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pk,this._maxUploadRetryTime=gk,this._requests=new Set,a!=null?this._bucket=Pn.makeFromBucketSpec(a,this._host):this._bucket=ow(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pn.makeFromBucketSpec(this._url,e):this._bucket=ow(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ga(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new Nk(oR());{const c=Fk(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const lw="@firebase/storage",uw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="storage";function b4(n,e,t){return n=ut(n),p4(n,e,t)}function w4(n){return n=ut(n),g4(n)}function A4(n,e){return n=ut(n),E4(n,e)}function S4(n=wd(),e){n=ut(n);const i=Os(n,TR).getImmediate({identifier:e}),a=$w("storage");return a&&I4(i,...a),i}function I4(n,e,t,i={}){T4(n,e,t,i)}function R4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new C_(t,i,a,e,Qa)}function x4(){vr(new Zn(TR,R4,"PUBLIC").setMultipleInstances(!0)),Tn(lw,uw,""),Tn(lw,uw,"esm2020")}x4();const bR="@firebase/installations",D_="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=1e4,AR=`w:${D_}`,SR="FIS_v2",C4="https://firebaseinstallations.googleapis.com/v1",D4=3600*1e3,N4="installations",O4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ka=new Ya(N4,O4,V4);function IR(n){return n instanceof tr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR({projectId:n}){return`${C4}/projects/${n}/installations`}function xR(n){return{token:n.token,requestStatus:2,expiresIn:M4(n.expiresIn),creationTime:Date.now()}}async function CR(n,e){const i=(await e.json()).error;return Ka.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function DR({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function P4(n,{refreshToken:e}){const t=DR(n);return t.append("Authorization",k4(e)),t}async function NR(n){const e=await n();return e.status>=500&&e.status<600?n():e}function M4(n){return Number(n.replace("s","000"))}function k4(n){return`${SR} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L4({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=RR(n),a=DR(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={fid:t,authVersion:SR,appId:n.appId,sdkVersion:AR},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await NR(()=>fetch(i,d));if(m.ok){const g=await m.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:xR(g.authToken)}}else throw await CR("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=/^[cdef][\w-]{21}$/,my="";function j4(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=z4(n);return B4.test(t)?t:my}catch{return my}}function z4(n){return U4(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new Map;function PR(n,e){const t=Zd(n);MR(t,e),F4(t,e)}function MR(n,e){const t=VR.get(n);if(t)for(const i of t)i(e)}function F4(n,e){const t=q4();t&&t.postMessage({key:n,fid:e}),H4()}let Ca=null;function q4(){return!Ca&&"BroadcastChannel"in self&&(Ca=new BroadcastChannel("[Firebase] FID Change"),Ca.onmessage=n=>{MR(n.data.key,n.data.fid)}),Ca}function H4(){VR.size===0&&Ca&&(Ca.close(),Ca=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="firebase-installations-database",K4=1,$a="firebase-installations-store";let Sg=null;function N_(){return Sg||(Sg=iA(G4,K4,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore($a)}}})),Sg}async function yd(n,e){const t=Zd(n),a=(await N_()).transaction($a,"readwrite"),l=a.objectStore($a),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&PR(n,e.fid),e}async function kR(n){const e=Zd(n),i=(await N_()).transaction($a,"readwrite");await i.objectStore($a).delete(e),await i.done}async function em(n,e){const t=Zd(n),a=(await N_()).transaction($a,"readwrite"),l=a.objectStore($a),c=await l.get(t),d=e(c);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!c||c.fid!==d.fid)&&PR(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O_(n){let e;const t=await em(n.appConfig,i=>{const a=$4(i),l=Y4(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===my?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function $4(n){const e=n||{fid:j4(),registrationStatus:0};return LR(e)}function Y4(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Ka.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Q4(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:X4(n)}:{installationEntry:e}}async function Q4(n,e){try{const t=await L4(n,e);return yd(n.appConfig,t)}catch(t){throw IR(t)&&t.customData.serverCode===409?await kR(n.appConfig):await yd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function X4(n){let e=await cw(n.appConfig);for(;e.registrationStatus===1;)await OR(100),e=await cw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await O_(n);return i||t}return e}function cw(n){return em(n,e=>{if(!e)throw Ka.create("installation-not-found");return LR(e)})}function LR(n){return W4(n)?{fid:n.fid,registrationStatus:0}:n}function W4(n){return n.registrationStatus===1&&n.registrationTime+wR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J4({appConfig:n,heartbeatServiceProvider:e},t){const i=Z4(n,t),a=P4(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={installation:{sdkVersion:AR,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await NR(()=>fetch(i,d));if(m.ok){const g=await m.json();return xR(g)}else throw await CR("Generate Auth Token",m)}function Z4(n,{fid:e}){return`${RR(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V_(n,e=!1){let t;const i=await em(n.appConfig,l=>{if(!UR(l))throw Ka.create("not-registered");const c=l.authToken;if(!e&&n6(c))return l;if(c.requestStatus===1)return t=e6(n,e),l;{if(!navigator.onLine)throw Ka.create("app-offline");const d=i6(l);return t=t6(n,d),d}});return t?await t:i.authToken}async function e6(n,e){let t=await hw(n.appConfig);for(;t.authToken.requestStatus===1;)await OR(100),t=await hw(n.appConfig);const i=t.authToken;return i.requestStatus===0?V_(n,e):i}function hw(n){return em(n,e=>{if(!UR(e))throw Ka.create("not-registered");const t=e.authToken;return s6(t)?{...e,authToken:{requestStatus:0}}:e})}async function t6(n,e){try{const t=await J4(n,e),i={...e,authToken:t};return await yd(n.appConfig,i),t}catch(t){if(IR(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await kR(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await yd(n.appConfig,i)}throw t}}function UR(n){return n!==void 0&&n.registrationStatus===2}function n6(n){return n.requestStatus===2&&!r6(n)}function r6(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+D4}function i6(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function s6(n){return n.requestStatus===1&&n.requestTime+wR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a6(n){const e=n,{installationEntry:t,registrationPromise:i}=await O_(e);return i?i.catch(console.error):V_(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(n,e=!1){const t=n;return await l6(t),(await V_(t,e)).token}async function l6(n){const{registrationPromise:e}=await O_(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(n){if(!n||!n.options)throw Ig("App Configuration");if(!n.name)throw Ig("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Ig(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Ig(n){return Ka.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="installations",c6="installations-internal",h6=n=>{const e=n.getProvider("app").getImmediate(),t=u6(e),i=Os(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},f6=n=>{const e=n.getProvider("app").getImmediate(),t=Os(e,BR).getImmediate();return{getId:()=>a6(t),getToken:a=>o6(t,a)}};function d6(){vr(new Zn(BR,h6,"PUBLIC")),vr(new Zn(c6,f6,"PRIVATE"))}d6();Tn(bR,D_);Tn(bR,D_,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="analytics",m6="firebase_id",p6="origin",g6=60*1e3,y6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",P_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new bd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Mn=new Ya("analytics","Analytics",_6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(n){if(!n.startsWith(P_)){const e=Mn.create("invalid-gtag-resource",{gtagURL:n});return bn.warn(e.message),""}return n}function jR(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function E6(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function T6(n,e){const t=E6("firebase-js-sdk-policy",{createScriptURL:v6}),i=document.createElement("script"),a=`${P_}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function b6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function w6(n,e,t,i,a,l){const c=i[a];try{if(c)await e[c];else{const m=(await jR(t)).find(g=>g.measurementId===a);m&&await e[m.appId]}}catch(d){bn.error(d)}n("config",a,l)}async function A6(n,e,t,i,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const d=await jR(t);for(const m of c){const g=d.find(v=>v.measurementId===m),_=g&&e[g.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",i,a||{})}catch(l){bn.error(l)}}function S6(n,e,t,i){async function a(l,...c){try{if(l==="event"){const[d,m]=c;await A6(n,e,t,d,m)}else if(l==="config"){const[d,m]=c;await w6(n,e,t,i,d,m)}else if(l==="consent"){const[d,m]=c;n("consent",d,m)}else if(l==="get"){const[d,m,g]=c;n("get",d,m,g)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){bn.error(d)}}return a}function I6(n,e,t,i,a){let l=function(...c){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=S6(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function R6(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(P_)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=30,C6=1e3;class D6{constructor(e={},t=C6){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const zR=new D6;function N6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function O6(n){var c;const{appId:e,apiKey:t}=n,i={method:"GET",headers:N6(t)},a=y6.replace("{app-id}",e),l=await fetch(a,i);if(l.status!==200&&l.status!==304){let d="";try{const m=await l.json();(c=m.error)!=null&&c.message&&(d=m.error.message)}catch{}throw Mn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:d})}return l.json()}async function V6(n,e=zR,t){const{appId:i,apiKey:a,measurementId:l}=n.options;if(!i)throw Mn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw Mn.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new k6;return setTimeout(async()=>{d.abort()},g6),FR({appId:i,apiKey:a,measurementId:l},c,d,e)}async function FR(n,{throttleEndTimeMillis:e,backoffCount:t},i,a=zR){var d;const{appId:l,measurementId:c}=n;try{await P6(i,e)}catch(m){if(c)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:l,measurementId:c};throw m}try{const m=await O6(n);return a.deleteThrottleMetadata(l),m}catch(m){const g=m;if(!M6(g)){if(a.deleteThrottleMetadata(l),c)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:l,measurementId:c};throw m}const _=Number((d=g==null?void 0:g.customData)==null?void 0:d.httpStatus)===503?h0(t,a.intervalMillis,x6):h0(t,a.intervalMillis),v={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return a.setThrottleMetadata(l,v),bn.debug(`Calling attemptFetch again in ${_} millis`),FR(n,v,i,a)}}function P6(n,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),i(Mn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function M6(n){if(!(n instanceof tr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class k6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function L6(n,e,t,i,a){if(a&&a.global){n("event",t,i);return}else{const l=await e,c={...i,send_to:l};n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(){if(Sy())try{await tA()}catch(n){return bn.warn(Mn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return bn.warn(Mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function B6(n,e,t,i,a,l,c){const d=V6(n);d.then(b=>{t[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>bn.error(b)),e.push(d);const m=U6().then(b=>{if(b)return i.getId()}),[g,_]=await Promise.all([d,m]);R6(l)||T6(l,g.measurementId),a("js",new Date);const v=(c==null?void 0:c.config)??{};return v[p6]="firebase",v.update=!0,_!=null&&(v[m6]=_),a("config",g.measurementId,v),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.app=e}_delete(){return delete dc[this.app.options.appId],Promise.resolve()}}let dc={},fw=[];const dw={};let Rg="dataLayer",z6="gtag",mw,qR,pw=!1;function F6(){const n=[];if(Jw()&&n.push("This is a browser extension environment."),dD()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=Mn.create("invalid-analytics-context",{errorInfo:e});bn.warn(t.message)}}function q6(n,e,t){F6();const i=n.options.appId;if(!i)throw Mn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Mn.create("no-api-key");if(dc[i]!=null)throw Mn.create("already-exists",{id:i});if(!pw){b6(Rg);const{wrappedGtag:l,gtagCore:c}=I6(dc,fw,dw,Rg,z6);qR=l,mw=c,pw=!0}return dc[i]=B6(n,fw,dw,e,mw,Rg,t),new j6(n)}function H6(n=wd()){n=ut(n);const e=Os(n,_d);return e.isInitialized()?e.getImmediate():G6(n)}function G6(n,e={}){const t=Os(n,_d);if(t.isInitialized()){const a=t.getImmediate();if(Ss(e,t.getOptions()))return a;throw Mn.create("already-initialized")}return t.initialize({options:e})}function K6(n,e,t,i){n=ut(n),L6(qR,dc[n.app.options.appId],e,t,i).catch(a=>bn.error(a))}const gw="@firebase/analytics",yw="0.10.18";function $6(){vr(new Zn(_d,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return q6(i,a,t)},"PUBLIC")),vr(new Zn("analytics-internal",n,"PRIVATE")),Tn(gw,yw),Tn(gw,yw,"esm2020");function n(e){try{const t=e.getProvider(_d).getImmediate();return{logEvent:(i,a,l)=>K6(t,i,a,l)}}catch(t){throw Mn.create("interop-component-reg-failed",{reason:t})}}}$6();const Y6={apiKey:"AIzaSyA6nJyQhMFBLWWVHnTlUehun8de0BMjTZk",authDomain:"rsvp-system-2f6de.firebaseapp.com",projectId:"rsvp-system-2f6de",storageBucket:"rsvp-system-2f6de.firebasestorage.app",messagingSenderId:"59287727345",appId:"1:59287727345:web:273abf36e76a2cb68f8d50",measurementId:"G-8PKQMC1M49"},tm=sA(Y6),Wt=WV(tm),Xu=dk(tm),Q6=S4(tm);H6(tm);class X6{constructor(){this.initializePersistence()}async initializePersistence(){try{await ZP(Xu,QI)}catch(e){console.error("Failed to set auth persistence:",e)}}async signInWithGoogle(){const e=new di;e.addScope("email"),e.addScope("profile"),e.setCustomParameters({prompt:"select_account"});const t=await bM(Xu,e),i=this.mapFirebaseUser(t.user);if(!this.isAuthorized(i))throw await this.signOut(),new Error("Access denied. Only sodaworld.tv email addresses are allowed.");return i}async signOut(){await rM(Xu)}getCurrentUser(){const e=Xu.currentUser;return e?this.mapFirebaseUser(e):null}isAuthorized(e){return e.domain.toLowerCase()==="sodaworld.tv"}onAuthStateChanged(e){return nM(Xu,t=>{const i=t?this.mapFirebaseUser(t):null;e(i)})}mapFirebaseUser(e){const t=e.email||"",i=t.split("@")[1]||"";return{uid:e.uid,email:t,displayName:e.displayName||void 0,photoURL:e.photoURL||void 0,domain:i,lastLogin:new Date}}}const Sf=new X6,W6=({children:n})=>{const[e,t]=H.useState(null),[i,a]=H.useState(!0),[l,c]=H.useState(null);H.useEffect(()=>Sf.onAuthStateChanged(U=>{t(U),a(!1)}),[]);const d=async()=>{try{c(null),a(!0);const R=await Sf.signInWithGoogle();return t(R),R}catch(R){const U=R instanceof Error?R.message:"Authentication failed";throw c(U),R}finally{a(!1)}},m=async()=>{try{c(null),await Sf.signOut(),t(null)}catch(R){const U=R instanceof Error?R.message:"Sign out failed";throw c(U),R}},g=()=>{c(null)},_=e?Sf.isAuthorized(e):!1,b={user:e,loading:i,error:l,signIn:d,signOut:m,clearError:g,isAuthorized:_,isAuthenticated:e!==null};return S.jsx(zw.Provider,{value:b,children:n})},J6=({children:n,fallback:e})=>{const{user:t,loading:i,isAuthorized:a}=Vc();return i?S.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#6B46C1",color:"white"},children:S.jsx("div",{children:"Loading..."})}):!t||!a?e?S.jsx(S.Fragment,{children:e}):S.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#6B46C1",color:"white",padding:"20px",textAlign:"center"},children:[S.jsx("h2",{children:"Access Denied"}),S.jsx("p",{children:"You need to sign in with a sodaworld.tv email address to access this page."})]}):S.jsx(S.Fragment,{children:n})};class Z6 extends H.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error boundary caught an error:",e,t)}render(){return this.state.hasError?S.jsx("div",{className:"min-h-screen bg-[#8A2BE2] flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[S.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),S.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please refresh the page or try again later."}),S.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold py-2 px-4 rounded-xl transition-colors",children:"Refresh Page"})]})}):this.props.children}}var Hf=(n=>(n.VR="VR",n.IRL="IRL",n.Online="Online",n))(Hf||{}),On=(n=>(n.RAINBOW_HOP="rainbow_hop",n.SIMPLE_CLICKER="simple_clicker",n.COLOR_MATCH="color_match",n.NONE="none",n))(On||{});const eL=n=>{const e=[];return!n.title||n.title.trim().length===0?e.push({field:"title",message:"Event title is required"}):n.title.trim().length>100&&e.push({field:"title",message:"Event title must be 100 characters or less"}),n.datetime?new Date(n.datetime)<=new Date&&e.push({field:"datetime",message:"Event date must be in the future"}):e.push({field:"datetime",message:"Event date and time is required"}),(!n.createdBy||!tL(n.createdBy))&&e.push({field:"createdBy",message:"Valid creator email is required"}),n.description&&n.description.length>500&&e.push({field:"description",message:"Event description must be 500 characters or less"}),n.gameType&&!Object.values(On).includes(n.gameType)&&e.push({field:"gameType",message:"Invalid game type selected"}),{isValid:e.length===0,errors:e}},tL=n=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),nL=n=>["image/png","image/jpeg","image/jpg","image/gif"].includes(n.type)&&n.size<=5242880;class rL{constructor(){this.emailApiUrl="https://sendemail-be5gtmizmq-uc.a.run.app"}async sendRsvpConfirmation(e,t){const i={to:[e.email],subject:`RSVP Confirmation: ${t.title}`,html:this.generateConfirmationEmail(e,t)};await this.sendEmail(i)}async sendOrganizerNotification(e,t){const i={to:[t.createdBy],subject:`New RSVP for ${t.title}`,html:this.generateOrganizerNotificationEmail(e,t)};await this.sendEmail(i)}async sendEventReminder(e,t){const i={to:e,subject:`Reminder: ${t.title} is tomorrow!`,html:this.generateReminderEmail(t)};await this.sendEmail(i)}async sendEmail(e){try{console.log("Sending email to:",e.to.join(", "),"Subject:",e.subject);const t=await fetch(this.emailApiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const a=await t.text().catch(()=>"Unknown error");throw new Error(`Email API responded with status: ${t.status}, body: ${a}`)}const i=await t.json().catch(()=>({}));console.log("Email sent successfully:",i)}catch(t){const i=t instanceof Error?t.message:"Unknown error";throw console.error("Failed to send email:",{error:i,recipients:e.to,subject:e.subject,apiUrl:this.emailApiUrl}),new Error(`Email delivery failed: ${i}`)}}generateConfirmationEmail(e,t){const i=new Date(t.datetime);return`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background-color: #8A2BE2; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }
          .content { background-color: #f9f9f9; padding: 20px; border-radius: 0 0 8px 8px; }
          .highlight { background-color: #FFD700; padding: 15px; border-radius: 5px; margin: 15px 0; }
          .event-details { background-color: white; padding: 15px; border-radius: 5px; border-left: 4px solid #8A2BE2; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> RSVP Confirmed!</h1>
          </div>
          <div class="content">
            <p>Hi <strong>${e.name}</strong>,</p>
            <p>Great news! Your RSVP for <strong>${t.title}</strong> has been confirmed.</p>

            <div class="event-details">
              <h3> Event Details</h3>
              <p><strong>Event:</strong> ${t.title}</p>
              <p><strong>Date:</strong> ${i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</p>
              <p><strong>Time:</strong> ${i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZoneName:"short"})}</p>
              <p><strong>Your connection method:</strong> ${e.connectionMethod}</p>
              ${t.description?`<p><strong>Description:</strong> ${t.description}</p>`:""}
            </div>

            <div class="highlight">
              <p><strong> What's next?</strong></p>
              <p>You'll receive a reminder email the day before the event. If you need to make any changes or have questions, please contact the event organizer.</p>
            </div>

            <p>We're excited to see you there!</p>
            <p>Best regards,<br>The Event Team</p>
          </div>
        </div>
      </body>
      </html>
    `}generateOrganizerNotificationEmail(e,t){const i=new Date(t.datetime),a=e.submittedAt?new Date(e.submittedAt):new Date;return`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background-color: #8A2BE2; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }
          .content { background-color: #f9f9f9; padding: 20px; border-radius: 0 0 8px 8px; }
          .attendee-info { background-color: white; padding: 15px; border-radius: 5px; border-left: 4px solid #FFD700; margin: 15px 0; }
          .event-info { background-color: #e8f4fd; padding: 15px; border-radius: 5px; margin: 15px 0; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> New RSVP Received!</h1>
          </div>
          <div class="content">
            <p>Good news! You have a new RSVP for your event.</p>

            <div class="event-info">
              <h3> Event: ${t.title}</h3>
              <p><strong>Date:</strong> ${i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</p>
              <p><strong>Time:</strong> ${i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}</p>
            </div>

            <div class="attendee-info">
              <h3> New Attendee Details</h3>
              <p><strong>Name:</strong> ${e.name}</p>
              <p><strong>Email:</strong> ${e.email}</p>
              <p><strong>Connection Method:</strong> ${e.connectionMethod}</p>
              <p><strong>RSVP Submitted:</strong> ${a.toLocaleDateString("en-US")} at ${a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}</p>
            </div>

            <p>You can view all RSVPs for this event in your <a href="/dashboard" style="color: #8A2BE2; text-decoration: none;">event dashboard</a>.</p>

            <p>Happy organizing!<br>The Event Team</p>
          </div>
        </div>
      </body>
      </html>
    `}generateReminderEmail(e){const t=new Date(e.datetime),i=t.toDateString()===new Date().toDateString(),a=t.toDateString()===new Date(Date.now()+1440*60*1e3).toDateString();return`
      <!DOCTYPE html>
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background-color: #FFD700; color: #333; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }
          .content { background-color: #f9f9f9; padding: 20px; border-radius: 0 0 8px 8px; }
          .event-details { background-color: white; padding: 15px; border-radius: 5px; border-left: 4px solid #8A2BE2; margin: 15px 0; }
          .highlight { background-color: #FFE4B5; padding: 15px; border-radius: 5px; margin: 15px 0; text-align: center; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Event Reminder</h1>
          </div>
          <div class="content">
            <div class="highlight">
              <h2>${i?" Today is the day!":a?" Tomorrow is the day!":" Event reminder"}</h2>
              <p><strong>${e.title}</strong> is ${i?"happening today":a?"happening tomorrow":"coming up soon"}!</p>
            </div>

            <div class="event-details">
              <h3> Event Details</h3>
              <p><strong>Event:</strong> ${e.title}</p>
              <p><strong>Date:</strong> ${t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</p>
              <p><strong>Time:</strong> ${t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZoneName:"short"})}</p>
              ${e.description?`<p><strong>Description:</strong> ${e.description}</p>`:""}
            </div>

            <p><strong> Getting ready:</strong></p>
            <ul>
              <li>Make sure you have the connection details you provided when you RSVP'd</li>
              <li>Set a reminder on your calendar</li>
              <li>Check your connection method and any necessary software/apps</li>
            </ul>

            <p>We're excited to see you ${i?"today":a?"tomorrow":"soon"}!</p>
            <p>Best regards,<br>The Event Team</p>
          </div>
        </div>
      </body>
      </html>
    `}}const _w=new rL;class iL{constructor(){this.collectionName="events"}async createEvent(e){const t=new Date,i={...e,datetime:Ve.fromDate(e.datetime),createdAt:Ve.fromDate(t),updatedAt:Ve.fromDate(t)},a=await RI(pr(Wt,this.collectionName),i);return{...e,id:a.id,createdAt:t,updatedAt:t}}async getEventsByUser(e){const t=ol(pr(Wt,this.collectionName),mr("createdBy","==",e),mr("isActive","==",!0),cd("datetime","desc"));return(await ul(t)).docs.map(a=>this.mapDocToEvent(a))}async getActiveEvents(){const e=new Date,t=ol(pr(Wt,this.collectionName),mr("isActive","==",!0),mr("datetime",">",Ve.fromDate(e)),cd("datetime","asc"));return(await ul(t)).docs.map(a=>this.mapDocToEvent(a))}async getEventsForReminders(){const e=new Date;e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const t=new Date(e);t.setDate(t.getDate()+1);const i=ol(pr(Wt,this.collectionName),mr("isActive","==",!0),mr("datetime",">=",Ve.fromDate(e)),mr("datetime","<",Ve.fromDate(t)));return(await ul(i)).docs.map(l=>this.mapDocToEvent(l))}async getEventById(e){const t=pi(Wt,this.collectionName,e),i=await hP(t);return i.exists()?this.mapDocToEvent(i):null}async updateEvent(e,t){const i=pi(Wt,this.collectionName,e),a={...t,updatedAt:Ve.fromDate(new Date)};t.datetime&&(a.datetime=Ve.fromDate(t.datetime)),await II(i,a)}async deleteEvent(e){const t=pi(Wt,this.collectionName,e);await fP(t)}async uploadEventLogo(e){const i=`event-logos/${Date.now()}-${e.name}`,a=A4(Q6,i);return await b4(a,e),await w4(a)}mapDocToEvent(e){const t=e.data();return{id:e.id,title:t.title,description:t.description,datetime:t.datetime.toDate(),createdBy:t.createdBy,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate(),logoUrl:t.logoUrl,gameType:t.gameType||On.RAINBOW_HOP,isActive:t.isActive??!0}}}const _i=new iL;class sL{constructor(){this.collectionName="rsvps"}async submitRsvp(e){const t={...e,submittedAt:Ve.fromDate(new Date),reminderSent:!1},a={id:(await RI(pr(Wt,this.collectionName),t)).id,...e,submittedAt:t.submittedAt.toDate(),reminderSent:!1};try{const l=await _i.getEventById(e.eventId);if(l){const c=[_w.sendRsvpConfirmation(a,l).catch(d=>{console.error("Failed to send RSVP confirmation email:",d)}),_w.sendOrganizerNotification(a,l).catch(d=>{console.error("Failed to send organizer notification email:",d)})];await Promise.allSettled(c)}else console.error("Event not found for email notifications:",e.eventId)}catch(l){console.error("Error during email notification process:",l)}}async getRsvpsByEvent(e){const t=ol(pr(Wt,this.collectionName),mr("eventId","==",e),cd("submittedAt","desc"));return(await ul(t)).docs.map(a=>this.mapDocToRsvp(a))}async getRsvpsByEmail(e){const t=ol(pr(Wt,this.collectionName),mr("email","==",e),cd("submittedAt","desc"));return(await ul(t)).docs.map(a=>this.mapDocToRsvp(a))}async getRsvpsNeedingReminders(e){const t=ol(pr(Wt,this.collectionName),mr("eventId","==",e),mr("reminderSent","==",!1));return(await ul(t)).docs.map(a=>this.mapDocToRsvp(a))}async markReminderSent(e){const t=[];for(const i of e){const a=pi(Wt,this.collectionName,i);t.push(II(a,{reminderSent:!0}))}await Promise.all(t)}mapDocToRsvp(e){const t=e.data();return{id:e.id,eventId:t.eventId,name:t.name,email:t.email,connectionMethod:t.connectionMethod,submittedAt:t.submittedAt.toDate(),reminderSent:t.reminderSent||!1}}}const aL=new sL,oL=({onSubmit:n,eventId:e})=>{const[t,i]=H.useState({name:"",email:"",connectionMethod:null,eventId:e||"default-event"}),[a,l]=H.useState(""),[c,d]=H.useState(!1);Aw.useEffect(()=>{i(v=>({...v,eventId:e||"default-event"}))},[e]);const m=v=>{const{name:b,value:R}=v.target;i(U=>({...U,[b]:R}))},g=v=>{i(b=>({...b,connectionMethod:v}))},_=async v=>{if(v.preventDefault(),!c){if(!t.name.trim()){l("Please enter your name.");return}if(!t.email.trim()||!/^\S+@\S+\.\S+$/.test(t.email)){l("Please enter a valid email.");return}if(!t.connectionMethod){l("Please select how you will connect.");return}l(""),d(!0);try{await aL.submitRsvp({name:t.name.trim(),email:t.email.trim(),connectionMethod:t.connectionMethod,eventId:t.eventId}),console.log("RSVP submitted successfully"),n()}catch(b){console.error("Error submitting RSVP: ",b),l("Failed to submit RSVP. Please try again later.")}finally{d(!1)}}};return S.jsxs("form",{onSubmit:_,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),S.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:m,className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-purple-500 focus:border-purple-500 transition duration-300 text-lg",placeholder:"Your Name"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),S.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:m,className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-purple-500 focus:border-purple-500 transition duration-300 text-lg",placeholder:"your@email.com"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How will you connect?"}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.keys(Hf).map(v=>S.jsxs("div",{children:[S.jsx("input",{type:"radio",id:v,name:"connectionMethod",value:v,className:"sr-only peer",checked:t.connectionMethod===v,onChange:()=>g(Hf[v])}),S.jsx("label",{htmlFor:v,className:"flex items-center justify-center w-full p-4 border-2 border-slate-300 rounded-xl cursor-pointer transition-all duration-300 peer-checked:bg-purple-500 peer-checked:text-white peer-checked:border-purple-500 hover:border-purple-400",children:Hf[v]})]},v))})]}),a&&S.jsx("p",{className:"text-red-500 text-center",children:a}),S.jsx("button",{type:"submit",disabled:c,className:"w-full bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold text-2xl py-4 px-4 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300 ease-in-out disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none",children:c?"Submitting...":"Submit RSVP"})]})},vw=400,Wo=200,Ew=30,Jo=30,lL=.5,uL=-10,xg=20,Cg=40,cL=4,hL=({onPlayAgain:n})=>{const[e,t]=H.useState(0),[i,a]=H.useState(30),[l,c]=H.useState(!1),[d,m]=H.useState(!1);H.useEffect(()=>{if(l&&i>0){const v=setTimeout(()=>a(i-1),1e3);return()=>clearTimeout(v)}else i===0&&l&&(c(!1),m(!0))},[i,l]);const g=()=>{!l&&!d?(c(!0),t(0),a(30)):l&&t(e+1)},_=()=>{t(0),a(30),c(!1),m(!1)};return S.jsxs("div",{className:"flex flex-col items-center text-center",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Thanks for your RSVP!"}),S.jsx("p",{className:"text-gray-600 mb-4",children:"Click as fast as you can!"}),S.jsxs("div",{className:"bg-gray-100 border-4 border-gray-300 rounded-lg p-8 w-96 h-64 flex flex-col items-center justify-center",children:[S.jsxs("div",{className:"text-2xl font-bold mb-4",children:["Score: ",e]}),S.jsxs("div",{className:"text-lg mb-4",children:["Time: ",i,"s"]}),S.jsx("button",{onClick:g,className:"w-32 h-32 bg-yellow-400 hover:bg-yellow-500 rounded-full text-4xl font-bold transition-colors transform active:scale-95",children:!l&&!d?"":""}),!l&&!d&&S.jsx("p",{className:"mt-4 text-gray-600",children:"Click to start!"}),d&&S.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 text-white rounded-lg",children:[S.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Time's Up!"}),S.jsxs("p",{className:"mb-4",children:["Final Score: ",e]}),S.jsx("button",{onClick:_,className:"bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold py-2 px-6 rounded-lg",children:"Play Again"})]})]}),S.jsx("button",{onClick:n,className:"mt-6 text-sm text-gray-500 hover:text-purple-600 underline",children:"Back to RSVP Form"})]})},fL=({onPlayAgain:n})=>{const e=["","","","","",""],[t,i]=H.useState([]),[a,l]=H.useState([]),[c,d]=H.useState(!1),[m,g]=H.useState(0),[_,v]=H.useState(0),[b,R]=H.useState(!1),[U,z]=H.useState(!1),L=()=>{const $=[e[Math.floor(Math.random()*e.length)]];i($),l([]),v(0),R(!1),z(!0),te($)},te=$=>{d(!0),g(0);const re=ie=>{ie<$.length?(g(ie),setTimeout(()=>{g(-1),setTimeout(()=>re(ie+1),300)},600)):d(!1)};setTimeout(()=>re(0),500)},W=$=>{if(c||b)return;const re=[...a,$];if(l(re),re[re.length-1]!==t[re.length-1]){R(!0);return}if(re.length===t.length){v(_+1);const ie=[...t,e[Math.floor(Math.random()*e.length)]];i(ie),l([]),setTimeout(()=>te(ie),1e3)}};return S.jsxs("div",{className:"flex flex-col items-center text-center",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Thanks for your RSVP!"}),S.jsx("p",{className:"text-gray-600 mb-4",children:"Remember the sequence!"}),S.jsxs("div",{className:"bg-gray-100 border-4 border-gray-300 rounded-lg p-8 w-96 h-64",children:[S.jsxs("div",{className:"text-xl font-bold mb-4",children:["Level: ",_+1]}),S.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:e.map(($,re)=>S.jsx("button",{onClick:()=>W($),className:`w-16 h-16 text-2xl rounded-lg border-2 transition-all ${m===t.indexOf($)&&c?"border-white bg-white scale-110":"border-gray-400 hover:scale-105"}`,disabled:c,children:$},re))}),!U&&!b&&S.jsx("button",{onClick:L,className:"bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold py-2 px-6 rounded-lg",children:"Start Game"}),b&&S.jsxs("div",{className:"text-center",children:[S.jsx("h3",{className:"text-xl font-bold mb-2",children:"Game Over!"}),S.jsxs("p",{className:"mb-4",children:["You reached level ",_+1]}),S.jsx("button",{onClick:L,className:"bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold py-2 px-6 rounded-lg",children:"Play Again"})]})]}),S.jsx("button",{onClick:n,className:"mt-6 text-sm text-gray-500 hover:text-purple-600 underline",children:"Back to RSVP Form"})]})},dL=({onPlayAgain:n})=>{const[e,t]=H.useState({playerY:Wo-Jo,playerVelocity:0,obstacles:[],score:0,isGameOver:!1,isGameRunning:!1,lastTime:0,nextObstacleTime:0,obstacleCounter:0}),i=H.useRef(null),a=H.useRef(e);H.useEffect(()=>{a.current=e},[e]);const l=()=>S.jsx("div",{style:{width:Ew,height:Jo},className:"bg-gradient-to-b from-red-500 via-yellow-400 to-blue-500 rounded-md flex items-center justify-center",children:S.jsx("div",{className:"text-xl",children:""})}),c=()=>S.jsx("div",{style:{width:xg,height:Cg},className:"bg-green-600 border-2 border-green-800 rounded-t-md flex items-center justify-center text-white",children:""}),d=_=>{const v=a.current;if(!v.isGameRunning||v.isGameOver)return;if(v.lastTime===0){t(re=>({...re,lastTime:_,nextObstacleTime:_+1500})),i.current=requestAnimationFrame(d);return}_-v.lastTime;const b=v.playerVelocity+lL,R=Math.min(v.playerY+b,Wo-Jo),U=v.obstacles.map(re=>({...re,x:re.x-cL})).filter(re=>re.x>-xg),z={x:50,y:R,width:Ew,height:Jo};let L=!1;for(const re of U){const ie={x:re.x,y:Wo-Cg,width:xg,height:Cg};if(z.x<ie.x+ie.width&&z.x+z.width>ie.x&&z.y<ie.y+ie.height&&z.y+z.height>ie.y){L=!0;break}}if(L){t(re=>({...re,isGameOver:!0,isGameRunning:!1}));return}let te=U,W=v.nextObstacleTime,$=v.obstacleCounter;_>=v.nextObstacleTime&&(te=[...U,{x:vw,id:$++}],W=_+1e3+Math.random()*1500),t({...v,playerY:R,playerVelocity:b,obstacles:te,score:v.score+1,lastTime:_,nextObstacleTime:W,obstacleCounter:$}),i.current=requestAnimationFrame(d)},m=()=>{i.current&&cancelAnimationFrame(i.current),t({playerY:Wo-Jo,playerVelocity:0,obstacles:[],score:0,isGameOver:!1,isGameRunning:!0,lastTime:0,nextObstacleTime:0,obstacleCounter:0}),i.current=requestAnimationFrame(d)},g=()=>{const _=a.current;_.isGameRunning&&!_.isGameOver&&(_.playerY>=Wo-Jo-5||_.playerVelocity>=-2)&&t(v=>({...v,playerVelocity:uL}))};return H.useEffect(()=>{const _=b=>{if(b.code==="Space"||b.key==="ArrowUp"){b.preventDefault();const R=a.current;!R.isGameRunning&&!R.isGameOver?m():g()}},v=b=>{b.preventDefault();const R=a.current;!R.isGameRunning&&!R.isGameOver?m():g()};return window.addEventListener("keydown",_),window.addEventListener("touchstart",v),()=>{window.removeEventListener("keydown",_),window.removeEventListener("touchstart",v),i.current&&cancelAnimationFrame(i.current)}},[]),S.jsxs("div",{className:"flex flex-col items-center text-center",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Thanks for your RSVP!"}),S.jsx("p",{className:"text-gray-600 mb-4",children:"Have some fun while you wait!"}),S.jsxs("div",{className:"relative bg-gray-100 border-4 border-gray-300 rounded-lg overflow-hidden cursor-pointer",style:{width:vw,height:Wo},onClick:_=>{_.preventDefault();const v=a.current;!v.isGameRunning&&!v.isGameOver?m():g()},children:[S.jsx("div",{className:"absolute left-[50px] transition-transform duration-100",style:{transform:`translateY(${e.playerY}px)`},children:S.jsx(l,{})}),e.obstacles.map(_=>S.jsx("div",{className:"absolute bottom-0",style:{transform:`translateX(${_.x}px)`},children:S.jsx(c,{})},_.id)),S.jsxs("div",{className:"absolute top-2 right-2 text-lg font-bold text-gray-500",children:["Score: ",Math.floor(e.score/10)]}),!e.isGameRunning&&!e.isGameOver&&S.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-30 text-white",children:[S.jsx("h3",{className:"text-3xl font-bold",children:"Rainbow Hop!"}),S.jsx("p",{children:"Click or Press Space to Start"})]}),e.isGameOver&&S.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 text-white",children:[S.jsx("h3",{className:"text-4xl font-bold mb-2",children:"Game Over"}),S.jsx("button",{onClick:m,className:"mt-4 bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold py-2 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300",children:"Play Again"})]})]}),S.jsx("button",{onClick:n,className:"mt-6 text-sm text-gray-500 hover:text-purple-600 underline",children:"Back to RSVP Form"})]})},mL=({onPlayAgain:n,gameType:e=On.RAINBOW_HOP})=>{if(e===On.NONE)return S.jsxs("div",{className:"flex flex-col items-center text-center",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Thanks for your RSVP!"}),S.jsx("p",{className:"text-gray-600 mb-4",children:"We look forward to seeing you at the event!"}),S.jsx("button",{onClick:n,className:"mt-6 text-sm text-gray-500 hover:text-purple-600 underline",children:"Back to RSVP Form"})]});switch(e){case On.SIMPLE_CLICKER:return S.jsx(hL,{onPlayAgain:n});case On.COLOR_MATCH:return S.jsx(fL,{onPlayAgain:n});case On.RAINBOW_HOP:default:return S.jsx(dL,{onPlayAgain:n})}},HR=()=>S.jsx("div",{className:"relative w-full h-full",children:S.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:[S.jsx("defs",{children:S.jsx("style",{children:`
                    @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Luckiest+Guy&display=swap');
                `})}),S.jsx("circle",{cx:"100",cy:"100",r:"98",fill:"white",stroke:"black",strokeWidth:"3"}),S.jsx("path",{d:"M 2 100 A 98 98 0 0 1 198 100 L 2 100",fill:"#FBBF24"}),S.jsxs("text",{x:"100",y:"45",textAnchor:"middle",style:{fontFamily:"Fredoka One, cursive"},fontSize:"11",fill:"black",fontWeight:"500",children:[S.jsx("tspan",{x:"100",dy:"0",children:"You are invited to play in"}),S.jsx("tspan",{x:"100",dy:"1.3em",children:"the soda labs. An all day music,"}),S.jsx("tspan",{x:"100",dy:"1.3em",children:"culture and tech experiment"})]}),S.jsxs("g",{children:[S.jsx("circle",{cx:"100",cy:"100",r:"25",fill:"white",stroke:"black",strokeWidth:"0.5"}),S.jsx("circle",{cx:"100",cy:"100",r:"23",fill:"#FBBF24",stroke:"black",strokeWidth:"0.5"}),S.jsx("text",{x:"100",y:"105",textAnchor:"middle",style:{fontFamily:"Fredoka One, cursive"},fontSize:"12",fill:"black",fontWeight:"bold",children:"RSVP"})]}),S.jsx("text",{x:"100",y:"165",textAnchor:"middle",style:{fontFamily:"Luckiest Guy, cursive"},fontSize:"24",fill:"#FBBF24",stroke:"black",strokeWidth:"1.5",strokeLinejoin:"round",letterSpacing:"0.5",children:"prototype sessions"})]})}),pL=({onContinue:n,event:e})=>S.jsxs("div",{className:"min-h-screen w-full flex flex-col bg-[#8A2BE2] text-white cursor-pointer",onClick:n,role:"button",tabIndex:0,onKeyPress:t=>t.key==="Enter"&&n(),"aria-label":"Continue to RSVP form",children:[S.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:S.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center",children:[S.jsx("div",{className:"w-full max-w-xs sm:max-w-sm transform hover:scale-105 transition-transform duration-300 ease-in-out",children:e!=null&&e.logoUrl?S.jsx("img",{src:e.logoUrl,alt:e.title,className:"w-full h-full object-contain rounded-lg"}):S.jsx(HR,{})}),e&&S.jsxs("div",{className:"text-center mt-6 mb-4",children:[S.jsx("h1",{className:"text-3xl font-bold mb-2",style:{fontFamily:"'Fredoka One', cursive"},children:e.title}),S.jsx("p",{className:"text-lg text-white text-opacity-90",children:new Date(e.datetime).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})}),e.description&&S.jsx("p",{className:"text-white text-opacity-80 mt-2",children:e.description})]}),S.jsx("p",{className:"mt-8 text-2xl",style:{fontFamily:"'Fredoka One', cursive"},children:"Click anywhere to RSVP"})]})}),S.jsx("footer",{className:"text-center text-white text-opacity-70 text-sm p-4 pb-6",children:S.jsx("p",{children:"Created with fun by a World-Class React Engineer"})})]}),Tw=()=>{const{eventId:n}=sC(),[e,t]=H.useState(!1),[i,a]=H.useState(!1),[l,c]=H.useState(null),[d,m]=H.useState(!0),[g,_]=H.useState("");H.useEffect(()=>{(async()=>{if(!n){m(!1);return}try{const z=await _i.getEventById(n);z?z.isActive?new Date(z.datetime)<new Date?_("RSVPs for this event are now closed."):c(z):_("This event is no longer active."):_("Event not found. Please check the URL and try again.")}catch(z){console.error("Error loading event:",z),_("Failed to load event details. Please try again later.")}finally{m(!1)}})()},[n]);const v=H.useCallback(()=>{t(!0)},[]),b=H.useCallback(()=>{a(!0)},[]),R=H.useCallback(()=>{a(!1)},[]);return d?S.jsx("div",{className:"min-h-screen w-full flex flex-col bg-[#8A2BE2] text-slate-800",children:S.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:S.jsx("div",{className:"w-full max-w-md mx-auto",children:S.jsx("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden p-8",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),S.jsx("p",{className:"text-gray-600",children:"Loading event details..."})]})})})})}):g?S.jsxs("div",{className:"min-h-screen w-full flex flex-col bg-[#8A2BE2] text-slate-800",children:[S.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:S.jsx("div",{className:"w-full max-w-md mx-auto",children:S.jsx("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden p-8",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),S.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Oops!"}),S.jsx("p",{className:"text-gray-600 mb-6",children:g}),S.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold py-2 px-6 rounded-xl transition-colors duration-300",children:"Try Again"})]})})})}),S.jsx("footer",{className:"text-center text-white text-opacity-70 text-sm p-4 pb-6",children:S.jsx("p",{children:"Created with fun by a World-Class React Engineer"})})]}):e?S.jsxs("div",{className:"min-h-screen w-full flex flex-col bg-[#8A2BE2] text-slate-800",children:[S.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:S.jsx("div",{className:"w-full max-w-md mx-auto",children:S.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden transition-all duration-500",children:[S.jsx("div",{className:"bg-yellow-400 p-6",children:S.jsx("div",{className:"w-48 h-48 mx-auto",children:l!=null&&l.logoUrl?S.jsx("img",{src:l.logoUrl,alt:l.title,className:"w-full h-full object-contain rounded-lg"}):S.jsx(HR,{})})}),S.jsxs("div",{className:"p-8",children:[l&&S.jsxs("div",{className:"text-center mb-6",children:[S.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:l.title}),S.jsx("p",{className:"text-gray-600",children:new Date(l.datetime).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})}),l.description&&S.jsx("p",{className:"text-gray-600 mt-2",children:l.description})]}),i?S.jsx(mL,{onPlayAgain:R,gameType:l==null?void 0:l.gameType}):S.jsx(oL,{onSubmit:b,eventId:n})]})]})})}),S.jsx("footer",{className:"text-center text-white text-opacity-70 text-sm p-4 pb-6",children:S.jsx("p",{children:"Created with fun by a World-Class React Engineer"})})]}):S.jsx(pL,{onContinue:v,event:l})},gL=n=>{const[e,t]=H.useState([]),[i,a]=H.useState(!0),[l,c]=H.useState(null);return H.useEffect(()=>{if(!n){a(!1);return}(async()=>{try{a(!0);const v=await _i.getEventsByUser(n);t(v),c(null)}catch(v){console.error("Error fetching events:",v),c("Failed to load events")}finally{a(!1)}})()},[n]),{events:e,loading:i,error:l,createEvent:async _=>{try{const v=await _i.createEvent(_);return t(b=>[v,...b]),v}catch(v){throw console.error("Error creating event:",v),v}},updateEvent:async(_,v)=>{try{await _i.updateEvent(_,v),t(b=>b.map(R=>R.id===_?{...R,...v}:R))}catch(b){throw console.error("Error updating event:",b),b}},deleteEvent:async _=>{try{await _i.deleteEvent(_),t(v=>v.filter(b=>b.id!==_))}catch(v){throw console.error("Error deleting event:",v),v}}}},yL=({showSignOut:n=!0,className:e=""})=>{const{user:t,signOut:i,loading:a}=Vc();if(!t)return null;const l=async()=>{try{await i()}catch(c){console.error("Sign out failed:",c)}};return S.jsxs("div",{className:`flex items-center gap-3 p-2 bg-white/10 rounded-lg backdrop-blur-sm ${e}`,children:[t.photoURL&&S.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/20"}),S.jsxs("div",{className:"flex-1 min-w-0 hidden sm:block",children:[S.jsx("div",{className:"text-sm font-semibold text-white truncate",children:t.displayName||"User"}),S.jsx("div",{className:"text-xs text-white/80 truncate",children:t.email})]}),n&&S.jsx("button",{onClick:l,disabled:a,className:"bg-transparent text-white/80 border border-white/30 rounded px-2 py-1 text-xs hover:bg-white/10 hover:text-white transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"...":"Sign Out"})]})},_L=({event:n,onEdit:e,onDelete:t,showDeleteConfirm:i,onDeleteConfirm:a,onDeleteCancel:l})=>{const c=v=>new Intl.DateTimeFormat("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(v),d=n.datetime>new Date,m=n.datetime<new Date,g=()=>m?"text-gray-500":d?"text-green-600":"text-blue-600",_=()=>m?"Past Event":d?"Upcoming":"Active";return S.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:[S.jsxs("div",{className:"h-48 bg-gradient-to-br from-[#8A2BE2] to-[#6B46C1] relative",children:[n.logoUrl?S.jsx("img",{src:n.logoUrl,alt:n.title,className:"w-full h-full object-cover"}):S.jsx("div",{className:"flex items-center justify-center h-full",children:S.jsx("div",{className:"text-white text-6xl",children:""})}),S.jsx("div",{className:"absolute top-4 right-4",children:S.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium bg-white ${g()}`,children:_()})})]}),S.jsxs("div",{className:"p-4 sm:p-6",children:[S.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-800 mb-2 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.title}),n.description&&S.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-3 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.description}),S.jsxs("div",{className:"space-y-2 mb-4",children:[S.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-600",children:[S.jsx("span",{className:"mr-2",children:""}),S.jsx("span",{className:"truncate",children:c(n.datetime)})]}),S.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-600",children:[S.jsx("span",{className:"mr-2",children:""}),S.jsx("span",{className:"capitalize",children:n.gameType.replace("_"," ")})]})]}),i?S.jsxs("div",{className:"space-y-2",children:[S.jsx("p",{className:"text-sm text-red-600 font-medium text-center",children:"Delete this event?"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:a,className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors text-sm",children:"Yes, Delete"}),S.jsx("button",{onClick:l,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold py-2 px-4 rounded-xl transition-colors text-sm",children:"Cancel"})]})]}):S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:e,className:"flex-1 bg-[#FFD700] hover:bg-[#FFC700] text-black font-semibold py-2 px-4 rounded-xl transition-colors text-sm",children:"Edit"}),S.jsx("button",{onClick:t,className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors text-sm",children:"Delete"})]}),S.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[S.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"RSVP Link:"}),S.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[S.jsx("input",{type:"text",value:`${window.location.origin}/rsvp/${n.id}`,readOnly:!0,className:"flex-1 text-xs bg-gray-100 px-2 py-1 rounded border text-gray-600 min-w-0"}),S.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/rsvp/${n.id}`)},className:"text-xs bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded transition-colors flex-shrink-0",title:"Copy link",children:""})]})]})]})]})},vL=({events:n,loading:e,onEditEvent:t,onDeleteEvent:i,onCreateEvent:a})=>{const[l,c]=H.useState(null),d=_=>{c(_)},m=_=>{i(_),c(null)},g=()=>{c(null)};return e?S.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8 text-slate-800",children:S.jsxs("div",{className:"flex items-center justify-center py-12",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#8A2BE2]"}),S.jsx("span",{className:"ml-4 text-lg",children:"Loading events..."})]})}):S.jsxs("div",{className:"space-y-6",children:[S.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-6 sm:p-8 text-slate-800",children:S.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Your Events"}),S.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:n.length===0?"No events created yet":`${n.length} event${n.length===1?"":"s"} created`})]}),S.jsx("button",{onClick:a,className:"bg-[#FFD700] hover:bg-[#FFC700] text-black font-semibold py-3 px-4 sm:px-6 rounded-2xl transition-colors text-sm sm:text-base whitespace-nowrap",children:"Create New Event"})]})}),n.length===0?S.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-6 sm:p-8 text-slate-800 text-center",children:S.jsxs("div",{className:"py-8 sm:py-12",children:[S.jsx("div",{className:"text-4xl sm:text-6xl mb-4",children:""}),S.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"No Events Yet"}),S.jsx("p",{className:"text-gray-600 mb-6 text-sm sm:text-base max-w-md mx-auto",children:"Get started by creating your first event. You'll be able to manage RSVPs and track attendance."}),S.jsx("button",{onClick:a,className:"bg-[#FFD700] hover:bg-[#FFC700] text-black font-semibold py-3 px-4 sm:px-6 rounded-2xl transition-colors text-sm sm:text-base",children:"Create Your First Event"})]})}):S.jsx("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:n.map(_=>S.jsx(_L,{event:_,onEdit:()=>t(_),onDelete:()=>d(_.id),showDeleteConfirm:l===_.id,onDeleteConfirm:()=>m(_.id),onDeleteCancel:g},_.id))})]})},EL=({event:n,onSubmit:e,onCancel:t,userEmail:i})=>{const[a,l]=H.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",datetime:n!=null&&n.datetime?n.datetime.toISOString().slice(0,16):"",gameType:(n==null?void 0:n.gameType)||On.RAINBOW_HOP}),[c,d]=H.useState(null),[m,g]=H.useState((n==null?void 0:n.logoUrl)??null),[_,v]=H.useState(!1),[b,R]=H.useState({}),U=te=>{const{name:W,value:$}=te.target;l(re=>({...re,[W]:$})),b[W]&&R(re=>({...re,[W]:""}))},z=te=>{var re;const W=(re=te.target.files)==null?void 0:re[0];if(!W)return;if(!nL(W)){R(ie=>({...ie,logo:"Please select a valid image file (PNG, JPG, JPEG, GIF) under 5MB"}));return}d(W),R(ie=>({...ie,logo:""}));const $=new FileReader;$.onload=ie=>{var de;g((de=ie.target)==null?void 0:de.result)},$.readAsDataURL(W)},L=async te=>{te.preventDefault(),v(!0),R({});try{const W={...a,datetime:new Date(a.datetime),createdBy:i,isActive:!0},$=eL(W);if(!$.isValid){const N={};$.errors.forEach(I=>{N[I.field]=I.message}),R(N);return}let re=(n==null?void 0:n.logoUrl)??void 0;c&&(re=await _i.uploadEventLogo(c));const ie={...W};re&&(ie.logoUrl=re);let de;n?(await _i.updateEvent(n.id,ie),de={...n,...ie}):de=await _i.createEvent(ie),e(de)}catch(W){console.error("Error saving event:",W),console.error("Error details:",{message:W instanceof Error?W.message:"Unknown error",stack:W instanceof Error?W.stack:void 0,eventData}),R({submit:`Failed to save event: ${W instanceof Error?W.message:"Unknown error"}`})}finally{v(!1)}};return S.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 text-slate-800",children:[S.jsx("h2",{className:"text-2xl font-bold mb-6",children:n?"Edit Event":"Create New Event"}),S.jsxs("form",{onSubmit:L,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),S.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:U,className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition duration-300 text-lg ${b.title?"border-red-500":"border-slate-300"}`,placeholder:"Enter event title",maxLength:100}),b.title&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.title})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),S.jsx("textarea",{id:"description",name:"description",value:a.description,onChange:U,rows:3,className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition duration-300 text-lg ${b.description?"border-red-500":"border-slate-300"}`,placeholder:"Enter event description",maxLength:500}),b.description&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.description})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"datetime",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time *"}),S.jsx("input",{type:"datetime-local",id:"datetime",name:"datetime",value:a.datetime,onChange:U,className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition duration-300 text-lg ${b.datetime?"border-red-500":"border-slate-300"}`}),b.datetime&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.datetime})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"gameType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Post-RSVP Game"}),S.jsxs("select",{id:"gameType",name:"gameType",value:a.gameType,onChange:U,className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition duration-300 text-lg",children:[S.jsx("option",{value:On.RAINBOW_HOP,children:"Rainbow Hop (Jump Game)"}),S.jsx("option",{value:On.SIMPLE_CLICKER,children:"Simple Clicker (Click for Points)"}),S.jsx("option",{value:On.COLOR_MATCH,children:"Color Match (Memory Game)"}),S.jsx("option",{value:On.NONE,children:"No Game"})]}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Choose what game attendees will see after submitting their RSVP"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Logo (Optional)"}),S.jsx("input",{type:"file",id:"logo",accept:"image/png,image/jpeg,image/jpg,image/gif",onChange:z,className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition duration-300 text-lg"}),b.logo&&S.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.logo}),m&&S.jsxs("div",{className:"mt-4",children:[S.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Logo Preview:"}),S.jsx("img",{src:m,alt:"Logo preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"})]})]}),b.submit&&S.jsx("div",{className:"p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:b.submit}),S.jsxs("div",{className:"flex gap-4 pt-4",children:[S.jsx("button",{type:"submit",disabled:_,className:"flex-1 bg-[#FFD700] hover:bg-[#FFC700] text-black font-semibold py-3 px-6 rounded-2xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Saving...":n?"Update Event":"Create Event"}),S.jsx("button",{type:"button",onClick:t,disabled:_,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold py-3 px-6 rounded-2xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})},TL=()=>{const{user:n}=Vc(),{events:e,loading:t,createEvent:i,updateEvent:a,deleteEvent:l}=gL(n==null?void 0:n.email),[c,d]=H.useState("list"),[m,g]=H.useState(null),_=()=>{g(null),d("create")},v=z=>{g(z),d("edit")},b=async z=>{try{await l(z)}catch(L){console.error("Failed to delete event:",L)}},R=async z=>{try{m?await a(z.id,z):await i(z),d("list"),g(null)}catch(L){console.error("Failed to save event:",L)}},U=()=>{d("list"),g(null)};return S.jsxs("div",{className:"min-h-screen bg-[#8A2BE2] text-white",children:[S.jsx("header",{className:"bg-[#6B46C1] shadow-lg sticky top-0 z-10",children:S.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"flex justify-between items-center py-4 sm:py-6",children:[S.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-1 min-w-0",children:[S.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold truncate",children:"Event Dashboard"}),c!=="list"&&S.jsx("button",{onClick:()=>d("list"),className:"text-xs sm:text-sm bg-white/20 hover:bg-white/30 px-2 sm:px-3 py-1 rounded-lg transition-colors whitespace-nowrap",children:" Back"})]}),S.jsx("div",{className:"flex-shrink-0",children:S.jsx(yL,{})})]})})}),S.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[c==="list"&&S.jsx(vL,{events:e,loading:t,onCreateEvent:_,onEditEvent:v,onDeleteEvent:b}),(c==="create"||c==="edit")&&n&&S.jsx(EL,{event:m||void 0,onSubmit:R,onCancel:U,userEmail:n.email})]})]})},bL=({className:n,style:e})=>{const{signIn:t,loading:i,error:a,clearError:l}=Vc(),c=async()=>{try{l(),await t()}catch(d){console.error("Login failed:",d)}};return S.jsxs("div",{children:[S.jsx("button",{onClick:c,disabled:i,className:n,style:{backgroundColor:"#FCD34D",color:"#1F2937",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:i?"not-allowed":"pointer",opacity:i?.7:1,transition:"all 0.2s ease",...e},children:i?"Signing in...":"Sign in with Google"}),a&&S.jsx("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#FEE2E2",color:"#DC2626",borderRadius:"6px",fontSize:"14px"},children:a})]})},wL=()=>{const{user:n,loading:e,isAuthorized:t}=Vc();return e?S.jsx("div",{className:"min-h-screen bg-[#8A2BE2] flex items-center justify-center",children:S.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):n&&t?S.jsx(Ng,{to:"/dashboard",replace:!0}):S.jsx("div",{className:"min-h-screen bg-[#8A2BE2] flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Event Dashboard Login"}),S.jsx("p",{className:"text-gray-600 mb-8",children:"Sign in with your sodaworld.tv Google account to access the event management dashboard."}),S.jsx(bL,{}),n&&!t&&S.jsx("div",{className:"mt-6 p-4 bg-red-100 rounded-lg",children:S.jsx("p",{className:"text-red-800 text-sm",children:"Access denied. You must use a sodaworld.tv email address to access the dashboard."})})]})})};class sl{constructor(){}static getInstance(){return sl.instance||(sl.instance=new sl),sl.instance}async initializeDatabase(){this.enablePersistenceAsync(),this.createCollectionStructureAsync(),console.log("Database initialization started (non-blocking)")}async enablePersistenceAsync(){try{await JV(Wt),console.log("Database persistence enabled")}catch(e){e.code==="failed-precondition"?console.warn("Database persistence failed: Multiple tabs open"):e.code==="unimplemented"?console.warn("Database persistence not supported in this browser"):console.error("Error enabling database persistence:",e)}}async createCollectionStructureAsync(){try{await this.createCollectionStructure(),console.log("Database collection structure created")}catch(e){console.error("Error creating collection structure:",e)}}async createCollectionStructure(){try{const e=pr(Wt,"events"),t=pi(e,"_sample_event_for_indexing");await Tf(t,{title:"Sample Event",description:"This is a sample event for index creation",datetime:new Date,createdBy:"system@sodaworld.tv",createdAt:new Date,updatedAt:new Date,logoUrl:null,gameType:"rainbow_hop",isActive:!0,_isSample:!0});const i=pr(Wt,"rsvps"),a=pi(i,"_sample_rsvp_for_indexing");await Tf(a,{eventId:"_sample_event_for_indexing",name:"Sample User",email:"sample@example.com",connectionMethod:"VR",submittedAt:new Date,reminderSent:!1,_isSample:!0});const l=pr(Wt,"users"),c=pi(l,"_sample_user_for_indexing");await Tf(c,{uid:"sample_uid",email:"sample@sodaworld.tv",displayName:"Sample User",photoURL:null,domain:"sodaworld.tv",lastLogin:new Date,_isSample:!0}),console.log("Collection structure created successfully")}catch(e){throw console.error("Error creating collection structure:",e),e}}async cleanupSampleData(){try{const e=["events","rsvps","users"];for(const t of e){const i=pi(Wt,t,`_sample_${t.slice(0,-1)}_for_indexing`);await Tf(i,{_deleted:!0},{merge:!0})}console.log("Sample data cleanup complete")}catch(e){console.error("Error cleaning up sample data:",e)}}async validateSchema(){try{return{collections:["events","rsvps","users"],indexesRequired:["events: (createdBy, isActive, datetime) - Compound index","events: (isActive, datetime) - Compound index for public queries","rsvps: (eventId, submittedAt) - Compound index","rsvps: (email) - Single field index","rsvps: (eventId, reminderSent) - Compound index for reminder queries","users: (email) - Single field index","users: (domain, lastLogin) - Compound index"],status:"ready"}}catch(e){return console.error("Error validating schema:",e),{collections:[],indexesRequired:[],status:"error"}}}async getDatabaseStats(){try{return{eventsCount:0,rsvpsCount:0,usersCount:0,lastUpdated:new Date}}catch(e){throw console.error("Error getting database stats:",e),e}}}const bw=sl.getInstance();async function AL(){try{console.log("Initializing database in background..."),await bw.initializeDatabase(),setTimeout(async()=>{try{const n=await bw.validateSchema();console.log("Database validation:",n),n.status==="ready"?console.log("Database is ready for use"):console.warn("Database needs setup. Please check the configuration.")}catch(n){console.warn("Database validation failed:",n)}},100)}catch(n){console.error("Failed to initialize database:",n)}}const SL=()=>(H.useEffect(()=>{(async()=>{try{await AL(),console.log("Database initialization completed in background")}catch(e){console.error("Database initialization failed:",e)}})()},[]),S.jsx(Z6,{children:S.jsx(W6,{children:S.jsx(qC,{children:S.jsxs(EC,{children:[S.jsx(Zo,{path:"/",element:S.jsx(Tw,{})}),S.jsx(Zo,{path:"/rsvp/:eventId",element:S.jsx(Tw,{})}),S.jsx(Zo,{path:"/login",element:S.jsx(wL,{})}),S.jsx(Zo,{path:"/dashboard",element:S.jsx(J6,{fallback:S.jsx(Ng,{to:"/login",replace:!0}),children:S.jsx(TL,{})})}),S.jsx(Zo,{path:"*",element:S.jsx(Ng,{to:"/",replace:!0})})]})})})})),GR=document.getElementById("root");if(!GR)throw new Error("Could not find root element to mount to");const IL=Cx.createRoot(GR);IL.render(S.jsx(Aw.StrictMode,{children:S.jsx(SL,{})}));
