(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function bw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jp={exports:{}},Uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function yx(){if(KT)return Uu;KT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Uu.Fragment=e,Uu.jsx=t,Uu.jsxs=t,Uu}var $T;function _x(){return $T||($T=1,Jp.exports=yx()),Jp.exports}var N=_x(),Zp={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function vx(){if(QT)return Ce;QT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,K={};function U(V,re,de){this.props=V,this.context=re,this.refs=K,this.updater=de||I}U.prototype.isReactComponent={},U.prototype.setState=function(V,re){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,re,"setState")},U.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ne(){}ne.prototype=U.prototype;function W(V,re,de){this.props=V,this.context=re,this.refs=K,this.updater=de||I}var Y=W.prototype=new ne;Y.constructor=W,B(Y,U.prototype),Y.isPureReactComponent=!0;var ae=Array.isArray,ie={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function D(V,re,de,ce,_e,ke){return de=ke.ref,{$$typeof:n,type:V,key:re,ref:de!==void 0?de:null,props:ke}}function S(V,re){return D(V.type,re,void 0,void 0,void 0,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function P(V){var re={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(de){return re[de]})}var O=/\/+/g;function k(V,re){return typeof V=="object"&&V!==null&&V.key!=null?P(""+V.key):re.toString(36)}function x(){}function Ge(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(x,x):(V.status="pending",V.then(function(re){V.status==="pending"&&(V.status="fulfilled",V.value=re)},function(re){V.status==="pending"&&(V.status="rejected",V.reason=re)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function at(V,re,de,ce,_e){var ke=typeof V;(ke==="undefined"||ke==="boolean")&&(V=null);var we=!1;if(V===null)we=!0;else switch(ke){case"bigint":case"string":case"number":we=!0;break;case"object":switch(V.$$typeof){case n:case e:we=!0;break;case _:return we=V._init,at(we(V._payload),re,de,ce,_e)}}if(we)return _e=_e(V),we=ce===""?"."+k(V,0):ce,ae(_e)?(de="",we!=null&&(de=we.replace(O,"$&/")+"/"),at(_e,re,de,"",function(tr){return tr})):_e!=null&&(R(_e)&&(_e=S(_e,de+(_e.key==null||V&&V.key===_e.key?"":(""+_e.key).replace(O,"$&/")+"/")+we)),re.push(_e)),1;we=0;var Ht=ce===""?".":ce+":";if(ae(V))for(var We=0;We<V.length;We++)ce=V[We],ke=Ht+k(ce,We),we+=at(ce,re,de,ke,_e);else if(We=b(V),typeof We=="function")for(V=We.call(V),We=0;!(ce=V.next()).done;)ce=ce.value,ke=Ht+k(ce,We++),we+=at(ce,re,de,ke,_e);else if(ke==="object"){if(typeof V.then=="function")return at(Ge(V),re,de,ce,_e);throw re=String(V),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return we}function J(V,re,de){if(V==null)return V;var ce=[],_e=0;return at(V,ce,"","",function(ke){return re.call(de,ke,_e++)}),ce}function he(V){if(V._status===-1){var re=V._result;re=re(),re.then(function(de){(V._status===0||V._status===-1)&&(V._status=1,V._result=de)},function(de){(V._status===0||V._status===-1)&&(V._status=2,V._result=de)}),V._status===-1&&(V._status=0,V._result=re)}if(V._status===1)return V._result.default;throw V._result}var ve=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function ze(){}return Ce.Children={map:J,forEach:function(V,re,de){J(V,function(){re.apply(this,arguments)},de)},count:function(V){var re=0;return J(V,function(){re++}),re},toArray:function(V){return J(V,function(re){return re})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ce.Component=U,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=W,Ce.StrictMode=i,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(V){return ie.H.useMemoCache(V)}},Ce.cache=function(V){return function(){return V.apply(null,arguments)}},Ce.cloneElement=function(V,re,de){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ce=B({},V.props),_e=V.key,ke=void 0;if(re!=null)for(we in re.ref!==void 0&&(ke=void 0),re.key!==void 0&&(_e=""+re.key),re)!fe.call(re,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&re.ref===void 0||(ce[we]=re[we]);var we=arguments.length-2;if(we===1)ce.children=de;else if(1<we){for(var Ht=Array(we),We=0;We<we;We++)Ht[We]=arguments[We+2];ce.children=Ht}return D(V.type,_e,void 0,void 0,ke,ce)},Ce.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ce.createElement=function(V,re,de){var ce,_e={},ke=null;if(re!=null)for(ce in re.key!==void 0&&(ke=""+re.key),re)fe.call(re,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(_e[ce]=re[ce]);var we=arguments.length-2;if(we===1)_e.children=de;else if(1<we){for(var Ht=Array(we),We=0;We<we;We++)Ht[We]=arguments[We+2];_e.children=Ht}if(V&&V.defaultProps)for(ce in we=V.defaultProps,we)_e[ce]===void 0&&(_e[ce]=we[ce]);return D(V,ke,void 0,void 0,null,_e)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(V){return{$$typeof:d,render:V}},Ce.isValidElement=R,Ce.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:he}},Ce.memo=function(V,re){return{$$typeof:g,type:V,compare:re===void 0?null:re}},Ce.startTransition=function(V){var re=ie.T,de={};ie.T=de;try{var ce=V(),_e=ie.S;_e!==null&&_e(de,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ze,ve)}catch(ke){ve(ke)}finally{ie.T=re}},Ce.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},Ce.use=function(V){return ie.H.use(V)},Ce.useActionState=function(V,re,de){return ie.H.useActionState(V,re,de)},Ce.useCallback=function(V,re){return ie.H.useCallback(V,re)},Ce.useContext=function(V){return ie.H.useContext(V)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(V,re){return ie.H.useDeferredValue(V,re)},Ce.useEffect=function(V,re,de){var ce=ie.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(V,re)},Ce.useId=function(){return ie.H.useId()},Ce.useImperativeHandle=function(V,re,de){return ie.H.useImperativeHandle(V,re,de)},Ce.useInsertionEffect=function(V,re){return ie.H.useInsertionEffect(V,re)},Ce.useLayoutEffect=function(V,re){return ie.H.useLayoutEffect(V,re)},Ce.useMemo=function(V,re){return ie.H.useMemo(V,re)},Ce.useOptimistic=function(V,re){return ie.H.useOptimistic(V,re)},Ce.useReducer=function(V,re,de){return ie.H.useReducer(V,re,de)},Ce.useRef=function(V){return ie.H.useRef(V)},Ce.useState=function(V){return ie.H.useState(V)},Ce.useSyncExternalStore=function(V,re,de){return ie.H.useSyncExternalStore(V,re,de)},Ce.useTransition=function(){return ie.H.useTransition()},Ce.version="19.1.1",Ce}var YT;function my(){return YT||(YT=1,Zp.exports=vx()),Zp.exports}var H=my();const ww=bw(H);var eg={exports:{}},Bu={},tg={exports:{}},ng={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function Ex(){return XT||(XT=1,(function(n){function e(J,he){var ve=J.length;J.push(he);e:for(;0<ve;){var ze=ve-1>>>1,V=J[ze];if(0<a(V,he))J[ze]=he,J[ve]=V,ve=ze;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var he=J[0],ve=J.pop();if(ve!==he){J[0]=ve;e:for(var ze=0,V=J.length,re=V>>>1;ze<re;){var de=2*(ze+1)-1,ce=J[de],_e=de+1,ke=J[_e];if(0>a(ce,ve))_e<V&&0>a(ke,ce)?(J[ze]=ke,J[_e]=ve,ze=_e):(J[ze]=ce,J[de]=ve,ze=de);else if(_e<V&&0>a(ke,ve))J[ze]=ke,J[_e]=ve,ze=_e;else break e}}return he}function a(J,he){var ve=J.sortIndex-he.sortIndex;return ve!==0?ve:J.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,T=null,b=3,I=!1,B=!1,K=!1,U=!1,ne=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function ae(J){for(var he=t(g);he!==null;){if(he.callback===null)i(g);else if(he.startTime<=J)i(g),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(g)}}function ie(J){if(K=!1,ae(J),!B)if(t(m)!==null)B=!0,fe||(fe=!0,k());else{var he=t(g);he!==null&&at(ie,he.startTime-J)}}var fe=!1,D=-1,S=5,R=-1;function P(){return U?!0:!(n.unstable_now()-R<S)}function O(){if(U=!1,fe){var J=n.unstable_now();R=J;var he=!0;try{e:{B=!1,K&&(K=!1,W(D),D=-1),I=!0;var ve=b;try{t:{for(ae(J),T=t(m);T!==null&&!(T.expirationTime>J&&P());){var ze=T.callback;if(typeof ze=="function"){T.callback=null,b=T.priorityLevel;var V=ze(T.expirationTime<=J);if(J=n.unstable_now(),typeof V=="function"){T.callback=V,ae(J),he=!0;break t}T===t(m)&&i(m),ae(J)}else i(m);T=t(m)}if(T!==null)he=!0;else{var re=t(g);re!==null&&at(ie,re.startTime-J),he=!1}}break e}finally{T=null,b=ve,I=!1}he=void 0}}finally{he?k():fe=!1}}}var k;if(typeof Y=="function")k=function(){Y(O)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Ge=x.port2;x.port1.onmessage=O,k=function(){Ge.postMessage(null)}}else k=function(){ne(O,0)};function at(J,he){D=ne(function(){J(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var he=3;break;default:he=b}var ve=b;b=he;try{return J()}finally{b=ve}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ve=b;b=J;try{return he()}finally{b=ve}},n.unstable_scheduleCallback=function(J,he,ve){var ze=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ze+ve:ze):ve=ze,J){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ve+V,J={id:_++,callback:he,priorityLevel:J,startTime:ve,expirationTime:V,sortIndex:-1},ve>ze?(J.sortIndex=ve,e(g,J),t(m)===null&&J===t(g)&&(K?(W(D),D=-1):K=!0,at(ie,ve-ze))):(J.sortIndex=V,e(m,J),B||I||(B=!0,fe||(fe=!0,k()))),J},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(J){var he=b;return function(){var ve=b;b=he;try{return J.apply(this,arguments)}finally{b=ve}}}})(ng)),ng}var WT;function Tx(){return WT||(WT=1,tg.exports=Ex()),tg.exports}var rg={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function bx(){if(JT)return en;JT=1;var n=my();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},en.flushSync=function(m){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=_,i.d.f()}},en.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},en.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},en.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:I}):_==="script"&&i.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},en.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},en.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);i.d.L(m,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},en.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},en.requestFormReset=function(m){i.d.r(m)},en.unstable_batchedUpdates=function(m,g){return m(g)},en.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.1.1",en}var ZT;function wx(){if(ZT)return rg.exports;ZT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rg.exports=bx(),rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function Ax(){if(e0)return Bu;e0=1;var n=Tx(),e=my(),t=wx();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),r;if(p===u)return d(f),s;p=p.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=p;else{for(var E=!1,w=f.child;w;){if(w===o){E=!0,o=f,u=p;break}if(w===u){E=!0,u=f,o=p;break}w=w.sibling}if(!E){for(w=p.child;w;){if(w===o){E=!0,o=p,u=f;break}if(w===u){E=!0,u=p,o=f;break}w=w.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var x=Symbol.for("react.client.reference");function Ge(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===x?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case U:return"Profiler";case K:return"StrictMode";case ie:return"Suspense";case fe:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case I:return"Portal";case Y:return(r.displayName||"Context")+".Provider";case W:return(r._context.displayName||"Context")+".Consumer";case ae:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return s=r.displayName||null,s!==null?s:Ge(r.type)||"Memo";case S:s=r._payload,r=r._init;try{return Ge(r(s))}catch{}}return null}var at=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},ze=[],V=-1;function re(r){return{current:r}}function de(r){0>V||(r.current=ze[V],ze[V]=null,V--)}function ce(r,s){V++,ze[V]=r.current,r.current=s}var _e=re(null),ke=re(null),we=re(null),Ht=re(null);function We(r,s){switch(ce(we,s),ce(ke,r),ce(_e,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?ET(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=ET(s),r=TT(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}de(_e),ce(_e,r)}function tr(){de(_e),de(ke),de(we)}function Ol(r){r.memoizedState!==null&&ce(Ht,r);var s=_e.current,o=TT(s,r.type);s!==o&&(ce(ke,r),ce(_e,o))}function Ja(r){ke.current===r&&(de(_e),de(ke)),Ht.current===r&&(de(Ht),Vu._currentValue=ve)}var Za=Object.prototype.hasOwnProperty,Vs=n.unstable_scheduleCallback,eo=n.unstable_cancelCallback,Zd=n.unstable_shouldYield,Vl=n.unstable_requestPaint,pn=n.unstable_now,Gc=n.unstable_getCurrentPriorityLevel,Ot=n.unstable_ImmediatePriority,Ut=n.unstable_UserBlockingPriority,qr=n.unstable_NormalPriority,em=n.unstable_LowPriority,Pl=n.unstable_IdlePriority,tm=n.log,Ps=n.unstable_setDisableYieldValue,bi=null,Wt=null;function kn(r){if(typeof tm=="function"&&Ps(r),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(bi,r)}catch{}}var on=Math.clz32?Math.clz32:$c,nm=Math.log,Kc=Math.LN2;function $c(r){return r>>>=0,r===0?32:31-(nm(r)/Kc|0)|0}var vr=256,wi=4194304;function nr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ln(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,p=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var w=u&134217727;return w!==0?(u=w&~p,u!==0?f=nr(u):(E&=w,E!==0?f=nr(E):o||(o=w&~r,o!==0&&(f=nr(o))))):(w=u&~p,w!==0?f=nr(w):E!==0?f=nr(E):o||(o=u&~r,o!==0&&(f=nr(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Ai(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function to(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ml(){var r=vr;return vr<<=1,(vr&4194048)===0&&(vr=256),r}function Si(){var r=wi;return wi<<=1,(wi&62914560)===0&&(wi=4194304),r}function no(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Et(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Qc(r,s,o,u,f,p){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var w=r.entanglements,C=r.expirationTimes,q=r.hiddenUpdates;for(o=E&~o;0<o;){var Z=31-on(o),te=1<<Z;w[Z]=0,C[Z]=-1;var G=q[Z];if(G!==null)for(q[Z]=null,Z=0;Z<G.length;Z++){var $=G[Z];$!==null&&($.lane&=-536870913)}o&=~te}u!==0&&Ii(r,u,0),p!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=p&~(E&~s))}function Ii(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-on(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function Ri(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-on(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function kl(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ll(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Hr(){var r=he.p;return r!==0?r:(r=window.event,r===void 0?32:jT(r.type))}function rm(r,s){var o=he.p;try{return he.p=r,s()}finally{he.p=o}}var Er=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Er,Gt="__reactProps$"+Er,Gr="__reactContainer$"+Er,Ms="__reactEvents$"+Er,ks="__reactListeners$"+Er,im="__reactHandles$"+Er,rr="__reactResources$"+Er,xi="__reactMarker$"+Er;function ro(r){delete r[Tt],delete r[Gt],delete r[Ms],delete r[ks],delete r[im]}function Tr(r){var s=r[Tt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Gr]||o[Tt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=ST(r);r!==null;){if(o=r[Tt])return o;r=ST(r)}return s}r=o,o=r.parentNode}return null}function br(r){if(r=r[Tt]||r[Gr]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Ci(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Di(r){var s=r[rr];return s||(s=r[rr]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function bt(r){r[xi]=!0}var Yc=new Set,Ls={};function wr(r,s){Ar(r,s),Ar(r+"Capture",s)}function Ar(r,s){for(Ls[r]=s,r=0;r<s.length;r++)Yc.add(s[r])}var Us=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sr={},io={};function sm(r){return Za.call(io,r)?!0:Za.call(Sr,r)?!1:Us.test(r)?io[r]=!0:(Sr[r]=!0,!1)}function Bs(r,s,o){if(sm(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function js(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Un(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var zs,so;function Kr(r){if(zs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);zs=s&&s[1]||"",so=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zs+r+so}var ao=!1;function oo(r,s){if(!r||ao)return"";ao=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch($){var G=$}Reflect.construct(r,[],te)}else{try{te.call()}catch($){G=$}r.call(te.prototype)}}else{try{throw Error()}catch($){G=$}(te=r())&&typeof te.catch=="function"&&te.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],w=p[1];if(E&&w){var C=E.split(`
`),q=w.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===q.length)for(u=C.length-1,f=q.length-1;1<=u&&0<=f&&C[u]!==q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==q[f]){var Z=`
`+C[u].replace(" at new "," at ");return r.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",r.displayName)),Z}while(1<=u&&0<=f);break}}}finally{ao=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Kr(o):""}function am(r){switch(r.tag){case 26:case 27:case 5:return Kr(r.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 15:return oo(r.type,!1);case 11:return oo(r.type.render,!1);case 1:return oo(r.type,!0);case 31:return Kr("Activity");default:return""}}function ir(r){try{var s="";do s+=am(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function ft(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ni(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Fs(r){var s=Ni(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Oi(r){r._valueTracker||(r._valueTracker=Fs(r))}function Je(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Ni(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function $r(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var qs=/[\n"\\]/g;function Bt(r){return r.replace(qs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ul(r,s,o,u,f,p,E,w){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),s!=null?E==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+ft(s)):r.value!==""+ft(s)&&(r.value=""+ft(s)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),s!=null?jl(r,E,ft(s)):o!=null?jl(r,E,ft(o)):u!=null&&r.removeAttribute("value"),f==null&&p!=null&&(r.defaultChecked=!!p),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+ft(w):r.removeAttribute("name")}function Bl(r,s,o,u,f,p,E,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+ft(o):"",s=s!=null?""+ft(s):o,w||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=w?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function jl(r,s,o){s==="number"&&$r(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Vi(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+ft(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Xc(r,s,o){if(s!=null&&(s=""+ft(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+ft(o):""}function Wc(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(at(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=ft(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Bn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Qr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zl(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||Qr.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Fl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&zl(r,f,u)}else for(var p in s)s.hasOwnProperty(p)&&zl(r,p,s[p])}function lo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sr(r){return Zc.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ql=null;function Hl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Pi=null,ln=null;function eh(r){var s=br(r);if(s&&(r=s.stateNode)){var o=r[Gt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Ul(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[Gt]||null;if(!f)throw Error(i(90));Ul(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Je(u)}break e;case"textarea":Xc(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Vi(r,!!o.multiple,s,!1)}}}var Hs=!1;function Gs(r,s,o){if(Hs)return r(s,o);Hs=!0;try{var u=r(s);return u}finally{if(Hs=!1,(Pi!==null||ln!==null)&&(qh(),Pi&&(s=Pi,r=ln,ln=Pi=null,eh(s),r)))for(s=0;s<r.length;s++)eh(r[s])}}function Mi(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Gt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yr=!1;if(un)try{var ki={};Object.defineProperty(ki,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",ki,ki),window.removeEventListener("test",ki,ki)}catch{Yr=!1}var jn=null,rt=null,uo=null;function th(){if(uo)return uo;var r,s=rt,o=s.length,u,f="value"in jn?jn.value:jn.textContent,p=f.length;for(r=0;r<o&&s[r]===f[r];r++);var E=o-r;for(u=1;u<=E&&s[o-u]===f[p-u];u++);return uo=f.slice(r,1<u?1-u:void 0)}function Ks(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function $s(){return!0}function Gl(){return!1}function Vt(r){function s(o,u,f,p,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(o=r[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?$s:Gl,this.isPropagationStopped=Gl,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),s}var Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=Vt(Jt),Ys=_({},Jt,{view:0,detail:0}),Xs=Vt(Ys),co,Ws,Ir,Js=_({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ir&&(Ir&&r.type==="mousemove"?(co=r.screenX-Ir.screenX,Ws=r.screenY-Ir.screenY):Ws=co=0,Ir=r),co)},movementY:function(r){return"movementY"in r?r.movementY:Ws}}),Zs=Vt(Js),om=_({},Js,{dataTransfer:0}),nh=Vt(om),ea=_({},Ys,{relatedTarget:0}),ho=Vt(ea),rh=_({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0}),Kl=Vt(rh),$l=_({},Jt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ih=Vt($l),fo=_({},Jt,{data:0}),Ql=Vt(fo),sh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oh(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ah[r])?!!s[r]:!1}function mo(){return oh}var lh=_({},Ys,{key:function(r){if(r.key){var s=sh[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ks(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Xr[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(r){return r.type==="keypress"?Ks(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ks(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),po=Vt(lh),cn=_({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yl=Vt(cn),uh=_({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),Li=Vt(uh),h=_({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),y=Vt(h),v=_({},Js,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Vt(v),F=_({},Jt,{newState:0,oldState:0}),Q=Vt(F),le=[9,13,27,32],xe=un&&"CompositionEvent"in window,st=null;un&&"documentMode"in document&&(st=document.documentMode);var Ke=un&&"TextEvent"in window&&!st,wt=un&&(!xe||st&&8<st&&11>=st),bn=" ",Rr=!1;function ar(r,s){switch(r){case"keyup":return le.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function or(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var lr=!1;function Xl(r,s){switch(r){case"compositionend":return or(s);case"keypress":return s.which!==32?null:(Rr=!0,bn);case"textInput":return r=s.data,r===bn&&Rr?null:r;default:return null}}function HR(r,s){if(lr)return r==="compositionend"||!xe&&ar(r,s)?(r=th(),uo=rt=jn=null,lr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return wt&&s.locale!=="ko"?null:s.data;default:return null}}var GR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P_(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!GR[r.type]:s==="textarea"}function M_(r,s,o,u){Pi?ln?ln.push(u):ln=[u]:Pi=u,s=Yh(s,"onChange"),0<s.length&&(o=new Qs("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Wl=null,Jl=null;function KR(r){pT(r,0)}function ch(r){var s=Ci(r);if(Je(s))return r}function k_(r,s){if(r==="change")return s}var L_=!1;if(un){var lm;if(un){var um="oninput"in document;if(!um){var U_=document.createElement("div");U_.setAttribute("oninput","return;"),um=typeof U_.oninput=="function"}lm=um}else lm=!1;L_=lm&&(!document.documentMode||9<document.documentMode)}function B_(){Wl&&(Wl.detachEvent("onpropertychange",j_),Jl=Wl=null)}function j_(r){if(r.propertyName==="value"&&ch(Jl)){var s=[];M_(s,Jl,r,Hl(r)),Gs(KR,s)}}function $R(r,s,o){r==="focusin"?(B_(),Wl=s,Jl=o,Wl.attachEvent("onpropertychange",j_)):r==="focusout"&&B_()}function QR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ch(Jl)}function YR(r,s){if(r==="click")return ch(s)}function XR(r,s){if(r==="input"||r==="change")return ch(s)}function WR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var wn=typeof Object.is=="function"?Object.is:WR;function Zl(r,s){if(wn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Za.call(s,f)||!wn(r[f],s[f]))return!1}return!0}function z_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function F_(r,s){var o=z_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=z_(o)}}function q_(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?q_(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function H_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=$r(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=$r(r.document)}return s}function cm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var JR=un&&"documentMode"in document&&11>=document.documentMode,go=null,hm=null,eu=null,fm=!1;function G_(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fm||go==null||go!==$r(u)||(u=go,"selectionStart"in u&&cm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),eu&&Zl(eu,u)||(eu=u,u=Yh(hm,"onSelect"),0<u.length&&(s=new Qs("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=go)))}function ta(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var yo={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},dm={},K_={};un&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function na(r){if(dm[r])return dm[r];if(!yo[r])return r;var s=yo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in K_)return dm[r]=s[o];return r}var $_=na("animationend"),Q_=na("animationiteration"),Y_=na("animationstart"),ZR=na("transitionrun"),e1=na("transitionstart"),t1=na("transitioncancel"),X_=na("transitionend"),W_=new Map,mm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mm.push("scrollEnd");function ur(r,s){W_.set(r,s),wr(s,[r])}var J_=new WeakMap;function zn(r,s){if(typeof r=="object"&&r!==null){var o=J_.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ir(s)},J_.set(r,s),s)}return{value:r,source:s,stack:ir(s)}}var Fn=[],_o=0,pm=0;function hh(){for(var r=_o,s=pm=_o=0;s<r;){var o=Fn[s];Fn[s++]=null;var u=Fn[s];Fn[s++]=null;var f=Fn[s];Fn[s++]=null;var p=Fn[s];if(Fn[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}p!==0&&Z_(o,f,p)}}function fh(r,s,o,u){Fn[_o++]=r,Fn[_o++]=s,Fn[_o++]=o,Fn[_o++]=u,pm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function gm(r,s,o,u){return fh(r,s,o,u),dh(r)}function vo(r,s){return fh(r,null,null,s),dh(r)}function Z_(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(f=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,f&&s!==null&&(f=31-on(o),r=p.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function dh(r){if(50<Su)throw Su=0,bp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Eo={};function n1(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(r,s,o,u){return new n1(r,s,o,u)}function ym(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Wr(r,s){var o=r.alternate;return o===null?(o=An(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function ev(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function mh(r,s,o,u,f,p){var E=0;if(u=r,typeof r=="function")ym(r)&&(E=1);else if(typeof r=="string")E=ix(r,o,_e.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=An(31,o,s,f),r.elementType=R,r.lanes=p,r;case B:return ra(o.children,f,p,s);case K:E=8,f|=24;break;case U:return r=An(12,o,s,f|2),r.elementType=U,r.lanes=p,r;case ie:return r=An(13,o,s,f),r.elementType=ie,r.lanes=p,r;case fe:return r=An(19,o,s,f),r.elementType=fe,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ne:case Y:E=10;break e;case W:E=9;break e;case ae:E=11;break e;case D:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=An(E,o,s,f),s.elementType=r,s.type=u,s.lanes=p,s}function ra(r,s,o,u){return r=An(7,r,u,s),r.lanes=o,r}function _m(r,s,o){return r=An(6,r,null,s),r.lanes=o,r}function vm(r,s,o){return s=An(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var To=[],bo=0,ph=null,gh=0,qn=[],Hn=0,ia=null,Jr=1,Zr="";function sa(r,s){To[bo++]=gh,To[bo++]=ph,ph=r,gh=s}function tv(r,s,o){qn[Hn++]=Jr,qn[Hn++]=Zr,qn[Hn++]=ia,ia=r;var u=Jr;r=Zr;var f=32-on(u)-1;u&=~(1<<f),o+=1;var p=32-on(s)+f;if(30<p){var E=f-f%5;p=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Jr=1<<32-on(s)+f|o<<f|u,Zr=p+r}else Jr=1<<p|o<<f|u,Zr=r}function Em(r){r.return!==null&&(sa(r,1),tv(r,1,0))}function Tm(r){for(;r===ph;)ph=To[--bo],To[bo]=null,gh=To[--bo],To[bo]=null;for(;r===ia;)ia=qn[--Hn],qn[Hn]=null,Zr=qn[--Hn],qn[Hn]=null,Jr=qn[--Hn],qn[Hn]=null}var hn=null,pt=null,qe=!1,aa=null,xr=!1,bm=Error(i(519));function oa(r){var s=Error(i(418,""));throw ru(zn(s,r)),bm}function nv(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Tt]=r,s[Gt]=u,o){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(o=0;o<Ru.length;o++)Pe(Ru[o],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),Bl(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Oi(s);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),Wc(s,u.value,u.defaultValue,u.children),Oi(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||vT(s.textContent,o)?(u.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),u.onScroll!=null&&Pe("scroll",s),u.onScrollEnd!=null&&Pe("scrollend",s),u.onClick!=null&&(s.onclick=Xh),s=!0):s=!1,s||oa(r)}function rv(r){for(hn=r.return;hn;)switch(hn.tag){case 5:case 13:xr=!1;return;case 27:case 3:xr=!0;return;default:hn=hn.return}}function tu(r){if(r!==hn)return!1;if(!qe)return rv(r),qe=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Up(r.type,r.memoizedProps)),o=!o),o&&pt&&oa(r),rv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){pt=hr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}pt=null}}else s===27?(s=pt,Zi(r.type)?(r=Fp,Fp=null,pt=r):pt=s):pt=hn?hr(r.stateNode.nextSibling):null;return!0}function nu(){pt=hn=null,qe=!1}function iv(){var r=aa;return r!==null&&(_n===null?_n=r:_n.push.apply(_n,r),aa=null),r}function ru(r){aa===null?aa=[r]:aa.push(r)}var wm=re(null),la=null,ei=null;function Ui(r,s,o){ce(wm,s._currentValue),s._currentValue=o}function ti(r){r._currentValue=wm.current,de(wm)}function Am(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Sm(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=f;for(var C=0;C<s.length;C++)if(w.context===s[C]){p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),Am(p.return,o,r),u||(E=null);break e}p=w.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),Am(E,o,r),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===r){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function iu(r,s,o,u){r=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var w=f.type;wn(f.pendingProps.value,E.value)||(r!==null?r.push(w):r=[w])}}else if(f===Ht.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Vu):r=[Vu])}f=f.return}r!==null&&Sm(s,r,o,u),s.flags|=262144}function yh(r){for(r=r.firstContext;r!==null;){if(!wn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ua(r){la=r,ei=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Zt(r){return sv(la,r)}function _h(r,s){return la===null&&ua(r),sv(r,s)}function sv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ei===null){if(r===null)throw Error(i(308));ei=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ei=ei.next=s;return o}var r1=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},i1=n.unstable_scheduleCallback,s1=n.unstable_NormalPriority,Pt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Im(){return{controller:new r1,data:new Map,refCount:0}}function su(r){r.refCount--,r.refCount===0&&i1(s1,function(){r.controller.abort()})}var au=null,Rm=0,wo=0,Ao=null;function a1(r,s){if(au===null){var o=au=[];Rm=0,wo=Cp(),Ao={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Rm++,s.then(av,av),s}function av(){if(--Rm===0&&au!==null){Ao!==null&&(Ao.status="fulfilled");var r=au;au=null,wo=0,Ao=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function o1(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var ov=J.S;J.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&a1(r,s),ov!==null&&ov(r,s)};var ca=re(null);function xm(){var r=ca.current;return r!==null?r:it.pooledCache}function vh(r,s){s===null?ce(ca,ca.current):ce(ca,s.pool)}function lv(){var r=xm();return r===null?null:{parent:Pt._currentValue,pool:r}}var ou=Error(i(460)),uv=Error(i(474)),Eh=Error(i(542)),Cm={then:function(){}};function cv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Th(){}function hv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Th,Th),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,dv(r),r;default:if(typeof s.status=="string")s.then(Th,Th);else{if(r=it,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,dv(r),r}throw lu=s,ou}}var lu=null;function fv(){if(lu===null)throw Error(i(459));var r=lu;return lu=null,r}function dv(r){if(r===ou||r===Eh)throw Error(i(483))}var Bi=!1;function Dm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ji(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function zi(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=dh(r),Z_(r,null,o),s}return fh(r,u,s,o),dh(r)}function uu(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Ri(r,o)}}function Om(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Vm=!1;function cu(){if(Vm){var r=Ao;if(r!==null)throw r}}function hu(r,s,o,u){Vm=!1;var f=r.updateQueue;Bi=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var C=w,q=C.next;C.next=null,E===null?p=q:E.next=q,E=C;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==E&&(w===null?Z.firstBaseUpdate=q:w.next=q,Z.lastBaseUpdate=C))}if(p!==null){var te=f.baseState;E=0,Z=q=C=null,w=p;do{var G=w.lane&-536870913,$=G!==w.lane;if($?(Be&G)===G:(u&G)===G){G!==0&&G===wo&&(Vm=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ae=r,Te=w;G=s;var tt=o;switch(Te.tag){case 1:if(Ae=Te.payload,typeof Ae=="function"){te=Ae.call(tt,te,G);break e}te=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Te.payload,G=typeof Ae=="function"?Ae.call(tt,te,G):Ae,G==null)break e;te=_({},te,G);break e;case 2:Bi=!0}}G=w.callback,G!==null&&(r.flags|=64,$&&(r.flags|=8192),$=f.callbacks,$===null?f.callbacks=[G]:$.push(G))}else $={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(q=Z=$,C=te):Z=Z.next=$,E|=G;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;$=w,w=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);Z===null&&(C=te),f.baseState=C,f.firstBaseUpdate=q,f.lastBaseUpdate=Z,p===null&&(f.shared.lanes=0),Yi|=E,r.lanes=E,r.memoizedState=te}}function mv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function pv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)mv(o[r],s)}var So=re(null),bh=re(0);function gv(r,s){r=li,ce(bh,r),ce(So,s),li=r|s.baseLanes}function Pm(){ce(bh,li),ce(So,So.current)}function Mm(){li=bh.current,de(So),de(bh)}var Fi=0,De=null,Ze=null,Rt=null,wh=!1,Io=!1,ha=!1,Ah=0,fu=0,Ro=null,l1=0;function At(){throw Error(i(321))}function km(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!wn(r[o],s[o]))return!1;return!0}function Lm(r,s,o,u,f,p){return Fi=p,De=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=r===null||r.memoizedState===null?Zv:eE,ha=!1,p=o(u,f),ha=!1,Io&&(p=_v(s,o,u,f)),yv(r),p}function yv(r){J.H=Dh;var s=Ze!==null&&Ze.next!==null;if(Fi=0,Rt=Ze=De=null,wh=!1,fu=0,Ro=null,s)throw Error(i(300));r===null||jt||(r=r.dependencies,r!==null&&yh(r)&&(jt=!0))}function _v(r,s,o,u){De=r;var f=0;do{if(Io&&(Ro=null),fu=0,Io=!1,25<=f)throw Error(i(301));if(f+=1,Rt=Ze=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}J.H=p1,p=s(o,u)}while(Io);return p}function u1(){var r=J.H,s=r.useState()[0];return s=typeof s.then=="function"?du(s):s,r=r.useState()[0],(Ze!==null?Ze.memoizedState:null)!==r&&(De.flags|=1024),s}function Um(){var r=Ah!==0;return Ah=0,r}function Bm(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function jm(r){if(wh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wh=!1}Fi=0,Rt=Ze=De=null,Io=!1,fu=Ah=0,Ro=null}function gn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?De.memoizedState=Rt=r:Rt=Rt.next=r,Rt}function xt(){if(Ze===null){var r=De.alternate;r=r!==null?r.memoizedState:null}else r=Ze.next;var s=Rt===null?De.memoizedState:Rt.next;if(s!==null)Rt=s,Ze=r;else{if(r===null)throw De.alternate===null?Error(i(467)):Error(i(310));Ze=r,r={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Rt===null?De.memoizedState=Rt=r:Rt=Rt.next=r}return Rt}function zm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(r){var s=fu;return fu+=1,Ro===null&&(Ro=[]),r=hv(Ro,r,s),s=De,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?Zv:eE),r}function Sh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return du(r);if(r.$$typeof===Y)return Zt(r)}throw Error(i(438,String(r)))}function Fm(r){var s=null,o=De.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=zm(),De.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=P;return s.index++,o}function ni(r,s){return typeof s=="function"?s(r):s}function Ih(r){var s=xt();return qm(s,Ze,r)}function qm(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,p=u.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}s.baseQueue=f=p,u.pending=null}if(p=r.baseState,f===null)r.memoizedState=p;else{s=f.next;var w=E=null,C=null,q=s,Z=!1;do{var te=q.lane&-536870913;if(te!==q.lane?(Be&te)===te:(Fi&te)===te){var G=q.revertLane;if(G===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),te===wo&&(Z=!0);else if((Fi&G)===G){q=q.next,G===wo&&(Z=!0);continue}else te={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},C===null?(w=C=te,E=p):C=C.next=te,De.lanes|=G,Yi|=G;te=q.action,ha&&o(p,te),p=q.hasEagerState?q.eagerState:o(p,te)}else G={lane:te,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},C===null?(w=C=G,E=p):C=C.next=G,De.lanes|=te,Yi|=te;q=q.next}while(q!==null&&q!==s);if(C===null?E=p:C.next=w,!wn(p,r.memoizedState)&&(jt=!0,Z&&(o=Ao,o!==null)))throw o;r.memoizedState=p,r.baseState=E,r.baseQueue=C,u.lastRenderedState=p}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Hm(r){var s=xt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do p=r(p,E.action),E=E.next;while(E!==f);wn(p,s.memoizedState)||(jt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function vv(r,s,o){var u=De,f=xt(),p=qe;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!wn((Ze||f).memoizedState,o);E&&(f.memoizedState=o,jt=!0),f=f.queue;var w=bv.bind(null,u,f,r);if(mu(2048,8,w,[r]),f.getSnapshot!==s||E||Rt!==null&&Rt.memoizedState.tag&1){if(u.flags|=2048,xo(9,Rh(),Tv.bind(null,u,f,o,s),null),it===null)throw Error(i(349));p||(Fi&124)!==0||Ev(u,s,o)}return o}function Ev(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=De.updateQueue,s===null?(s=zm(),De.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Tv(r,s,o,u){s.value=o,s.getSnapshot=u,wv(s)&&Av(r)}function bv(r,s,o){return o(function(){wv(s)&&Av(r)})}function wv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!wn(r,o)}catch{return!0}}function Av(r){var s=vo(r,2);s!==null&&Cn(s,r,2)}function Gm(r){var s=gn();if(typeof r=="function"){var o=r;if(r=o(),ha){kn(!0);try{o()}finally{kn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:r},s}function Sv(r,s,o,u){return r.baseState=o,qm(r,Ze,typeof u=="function"?u:ni)}function c1(r,s,o,u,f){if(Ch(r))throw Error(i(485));if(r=s.action,r!==null){var p={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};J.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,Iv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function Iv(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var p=J.T,E={};J.T=E;try{var w=o(f,u),C=J.S;C!==null&&C(E,w),Rv(r,s,w)}catch(q){Km(r,s,q)}finally{J.T=p}}else try{p=o(f,u),Rv(r,s,p)}catch(q){Km(r,s,q)}}function Rv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){xv(r,s,u)},function(u){return Km(r,s,u)}):xv(r,s,o)}function xv(r,s,o){s.status="fulfilled",s.value=o,Cv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Iv(r,o)))}function Km(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Cv(s),s=s.next;while(s!==u)}r.action=null}function Cv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Dv(r,s){return s}function Nv(r,s){if(qe){var o=it.formState;if(o!==null){e:{var u=De;if(qe){if(pt){t:{for(var f=pt,p=xr;f.nodeType!==8;){if(!p){f=null;break t}if(f=hr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){pt=hr(f.nextSibling),u=f.data==="F!";break e}}oa(u)}u=!1}u&&(s=o[0])}}return o=gn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dv,lastRenderedState:s},o.queue=u,o=Xv.bind(null,De,u),u.dispatch=o,u=Gm(!1),p=Wm.bind(null,De,!1,u.queue),u=gn(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=c1.bind(null,De,f,p,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function Ov(r){var s=xt();return Vv(s,Ze,r)}function Vv(r,s,o){if(s=qm(r,s,Dv)[0],r=Ih(ni)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=du(s)}catch(E){throw E===ou?Eh:E}else u=s;s=xt();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(De.flags|=2048,xo(9,Rh(),h1.bind(null,f,o),null)),[u,p,r]}function h1(r,s){r.action=s}function Pv(r){var s=xt(),o=Ze;if(o!==null)return Vv(s,o,r);xt(),s=s.memoizedState,o=xt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function xo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=De.updateQueue,s===null&&(s=zm(),De.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Rh(){return{destroy:void 0,resource:void 0}}function Mv(){return xt().memoizedState}function xh(r,s,o,u){var f=gn();u=u===void 0?null:u,De.flags|=r,f.memoizedState=xo(1|s,Rh(),o,u)}function mu(r,s,o,u){var f=xt();u=u===void 0?null:u;var p=f.memoizedState.inst;Ze!==null&&u!==null&&km(u,Ze.memoizedState.deps)?f.memoizedState=xo(s,p,o,u):(De.flags|=r,f.memoizedState=xo(1|s,p,o,u))}function kv(r,s){xh(8390656,8,r,s)}function Lv(r,s){mu(2048,8,r,s)}function Uv(r,s){return mu(4,2,r,s)}function Bv(r,s){return mu(4,4,r,s)}function jv(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function zv(r,s,o){o=o!=null?o.concat([r]):null,mu(4,4,jv.bind(null,s,r),o)}function $m(){}function Fv(r,s){var o=xt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&km(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function qv(r,s){var o=xt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&km(s,u[1]))return u[0];if(u=r(),ha){kn(!0);try{r()}finally{kn(!1)}}return o.memoizedState=[u,s],u}function Qm(r,s,o){return o===void 0||(Fi&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=KE(),De.lanes|=r,Yi|=r,o)}function Hv(r,s,o,u){return wn(o,s)?o:So.current!==null?(r=Qm(r,o,u),wn(r,s)||(jt=!0),r):(Fi&42)===0?(jt=!0,r.memoizedState=o):(r=KE(),De.lanes|=r,Yi|=r,s)}function Gv(r,s,o,u,f){var p=he.p;he.p=p!==0&&8>p?p:8;var E=J.T,w={};J.T=w,Wm(r,!1,s,o);try{var C=f(),q=J.S;if(q!==null&&q(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Z=o1(C,u);pu(r,s,Z,xn(r))}else pu(r,s,u,xn(r))}catch(te){pu(r,s,{then:function(){},status:"rejected",reason:te},xn())}finally{he.p=p,J.T=E}}function f1(){}function Ym(r,s,o,u){if(r.tag!==5)throw Error(i(476));var f=Kv(r).queue;Gv(r,f,s,ve,o===null?f1:function(){return $v(r),o(u)})}function Kv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:ve},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function $v(r){var s=Kv(r).next.queue;pu(r,s,{},xn())}function Xm(){return Zt(Vu)}function Qv(){return xt().memoizedState}function Yv(){return xt().memoizedState}function d1(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=xn();r=ji(o);var u=zi(s,r,o);u!==null&&(Cn(u,s,o),uu(u,s,o)),s={cache:Im()},r.payload=s;return}s=s.return}}function m1(r,s,o){var u=xn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ch(r)?Wv(s,o):(o=gm(r,s,o,u),o!==null&&(Cn(o,r,u),Jv(o,s,u)))}function Xv(r,s,o){var u=xn();pu(r,s,o,u)}function pu(r,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ch(r))Wv(s,f);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,w=p(E,o);if(f.hasEagerState=!0,f.eagerState=w,wn(w,E))return fh(r,s,f,0),it===null&&hh(),!1}catch{}finally{}if(o=gm(r,s,f,u),o!==null)return Cn(o,r,u),Jv(o,s,u),!0}return!1}function Wm(r,s,o,u){if(u={lane:2,revertLane:Cp(),action:u,hasEagerState:!1,eagerState:null,next:null},Ch(r)){if(s)throw Error(i(479))}else s=gm(r,o,u,2),s!==null&&Cn(s,r,2)}function Ch(r){var s=r.alternate;return r===De||s!==null&&s===De}function Wv(r,s){Io=wh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Jv(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Ri(r,o)}}var Dh={readContext:Zt,use:Sh,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Zv={readContext:Zt,use:Sh,useCallback:function(r,s){return gn().memoizedState=[r,s===void 0?null:s],r},useContext:Zt,useEffect:kv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,xh(4194308,4,jv.bind(null,s,r),o)},useLayoutEffect:function(r,s){return xh(4194308,4,r,s)},useInsertionEffect:function(r,s){xh(4,2,r,s)},useMemo:function(r,s){var o=gn();s=s===void 0?null:s;var u=r();if(ha){kn(!0);try{r()}finally{kn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=gn();if(o!==void 0){var f=o(s);if(ha){kn(!0);try{o(s)}finally{kn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=m1.bind(null,De,r),[u.memoizedState,r]},useRef:function(r){var s=gn();return r={current:r},s.memoizedState=r},useState:function(r){r=Gm(r);var s=r.queue,o=Xv.bind(null,De,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:$m,useDeferredValue:function(r,s){var o=gn();return Qm(o,r,s)},useTransition:function(){var r=Gm(!1);return r=Gv.bind(null,De,r.queue,!0,!1),gn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=De,f=gn();if(qe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),it===null)throw Error(i(349));(Be&124)!==0||Ev(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,kv(bv.bind(null,u,p,r),[r]),u.flags|=2048,xo(9,Rh(),Tv.bind(null,u,p,o,s),null),o},useId:function(){var r=gn(),s=it.identifierPrefix;if(qe){var o=Zr,u=Jr;o=(u&~(1<<32-on(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Ah++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=l1++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:Xm,useFormState:Nv,useActionState:Nv,useOptimistic:function(r){var s=gn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Wm.bind(null,De,!0,o),o.dispatch=s,[r,s]},useMemoCache:Fm,useCacheRefresh:function(){return gn().memoizedState=d1.bind(null,De)}},eE={readContext:Zt,use:Sh,useCallback:Fv,useContext:Zt,useEffect:Lv,useImperativeHandle:zv,useInsertionEffect:Uv,useLayoutEffect:Bv,useMemo:qv,useReducer:Ih,useRef:Mv,useState:function(){return Ih(ni)},useDebugValue:$m,useDeferredValue:function(r,s){var o=xt();return Hv(o,Ze.memoizedState,r,s)},useTransition:function(){var r=Ih(ni)[0],s=xt().memoizedState;return[typeof r=="boolean"?r:du(r),s]},useSyncExternalStore:vv,useId:Qv,useHostTransitionStatus:Xm,useFormState:Ov,useActionState:Ov,useOptimistic:function(r,s){var o=xt();return Sv(o,Ze,r,s)},useMemoCache:Fm,useCacheRefresh:Yv},p1={readContext:Zt,use:Sh,useCallback:Fv,useContext:Zt,useEffect:Lv,useImperativeHandle:zv,useInsertionEffect:Uv,useLayoutEffect:Bv,useMemo:qv,useReducer:Hm,useRef:Mv,useState:function(){return Hm(ni)},useDebugValue:$m,useDeferredValue:function(r,s){var o=xt();return Ze===null?Qm(o,r,s):Hv(o,Ze.memoizedState,r,s)},useTransition:function(){var r=Hm(ni)[0],s=xt().memoizedState;return[typeof r=="boolean"?r:du(r),s]},useSyncExternalStore:vv,useId:Qv,useHostTransitionStatus:Xm,useFormState:Pv,useActionState:Pv,useOptimistic:function(r,s){var o=xt();return Ze!==null?Sv(o,Ze,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Fm,useCacheRefresh:Yv},Co=null,gu=0;function Nh(r){var s=gu;return gu+=1,Co===null&&(Co=[]),hv(Co,r,s)}function yu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Oh(r,s){throw s.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function tE(r){var s=r._init;return s(r._payload)}function nE(r){function s(L,M){if(r){var z=L.deletions;z===null?(L.deletions=[M],L.flags|=16):z.push(M)}}function o(L,M){if(!r)return null;for(;M!==null;)s(L,M),M=M.sibling;return null}function u(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function f(L,M){return L=Wr(L,M),L.index=0,L.sibling=null,L}function p(L,M,z){return L.index=z,r?(z=L.alternate,z!==null?(z=z.index,z<M?(L.flags|=67108866,M):z):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function E(L){return r&&L.alternate===null&&(L.flags|=67108866),L}function w(L,M,z,ee){return M===null||M.tag!==6?(M=_m(z,L.mode,ee),M.return=L,M):(M=f(M,z),M.return=L,M)}function C(L,M,z,ee){var me=z.type;return me===B?Z(L,M,z.props.children,ee,z.key):M!==null&&(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&tE(me)===M.type)?(M=f(M,z.props),yu(M,z),M.return=L,M):(M=mh(z.type,z.key,z.props,null,L.mode,ee),yu(M,z),M.return=L,M)}function q(L,M,z,ee){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=vm(z,L.mode,ee),M.return=L,M):(M=f(M,z.children||[]),M.return=L,M)}function Z(L,M,z,ee,me){return M===null||M.tag!==7?(M=ra(z,L.mode,ee,me),M.return=L,M):(M=f(M,z),M.return=L,M)}function te(L,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=_m(""+M,L.mode,z),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return z=mh(M.type,M.key,M.props,null,L.mode,z),yu(z,M),z.return=L,z;case I:return M=vm(M,L.mode,z),M.return=L,M;case S:var ee=M._init;return M=ee(M._payload),te(L,M,z)}if(at(M)||k(M))return M=ra(M,L.mode,z,null),M.return=L,M;if(typeof M.then=="function")return te(L,Nh(M),z);if(M.$$typeof===Y)return te(L,_h(L,M),z);Oh(L,M)}return null}function G(L,M,z,ee){var me=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return me!==null?null:w(L,M,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case b:return z.key===me?C(L,M,z,ee):null;case I:return z.key===me?q(L,M,z,ee):null;case S:return me=z._init,z=me(z._payload),G(L,M,z,ee)}if(at(z)||k(z))return me!==null?null:Z(L,M,z,ee,null);if(typeof z.then=="function")return G(L,M,Nh(z),ee);if(z.$$typeof===Y)return G(L,M,_h(L,z),ee);Oh(L,z)}return null}function $(L,M,z,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return L=L.get(z)||null,w(M,L,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return L=L.get(ee.key===null?z:ee.key)||null,C(M,L,ee,me);case I:return L=L.get(ee.key===null?z:ee.key)||null,q(M,L,ee,me);case S:var Oe=ee._init;return ee=Oe(ee._payload),$(L,M,z,ee,me)}if(at(ee)||k(ee))return L=L.get(z)||null,Z(M,L,ee,me,null);if(typeof ee.then=="function")return $(L,M,z,Nh(ee),me);if(ee.$$typeof===Y)return $(L,M,z,_h(M,ee),me);Oh(M,ee)}return null}function Ae(L,M,z,ee){for(var me=null,Oe=null,ye=M,be=M=0,Ft=null;ye!==null&&be<z.length;be++){ye.index>be?(Ft=ye,ye=null):Ft=ye.sibling;var Fe=G(L,ye,z[be],ee);if(Fe===null){ye===null&&(ye=Ft);break}r&&ye&&Fe.alternate===null&&s(L,ye),M=p(Fe,M,be),Oe===null?me=Fe:Oe.sibling=Fe,Oe=Fe,ye=Ft}if(be===z.length)return o(L,ye),qe&&sa(L,be),me;if(ye===null){for(;be<z.length;be++)ye=te(L,z[be],ee),ye!==null&&(M=p(ye,M,be),Oe===null?me=ye:Oe.sibling=ye,Oe=ye);return qe&&sa(L,be),me}for(ye=u(ye);be<z.length;be++)Ft=$(ye,L,be,z[be],ee),Ft!==null&&(r&&Ft.alternate!==null&&ye.delete(Ft.key===null?be:Ft.key),M=p(Ft,M,be),Oe===null?me=Ft:Oe.sibling=Ft,Oe=Ft);return r&&ye.forEach(function(is){return s(L,is)}),qe&&sa(L,be),me}function Te(L,M,z,ee){if(z==null)throw Error(i(151));for(var me=null,Oe=null,ye=M,be=M=0,Ft=null,Fe=z.next();ye!==null&&!Fe.done;be++,Fe=z.next()){ye.index>be?(Ft=ye,ye=null):Ft=ye.sibling;var is=G(L,ye,Fe.value,ee);if(is===null){ye===null&&(ye=Ft);break}r&&ye&&is.alternate===null&&s(L,ye),M=p(is,M,be),Oe===null?me=is:Oe.sibling=is,Oe=is,ye=Ft}if(Fe.done)return o(L,ye),qe&&sa(L,be),me;if(ye===null){for(;!Fe.done;be++,Fe=z.next())Fe=te(L,Fe.value,ee),Fe!==null&&(M=p(Fe,M,be),Oe===null?me=Fe:Oe.sibling=Fe,Oe=Fe);return qe&&sa(L,be),me}for(ye=u(ye);!Fe.done;be++,Fe=z.next())Fe=$(ye,L,be,Fe.value,ee),Fe!==null&&(r&&Fe.alternate!==null&&ye.delete(Fe.key===null?be:Fe.key),M=p(Fe,M,be),Oe===null?me=Fe:Oe.sibling=Fe,Oe=Fe);return r&&ye.forEach(function(gx){return s(L,gx)}),qe&&sa(L,be),me}function tt(L,M,z,ee){if(typeof z=="object"&&z!==null&&z.type===B&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case b:e:{for(var me=z.key;M!==null;){if(M.key===me){if(me=z.type,me===B){if(M.tag===7){o(L,M.sibling),ee=f(M,z.props.children),ee.return=L,L=ee;break e}}else if(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&tE(me)===M.type){o(L,M.sibling),ee=f(M,z.props),yu(ee,z),ee.return=L,L=ee;break e}o(L,M);break}else s(L,M);M=M.sibling}z.type===B?(ee=ra(z.props.children,L.mode,ee,z.key),ee.return=L,L=ee):(ee=mh(z.type,z.key,z.props,null,L.mode,ee),yu(ee,z),ee.return=L,L=ee)}return E(L);case I:e:{for(me=z.key;M!==null;){if(M.key===me)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){o(L,M.sibling),ee=f(M,z.children||[]),ee.return=L,L=ee;break e}else{o(L,M);break}else s(L,M);M=M.sibling}ee=vm(z,L.mode,ee),ee.return=L,L=ee}return E(L);case S:return me=z._init,z=me(z._payload),tt(L,M,z,ee)}if(at(z))return Ae(L,M,z,ee);if(k(z)){if(me=k(z),typeof me!="function")throw Error(i(150));return z=me.call(z),Te(L,M,z,ee)}if(typeof z.then=="function")return tt(L,M,Nh(z),ee);if(z.$$typeof===Y)return tt(L,M,_h(L,z),ee);Oh(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(o(L,M.sibling),ee=f(M,z),ee.return=L,L=ee):(o(L,M),ee=_m(z,L.mode,ee),ee.return=L,L=ee),E(L)):o(L,M)}return function(L,M,z,ee){try{gu=0;var me=tt(L,M,z,ee);return Co=null,me}catch(ye){if(ye===ou||ye===Eh)throw ye;var Oe=An(29,ye,null,L.mode);return Oe.lanes=ee,Oe.return=L,Oe}finally{}}}var Do=nE(!0),rE=nE(!1),Gn=re(null),Cr=null;function qi(r){var s=r.alternate;ce(Mt,Mt.current&1),ce(Gn,r),Cr===null&&(s===null||So.current!==null||s.memoizedState!==null)&&(Cr=r)}function iE(r){if(r.tag===22){if(ce(Mt,Mt.current),ce(Gn,r),Cr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Cr=r)}}else Hi()}function Hi(){ce(Mt,Mt.current),ce(Gn,Gn.current)}function ri(r){de(Gn),Cr===r&&(Cr=null),de(Mt)}var Mt=re(0);function Vh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||zp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Jm(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Zm={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=xn(),f=ji(u);f.payload=s,o!=null&&(f.callback=o),s=zi(r,f,u),s!==null&&(Cn(s,r,u),uu(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=xn(),f=ji(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=zi(r,f,u),s!==null&&(Cn(s,r,u),uu(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=xn(),u=ji(o);u.tag=2,s!=null&&(u.callback=s),s=zi(r,u,o),s!==null&&(Cn(s,r,o),uu(s,r,o))}};function sE(r,s,o,u,f,p,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,E):s.prototype&&s.prototype.isPureReactComponent?!Zl(o,u)||!Zl(f,p):!0}function aE(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&Zm.enqueueReplaceState(s,s.state,null)}function fa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=_({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Ph=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function oE(r){Ph(r)}function lE(r){console.error(r)}function uE(r){Ph(r)}function Mh(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function cE(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ep(r,s,o){return o=ji(o),o.tag=3,o.payload={element:null},o.callback=function(){Mh(r,s)},o}function hE(r){return r=ji(r),r.tag=3,r}function fE(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;r.payload=function(){return f(p)},r.callback=function(){cE(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){cE(s,o,u),typeof f!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function g1(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&iu(s,o,f,!0),o=Gn.current,o!==null){switch(o.tag){case 13:return Cr===null?Ap():o.alternate===null&&gt===0&&(gt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Cm?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Ip(r,u,f)),!1;case 22:return o.flags|=65536,u===Cm?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Ip(r,u,f)),!1}throw Error(i(435,o.tag))}return Ip(r,u,f),Ap(),!1}if(qe)return s=Gn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==bm&&(r=Error(i(422),{cause:u}),ru(zn(r,o)))):(u!==bm&&(s=Error(i(423),{cause:u}),ru(zn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=zn(u,o),f=ep(r.stateNode,u,f),Om(r,f),gt!==4&&(gt=2)),!1;var p=Error(i(520),{cause:u});if(p=zn(p,o),Au===null?Au=[p]:Au.push(p),gt!==4&&(gt=2),s===null)return!0;u=zn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=ep(o.stateNode,u,r),Om(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Xi===null||!Xi.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=hE(f),fE(f,r,o,u),Om(o,f),!1}o=o.return}while(o!==null);return!1}var dE=Error(i(461)),jt=!1;function Kt(r,s,o,u){s.child=r===null?rE(s,null,o,u):Do(s,r.child,o,u)}function mE(r,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var E={};for(var w in u)w!=="ref"&&(E[w]=u[w])}else E=u;return ua(s),u=Lm(r,s,o,E,p,f),w=Um(),r!==null&&!jt?(Bm(r,s,f),ii(r,s,f)):(qe&&w&&Em(s),s.flags|=1,Kt(r,s,u,f),s.child)}function pE(r,s,o,u,f){if(r===null){var p=o.type;return typeof p=="function"&&!ym(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,gE(r,s,p,u,f)):(r=mh(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!lp(r,f)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:Zl,o(E,u)&&r.ref===s.ref)return ii(r,s,f)}return s.flags|=1,r=Wr(p,u),r.ref=s.ref,r.return=s,s.child=r}function gE(r,s,o,u,f){if(r!==null){var p=r.memoizedProps;if(Zl(p,u)&&r.ref===s.ref)if(jt=!1,s.pendingProps=u=p,lp(r,f))(r.flags&131072)!==0&&(jt=!0);else return s.lanes=r.lanes,ii(r,s,f)}return tp(r,s,o,u,f)}function yE(r,s,o){var u=s.pendingProps,f=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,r!==null){for(f=s.child=r.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return _E(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&vh(s,p!==null?p.cachePool:null),p!==null?gv(s,p):Pm(),iE(s);else return s.lanes=s.childLanes=536870912,_E(r,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(vh(s,p.cachePool),gv(s,p),Hi(),s.memoizedState=null):(r!==null&&vh(s,null),Pm(),Hi());return Kt(r,s,f,o),s.child}function _E(r,s,o,u){var f=xm();return f=f===null?null:{parent:Pt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&vh(s,null),Pm(),iE(s),r!==null&&iu(r,s,u,!0),null}function kh(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function tp(r,s,o,u,f){return ua(s),o=Lm(r,s,o,u,void 0,f),u=Um(),r!==null&&!jt?(Bm(r,s,f),ii(r,s,f)):(qe&&u&&Em(s),s.flags|=1,Kt(r,s,o,f),s.child)}function vE(r,s,o,u,f,p){return ua(s),s.updateQueue=null,o=_v(s,u,o,f),yv(r),u=Um(),r!==null&&!jt?(Bm(r,s,p),ii(r,s,p)):(qe&&u&&Em(s),s.flags|=1,Kt(r,s,o,p),s.child)}function EE(r,s,o,u,f){if(ua(s),s.stateNode===null){var p=Eo,E=o.contextType;typeof E=="object"&&E!==null&&(p=Zt(E)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Zm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Dm(s),E=o.contextType,p.context=typeof E=="object"&&E!==null?Zt(E):Eo,p.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Jm(s,o,E,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Zm.enqueueReplaceState(p,p.state,null),hu(s,u,p,f),cu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){p=s.stateNode;var w=s.memoizedProps,C=fa(o,w);p.props=C;var q=p.context,Z=o.contextType;E=Eo,typeof Z=="object"&&Z!==null&&(E=Zt(Z));var te=o.getDerivedStateFromProps;Z=typeof te=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||q!==E)&&aE(s,p,u,E),Bi=!1;var G=s.memoizedState;p.state=G,hu(s,u,p,f),cu(),q=s.memoizedState,w||G!==q||Bi?(typeof te=="function"&&(Jm(s,o,te,u),q=s.memoizedState),(C=Bi||sE(s,o,C,u,G,q,E))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=q),p.props=u,p.state=q,p.context=E,u=C):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Nm(r,s),E=s.memoizedProps,Z=fa(o,E),p.props=Z,te=s.pendingProps,G=p.context,q=o.contextType,C=Eo,typeof q=="object"&&q!==null&&(C=Zt(q)),w=o.getDerivedStateFromProps,(q=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==te||G!==C)&&aE(s,p,u,C),Bi=!1,G=s.memoizedState,p.state=G,hu(s,u,p,f),cu();var $=s.memoizedState;E!==te||G!==$||Bi||r!==null&&r.dependencies!==null&&yh(r.dependencies)?(typeof w=="function"&&(Jm(s,o,w,u),$=s.memoizedState),(Z=Bi||sE(s,o,Z,u,G,$,C)||r!==null&&r.dependencies!==null&&yh(r.dependencies))?(q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,$,C),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,$,C)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=$),p.props=u,p.state=$,p.context=C,u=Z):(typeof p.componentDidUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),u=!1)}return p=u,kh(r,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&u?(s.child=Do(s,r.child,null,f),s.child=Do(s,null,o,f)):Kt(r,s,o,f),s.memoizedState=p.state,r=s.child):r=ii(r,s,f),r}function TE(r,s,o,u){return nu(),s.flags|=256,Kt(r,s,o,u),s.child}var np={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rp(r){return{baseLanes:r,cachePool:lv()}}function ip(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Kn),r}function bE(r,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,E;if((E=p)||(E=r!==null&&r.memoizedState===null?!1:(Mt.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,r===null){if(qe){if(f?qi(s):Hi(),qe){var w=pt,C;if(C=w){e:{for(C=w,w=xr;C.nodeType!==8;){if(!w){w=null;break e}if(C=hr(C.nextSibling),C===null){w=null;break e}}w=C}w!==null?(s.memoizedState={dehydrated:w,treeContext:ia!==null?{id:Jr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},C=An(18,null,null,0),C.stateNode=w,C.return=s,s.child=C,hn=s,pt=null,C=!0):C=!1}C||oa(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return zp(w)?s.lanes=32:s.lanes=536870912,null;ri(s)}return w=u.children,u=u.fallback,f?(Hi(),f=s.mode,w=Lh({mode:"hidden",children:w},f),u=ra(u,f,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,f=s.child,f.memoizedState=rp(o),f.childLanes=ip(r,E,o),s.memoizedState=np,u):(qi(s),sp(s,w))}if(C=r.memoizedState,C!==null&&(w=C.dehydrated,w!==null)){if(p)s.flags&256?(qi(s),s.flags&=-257,s=ap(r,s,o)):s.memoizedState!==null?(Hi(),s.child=r.child,s.flags|=128,s=null):(Hi(),f=u.fallback,w=s.mode,u=Lh({mode:"visible",children:u.children},w),f=ra(f,w,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,Do(s,r.child,null,o),u=s.child,u.memoizedState=rp(o),u.childLanes=ip(r,E,o),s.memoizedState=np,s=f);else if(qi(s),zp(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var q=E.dgst;E=q,u=Error(i(419)),u.stack="",u.digest=E,ru({value:u,source:null,stack:null}),s=ap(r,s,o)}else if(jt||iu(r,s,o,!1),E=(o&r.childLanes)!==0,jt||E){if(E=it,E!==null&&(u=o&-o,u=(u&42)!==0?1:kl(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,vo(r,u),Cn(E,r,u),dE;w.data==="$?"||Ap(),s=ap(r,s,o)}else w.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=C.treeContext,pt=hr(w.nextSibling),hn=s,qe=!0,aa=null,xr=!1,r!==null&&(qn[Hn++]=Jr,qn[Hn++]=Zr,qn[Hn++]=ia,Jr=r.id,Zr=r.overflow,ia=s),s=sp(s,u.children),s.flags|=4096);return s}return f?(Hi(),f=u.fallback,w=s.mode,C=r.child,q=C.sibling,u=Wr(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,q!==null?f=Wr(q,f):(f=ra(f,w,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,w=r.child.memoizedState,w===null?w=rp(o):(C=w.cachePool,C!==null?(q=Pt._currentValue,C=C.parent!==q?{parent:q,pool:q}:C):C=lv(),w={baseLanes:w.baseLanes|o,cachePool:C}),f.memoizedState=w,f.childLanes=ip(r,E,o),s.memoizedState=np,u):(qi(s),o=r.child,r=o.sibling,o=Wr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(E=s.deletions,E===null?(s.deletions=[r],s.flags|=16):E.push(r)),s.child=o,s.memoizedState=null,o)}function sp(r,s){return s=Lh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Lh(r,s){return r=An(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function ap(r,s,o){return Do(s,r.child,null,o),r=sp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function wE(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Am(r.return,s,o)}function op(r,s,o,u,f){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function AE(r,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(Kt(r,s,u.children,o),u=Mt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&wE(r,o,s);else if(r.tag===19)wE(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(ce(Mt,u),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&Vh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),op(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Vh(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}op(s,!0,o,null,p);break;case"together":op(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ii(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Yi|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(iu(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Wr(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Wr(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function lp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&yh(r)))}function y1(r,s,o){switch(s.tag){case 3:We(s,s.stateNode.containerInfo),Ui(s,Pt,r.memoizedState.cache),nu();break;case 27:case 5:Ol(s);break;case 4:We(s,s.stateNode.containerInfo);break;case 10:Ui(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(qi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?bE(r,s,o):(qi(s),r=ii(r,s,o),r!==null?r.sibling:null);qi(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(iu(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return AE(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Mt,Mt.current),u)break;return null;case 22:case 23:return s.lanes=0,yE(r,s,o);case 24:Ui(s,Pt,r.memoizedState.cache)}return ii(r,s,o)}function SE(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)jt=!0;else{if(!lp(r,o)&&(s.flags&128)===0)return jt=!1,y1(r,s,o);jt=(r.flags&131072)!==0}else jt=!1,qe&&(s.flags&1048576)!==0&&tv(s,gh,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")ym(u)?(r=fa(u,r),s.tag=1,s=EE(null,s,u,r,o)):(s.tag=0,s=tp(null,s,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===ae){s.tag=11,s=mE(null,s,u,r,o);break e}else if(f===D){s.tag=14,s=pE(null,s,u,r,o);break e}}throw s=Ge(u)||u,Error(i(306,s,""))}}return s;case 0:return tp(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=fa(u,s.pendingProps),EE(r,s,u,f,o);case 3:e:{if(We(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Nm(r,s),hu(s,u,null,o);var E=s.memoizedState;if(u=E.cache,Ui(s,Pt,u),u!==p.cache&&Sm(s,[Pt],o,!0),cu(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=TE(r,s,u,o);break e}else if(u!==f){f=zn(Error(i(424)),s),ru(f),s=TE(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(pt=hr(r.firstChild),hn=s,qe=!0,aa=null,xr=!0,o=rE(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(nu(),u===f){s=ii(r,s,o);break e}Kt(r,s,u,o)}s=s.child}return s;case 26:return kh(r,s),r===null?(o=CT(s.type,null,s.pendingProps,null))?s.memoizedState=o:qe||(o=s.type,r=s.pendingProps,u=Wh(we.current).createElement(o),u[Tt]=s,u[Gt]=r,Qt(u,o,r),bt(u),s.stateNode=u):s.memoizedState=CT(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ol(s),r===null&&qe&&(u=s.stateNode=IT(s.type,s.pendingProps,we.current),hn=s,xr=!0,f=pt,Zi(s.type)?(Fp=f,pt=hr(u.firstChild)):pt=f),Kt(r,s,s.pendingProps.children,o),kh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&qe&&((f=u=pt)&&(u=G1(u,s.type,s.pendingProps,xr),u!==null?(s.stateNode=u,hn=s,pt=hr(u.firstChild),xr=!1,f=!0):f=!1),f||oa(s)),Ol(s),f=s.type,p=s.pendingProps,E=r!==null?r.memoizedProps:null,u=p.children,Up(f,p)?u=null:E!==null&&Up(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=Lm(r,s,u1,null,null,o),Vu._currentValue=f),kh(r,s),Kt(r,s,u,o),s.child;case 6:return r===null&&qe&&((r=o=pt)&&(o=K1(o,s.pendingProps,xr),o!==null?(s.stateNode=o,hn=s,pt=null,r=!0):r=!1),r||oa(s)),null;case 13:return bE(r,s,o);case 4:return We(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=Do(s,null,u,o):Kt(r,s,u,o),s.child;case 11:return mE(r,s,s.type,s.pendingProps,o);case 7:return Kt(r,s,s.pendingProps,o),s.child;case 8:return Kt(r,s,s.pendingProps.children,o),s.child;case 12:return Kt(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Ui(s,s.type,u.value),Kt(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ua(s),f=Zt(f),u=u(f),s.flags|=1,Kt(r,s,u,o),s.child;case 14:return pE(r,s,s.type,s.pendingProps,o);case 15:return gE(r,s,s.type,s.pendingProps,o);case 19:return AE(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Lh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Wr(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return yE(r,s,o);case 24:return ua(s),u=Zt(Pt),r===null?(f=xm(),f===null&&(f=it,p=Im(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Dm(s),Ui(s,Pt,f)):((r.lanes&o)!==0&&(Nm(r,s),hu(s,null,null,o),cu()),f=r.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Ui(s,Pt,u)):(u=p.cache,Ui(s,Pt,u),u!==f.cache&&Sm(s,[Pt],o,!0))),Kt(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function si(r){r.flags|=4}function IE(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!PT(s)){if(s=Gn.current,s!==null&&((Be&4194048)===Be?Cr!==null:(Be&62914560)!==Be&&(Be&536870912)===0||s!==Cr))throw lu=Cm,uv;r.flags|=8192}}function Uh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Si():536870912,r.lanes|=s,Po|=s)}function _u(r,s){if(!qe)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function dt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function _1(r,s,o){var u=s.pendingProps;switch(Tm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(s),null;case 1:return dt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ti(Pt),tr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(tu(s)?si(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,iv())),dt(s),null;case 26:return o=s.memoizedState,r===null?(si(s),o!==null?(dt(s),IE(s,o)):(dt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(si(s),dt(s),IE(s,o)):(dt(s),s.flags&=-16777217):(r.memoizedProps!==u&&si(s),dt(s),s.flags&=-16777217),null;case 27:Ja(s),o=we.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&si(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return dt(s),null}r=_e.current,tu(s)?nv(s):(r=IT(f,u,o),s.stateNode=r,si(s))}return dt(s),null;case 5:if(Ja(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&si(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return dt(s),null}if(r=_e.current,tu(s))nv(s);else{switch(f=Wh(we.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Tt]=s,r[Gt]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(Qt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&si(s)}}return dt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&si(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=we.current,tu(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=hn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Tt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||vT(r.nodeValue,o)),r||oa(s)}else r=Wh(r).createTextNode(u),r[Tt]=s,s.stateNode=r}return dt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=tu(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Tt]=s}else nu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),f=!1}else f=iv(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ri(s),s):(ri(s),null)}if(ri(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Uh(s,s.updateQueue),dt(s),null;case 4:return tr(),r===null&&Vp(s.stateNode.containerInfo),dt(s),null;case 10:return ti(s.type),dt(s),null;case 19:if(de(Mt),f=s.memoizedState,f===null)return dt(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)_u(f,!1);else{if(gt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=Vh(r),p!==null){for(s.flags|=128,_u(f,!1),r=p.updateQueue,s.updateQueue=r,Uh(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)ev(o,r),o=o.sibling;return ce(Mt,Mt.current&1|2),s.child}r=r.sibling}f.tail!==null&&pn()>zh&&(s.flags|=128,u=!0,_u(f,!1),s.lanes=4194304)}else{if(!u)if(r=Vh(p),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Uh(s,r),_u(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!qe)return dt(s),null}else 2*pn()-f.renderingStartTime>zh&&o!==536870912&&(s.flags|=128,u=!0,_u(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(r=f.last,r!==null?r.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=pn(),s.sibling=null,r=Mt.current,ce(Mt,u?r&1|2:r&1),s):(dt(s),null);case 22:case 23:return ri(s),Mm(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(dt(s),s.subtreeFlags&6&&(s.flags|=8192)):dt(s),o=s.updateQueue,o!==null&&Uh(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&de(ca),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ti(Pt),dt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function v1(r,s){switch(Tm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ti(Pt),tr(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ja(s),null;case 13:if(ri(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));nu()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return de(Mt),null;case 4:return tr(),null;case 10:return ti(s.type),null;case 22:case 23:return ri(s),Mm(),r!==null&&de(ca),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ti(Pt),null;case 25:return null;default:return null}}function RE(r,s){switch(Tm(s),s.tag){case 3:ti(Pt),tr();break;case 26:case 27:case 5:Ja(s);break;case 4:tr();break;case 13:ri(s);break;case 19:de(Mt);break;case 10:ti(s.type);break;case 22:case 23:ri(s),Mm(),r!==null&&de(ca);break;case 24:ti(Pt)}}function vu(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var p=o.create,E=o.inst;u=p(),E.destroy=u}o=o.next}while(o!==f)}}catch(w){nt(s,s.return,w)}}function Gi(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&r)===r){var E=u.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,f=s;var C=o,q=w;try{q()}catch(Z){nt(f,C,Z)}}}u=u.next}while(u!==p)}}catch(Z){nt(s,s.return,Z)}}function xE(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{pv(s,o)}catch(u){nt(r,r.return,u)}}}function CE(r,s,o){o.props=fa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){nt(r,s,u)}}function Eu(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){nt(r,s,f)}}function Dr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){nt(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){nt(r,s,f)}else o.current=null}function DE(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){nt(r,r.return,f)}}function up(r,s,o){try{var u=r.stateNode;j1(u,r.type,o,s),u[Gt]=s}catch(f){nt(r,r.return,f)}}function NE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Zi(r.type)||r.tag===4}function cp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||NE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Zi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Xh));else if(u!==4&&(u===27&&Zi(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(hp(r,s,o),r=r.sibling;r!==null;)hp(r,s,o),r=r.sibling}function Bh(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&Zi(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Bh(r,s,o),r=r.sibling;r!==null;)Bh(r,s,o),r=r.sibling}function OE(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Qt(s,u,o),s[Tt]=r,s[Gt]=o}catch(p){nt(r,r.return,p)}}var ai=!1,St=!1,fp=!1,VE=typeof WeakSet=="function"?WeakSet:Set,zt=null;function E1(r,s){if(r=r.containerInfo,kp=rf,r=H_(r),cm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,w=-1,C=-1,q=0,Z=0,te=r,G=null;t:for(;;){for(var $;te!==o||f!==0&&te.nodeType!==3||(w=E+f),te!==p||u!==0&&te.nodeType!==3||(C=E+u),te.nodeType===3&&(E+=te.nodeValue.length),($=te.firstChild)!==null;)G=te,te=$;for(;;){if(te===r)break t;if(G===o&&++q===f&&(w=E),G===p&&++Z===u&&(C=E),($=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=$}o=w===-1||C===-1?null:{start:w,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(Lp={focusedElem:r,selectionRange:o},rf=!1,zt=s;zt!==null;)if(s=zt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,zt=r;else for(;zt!==null;){switch(s=zt,p=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ae=fa(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Ae,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Te){nt(o,o.return,Te)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)jp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":jp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,zt=r;break}zt=s.return}}function PE(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ki(r,o),u&4&&vu(5,o);break;case 1:if(Ki(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(E){nt(o,o.return,E)}else{var f=fa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(E){nt(o,o.return,E)}}u&64&&xE(o),u&512&&Eu(o,o.return);break;case 3:if(Ki(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{pv(r,s)}catch(E){nt(o,o.return,E)}}break;case 27:s===null&&u&4&&OE(o);case 26:case 5:Ki(r,o),s===null&&u&4&&DE(o),u&512&&Eu(o,o.return);break;case 12:Ki(r,o);break;case 13:Ki(r,o),u&4&&LE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=C1.bind(null,o),$1(r,o))));break;case 22:if(u=o.memoizedState!==null||ai,!u){s=s!==null&&s.memoizedState!==null||St,f=ai;var p=St;ai=u,(St=s)&&!p?$i(r,o,(o.subtreeFlags&8772)!==0):Ki(r,o),ai=f,St=p}break;case 30:break;default:Ki(r,o)}}function ME(r){var s=r.alternate;s!==null&&(r.alternate=null,ME(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ro(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ot=null,yn=!1;function oi(r,s,o){for(o=o.child;o!==null;)kE(r,s,o),o=o.sibling}function kE(r,s,o){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(bi,o)}catch{}switch(o.tag){case 26:St||Dr(o,s),oi(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:St||Dr(o,s);var u=ot,f=yn;Zi(o.type)&&(ot=o.stateNode,yn=!1),oi(r,s,o),Cu(o.stateNode),ot=u,yn=f;break;case 5:St||Dr(o,s);case 6:if(u=ot,f=yn,ot=null,oi(r,s,o),ot=u,yn=f,ot!==null)if(yn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(o.stateNode)}catch(p){nt(o,s,p)}else try{ot.removeChild(o.stateNode)}catch(p){nt(o,s,p)}break;case 18:ot!==null&&(yn?(r=ot,AT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Lu(r)):AT(ot,o.stateNode));break;case 4:u=ot,f=yn,ot=o.stateNode.containerInfo,yn=!0,oi(r,s,o),ot=u,yn=f;break;case 0:case 11:case 14:case 15:St||Gi(2,o,s),St||Gi(4,o,s),oi(r,s,o);break;case 1:St||(Dr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&CE(o,s,u)),oi(r,s,o);break;case 21:oi(r,s,o);break;case 22:St=(u=St)||o.memoizedState!==null,oi(r,s,o),St=u;break;default:oi(r,s,o)}}function LE(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Lu(r)}catch(o){nt(s,s.return,o)}}function T1(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new VE),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new VE),s;default:throw Error(i(435,r.tag))}}function dp(r,s){var o=T1(r);s.forEach(function(u){var f=D1.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function Sn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=r,E=s,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(Zi(w.type)){ot=w.stateNode,yn=!1;break e}break;case 5:ot=w.stateNode,yn=!1;break e;case 3:case 4:ot=w.stateNode.containerInfo,yn=!0;break e}w=w.return}if(ot===null)throw Error(i(160));kE(p,E,f),ot=null,yn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)UE(s,r),s=s.sibling}var cr=null;function UE(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Sn(s,r),In(r),u&4&&(Gi(3,r,r.return),vu(3,r),Gi(5,r,r.return));break;case 1:Sn(s,r),In(r),u&512&&(St||o===null||Dr(o,o.return)),u&64&&ai&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=cr;if(Sn(s,r),In(r),u&512&&(St||o===null||Dr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[xi]||p[Tt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),Qt(p,u,o),p[Tt]=r,bt(p),u=p;break e;case"link":var E=OT("link","href",f).get(u+(o.href||""));if(E){for(var w=0;w<E.length;w++)if(p=E[w],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(w,1);break t}}p=f.createElement(u),Qt(p,u,o),f.head.appendChild(p);break;case"meta":if(E=OT("meta","content",f).get(u+(o.content||""))){for(w=0;w<E.length;w++)if(p=E[w],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(w,1);break t}}p=f.createElement(u),Qt(p,u,o),f.head.appendChild(p);break;default:throw Error(i(468,u))}p[Tt]=r,bt(p),u=p}r.stateNode=u}else VT(f,r.type,r.stateNode);else r.stateNode=NT(f,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?VT(f,r.type,r.stateNode):NT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&up(r,r.memoizedProps,o.memoizedProps)}break;case 27:Sn(s,r),In(r),u&512&&(St||o===null||Dr(o,o.return)),o!==null&&u&4&&up(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Sn(s,r),In(r),u&512&&(St||o===null||Dr(o,o.return)),r.flags&32){f=r.stateNode;try{Bn(f,"")}catch($){nt(r,r.return,$)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,up(r,f,o!==null?o.memoizedProps:f)),u&1024&&(fp=!0);break;case 6:if(Sn(s,r),In(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch($){nt(r,r.return,$)}}break;case 3:if(ef=null,f=cr,cr=Jh(s.containerInfo),Sn(s,r),cr=f,In(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Lu(s.containerInfo)}catch($){nt(r,r.return,$)}fp&&(fp=!1,BE(r));break;case 4:u=cr,cr=Jh(r.stateNode.containerInfo),Sn(s,r),In(r),cr=u;break;case 12:Sn(s,r),In(r);break;case 13:Sn(s,r),In(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(vp=pn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,dp(r,u)));break;case 22:f=r.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,q=ai,Z=St;if(ai=q||f,St=Z||C,Sn(s,r),St=Z,ai=q,In(r),u&8192)e:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||C||ai||St||da(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(p=C.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=C.stateNode;var te=C.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch($){nt(C,C.return,$)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch($){nt(C,C.return,$)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,dp(r,o))));break;case 19:Sn(s,r),In(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,dp(r,u)));break;case 30:break;case 21:break;default:Sn(s,r),In(r)}}function In(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(NE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,p=cp(r);Bh(r,p,f);break;case 5:var E=o.stateNode;o.flags&32&&(Bn(E,""),o.flags&=-33);var w=cp(r);Bh(r,w,E);break;case 3:case 4:var C=o.stateNode.containerInfo,q=cp(r);hp(r,q,C);break;default:throw Error(i(161))}}catch(Z){nt(r,r.return,Z)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function BE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;BE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Ki(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)PE(r,s.alternate,s),s=s.sibling}function da(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Gi(4,s,s.return),da(s);break;case 1:Dr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&CE(s,s.return,o),da(s);break;case 27:Cu(s.stateNode);case 26:case 5:Dr(s,s.return),da(s);break;case 22:s.memoizedState===null&&da(s);break;case 30:da(s);break;default:da(s)}r=r.sibling}}function $i(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,p=s,E=p.flags;switch(p.tag){case 0:case 11:case 15:$i(f,p,o),vu(4,p);break;case 1:if($i(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){nt(u,u.return,q)}if(u=p,f=u.updateQueue,f!==null){var w=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)mv(C[f],w)}catch(q){nt(u,u.return,q)}}o&&E&64&&xE(p),Eu(p,p.return);break;case 27:OE(p);case 26:case 5:$i(f,p,o),o&&u===null&&E&4&&DE(p),Eu(p,p.return);break;case 12:$i(f,p,o);break;case 13:$i(f,p,o),o&&E&4&&LE(f,p);break;case 22:p.memoizedState===null&&$i(f,p,o),Eu(p,p.return);break;case 30:break;default:$i(f,p,o)}s=s.sibling}}function mp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&su(o))}function pp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&su(r))}function Nr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)jE(r,s,o,u),s=s.sibling}function jE(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Nr(r,s,o,u),f&2048&&vu(9,s);break;case 1:Nr(r,s,o,u);break;case 3:Nr(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&su(r)));break;case 12:if(f&2048){Nr(r,s,o,u),r=s.stateNode;try{var p=s.memoizedProps,E=p.id,w=p.onPostCommit;typeof w=="function"&&w(E,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(C){nt(s,s.return,C)}}else Nr(r,s,o,u);break;case 13:Nr(r,s,o,u);break;case 23:break;case 22:p=s.stateNode,E=s.alternate,s.memoizedState!==null?p._visibility&2?Nr(r,s,o,u):Tu(r,s):p._visibility&2?Nr(r,s,o,u):(p._visibility|=2,No(r,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&mp(E,s);break;case 24:Nr(r,s,o,u),f&2048&&pp(s.alternate,s);break;default:Nr(r,s,o,u)}}function No(r,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=r,E=s,w=o,C=u,q=E.flags;switch(E.tag){case 0:case 11:case 15:No(p,E,w,C,f),vu(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?No(p,E,w,C,f):Tu(p,E):(Z._visibility|=2,No(p,E,w,C,f)),f&&q&2048&&mp(E.alternate,E);break;case 24:No(p,E,w,C,f),f&&q&2048&&pp(E.alternate,E);break;default:No(p,E,w,C,f)}s=s.sibling}}function Tu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:Tu(o,u),f&2048&&mp(u.alternate,u);break;case 24:Tu(o,u),f&2048&&pp(u.alternate,u);break;default:Tu(o,u)}s=s.sibling}}var bu=8192;function Oo(r){if(r.subtreeFlags&bu)for(r=r.child;r!==null;)zE(r),r=r.sibling}function zE(r){switch(r.tag){case 26:Oo(r),r.flags&bu&&r.memoizedState!==null&&ax(cr,r.memoizedState,r.memoizedProps);break;case 5:Oo(r);break;case 3:case 4:var s=cr;cr=Jh(r.stateNode.containerInfo),Oo(r),cr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=bu,bu=16777216,Oo(r),bu=s):Oo(r));break;default:Oo(r)}}function FE(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function wu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];zt=u,HE(u,r)}FE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qE(r),r=r.sibling}function qE(r){switch(r.tag){case 0:case 11:case 15:wu(r),r.flags&2048&&Gi(9,r,r.return);break;case 3:wu(r);break;case 12:wu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,jh(r)):wu(r);break;default:wu(r)}}function jh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];zt=u,HE(u,r)}FE(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Gi(8,s,s.return),jh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,jh(s));break;default:jh(s)}r=r.sibling}}function HE(r,s){for(;zt!==null;){var o=zt;switch(o.tag){case 0:case 11:case 15:Gi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:su(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,zt=u;else e:for(o=r;zt!==null;){u=zt;var f=u.sibling,p=u.return;if(ME(u),u===o){zt=null;break e}if(f!==null){f.return=p,zt=f;break e}zt=p}}}var b1={getCacheForType:function(r){var s=Zt(Pt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},w1=typeof WeakMap=="function"?WeakMap:Map,$e=0,it=null,Ve=null,Be=0,Qe=0,Rn=null,Qi=!1,Vo=!1,gp=!1,li=0,gt=0,Yi=0,ma=0,yp=0,Kn=0,Po=0,Au=null,_n=null,_p=!1,vp=0,zh=1/0,Fh=null,Xi=null,$t=0,Wi=null,Mo=null,ko=0,Ep=0,Tp=null,GE=null,Su=0,bp=null;function xn(){if(($e&2)!==0&&Be!==0)return Be&-Be;if(J.T!==null){var r=wo;return r!==0?r:Cp()}return Hr()}function KE(){Kn===0&&(Kn=(Be&536870912)===0||qe?Ml():536870912);var r=Gn.current;return r!==null&&(r.flags|=32),Kn}function Cn(r,s,o){(r===it&&(Qe===2||Qe===9)||r.cancelPendingCommit!==null)&&(Lo(r,0),Ji(r,Be,Kn,!1)),Et(r,o),(($e&2)===0||r!==it)&&(r===it&&(($e&2)===0&&(ma|=o),gt===4&&Ji(r,Be,Kn,!1)),Or(r))}function $E(r,s,o){if(($e&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Ai(r,s),f=u?I1(r,s):Sp(r,s,!0),p=u;do{if(f===0){Vo&&!u&&Ji(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!A1(o)){f=Sp(r,s,!1),p=!1;continue}if(f===2){if(p=s,r.errorRecoveryDisabledLanes&p)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var w=r;f=Au;var C=w.current.memoizedState.isDehydrated;if(C&&(Lo(w,E).flags|=256),E=Sp(w,E,!1),E!==2){if(gp&&!C){w.errorRecoveryDisabledLanes|=p,ma|=p,f=4;break e}p=_n,_n=f,p!==null&&(_n===null?_n=p:_n.push.apply(_n,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){Lo(r,0),Ji(r,s,0,!0);break}e:{switch(u=r,p=f,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ji(u,s,Kn,!Qi);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=vp+300-pn(),10<f)){if(Ji(u,s,Kn,!Qi),Ln(u,0,!0)!==0)break e;u.timeoutHandle=bT(QE.bind(null,u,o,_n,Fh,_p,s,Kn,ma,Po,Qi,p,2,-0,0),f);break e}QE(u,o,_n,Fh,_p,s,Kn,ma,Po,Qi,p,0,-0,0)}}break}while(!0);Or(r)}function QE(r,s,o,u,f,p,E,w,C,q,Z,te,G,$){if(r.timeoutHandle=-1,te=s.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Ou={stylesheets:null,count:0,unsuspend:sx},zE(s),te=ox(),te!==null)){r.cancelPendingCommit=te(tT.bind(null,r,s,p,o,u,f,E,w,C,Z,1,G,$)),Ji(r,p,E,!q);return}tT(r,s,p,o,u,f,E,w,C)}function A1(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!wn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ji(r,s,o,u){s&=~yp,s&=~ma,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var p=31-on(f),E=1<<p;u[p]=-1,f&=~E}o!==0&&Ii(r,o,s)}function qh(){return($e&6)===0?(Iu(0),!1):!0}function wp(){if(Ve!==null){if(Qe===0)var r=Ve.return;else r=Ve,ei=la=null,jm(r),Co=null,gu=0,r=Ve;for(;r!==null;)RE(r.alternate,r),r=r.return;Ve=null}}function Lo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,F1(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),wp(),it=r,Ve=o=Wr(r.current,null),Be=s,Qe=0,Rn=null,Qi=!1,Vo=Ai(r,s),gp=!1,Po=Kn=yp=ma=Yi=gt=0,_n=Au=null,_p=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-on(u),p=1<<f;s|=r[f],u&=~p}return li=s,hh(),o}function YE(r,s){De=null,J.H=Dh,s===ou||s===Eh?(s=fv(),Qe=3):s===uv?(s=fv(),Qe=4):Qe=s===dE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Rn=s,Ve===null&&(gt=1,Mh(r,zn(s,r.current)))}function XE(){var r=J.H;return J.H=Dh,r===null?Dh:r}function WE(){var r=J.A;return J.A=b1,r}function Ap(){gt=4,Qi||(Be&4194048)!==Be&&Gn.current!==null||(Vo=!0),(Yi&134217727)===0&&(ma&134217727)===0||it===null||Ji(it,Be,Kn,!1)}function Sp(r,s,o){var u=$e;$e|=2;var f=XE(),p=WE();(it!==r||Be!==s)&&(Fh=null,Lo(r,s)),s=!1;var E=gt;e:do try{if(Qe!==0&&Ve!==null){var w=Ve,C=Rn;switch(Qe){case 8:wp(),E=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(s=!0);var q=Qe;if(Qe=0,Rn=null,Uo(r,w,C,q),o&&Vo){E=0;break e}break;default:q=Qe,Qe=0,Rn=null,Uo(r,w,C,q)}}S1(),E=gt;break}catch(Z){YE(r,Z)}while(!0);return s&&r.shellSuspendCounter++,ei=la=null,$e=u,J.H=f,J.A=p,Ve===null&&(it=null,Be=0,hh()),E}function S1(){for(;Ve!==null;)JE(Ve)}function I1(r,s){var o=$e;$e|=2;var u=XE(),f=WE();it!==r||Be!==s?(Fh=null,zh=pn()+500,Lo(r,s)):Vo=Ai(r,s);e:do try{if(Qe!==0&&Ve!==null){s=Ve;var p=Rn;t:switch(Qe){case 1:Qe=0,Rn=null,Uo(r,s,p,1);break;case 2:case 9:if(cv(p)){Qe=0,Rn=null,ZE(s);break}s=function(){Qe!==2&&Qe!==9||it!==r||(Qe=7),Or(r)},p.then(s,s);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:cv(p)?(Qe=0,Rn=null,ZE(s)):(Qe=0,Rn=null,Uo(r,s,p,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var w=Ve;if(!E||PT(E)){Qe=0,Rn=null;var C=w.sibling;if(C!==null)Ve=C;else{var q=w.return;q!==null?(Ve=q,Hh(q)):Ve=null}break t}}Qe=0,Rn=null,Uo(r,s,p,5);break;case 6:Qe=0,Rn=null,Uo(r,s,p,6);break;case 8:wp(),gt=6;break e;default:throw Error(i(462))}}R1();break}catch(Z){YE(r,Z)}while(!0);return ei=la=null,J.H=u,J.A=f,$e=o,Ve!==null?0:(it=null,Be=0,hh(),gt)}function R1(){for(;Ve!==null&&!Zd();)JE(Ve)}function JE(r){var s=SE(r.alternate,r,li);r.memoizedProps=r.pendingProps,s===null?Hh(r):Ve=s}function ZE(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=vE(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=vE(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:jm(s);default:RE(o,s),s=Ve=ev(s,li),s=SE(o,s,li)}r.memoizedProps=r.pendingProps,s===null?Hh(r):Ve=s}function Uo(r,s,o,u){ei=la=null,jm(s),Co=null,gu=0;var f=s.return;try{if(g1(r,f,s,o,Be)){gt=1,Mh(r,zn(o,r.current)),Ve=null;return}}catch(p){if(f!==null)throw Ve=f,p;gt=1,Mh(r,zn(o,r.current)),Ve=null;return}s.flags&32768?(qe||u===1?r=!0:Vo||(Be&536870912)!==0?r=!1:(Qi=r=!0,(u===2||u===9||u===3||u===6)&&(u=Gn.current,u!==null&&u.tag===13&&(u.flags|=16384))),eT(s,r)):Hh(s)}function Hh(r){var s=r;do{if((s.flags&32768)!==0){eT(s,Qi);return}r=s.return;var o=_1(s.alternate,s,li);if(o!==null){Ve=o;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=r}while(s!==null);gt===0&&(gt=5)}function eT(r,s){do{var o=v1(r.alternate,r);if(o!==null){o.flags&=32767,Ve=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ve=r;return}Ve=r=o}while(r!==null);gt=6,Ve=null}function tT(r,s,o,u,f,p,E,w,C){r.cancelPendingCommit=null;do Gh();while($t!==0);if(($e&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=pm,Qc(r,o,p,E,w,C),r===it&&(Ve=it=null,Be=0),Mo=s,Wi=r,ko=o,Ep=p,Tp=f,GE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,N1(qr,function(){return aT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=he.p,he.p=2,E=$e,$e|=4;try{E1(r,s,o)}finally{$e=E,he.p=f,J.T=u}}$t=1,nT(),rT(),iT()}}function nT(){if($t===1){$t=0;var r=Wi,s=Mo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=he.p;he.p=2;var f=$e;$e|=4;try{UE(s,r);var p=Lp,E=H_(r.containerInfo),w=p.focusedElem,C=p.selectionRange;if(E!==w&&w&&w.ownerDocument&&q_(w.ownerDocument.documentElement,w)){if(C!==null&&cm(w)){var q=C.start,Z=C.end;if(Z===void 0&&(Z=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(Z,w.value.length);else{var te=w.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var $=G.getSelection(),Ae=w.textContent.length,Te=Math.min(C.start,Ae),tt=C.end===void 0?Te:Math.min(C.end,Ae);!$.extend&&Te>tt&&(E=tt,tt=Te,Te=E);var L=F_(w,Te),M=F_(w,tt);if(L&&M&&($.rangeCount!==1||$.anchorNode!==L.node||$.anchorOffset!==L.offset||$.focusNode!==M.node||$.focusOffset!==M.offset)){var z=te.createRange();z.setStart(L.node,L.offset),$.removeAllRanges(),Te>tt?($.addRange(z),$.extend(M.node,M.offset)):(z.setEnd(M.node,M.offset),$.addRange(z))}}}}for(te=[],$=w;$=$.parentNode;)$.nodeType===1&&te.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var ee=te[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}rf=!!kp,Lp=kp=null}finally{$e=f,he.p=u,J.T=o}}r.current=s,$t=2}}function rT(){if($t===2){$t=0;var r=Wi,s=Mo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=he.p;he.p=2;var f=$e;$e|=4;try{PE(r,s.alternate,s)}finally{$e=f,he.p=u,J.T=o}}$t=3}}function iT(){if($t===4||$t===3){$t=0,Vl();var r=Wi,s=Mo,o=ko,u=GE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?$t=5:($t=0,Mo=Wi=null,sT(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Xi=null),Ll(o),s=s.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(bi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=J.T,f=he.p,he.p=2,J.T=null;try{for(var p=r.onRecoverableError,E=0;E<u.length;E++){var w=u[E];p(w.value,{componentStack:w.stack})}}finally{J.T=s,he.p=f}}(ko&3)!==0&&Gh(),Or(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===bp?Su++:(Su=0,bp=r):Su=0,Iu(0)}}function sT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,su(s)))}function Gh(r){return nT(),rT(),iT(),aT()}function aT(){if($t!==5)return!1;var r=Wi,s=Ep;Ep=0;var o=Ll(ko),u=J.T,f=he.p;try{he.p=32>o?32:o,J.T=null,o=Tp,Tp=null;var p=Wi,E=ko;if($t=0,Mo=Wi=null,ko=0,($e&6)!==0)throw Error(i(331));var w=$e;if($e|=4,qE(p.current),jE(p,p.current,E,o),$e=w,Iu(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(bi,p)}catch{}return!0}finally{he.p=f,J.T=u,sT(r,s)}}function oT(r,s,o){s=zn(o,s),s=ep(r.stateNode,s,2),r=zi(r,s,2),r!==null&&(Et(r,2),Or(r))}function nt(r,s,o){if(r.tag===3)oT(r,r,o);else for(;s!==null;){if(s.tag===3){oT(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xi===null||!Xi.has(u))){r=zn(o,r),o=hE(2),u=zi(s,o,2),u!==null&&(fE(o,u,s,r),Et(u,2),Or(u));break}}s=s.return}}function Ip(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new w1;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(gp=!0,f.add(o),r=x1.bind(null,r,s,o),s.then(r,r))}function x1(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,it===r&&(Be&o)===o&&(gt===4||gt===3&&(Be&62914560)===Be&&300>pn()-vp?($e&2)===0&&Lo(r,0):yp|=o,Po===Be&&(Po=0)),Or(r)}function lT(r,s){s===0&&(s=Si()),r=vo(r,s),r!==null&&(Et(r,s),Or(r))}function C1(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),lT(r,o)}function D1(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),lT(r,o)}function N1(r,s){return Vs(r,s)}var Kh=null,Bo=null,Rp=!1,$h=!1,xp=!1,pa=0;function Or(r){r!==Bo&&r.next===null&&(Bo===null?Kh=Bo=r:Bo=Bo.next=r),$h=!0,Rp||(Rp=!0,V1())}function Iu(r,s){if(!xp&&$h){xp=!0;do for(var o=!1,u=Kh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var E=u.suspendedLanes,w=u.pingedLanes;p=(1<<31-on(42|r)+1)-1,p&=f&~(E&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,fT(u,p))}else p=Be,p=Ln(u,u===it?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Ai(u,p)||(o=!0,fT(u,p));u=u.next}while(o);xp=!1}}function O1(){uT()}function uT(){$h=Rp=!1;var r=0;pa!==0&&(z1()&&(r=pa),pa=0);for(var s=pn(),o=null,u=Kh;u!==null;){var f=u.next,p=cT(u,s);p===0?(u.next=null,o===null?Kh=f:o.next=f,f===null&&(Bo=o)):(o=u,(r!==0||(p&3)!==0)&&($h=!0)),u=f}Iu(r)}function cT(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var E=31-on(p),w=1<<E,C=f[E];C===-1?((w&o)===0||(w&u)!==0)&&(f[E]=to(w,s)):C<=s&&(r.expiredLanes|=w),p&=~w}if(s=it,o=Be,o=Ln(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Qe===2||Qe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&eo(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Ai(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&eo(u),Ll(o)){case 2:case 8:o=Ut;break;case 32:o=qr;break;case 268435456:o=Pl;break;default:o=qr}return u=hT.bind(null,r),o=Vs(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&eo(u),r.callbackPriority=2,r.callbackNode=null,2}function hT(r,s){if($t!==0&&$t!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Gh()&&r.callbackNode!==o)return null;var u=Be;return u=Ln(r,r===it?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:($E(r,u,s),cT(r,pn()),r.callbackNode!=null&&r.callbackNode===o?hT.bind(null,r):null)}function fT(r,s){if(Gh())return null;$E(r,s,!0)}function V1(){q1(function(){($e&6)!==0?Vs(Ot,O1):uT()})}function Cp(){return pa===0&&(pa=Ml()),pa}function dT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:sr(""+r)}function mT(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function P1(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=dT((f[Gt]||null).action),E=u.submitter;E&&(s=(s=E[Gt]||null)?dT(s.formAction):E.getAttribute("formAction"),s!==null&&(p=s,E=null));var w=new Qs("action","action",null,u,f);r.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(pa!==0){var C=E?mT(f,E):new FormData(f);Ym(o,{pending:!0,data:C,method:f.method,action:p},null,C)}}else typeof p=="function"&&(w.preventDefault(),C=E?mT(f,E):new FormData(f),Ym(o,{pending:!0,data:C,method:f.method,action:p},p,C))},currentTarget:f}]})}}for(var Dp=0;Dp<mm.length;Dp++){var Np=mm[Dp],M1=Np.toLowerCase(),k1=Np[0].toUpperCase()+Np.slice(1);ur(M1,"on"+k1)}ur($_,"onAnimationEnd"),ur(Q_,"onAnimationIteration"),ur(Y_,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(ZR,"onTransitionRun"),ur(e1,"onTransitionStart"),ur(t1,"onTransitionCancel"),ur(X_,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function pT(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var E=u.length-1;0<=E;E--){var w=u[E],C=w.instance,q=w.currentTarget;if(w=w.listener,C!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=q;try{p(f)}catch(Z){Ph(Z)}f.currentTarget=null,p=C}else for(E=0;E<u.length;E++){if(w=u[E],C=w.instance,q=w.currentTarget,w=w.listener,C!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=q;try{p(f)}catch(Z){Ph(Z)}f.currentTarget=null,p=C}}}}function Pe(r,s){var o=s[Ms];o===void 0&&(o=s[Ms]=new Set);var u=r+"__bubble";o.has(u)||(gT(s,r,2,!1),o.add(u))}function Op(r,s,o){var u=0;s&&(u|=4),gT(o,r,u,s)}var Qh="_reactListening"+Math.random().toString(36).slice(2);function Vp(r){if(!r[Qh]){r[Qh]=!0,Yc.forEach(function(o){o!=="selectionchange"&&(L1.has(o)||Op(o,!1,r),Op(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Qh]||(s[Qh]=!0,Op("selectionchange",!1,s))}}function gT(r,s,o,u){switch(jT(s)){case 2:var f=cx;break;case 8:f=hx;break;default:f=$p}o=f.bind(null,s,o,r),f=void 0,!Yr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function Pp(r,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var w=u.stateNode.containerInfo;if(w===f)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;w!==null;){if(E=Tr(w),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=p=E;continue e}w=w.parentNode}}u=u.return}Gs(function(){var q=p,Z=Hl(o),te=[];e:{var G=W_.get(r);if(G!==void 0){var $=Qs,Ae=r;switch(r){case"keypress":if(Ks(o)===0)break e;case"keydown":case"keyup":$=po;break;case"focusin":Ae="focus",$=ho;break;case"focusout":Ae="blur",$=ho;break;case"beforeblur":case"afterblur":$=ho;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Zs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Li;break;case $_:case Q_:case Y_:$=Kl;break;case X_:$=y;break;case"scroll":case"scrollend":$=Xs;break;case"wheel":$=A;break;case"copy":case"cut":case"paste":$=ih;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Yl;break;case"toggle":case"beforetoggle":$=Q}var Te=(s&4)!==0,tt=!Te&&(r==="scroll"||r==="scrollend"),L=Te?G!==null?G+"Capture":null:G;Te=[];for(var M=q,z;M!==null;){var ee=M;if(z=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||z===null||L===null||(ee=Mi(M,L),ee!=null&&Te.push(xu(M,ee,z))),tt)break;M=M.return}0<Te.length&&(G=new $(G,Ae,null,o,Z),te.push({event:G,listeners:Te}))}}if((s&7)===0){e:{if(G=r==="mouseover"||r==="pointerover",$=r==="mouseout"||r==="pointerout",G&&o!==ql&&(Ae=o.relatedTarget||o.fromElement)&&(Tr(Ae)||Ae[Gr]))break e;if(($||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,$?(Ae=o.relatedTarget||o.toElement,$=q,Ae=Ae?Tr(Ae):null,Ae!==null&&(tt=l(Ae),Te=Ae.tag,Ae!==tt||Te!==5&&Te!==27&&Te!==6)&&(Ae=null)):($=null,Ae=q),$!==Ae)){if(Te=Zs,ee="onMouseLeave",L="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(Te=Yl,ee="onPointerLeave",L="onPointerEnter",M="pointer"),tt=$==null?G:Ci($),z=Ae==null?G:Ci(Ae),G=new Te(ee,M+"leave",$,o,Z),G.target=tt,G.relatedTarget=z,ee=null,Tr(Z)===q&&(Te=new Te(L,M+"enter",Ae,o,Z),Te.target=z,Te.relatedTarget=tt,ee=Te),tt=ee,$&&Ae)t:{for(Te=$,L=Ae,M=0,z=Te;z;z=jo(z))M++;for(z=0,ee=L;ee;ee=jo(ee))z++;for(;0<M-z;)Te=jo(Te),M--;for(;0<z-M;)L=jo(L),z--;for(;M--;){if(Te===L||L!==null&&Te===L.alternate)break t;Te=jo(Te),L=jo(L)}Te=null}else Te=null;$!==null&&yT(te,G,$,Te,!1),Ae!==null&&tt!==null&&yT(te,tt,Ae,Te,!0)}}e:{if(G=q?Ci(q):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var me=k_;else if(P_(G))if(L_)me=XR;else{me=QR;var Oe=$R}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&lo(q.elementType)&&(me=k_):me=YR;if(me&&(me=me(r,q))){M_(te,me,o,Z);break e}Oe&&Oe(r,G,q),r==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&jl(G,"number",G.value)}switch(Oe=q?Ci(q):window,r){case"focusin":(P_(Oe)||Oe.contentEditable==="true")&&(go=Oe,hm=q,eu=null);break;case"focusout":eu=hm=go=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,G_(te,o,Z);break;case"selectionchange":if(JR)break;case"keydown":case"keyup":G_(te,o,Z)}var ye;if(xe)e:{switch(r){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else lr?ar(r,o)&&(be="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(be="onCompositionStart");be&&(wt&&o.locale!=="ko"&&(lr||be!=="onCompositionStart"?be==="onCompositionEnd"&&lr&&(ye=th()):(jn=Z,rt="value"in jn?jn.value:jn.textContent,lr=!0)),Oe=Yh(q,be),0<Oe.length&&(be=new Ql(be,r,null,o,Z),te.push({event:be,listeners:Oe}),ye?be.data=ye:(ye=or(o),ye!==null&&(be.data=ye)))),(ye=Ke?Xl(r,o):HR(r,o))&&(be=Yh(q,"onBeforeInput"),0<be.length&&(Oe=new Ql("onBeforeInput","beforeinput",null,o,Z),te.push({event:Oe,listeners:be}),Oe.data=ye)),P1(te,r,q,o,Z)}pT(te,s)})}function xu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Yh(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Mi(r,o),f!=null&&u.unshift(xu(r,f,p)),f=Mi(r,s),f!=null&&u.push(xu(r,f,p))),r.tag===3)return u;r=r.return}return[]}function jo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function yT(r,s,o,u,f){for(var p=s._reactName,E=[];o!==null&&o!==u;){var w=o,C=w.alternate,q=w.stateNode;if(w=w.tag,C!==null&&C===u)break;w!==5&&w!==26&&w!==27||q===null||(C=q,f?(q=Mi(o,p),q!=null&&E.unshift(xu(o,q,C))):f||(q=Mi(o,p),q!=null&&E.push(xu(o,q,C)))),o=o.return}E.length!==0&&r.push({event:s,listeners:E})}var U1=/\r\n?/g,B1=/\u0000|\uFFFD/g;function _T(r){return(typeof r=="string"?r:""+r).replace(U1,`
`).replace(B1,"")}function vT(r,s){return s=_T(s),_T(r)===s}function Xh(){}function et(r,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Bn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Bn(r,""+u);break;case"className":js(r,"class",u);break;case"tabIndex":js(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":js(r,o,u);break;case"style":Fl(r,u,p);break;case"data":if(s!=="object"){js(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=sr(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&et(r,s,"name",f.name,f,null),et(r,s,"formEncType",f.formEncType,f,null),et(r,s,"formMethod",f.formMethod,f,null),et(r,s,"formTarget",f.formTarget,f,null)):(et(r,s,"encType",f.encType,f,null),et(r,s,"method",f.method,f,null),et(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=sr(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Xh);break;case"onScroll":u!=null&&Pe("scroll",r);break;case"onScrollEnd":u!=null&&Pe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=sr(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Pe("beforetoggle",r),Pe("toggle",r),Bs(r,"popover",u);break;case"xlinkActuate":Un(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Un(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Un(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Un(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Un(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Un(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Un(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Un(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Un(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Bs(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Jc.get(o)||o,Bs(r,o,u))}}function Mp(r,s,o,u,f,p){switch(o){case"style":Fl(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Bn(r,u):(typeof u=="number"||typeof u=="bigint")&&Bn(r,""+u);break;case"onScroll":u!=null&&Pe("scroll",r);break;case"onScrollEnd":u!=null&&Pe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Xh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ls.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=r[Gt]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Bs(r,o,u)}}}function Qt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",r),Pe("load",r);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:et(r,s,p,E,o,null)}}f&&et(r,s,"srcSet",o.srcSet,o,null),u&&et(r,s,"src",o.src,o,null);return;case"input":Pe("invalid",r);var w=p=E=f=null,C=null,q=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":E=Z;break;case"checked":C=Z;break;case"defaultChecked":q=Z;break;case"value":p=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:et(r,s,u,Z,o,null)}}Bl(r,p,w,C,q,E,f,!1),Oi(r);return;case"select":Pe("invalid",r),u=E=p=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":p=w;break;case"defaultValue":E=w;break;case"multiple":u=w;default:et(r,s,f,w,o,null)}s=p,o=E,r.multiple=!!u,s!=null?Vi(r,!!u,s,!1):o!=null&&Vi(r,!!u,o,!0);return;case"textarea":Pe("invalid",r),p=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(w=o[E],w!=null))switch(E){case"value":u=w;break;case"defaultValue":f=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:et(r,s,E,w,o,null)}Wc(r,u,f,p),Oi(r);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:et(r,s,C,u,o,null)}return;case"dialog":Pe("beforetoggle",r),Pe("toggle",r),Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":Pe("load",r);break;case"video":case"audio":for(u=0;u<Ru.length;u++)Pe(Ru[u],r);break;case"image":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"embed":case"source":case"link":Pe("error",r),Pe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:et(r,s,q,u,o,null)}return;default:if(lo(s)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&Mp(r,s,Z,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&et(r,s,w,u,o,null))}function j1(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,w=null,C=null,q=null,Z=null;for($ in o){var te=o[$];if(o.hasOwnProperty($)&&te!=null)switch($){case"checked":break;case"value":break;case"defaultValue":C=te;default:u.hasOwnProperty($)||et(r,s,$,null,u,te)}}for(var G in u){var $=u[G];if(te=o[G],u.hasOwnProperty(G)&&($!=null||te!=null))switch(G){case"type":p=$;break;case"name":f=$;break;case"checked":q=$;break;case"defaultChecked":Z=$;break;case"value":E=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:$!==te&&et(r,s,G,$,u,te)}}Ul(r,E,w,C,q,Z,p,f);return;case"select":$=E=w=G=null;for(p in o)if(C=o[p],o.hasOwnProperty(p)&&C!=null)switch(p){case"value":break;case"multiple":$=C;default:u.hasOwnProperty(p)||et(r,s,p,null,u,C)}for(f in u)if(p=u[f],C=o[f],u.hasOwnProperty(f)&&(p!=null||C!=null))switch(f){case"value":G=p;break;case"defaultValue":w=p;break;case"multiple":E=p;default:p!==C&&et(r,s,f,p,u,C)}s=w,o=E,u=$,G!=null?Vi(r,!!o,G,!1):!!u!=!!o&&(s!=null?Vi(r,!!o,s,!0):Vi(r,!!o,o?[]:"",!1));return;case"textarea":$=G=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:et(r,s,w,null,u,f)}for(E in u)if(f=u[E],p=o[E],u.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":G=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==p&&et(r,s,E,f,u,p)}Xc(r,G,$);return;case"option":for(var Ae in o)if(G=o[Ae],o.hasOwnProperty(Ae)&&G!=null&&!u.hasOwnProperty(Ae))switch(Ae){case"selected":r.selected=!1;break;default:et(r,s,Ae,null,u,G)}for(C in u)if(G=u[C],$=o[C],u.hasOwnProperty(C)&&G!==$&&(G!=null||$!=null))switch(C){case"selected":r.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:et(r,s,C,G,u,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)G=o[Te],o.hasOwnProperty(Te)&&G!=null&&!u.hasOwnProperty(Te)&&et(r,s,Te,null,u,G);for(q in u)if(G=u[q],$=o[q],u.hasOwnProperty(q)&&G!==$&&(G!=null||$!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:et(r,s,q,G,u,$)}return;default:if(lo(s)){for(var tt in o)G=o[tt],o.hasOwnProperty(tt)&&G!==void 0&&!u.hasOwnProperty(tt)&&Mp(r,s,tt,void 0,u,G);for(Z in u)G=u[Z],$=o[Z],!u.hasOwnProperty(Z)||G===$||G===void 0&&$===void 0||Mp(r,s,Z,G,u,$);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!u.hasOwnProperty(L)&&et(r,s,L,null,u,G);for(te in u)G=u[te],$=o[te],!u.hasOwnProperty(te)||G===$||G==null&&$==null||et(r,s,te,G,u,$)}var kp=null,Lp=null;function Wh(r){return r.nodeType===9?r:r.ownerDocument}function ET(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Up(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bp=null;function z1(){var r=window.event;return r&&r.type==="popstate"?r===Bp?!1:(Bp=r,!0):(Bp=null,!1)}var bT=typeof setTimeout=="function"?setTimeout:void 0,F1=typeof clearTimeout=="function"?clearTimeout:void 0,wT=typeof Promise=="function"?Promise:void 0,q1=typeof queueMicrotask=="function"?queueMicrotask:typeof wT<"u"?function(r){return wT.resolve(null).then(r).catch(H1)}:bT;function H1(r){setTimeout(function(){throw r})}function Zi(r){return r==="head"}function AT(r,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var E=r.ownerDocument;if(o&1&&Cu(E.documentElement),o&2&&Cu(E.body),o&4)for(o=E.head,Cu(o),E=o.firstChild;E;){var w=E.nextSibling,C=E.nodeName;E[xi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=w}}if(f===0){r.removeChild(p),Lu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);Lu(s)}function jp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":jp(o),ro(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function G1(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[xi])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=hr(r.nextSibling),r===null)break}return null}function K1(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=hr(r.nextSibling),r===null))return null;return r}function zp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function $1(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function hr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Fp=null;function ST(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function IT(r,s,o){switch(s=Wh(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Cu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ro(r)}var $n=new Map,RT=new Set;function Jh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ui=he.d;he.d={f:Q1,r:Y1,D:X1,C:W1,L:J1,m:Z1,X:tx,S:ex,M:nx};function Q1(){var r=ui.f(),s=qh();return r||s}function Y1(r){var s=br(r);s!==null&&s.tag===5&&s.type==="form"?$v(s):ui.r(r)}var zo=typeof document>"u"?null:document;function xT(r,s,o){var u=zo;if(u&&typeof s=="string"&&s){var f=Bt(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),RT.has(f)||(RT.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Qt(s,"link",r),bt(s),u.head.appendChild(s)))}}function X1(r){ui.D(r),xT("dns-prefetch",r,null)}function W1(r,s){ui.C(r,s),xT("preconnect",r,s)}function J1(r,s,o){ui.L(r,s,o);var u=zo;if(u&&r&&s){var f='link[rel="preload"][as="'+Bt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Bt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Bt(o.imageSizes)+'"]')):f+='[href="'+Bt(r)+'"]';var p=f;switch(s){case"style":p=Fo(r);break;case"script":p=qo(r)}$n.has(p)||(r=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),$n.set(p,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(Du(p))||s==="script"&&u.querySelector(Nu(p))||(s=u.createElement("link"),Qt(s,"link",r),bt(s),u.head.appendChild(s)))}}function Z1(r,s){ui.m(r,s);var o=zo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Bt(u)+'"][href="'+Bt(r)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=qo(r)}if(!$n.has(p)&&(r=_({rel:"modulepreload",href:r},s),$n.set(p,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Nu(p)))return}u=o.createElement("link"),Qt(u,"link",r),bt(u),o.head.appendChild(u)}}}function ex(r,s,o){ui.S(r,s,o);var u=zo;if(u&&r){var f=Di(u).hoistableStyles,p=Fo(r);s=s||"default";var E=f.get(p);if(!E){var w={loading:0,preload:null};if(E=u.querySelector(Du(p)))w.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},o),(o=$n.get(p))&&qp(r,o);var C=E=u.createElement("link");bt(C),Qt(C,"link",r),C._p=new Promise(function(q,Z){C.onload=q,C.onerror=Z}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Zh(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:w},f.set(p,E)}}}function tx(r,s){ui.X(r,s);var o=zo;if(o&&r){var u=Di(o).hoistableScripts,f=qo(r),p=u.get(f);p||(p=o.querySelector(Nu(f)),p||(r=_({src:r,async:!0},s),(s=$n.get(f))&&Hp(r,s),p=o.createElement("script"),bt(p),Qt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function nx(r,s){ui.M(r,s);var o=zo;if(o&&r){var u=Di(o).hoistableScripts,f=qo(r),p=u.get(f);p||(p=o.querySelector(Nu(f)),p||(r=_({src:r,async:!0,type:"module"},s),(s=$n.get(f))&&Hp(r,s),p=o.createElement("script"),bt(p),Qt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function CT(r,s,o,u){var f=(f=we.current)?Jh(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Fo(o.href),o=Di(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Fo(o.href);var p=Di(f).hoistableStyles,E=p.get(r);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,E),(p=f.querySelector(Du(r)))&&!p._p&&(E.instance=p,E.state.loading=5),$n.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},$n.set(r,o),p||rx(f,r,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=qo(o),o=Di(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Fo(r){return'href="'+Bt(r)+'"'}function Du(r){return'link[rel="stylesheet"]['+r+"]"}function DT(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function rx(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Qt(s,"link",o),bt(s),r.head.appendChild(s))}function qo(r){return'[src="'+Bt(r)+'"]'}function Nu(r){return"script[async]"+r}function NT(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Bt(o.href)+'"]');if(u)return s.instance=u,bt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),bt(u),Qt(u,"style",f),Zh(u,o.precedence,r),s.instance=u;case"stylesheet":f=Fo(o.href);var p=r.querySelector(Du(f));if(p)return s.state.loading|=4,s.instance=p,bt(p),p;u=DT(o),(f=$n.get(f))&&qp(u,f),p=(r.ownerDocument||r).createElement("link"),bt(p);var E=p;return E._p=new Promise(function(w,C){E.onload=w,E.onerror=C}),Qt(p,"link",u),s.state.loading|=4,Zh(p,o.precedence,r),s.instance=p;case"script":return p=qo(o.src),(f=r.querySelector(Nu(p)))?(s.instance=f,bt(f),f):(u=o,(f=$n.get(p))&&(u=_({},o),Hp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),bt(f),Qt(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Zh(u,o.precedence,r));return s.instance}function Zh(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,E=0;E<u.length;E++){var w=u[E];if(w.dataset.precedence===s)p=w;else if(p!==f)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function qp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Hp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var ef=null;function OT(r,s,o){if(ef===null){var u=new Map,f=ef=new Map;f.set(o,u)}else f=ef,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var p=o[f];if(!(p[xi]||p[Tt]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(s)||"";E=r+E;var w=u.get(E);w?w.push(p):u.set(E,[p])}}return u}function VT(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function ix(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function PT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Ou=null;function sx(){}function ax(r,s,o){if(Ou===null)throw Error(i(475));var u=Ou;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Fo(o.href),p=r.querySelector(Du(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=tf.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=p,bt(p);return}p=r.ownerDocument||r,o=DT(o),(f=$n.get(f))&&qp(o,f),p=p.createElement("link"),bt(p);var E=p;E._p=new Promise(function(w,C){E.onload=w,E.onerror=C}),Qt(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=tf.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function ox(){if(Ou===null)throw Error(i(475));var r=Ou;return r.stylesheets&&r.count===0&&Gp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Gp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function tf(){if(this.count--,this.count===0){if(this.stylesheets)Gp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var nf=null;function Gp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,nf=new Map,s.forEach(lx,r),nf=null,tf.call(r))}function lx(r,s){if(!(s.state.loading&4)){var o=nf.get(r);if(o)var u=o.get(null);else{o=new Map,nf.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),p=o.get(E)||u,p===u&&o.set(null,f),o.set(E,f),this.count++,u=tf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var Vu={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function ux(r,s,o,u,f,p,E,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=no(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=no(0),this.hiddenUpdates=no(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function MT(r,s,o,u,f,p,E,w,C,q,Z,te){return r=new ux(r,s,o,E,w,C,q,te),s=1,p===!0&&(s|=24),p=An(3,null,null,s),r.current=p,p.stateNode=r,s=Im(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Dm(p),r}function kT(r){return r?(r=Eo,r):Eo}function LT(r,s,o,u,f,p){f=kT(f),u.context===null?u.context=f:u.pendingContext=f,u=ji(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=zi(r,u,s),o!==null&&(Cn(o,r,s),uu(o,r,s))}function UT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Kp(r,s){UT(r,s),(r=r.alternate)&&UT(r,s)}function BT(r){if(r.tag===13){var s=vo(r,67108864);s!==null&&Cn(s,r,67108864),Kp(r,67108864)}}var rf=!0;function cx(r,s,o,u){var f=J.T;J.T=null;var p=he.p;try{he.p=2,$p(r,s,o,u)}finally{he.p=p,J.T=f}}function hx(r,s,o,u){var f=J.T;J.T=null;var p=he.p;try{he.p=8,$p(r,s,o,u)}finally{he.p=p,J.T=f}}function $p(r,s,o,u){if(rf){var f=Qp(u);if(f===null)Pp(r,s,u,sf,o),zT(r,u);else if(dx(f,r,s,o,u))u.stopPropagation();else if(zT(r,u),s&4&&-1<fx.indexOf(r)){for(;f!==null;){var p=br(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=nr(p.pendingLanes);if(E!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var C=1<<31-on(E);w.entanglements[1]|=C,E&=~C}Or(p),($e&6)===0&&(zh=pn()+500,Iu(0))}}break;case 13:w=vo(p,2),w!==null&&Cn(w,p,2),qh(),Kp(p,2)}if(p=Qp(u),p===null&&Pp(r,s,u,sf,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Pp(r,s,u,null,o)}}function Qp(r){return r=Hl(r),Yp(r)}var sf=null;function Yp(r){if(sf=null,r=Tr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return sf=r,null}function jT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gc()){case Ot:return 2;case Ut:return 8;case qr:case em:return 32;case Pl:return 268435456;default:return 32}default:return 32}}var Xp=!1,es=null,ts=null,ns=null,Pu=new Map,Mu=new Map,rs=[],fx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zT(r,s){switch(r){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Pu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(s.pointerId)}}function ku(r,s,o,u,f,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=br(s),s!==null&&BT(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function dx(r,s,o,u,f){switch(s){case"focusin":return es=ku(es,r,s,o,u,f),!0;case"dragenter":return ts=ku(ts,r,s,o,u,f),!0;case"mouseover":return ns=ku(ns,r,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return Pu.set(p,ku(Pu.get(p)||null,r,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Mu.set(p,ku(Mu.get(p)||null,r,s,o,u,f)),!0}return!1}function FT(r){var s=Tr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,rm(r.priority,function(){if(o.tag===13){var u=xn();u=kl(u);var f=vo(o,u);f!==null&&Cn(f,o,u),Kp(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function af(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Qp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);ql=u,o.target.dispatchEvent(u),ql=null}else return s=br(o),s!==null&&BT(s),r.blockedOn=o,!1;s.shift()}return!0}function qT(r,s,o){af(r)&&o.delete(s)}function mx(){Xp=!1,es!==null&&af(es)&&(es=null),ts!==null&&af(ts)&&(ts=null),ns!==null&&af(ns)&&(ns=null),Pu.forEach(qT),Mu.forEach(qT)}function of(r,s){r.blockedOn===s&&(r.blockedOn=null,Xp||(Xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mx)))}var lf=null;function HT(r){lf!==r&&(lf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){lf===r&&(lf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(Yp(u||o)===null)continue;break}var p=br(o);p!==null&&(r.splice(s,3),s-=3,Ym(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Lu(r){function s(C){return of(C,r)}es!==null&&of(es,r),ts!==null&&of(ts,r),ns!==null&&of(ns,r),Pu.forEach(s),Mu.forEach(s);for(var o=0;o<rs.length;o++){var u=rs[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<rs.length&&(o=rs[0],o.blockedOn===null);)FT(o),o.blockedOn===null&&rs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],E=f[Gt]||null;if(typeof p=="function")E||HT(o);else if(E){var w=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[Gt]||null)w=E.formAction;else if(Yp(f)!==null)continue}else w=E.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),HT(o)}}}function Wp(r){this._internalRoot=r}uf.prototype.render=Wp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=xn();LT(o,u,r,s,null,null)},uf.prototype.unmount=Wp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;LT(r.current,2,null,r,null,null),qh(),s[Gr]=null}};function uf(r){this._internalRoot=r}uf.prototype.unstable_scheduleHydration=function(r){if(r){var s=Hr();r={blockedOn:null,target:r,priority:s};for(var o=0;o<rs.length&&s!==0&&s<rs[o].priority;o++);rs.splice(o,0,r),o===0&&FT(r)}};var GT=e.version;if(GT!=="19.1.1")throw Error(i(527,GT,"19.1.1"));he.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var px={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{bi=cf.inject(px),Wt=cf}catch{}}return Bu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",f=oE,p=lE,E=uE,w=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=MT(r,1,!1,null,null,o,u,f,p,E,w,null),r[Gr]=s.current,Vp(r),new Wp(s)},Bu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,f="",p=oE,E=lE,w=uE,C=null,q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(q=o.formState)),s=MT(r,1,!0,s,o??null,u,f,p,E,w,C,q),s.context=kT(null),o=s.current,u=xn(),u=kl(u),f=ji(u),f.callback=null,zi(o,f,u),o=u,s.current.lanes=o,Et(s,o),Or(s),r[Gr]=s.current,Vp(r),new uf(s)},Bu.version="19.1.1",Bu}var t0;function Sx(){if(t0)return eg.exports;t0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eg.exports=Ax(),eg.exports}var Ix=Sx();const Rx=bw(Ix);/**
 * react-router v7.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var n0="popstate";function xx(n={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return Cg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:hc(a)}return Dx(e,t,null,n)}function ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Cx(){return Math.random().toString(36).substring(2,10)}function r0(n,e){return{usr:n.state,key:n.key,idx:e}}function Cg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Al(e):e,state:t,key:e&&e.key||i||Cx()}}function hc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Al(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Dx(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let U=_(),ne=U==null?null:U-g;g=U,m&&m({action:d,location:K.location,delta:ne})}function b(U,ne){d="PUSH";let W=Cg(K.location,U,ne);g=_()+1;let Y=r0(W,g),ae=K.createHref(W);try{c.pushState(Y,"",ae)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;a.location.assign(ae)}l&&m&&m({action:d,location:K.location,delta:1})}function I(U,ne){d="REPLACE";let W=Cg(K.location,U,ne);g=_();let Y=r0(W,g),ae=K.createHref(W);c.replaceState(Y,"",ae),l&&m&&m({action:d,location:K.location,delta:0})}function B(U){return Nx(U)}let K={get action(){return d},get location(){return n(a,c)},listen(U){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(n0,T),m=U,()=>{a.removeEventListener(n0,T),m=null}},createHref(U){return e(a,U)},createURL:B,encodeLocation(U){let ne=B(U);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:b,replace:I,go(U){return c.go(U)}};return K}function Nx(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ut(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:hc(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Aw(n,e,t="/"){return Ox(n,e,t,!1)}function Ox(n,e,t,i){let a=typeof e=="string"?Al(e):e,l=pi(a.pathname||"/",t);if(l==null)return null;let c=Sw(n);Vx(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=Hx(l);d=Fx(c[m],g,i)}return d}function Sw(n,e=[],t=[],i="",a=!1){let l=(c,d,m=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&m)return;ut(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=mi([i,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(ut(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),Sw(c.children,e,b,T,m)),!(c.path==null&&!c.index)&&e.push({path:T,score:jx(T,c.index),routesMeta:b})};return n.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,d);else for(let g of Iw(c.path))l(c,d,!0,g)}),e}function Iw(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=Iw(i.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function Vx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:zx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Px=/^:[\w-]+$/,Mx=3,kx=2,Lx=1,Ux=10,Bx=-2,i0=n=>n==="*";function jx(n,e){let t=n.split("/"),i=t.length;return t.some(i0)&&(i+=Bx),e&&(i+=kx),t.filter(a=>!i0(a)).reduce((a,l)=>a+(Px.test(l)?Mx:l===""?Lx:Ux),i)}function zx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function Fx(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let d=0;d<i.length;++d){let m=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=qf({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),b=m.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=qf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:mi([l,T.pathname]),pathnameBase:Qx(mi([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=mi([l,T.pathnameBase]))}return c}function qf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=qx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:T},b)=>{if(_==="*"){let B=d[b]||"";c=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const I=d[b];return T&&!I?g[_]=void 0:g[_]=(I||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function qx(n,e=!1,t=!0){pr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function Hx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function pi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Gx(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Al(n):n;return{pathname:t?t.startsWith("/")?t:Kx(t,e):e,search:Yx(i),hash:Xx(a)}}function Kx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function ig(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $x(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function py(n){let e=$x(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function gy(n,e,t,i=!1){let a;typeof n=="string"?a=Al(n):(a={...n},ut(!a.pathname||!a.pathname.includes("?"),ig("?","pathname","search",a)),ut(!a.pathname||!a.pathname.includes("#"),ig("#","pathname","hash",a)),ut(!a.search||!a.search.includes("#"),ig("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?e[T]:"/"}let m=Gx(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var mi=n=>n.join("/").replace(/\/\/+/g,"/"),Qx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Yx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Xx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Wx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Rw=["POST","PUT","PATCH","DELETE"];new Set(Rw);var Jx=["GET",...Rw];new Set(Jx);var Sl=H.createContext(null);Sl.displayName="DataRouter";var gd=H.createContext(null);gd.displayName="DataRouterState";H.createContext(!1);var xw=H.createContext({isTransitioning:!1});xw.displayName="ViewTransition";var Zx=H.createContext(new Map);Zx.displayName="Fetchers";var eC=H.createContext(null);eC.displayName="Await";var yr=H.createContext(null);yr.displayName="Navigation";var Cc=H.createContext(null);Cc.displayName="Location";var _r=H.createContext({outlet:null,matches:[],isDataRoute:!1});_r.displayName="Route";var yy=H.createContext(null);yy.displayName="RouteError";function tC(n,{relative:e}={}){ut(Il(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=H.useContext(yr),{hash:a,pathname:l,search:c}=Dc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:mi([t,l])),i.createHref({pathname:d,search:c,hash:a})}function Il(){return H.useContext(Cc)!=null}function Rs(){return ut(Il(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Cc).location}var Cw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dw(n){H.useContext(yr).static||H.useLayoutEffect(n)}function Nw(){let{isDataRoute:n}=H.useContext(_r);return n?pC():nC()}function nC(){ut(Il(),"useNavigate() may be used only in the context of a <Router> component.");let n=H.useContext(Sl),{basename:e,navigator:t}=H.useContext(yr),{matches:i}=H.useContext(_r),{pathname:a}=Rs(),l=JSON.stringify(py(i)),c=H.useRef(!1);return Dw(()=>{c.current=!0}),H.useCallback((m,g={})=>{if(pr(c.current,Cw),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=gy(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:mi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,n])}H.createContext(null);function rC(){let{matches:n}=H.useContext(_r),e=n[n.length-1];return e?e.params:{}}function Dc(n,{relative:e}={}){let{matches:t}=H.useContext(_r),{pathname:i}=Rs(),a=JSON.stringify(py(t));return H.useMemo(()=>gy(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function iC(n,e){return Ow(n,e)}function Ow(n,e,t,i,a){var W;ut(Il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=H.useContext(yr),{matches:c}=H.useContext(_r),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let Y=T&&T.path||"";Vw(g,!T||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let b=Rs(),I;if(e){let Y=typeof e=="string"?Al(e):e;ut(_==="/"||((W=Y.pathname)==null?void 0:W.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),I=Y}else I=b;let B=I.pathname||"/",K=B;if(_!=="/"){let Y=_.replace(/^\//,"").split("/");K="/"+B.replace(/^\//,"").split("/").slice(Y.length).join("/")}let U=Aw(n,{pathname:K});pr(T||U!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),pr(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=uC(U&&U.map(Y=>Object.assign({},Y,{params:Object.assign({},m,Y.params),pathname:mi([_,l.encodeLocation?l.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?_:mi([_,l.encodeLocation?l.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),c,t,i,a);return e&&ne?H.createElement(Cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},ne):ne}function sC(){let n=mC(),e=Wx(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:l},"ErrorBoundary")," or"," ",H.createElement("code",{style:l},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:a},t):null,c)}var aC=H.createElement(sC,null),oC=class extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?H.createElement(_r.Provider,{value:this.props.routeContext},H.createElement(yy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lC({routeContext:n,match:e,children:t}){let i=H.useContext(Sl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(_r.Provider,{value:n},t)}function uC(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let g=l.findIndex(_=>_.route.id&&(c==null?void 0:c[_.route.id])!==void 0);ut(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,m=-1;if(t)for(let g=0;g<l.length;g++){let _=l[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=g),_.route.id){let{loaderData:T,errors:b}=t,I=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||I){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((g,_,T)=>{let b,I=!1,B=null,K=null;t&&(b=c&&_.route.id?c[_.route.id]:void 0,B=_.route.errorElement||aC,d&&(m<0&&T===0?(Vw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,K=null):m===T&&(I=!0,K=_.route.hydrateFallbackElement||null)));let U=e.concat(l.slice(0,T+1)),ne=()=>{let W;return b?W=B:I?W=K:_.route.Component?W=H.createElement(_.route.Component,null):_.route.element?W=_.route.element:W=g,H.createElement(lC,{match:_,routeContext:{outlet:g,matches:U,isDataRoute:t!=null},children:W})};return t&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?H.createElement(oC,{location:t.location,revalidation:t.revalidation,component:B,error:b,children:ne(),routeContext:{outlet:null,matches:U,isDataRoute:!0},unstable_onError:i}):ne()},null)}function _y(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cC(n){let e=H.useContext(Sl);return ut(e,_y(n)),e}function hC(n){let e=H.useContext(gd);return ut(e,_y(n)),e}function fC(n){let e=H.useContext(_r);return ut(e,_y(n)),e}function vy(n){let e=fC(n),t=e.matches[e.matches.length-1];return ut(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function dC(){return vy("useRouteId")}function mC(){var i;let n=H.useContext(yy),e=hC("useRouteError"),t=vy("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function pC(){let{router:n}=cC("useNavigate"),e=vy("useNavigate"),t=H.useRef(!1);return Dw(()=>{t.current=!0}),H.useCallback(async(a,l={})=>{pr(t.current,Cw),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var s0={};function Vw(n,e,t){!e&&!s0[n]&&(s0[n]=!0,pr(!1,t))}H.memo(gC);function gC({routes:n,future:e,state:t,unstable_onError:i}){return Ow(n,void 0,t,i,e)}function Dg({to:n,replace:e,state:t,relative:i}){ut(Il(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=H.useContext(yr);pr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=H.useContext(_r),{pathname:c}=Rs(),d=Nw(),m=gy(n,py(l),c,i==="path"),g=JSON.stringify(m);return H.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:i})},[d,g,i,e,t]),null}function Jo(n){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yC({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){ut(!Il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=H.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Al(t));let{pathname:m="/",search:g="",hash:_="",state:T=null,key:b="default"}=t,I=H.useMemo(()=>{let B=pi(m,c);return B==null?null:{location:{pathname:B,search:g,hash:_,state:T,key:b},navigationType:i}},[c,m,g,_,T,b,i]);return pr(I!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:H.createElement(yr.Provider,{value:d},H.createElement(Cc.Provider,{children:e,value:I}))}function _C({children:n,location:e}){return iC(Ng(n),e)}function Ng(n,e=[]){let t=[];return H.Children.forEach(n,(i,a)=>{if(!H.isValidElement(i))return;let l=[...e,a];if(i.type===H.Fragment){t.push.apply(t,Ng(i.props.children,l));return}ut(i.type===Jo,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Ng(i.props.children,l)),t.push(c)}),t}var Af="get",Sf="application/x-www-form-urlencoded";function yd(n){return n!=null&&typeof n.tagName=="string"}function vC(n){return yd(n)&&n.tagName.toLowerCase()==="button"}function EC(n){return yd(n)&&n.tagName.toLowerCase()==="form"}function TC(n){return yd(n)&&n.tagName.toLowerCase()==="input"}function bC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wC(n,e){return n.button===0&&(!e||e==="_self")&&!bC(n)}var hf=null;function AC(){if(hf===null)try{new FormData(document.createElement("form"),0),hf=!1}catch{hf=!0}return hf}var SC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sg(n){return n!=null&&!SC.has(n)?(pr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sf}"`),null):n}function IC(n,e){let t,i,a,l,c;if(EC(n)){let d=n.getAttribute("action");i=d?pi(d,e):null,t=n.getAttribute("method")||Af,a=sg(n.getAttribute("enctype"))||Sf,l=new FormData(n)}else if(vC(n)||TC(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?pi(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Af,a=sg(n.getAttribute("formenctype"))||sg(d.getAttribute("enctype"))||Sf,l=new FormData(d,n),!AC()){let{name:g,type:_,value:T}=n;if(_==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,T)}}else{if(yd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Af,i=null,a=Sf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ey(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function RC(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&pi(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function xC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function DC(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await xC(l,t);return c.links?c.links():[]}return[]}));return PC(i.flat(1).filter(CC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function a0(n,e,t,i,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>{var _;return t[g].pathname!==m.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{var T;let _=i.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function NC(n,e,{includeHydrateFallback:t}={}){return OC(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function OC(n){return[...new Set(n)]}function VC(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function PC(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(VC(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function Pw(){let n=H.useContext(Sl);return Ey(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function MC(){let n=H.useContext(gd);return Ey(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ty=H.createContext(void 0);Ty.displayName="FrameworkContext";function Mw(){let n=H.useContext(Ty);return Ey(n,"You must render this element inside a <HydratedRouter> element"),n}function kC(n,e){let t=H.useContext(Ty),[i,a]=H.useState(!1),[l,c]=H.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,b=H.useRef(null);H.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let K=ne=>{ne.forEach(W=>{c(W.isIntersecting)})},U=new IntersectionObserver(K,{threshold:.5});return b.current&&U.observe(b.current),()=>{U.disconnect()}}},[n]),H.useEffect(()=>{if(i){let K=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(K)}}},[i]);let I=()=>{a(!0)},B=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:ju(d,I),onBlur:ju(m,B),onMouseEnter:ju(g,I),onMouseLeave:ju(_,B),onTouchStart:ju(T,I)}]:[!1,b,{}]}function ju(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function LC({page:n,...e}){let{router:t}=Pw(),i=H.useMemo(()=>Aw(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?H.createElement(BC,{page:n,matches:i,...e}):null}function UC(n){let{manifest:e,routeModules:t}=Mw(),[i,a]=H.useState([]);return H.useEffect(()=>{let l=!1;return DC(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function BC({page:n,matches:e,...t}){let i=Rs(),{manifest:a,routeModules:l}=Mw(),{basename:c}=Pw(),{loaderData:d,matches:m}=MC(),g=H.useMemo(()=>a0(n,e,m,a,i,"data"),[n,e,m,a,i]),_=H.useMemo(()=>a0(n,e,m,a,i,"assets"),[n,e,m,a,i]),T=H.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let B=new Set,K=!1;if(e.forEach(ne=>{var Y;let W=a.routes[ne.route.id];!W||!W.hasLoader||(!g.some(ae=>ae.route.id===ne.route.id)&&ne.route.id in d&&((Y=l[ne.route.id])!=null&&Y.shouldRevalidate)||W.hasClientLoader?K=!0:B.add(ne.route.id))}),B.size===0)return[];let U=RC(n,c,"data");return K&&B.size>0&&U.searchParams.set("_routes",e.filter(ne=>B.has(ne.route.id)).map(ne=>ne.route.id).join(",")),[U.pathname+U.search]},[c,d,i,a,g,e,n,l]),b=H.useMemo(()=>NC(_,a),[_,a]),I=UC(_);return H.createElement(H.Fragment,null,T.map(B=>H.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),b.map(B=>H.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),I.map(({key:B,link:K})=>H.createElement("link",{key:B,nonce:t.nonce,...K})))}function jC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kw&&(window.__reactRouterVersion="7.9.2")}catch{}function zC({basename:n,children:e,window:t}){let i=H.useRef();i.current==null&&(i.current=xx({window:t,v5Compat:!0}));let a=i.current,[l,c]=H.useState({action:a.action,location:a.location}),d=H.useCallback(m=>{H.startTransition(()=>c(m))},[c]);return H.useLayoutEffect(()=>a.listen(d),[a,d]),H.createElement(yC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var Lw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uw=H.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:_,viewTransition:T,...b},I){let{basename:B}=H.useContext(yr),K=typeof g=="string"&&Lw.test(g),U,ne=!1;if(typeof g=="string"&&K&&(U=g,kw))try{let R=new URL(window.location.href),P=g.startsWith("//")?new URL(R.protocol+g):new URL(g),O=pi(P.pathname,B);P.origin===R.origin&&O!=null?g=O+P.search+P.hash:ne=!0}catch{pr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=tC(g,{relative:a}),[Y,ae,ie]=kC(i,b),fe=GC(g,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function D(R){e&&e(R),R.defaultPrevented||fe(R)}let S=H.createElement("a",{...b,...ie,href:U||W,onClick:ne||l?e:D,ref:jC(I,ae),target:m,"data-discover":!K&&t==="render"?"true":void 0});return Y&&!K?H.createElement(H.Fragment,null,S,H.createElement(LC,{page:W})):S});Uw.displayName="Link";var FC=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},_){let T=Dc(c,{relative:g.relative}),b=Rs(),I=H.useContext(gd),{navigator:B,basename:K}=H.useContext(yr),U=I!=null&&XC(T)&&d===!0,ne=B.encodeLocation?B.encodeLocation(T).pathname:T.pathname,W=b.pathname,Y=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(W=W.toLowerCase(),Y=Y?Y.toLowerCase():null,ne=ne.toLowerCase()),Y&&K&&(Y=pi(Y,K)||Y);const ae=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let ie=W===ne||!a&&W.startsWith(ne)&&W.charAt(ae)==="/",fe=Y!=null&&(Y===ne||!a&&Y.startsWith(ne)&&Y.charAt(ne.length)==="/"),D={isActive:ie,isPending:fe,isTransitioning:U},S=ie?e:void 0,R;typeof i=="function"?R=i(D):R=[i,ie?"active":null,fe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(D):l;return H.createElement(Uw,{...g,"aria-current":S,className:R,ref:_,style:P,to:c,viewTransition:d},typeof m=="function"?m(D):m)});FC.displayName="NavLink";var qC=H.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=Af,action:d,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:T,...b},I)=>{let B=QC(),K=YC(d,{relative:g}),U=c.toLowerCase()==="get"?"get":"post",ne=typeof d=="string"&&Lw.test(d),W=Y=>{if(m&&m(Y),Y.defaultPrevented)return;Y.preventDefault();let ae=Y.nativeEvent.submitter,ie=(ae==null?void 0:ae.getAttribute("formmethod"))||c;B(ae||Y.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:T})};return H.createElement("form",{ref:I,method:U,action:K,onSubmit:i?m:W,...b,"data-discover":!ne&&n==="render"?"true":void 0})});qC.displayName="Form";function HC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bw(n){let e=H.useContext(Sl);return ut(e,HC(n)),e}function GC(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=Nw(),m=Rs(),g=Dc(n,{relative:l});return H.useCallback(_=>{if(wC(_,e)){_.preventDefault();let T=t!==void 0?t:hc(m)===hc(g);d(n,{replace:T,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,g,t,i,e,n,a,l,c])}var KC=0,$C=()=>`__${String(++KC)}__`;function QC(){let{router:n}=Bw("useSubmit"),{basename:e}=H.useContext(yr),t=dC();return H.useCallback(async(i,a={})=>{let{action:l,method:c,encType:d,formData:m,body:g}=IC(i,e);if(a.navigate===!1){let _=a.fetcherKey||$C();await n.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function YC(n,{relative:e}={}){let{basename:t}=H.useContext(yr),i=H.useContext(_r);ut(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Dc(n||".",{relative:e})},c=Rs();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:mi([t,l.pathname])),hc(l)}function XC(n,{relative:e}={}){let t=H.useContext(xw);ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Bw("useViewTransitionState"),a=Dc(n,{relative:e});if(!t.isTransitioning)return!1;let l=pi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=pi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return qf(a.pathname,c)!=null||qf(a.pathname,l)!=null}const jw=H.createContext(void 0),Nc=()=>{const n=H.useContext(jw);if(n===void 0)throw new Error("useAuthContext must be used within an AuthProvider");return n},WC=()=>{};var o0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},JC=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Fw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,I=g&63;m||(I=64,c||(b=64)),i.push(t[_],t[T],t[b],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):JC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const T=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new ZC;const b=l<<2|d>>4;if(i.push(b),g!==64){const I=d<<4&240|g>>2;if(i.push(I),T!==64){const B=g<<6&192|T;i.push(B)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ZC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eD=function(n){const e=zw(n);return Fw.encodeByteArray(e,!0)},Hf=function(n){return eD(n).replace(/\./g,"")},qw=function(n){try{return Fw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=()=>Hw().__FIREBASE_DEFAULTS__,nD=()=>{if(typeof process>"u"||typeof o0>"u")return;const n=o0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qw(n[1]);return e&&JSON.parse(e)},_d=()=>{try{return WC()||tD()||nD()||rD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Gw=n=>{var e,t;return(t=(e=_d())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Kw=n=>{const e=Gw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},$w=()=>{var n;return(n=_d())==null?void 0:n.config},Qw=n=>{var e;return(e=_d())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function by(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Hf(JSON.stringify(t)),Hf(JSON.stringify(c)),""].join(".")}const Zu={};function sD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Zu))Zu[e]?n.emulator.push(e):n.prod.push(e);return n}function aD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let l0=!1;function wy(n,e){if(typeof window>"u"||typeof document>"u"||!xs(window.location.host)||Zu[n]===e||Zu[n]||l0)return;Zu[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=sD().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,I){b.setAttribute("width","24"),b.setAttribute("id",I),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{l0=!0,c()},b}function _(b,I){b.setAttribute("id",I),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=aD(i),I=t("text"),B=document.getElementById(I)||document.createElement("span"),K=t("learnmore"),U=document.getElementById(K)||document.createElement("a"),ne=t("preprendIcon"),W=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const Y=b.element;d(Y),_(U,K);const ae=g();m(W,ne),Y.append(W,B,U,ae),document.body.appendChild(Y)}l?(B.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function Xw(){var e;const n=(e=_d())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ww(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cD(){const n=kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Jw(){return!Xw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zw(){return!Xw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Ay(){try{return typeof indexedDB=="object"}catch{return!1}}function eA(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}function hD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="FirebaseError";class er extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=fD,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$a.prototype.create)}}class $a{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?dD(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new er(a,d,i)}}function dD(n,e){return n.replace(mD,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const mD=/\{\$([^}]+)}/g;function pD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(u0(l)&&u0(c)){if(!bs(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function u0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function gD(n,e){const t=new yD(n,e);return t.subscribe.bind(t)}class yD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");_D(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=ag),a.error===void 0&&(a.error=ag),a.complete===void 0&&(a.complete=ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _D(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ag(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=1e3,ED=2,TD=14400*1e3,bD=.5;function c0(n,e=vD,t=ED){const i=e*Math.pow(t,n),a=Math.round(bD*i*(Math.random()-.5)*2);return Math.min(TD,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(n){return n&&n._delegate?n._delegate:n}class Jn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new iD;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SD(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:AD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AD(n){return n===_a?void 0:n}function SD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const RD={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},xD=Le.INFO,CD={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},DD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=CD[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vd{constructor(e){this.name=e,this._logLevel=xD,this._logHandler=DD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const ND=(n,e)=>e.some(t=>n instanceof t);let h0,f0;function OD(){return h0||(h0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VD(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tA=new WeakMap,Og=new WeakMap,nA=new WeakMap,og=new WeakMap,Sy=new WeakMap;function PD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ys(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&tA.set(t,n)}).catch(()=>{}),Sy.set(e,n),e}function MD(n){if(Og.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Og.set(n,e)}let Vg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Og.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kD(n){Vg=n(Vg)}function LD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(lg(this),e,...t);return nA.set(i,e.sort?e.sort():[e]),ys(i)}:VD().includes(n)?function(...e){return n.apply(lg(this),e),ys(tA.get(this))}:function(...e){return ys(n.apply(lg(this),e))}}function UD(n){return typeof n=="function"?LD(n):(n instanceof IDBTransaction&&MD(n),ND(n,OD())?new Proxy(n,Vg):n)}function ys(n){if(n instanceof IDBRequest)return PD(n);if(og.has(n))return og.get(n);const e=UD(n);return e!==n&&(og.set(n,e),Sy.set(e,n)),e}const lg=n=>Sy.get(n);function rA(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=ys(c);return i&&c.addEventListener("upgradeneeded",m=>{i(ys(c.result),m.oldVersion,m.newVersion,ys(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const BD=["get","getKey","getAll","getAllKeys","count"],jD=["put","add","delete","clear"],ug=new Map;function d0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=jD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||BD.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return ug.set(e,l),l}kD(n=>({...n,get:(e,t,i)=>d0(e,t)||n.get(e,t,i),has:(e,t)=>!!d0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function FD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pg="@firebase/app",m0="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new vd("@firebase/app"),qD="@firebase/app-compat",HD="@firebase/analytics-compat",GD="@firebase/analytics",KD="@firebase/app-check-compat",$D="@firebase/app-check",QD="@firebase/auth",YD="@firebase/auth-compat",XD="@firebase/database",WD="@firebase/data-connect",JD="@firebase/database-compat",ZD="@firebase/functions",e2="@firebase/functions-compat",t2="@firebase/installations",n2="@firebase/installations-compat",r2="@firebase/messaging",i2="@firebase/messaging-compat",s2="@firebase/performance",a2="@firebase/performance-compat",o2="@firebase/remote-config",l2="@firebase/remote-config-compat",u2="@firebase/storage",c2="@firebase/storage-compat",h2="@firebase/firestore",f2="@firebase/ai",d2="@firebase/firestore-compat",m2="firebase",p2="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="[DEFAULT]",g2={[Pg]:"fire-core",[qD]:"fire-core-compat",[GD]:"fire-analytics",[HD]:"fire-analytics-compat",[$D]:"fire-app-check",[KD]:"fire-app-check-compat",[QD]:"fire-auth",[YD]:"fire-auth-compat",[XD]:"fire-rtdb",[WD]:"fire-data-connect",[JD]:"fire-rtdb-compat",[ZD]:"fire-fn",[e2]:"fire-fn-compat",[t2]:"fire-iid",[n2]:"fire-iid-compat",[r2]:"fire-fcm",[i2]:"fire-fcm-compat",[s2]:"fire-perf",[a2]:"fire-perf-compat",[o2]:"fire-rc",[l2]:"fire-rc-compat",[u2]:"fire-gcs",[c2]:"fire-gcs-compat",[h2]:"fire-fst",[d2]:"fire-fst-compat",[f2]:"fire-vertex","fire-js":"fire-js",[m2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new Map,y2=new Map,kg=new Map;function p0(n,e){try{n.container.addComponent(e)}catch(t){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function gr(n){const e=n.name;if(kg.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;kg.set(e,n);for(const t of Gf.values())p0(t,n);for(const t of y2.values())p0(t,n);return!0}function Cs(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new $a("app","Firebase",_2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=p2;function iA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Mg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw _s.create("bad-app-name",{appName:String(a)});if(t||(t=$w()),!t)throw _s.create("no-options");const l=Gf.get(a);if(l){if(bs(t,l.options)&&bs(i,l.config))return l;throw _s.create("duplicate-app",{appName:a})}const c=new ID(a);for(const m of kg.values())c.addComponent(m);const d=new v2(t,i,c);return Gf.set(a,d),d}function Ed(n=Mg){const e=Gf.get(n);if(!e&&n===Mg&&$w())return iA();if(!e)throw _s.create("no-app",{appName:n});return e}function En(n,e,t){let i=g2[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(c.join(" "));return}gr(new Jn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="firebase-heartbeat-database",T2=1,fc="firebase-heartbeat-store";let cg=null;function sA(){return cg||(cg=rA(E2,T2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fc)}catch(t){console.warn(t)}}}}).catch(n=>{throw _s.create("idb-open",{originalErrorMessage:n.message})})),cg}async function b2(n){try{const t=(await sA()).transaction(fc),i=await t.objectStore(fc).get(aA(n));return await t.done,i}catch(e){if(e instanceof er)gi.warn(e.message);else{const t=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(t.message)}}}async function g0(n,e){try{const i=(await sA()).transaction(fc,"readwrite");await i.objectStore(fc).put(e,aA(n)),await i.done}catch(t){if(t instanceof er)gi.warn(t.message);else{const i=_s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gi.warn(i.message)}}}function aA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=1024,A2=30;class S2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new R2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=y0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>A2){const c=x2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){gi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=y0(),{heartbeatsToSend:i,unsentEntries:a}=I2(this._heartbeatsCache.heartbeats),l=Hf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return gi.warn(t),""}}}function y0(){return new Date().toISOString().substring(0,10)}function I2(n,e=w2){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),_0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),_0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class R2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ay()?eA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await b2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _0(n){return Hf(JSON.stringify({version:2,heartbeats:n})).length}function x2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(n){gr(new Jn("platform-logger",e=>new zD(e),"PRIVATE")),gr(new Jn("heartbeat",e=>new S2(e),"PRIVATE")),En(Pg,m0,n),En(Pg,m0,"esm2020"),En("fire-js","")}C2("");var D2="firebase",N2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En(D2,N2,"app");var v0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,oA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function R(){}R.prototype=S.prototype,D.F=S.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(P,O,k){for(var x=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)x[Ge-2]=arguments[Ge];return S.prototype[O].apply(P,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,S,R){R||(R=0);const P=Array(16);if(typeof S=="string")for(var O=0;O<16;++O)P[O]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(O=0;O<16;++O)P[O]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=D.g[0],R=D.g[1],O=D.g[2];let k=D.g[3],x;x=S+(k^R&(O^k))+P[0]+3614090360&4294967295,S=R+(x<<7&4294967295|x>>>25),x=k+(O^S&(R^O))+P[1]+3905402710&4294967295,k=S+(x<<12&4294967295|x>>>20),x=O+(R^k&(S^R))+P[2]+606105819&4294967295,O=k+(x<<17&4294967295|x>>>15),x=R+(S^O&(k^S))+P[3]+3250441966&4294967295,R=O+(x<<22&4294967295|x>>>10),x=S+(k^R&(O^k))+P[4]+4118548399&4294967295,S=R+(x<<7&4294967295|x>>>25),x=k+(O^S&(R^O))+P[5]+1200080426&4294967295,k=S+(x<<12&4294967295|x>>>20),x=O+(R^k&(S^R))+P[6]+2821735955&4294967295,O=k+(x<<17&4294967295|x>>>15),x=R+(S^O&(k^S))+P[7]+4249261313&4294967295,R=O+(x<<22&4294967295|x>>>10),x=S+(k^R&(O^k))+P[8]+1770035416&4294967295,S=R+(x<<7&4294967295|x>>>25),x=k+(O^S&(R^O))+P[9]+2336552879&4294967295,k=S+(x<<12&4294967295|x>>>20),x=O+(R^k&(S^R))+P[10]+4294925233&4294967295,O=k+(x<<17&4294967295|x>>>15),x=R+(S^O&(k^S))+P[11]+2304563134&4294967295,R=O+(x<<22&4294967295|x>>>10),x=S+(k^R&(O^k))+P[12]+1804603682&4294967295,S=R+(x<<7&4294967295|x>>>25),x=k+(O^S&(R^O))+P[13]+4254626195&4294967295,k=S+(x<<12&4294967295|x>>>20),x=O+(R^k&(S^R))+P[14]+2792965006&4294967295,O=k+(x<<17&4294967295|x>>>15),x=R+(S^O&(k^S))+P[15]+1236535329&4294967295,R=O+(x<<22&4294967295|x>>>10),x=S+(O^k&(R^O))+P[1]+4129170786&4294967295,S=R+(x<<5&4294967295|x>>>27),x=k+(R^O&(S^R))+P[6]+3225465664&4294967295,k=S+(x<<9&4294967295|x>>>23),x=O+(S^R&(k^S))+P[11]+643717713&4294967295,O=k+(x<<14&4294967295|x>>>18),x=R+(k^S&(O^k))+P[0]+3921069994&4294967295,R=O+(x<<20&4294967295|x>>>12),x=S+(O^k&(R^O))+P[5]+3593408605&4294967295,S=R+(x<<5&4294967295|x>>>27),x=k+(R^O&(S^R))+P[10]+38016083&4294967295,k=S+(x<<9&4294967295|x>>>23),x=O+(S^R&(k^S))+P[15]+3634488961&4294967295,O=k+(x<<14&4294967295|x>>>18),x=R+(k^S&(O^k))+P[4]+3889429448&4294967295,R=O+(x<<20&4294967295|x>>>12),x=S+(O^k&(R^O))+P[9]+568446438&4294967295,S=R+(x<<5&4294967295|x>>>27),x=k+(R^O&(S^R))+P[14]+3275163606&4294967295,k=S+(x<<9&4294967295|x>>>23),x=O+(S^R&(k^S))+P[3]+4107603335&4294967295,O=k+(x<<14&4294967295|x>>>18),x=R+(k^S&(O^k))+P[8]+1163531501&4294967295,R=O+(x<<20&4294967295|x>>>12),x=S+(O^k&(R^O))+P[13]+2850285829&4294967295,S=R+(x<<5&4294967295|x>>>27),x=k+(R^O&(S^R))+P[2]+4243563512&4294967295,k=S+(x<<9&4294967295|x>>>23),x=O+(S^R&(k^S))+P[7]+1735328473&4294967295,O=k+(x<<14&4294967295|x>>>18),x=R+(k^S&(O^k))+P[12]+2368359562&4294967295,R=O+(x<<20&4294967295|x>>>12),x=S+(R^O^k)+P[5]+4294588738&4294967295,S=R+(x<<4&4294967295|x>>>28),x=k+(S^R^O)+P[8]+2272392833&4294967295,k=S+(x<<11&4294967295|x>>>21),x=O+(k^S^R)+P[11]+1839030562&4294967295,O=k+(x<<16&4294967295|x>>>16),x=R+(O^k^S)+P[14]+4259657740&4294967295,R=O+(x<<23&4294967295|x>>>9),x=S+(R^O^k)+P[1]+2763975236&4294967295,S=R+(x<<4&4294967295|x>>>28),x=k+(S^R^O)+P[4]+1272893353&4294967295,k=S+(x<<11&4294967295|x>>>21),x=O+(k^S^R)+P[7]+4139469664&4294967295,O=k+(x<<16&4294967295|x>>>16),x=R+(O^k^S)+P[10]+3200236656&4294967295,R=O+(x<<23&4294967295|x>>>9),x=S+(R^O^k)+P[13]+681279174&4294967295,S=R+(x<<4&4294967295|x>>>28),x=k+(S^R^O)+P[0]+3936430074&4294967295,k=S+(x<<11&4294967295|x>>>21),x=O+(k^S^R)+P[3]+3572445317&4294967295,O=k+(x<<16&4294967295|x>>>16),x=R+(O^k^S)+P[6]+76029189&4294967295,R=O+(x<<23&4294967295|x>>>9),x=S+(R^O^k)+P[9]+3654602809&4294967295,S=R+(x<<4&4294967295|x>>>28),x=k+(S^R^O)+P[12]+3873151461&4294967295,k=S+(x<<11&4294967295|x>>>21),x=O+(k^S^R)+P[15]+530742520&4294967295,O=k+(x<<16&4294967295|x>>>16),x=R+(O^k^S)+P[2]+3299628645&4294967295,R=O+(x<<23&4294967295|x>>>9),x=S+(O^(R|~k))+P[0]+4096336452&4294967295,S=R+(x<<6&4294967295|x>>>26),x=k+(R^(S|~O))+P[7]+1126891415&4294967295,k=S+(x<<10&4294967295|x>>>22),x=O+(S^(k|~R))+P[14]+2878612391&4294967295,O=k+(x<<15&4294967295|x>>>17),x=R+(k^(O|~S))+P[5]+4237533241&4294967295,R=O+(x<<21&4294967295|x>>>11),x=S+(O^(R|~k))+P[12]+1700485571&4294967295,S=R+(x<<6&4294967295|x>>>26),x=k+(R^(S|~O))+P[3]+2399980690&4294967295,k=S+(x<<10&4294967295|x>>>22),x=O+(S^(k|~R))+P[10]+4293915773&4294967295,O=k+(x<<15&4294967295|x>>>17),x=R+(k^(O|~S))+P[1]+2240044497&4294967295,R=O+(x<<21&4294967295|x>>>11),x=S+(O^(R|~k))+P[8]+1873313359&4294967295,S=R+(x<<6&4294967295|x>>>26),x=k+(R^(S|~O))+P[15]+4264355552&4294967295,k=S+(x<<10&4294967295|x>>>22),x=O+(S^(k|~R))+P[6]+2734768916&4294967295,O=k+(x<<15&4294967295|x>>>17),x=R+(k^(O|~S))+P[13]+1309151649&4294967295,R=O+(x<<21&4294967295|x>>>11),x=S+(O^(R|~k))+P[4]+4149444226&4294967295,S=R+(x<<6&4294967295|x>>>26),x=k+(R^(S|~O))+P[11]+3174756917&4294967295,k=S+(x<<10&4294967295|x>>>22),x=O+(S^(k|~R))+P[2]+718787259&4294967295,O=k+(x<<15&4294967295|x>>>17),x=R+(k^(O|~S))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(O+(x<<21&4294967295|x>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+k&4294967295}i.prototype.v=function(D,S){S===void 0&&(S=D.length);const R=S-this.blockSize,P=this.C;let O=this.h,k=0;for(;k<S;){if(O==0)for(;k<=R;)a(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<S;)if(P[O++]=D.charCodeAt(k++),O==this.blockSize){a(this,P),O=0;break}}else for(;k<S;)if(P[O++]=D[k++],O==this.blockSize){a(this,P),O=0;break}}this.h=O,this.o+=S},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;S=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=S&255,S/=256;for(this.v(D),D=Array(16),S=0,R=0;R<4;++R)for(let P=0;P<32;P+=8)D[S++]=this.g[R]>>>P&255;return D};function l(D,S){var R=d;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=S(D)}function c(D,S){this.h=S;const R=[];let P=!0;for(let O=D.length-1;O>=0;O--){const k=D[O]|0;P&&k==S||(R[O]=k,P=!1)}this.g=R}var d={};function m(D){return-128<=D&&D<128?l(D,function(S){return new c([S|0],S<0?-1:0)}):new c([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return U(g(-D));const S=[];let R=1;for(let P=0;D>=R;P++)S[P]=D/R|0,R*=4294967296;return new c(S,0)}function _(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return U(_(D.substring(1),S));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(S,8));let P=T;for(let k=0;k<D.length;k+=8){var O=Math.min(8,D.length-k);const x=parseInt(D.substring(k,k+O),S);O<8?(O=g(Math.pow(S,O)),P=P.j(O).add(g(x))):(P=P.j(R),P=P.add(g(x)))}return P}var T=m(0),b=m(1),I=m(16777216);n=c.prototype,n.m=function(){if(K(this))return-U(this).m();let D=0,S=1;for(let R=0;R<this.g.length;R++){const P=this.i(R);D+=(P>=0?P:4294967296+P)*S,S*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(B(this))return"0";if(K(this))return"-"+U(this).toString(D);const S=g(Math.pow(D,6));var R=this;let P="";for(;;){const O=ae(R,S).g;R=ne(R,O.j(S));let k=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=O,B(R))return k+P;for(;k.length<6;)k="0"+k;P=k+P}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function B(D){if(D.h!=0)return!1;for(let S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function K(D){return D.h==-1}n.l=function(D){return D=ne(this,D),K(D)?-1:B(D)?0:1};function U(D){const S=D.g.length,R=[];for(let P=0;P<S;P++)R[P]=~D.g[P];return new c(R,~D.h).add(b)}n.abs=function(){return K(this)?U(this):this},n.add=function(D){const S=Math.max(this.g.length,D.g.length),R=[];let P=0;for(let O=0;O<=S;O++){let k=P+(this.i(O)&65535)+(D.i(O)&65535),x=(k>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);P=x>>>16,k&=65535,x&=65535,R[O]=x<<16|k}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ne(D,S){return D.add(U(S))}n.j=function(D){if(B(this)||B(D))return T;if(K(this))return K(D)?U(this).j(U(D)):U(U(this).j(D));if(K(D))return U(this.j(U(D)));if(this.l(I)<0&&D.l(I)<0)return g(this.m()*D.m());const S=this.g.length+D.g.length,R=[];for(var P=0;P<2*S;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<D.g.length;O++){const k=this.i(P)>>>16,x=this.i(P)&65535,Ge=D.i(O)>>>16,at=D.i(O)&65535;R[2*P+2*O]+=x*at,W(R,2*P+2*O),R[2*P+2*O+1]+=k*at,W(R,2*P+2*O+1),R[2*P+2*O+1]+=x*Ge,W(R,2*P+2*O+1),R[2*P+2*O+2]+=k*Ge,W(R,2*P+2*O+2)}for(D=0;D<S;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=S;D<2*S;D++)R[D]=0;return new c(R,0)};function W(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function Y(D,S){this.g=D,this.h=S}function ae(D,S){if(B(S))throw Error("division by zero");if(B(D))return new Y(T,T);if(K(D))return S=ae(U(D),S),new Y(U(S.g),U(S.h));if(K(S))return S=ae(D,U(S)),new Y(U(S.g),S.h);if(D.g.length>30){if(K(D)||K(S))throw Error("slowDivide_ only works with positive integers.");for(var R=b,P=S;P.l(D)<=0;)R=ie(R),P=ie(P);var O=fe(R,1),k=fe(P,1);for(P=fe(P,2),R=fe(R,2);!B(P);){var x=k.add(P);x.l(D)<=0&&(O=O.add(R),k=x),P=fe(P,1),R=fe(R,1)}return S=ne(D,O.j(S)),new Y(O,S)}for(O=T;D.l(S)>=0;){for(R=Math.max(1,Math.floor(D.m()/S.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),k=g(R),x=k.j(S);K(x)||x.l(D)>0;)R-=P,k=g(R),x=k.j(S);B(k)&&(k=b),O=O.add(k),D=ne(D,x)}return new Y(O,D)}n.B=function(D){return ae(this,D).h},n.and=function(D){const S=Math.max(this.g.length,D.g.length),R=[];for(let P=0;P<S;P++)R[P]=this.i(P)&D.i(P);return new c(R,this.h&D.h)},n.or=function(D){const S=Math.max(this.g.length,D.g.length),R=[];for(let P=0;P<S;P++)R[P]=this.i(P)|D.i(P);return new c(R,this.h|D.h)},n.xor=function(D){const S=Math.max(this.g.length,D.g.length),R=[];for(let P=0;P<S;P++)R[P]=this.i(P)^D.i(P);return new c(R,this.h^D.h)};function ie(D){const S=D.g.length+1,R=[];for(let P=0;P<S;P++)R[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(R,D.h)}function fe(D,S){const R=S>>5;S%=32;const P=D.g.length-R,O=[];for(let k=0;k<P;k++)O[k]=S>0?D.i(k+R)>>>S|D.i(k+R+1)<<32-S:D.i(k+R);return new c(O,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,oA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,vs=c}).apply(typeof v0<"u"?v0:typeof self<"u"?self:typeof window<"u"?window:{});var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lA,Qu,uA,If,Lg,cA,hA,fA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ff=="object"&&ff];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var v=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var F=h[A];if(!(F in v))break e;v=v[F]}h=h[h.length-1],A=v[h],y=y(A),y!=A&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var v=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&v.push([A,y[A]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,v){return h.call.apply(h.bind,arguments)}function g(h,y,v){return g=m,g.apply(null,arguments)}function _(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(A,F,Q){for(var le=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)le[xe-2]=arguments[xe];return y.prototype[F].apply(A,le)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const v=Array(y);for(let A=0;A<y;A++)v[A]=h[A];return v}return[]}function B(h,y){for(let A=1;A<arguments.length;A++){const F=arguments[A];var v=typeof F;if(v=v!="object"?v:F?Array.isArray(F)?"array":v:"null",v=="array"||v=="object"&&typeof F.length=="number"){v=h.length||0;const Q=F.length||0;h.length=v+Q;for(let le=0;le<Q;le++)h[v+le]=F[le]}else h.push(F)}}class K{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(h){c.setTimeout(()=>{throw h},0)}function ne(){var h=D;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class W{constructor(){this.h=this.g=null}add(y,v){const A=Y.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Y=new K(()=>new ae,h=>h.reset());class ae{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,fe=!1,D=new W,S=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(R)}};function R(){for(var h;h=ne();){try{h.h.call(h.g)}catch(v){U(v)}var y=Y;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}fe=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function Ge(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(Ge,O),Ge.prototype.init=function(h,y){const v=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),J=0;function he(h,y,v,A,F){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=F,this.key=++J,this.da=this.fa=!1}function ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ze(h,y,v){for(const A in h)y.call(v,h[A],A,h)}function V(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function re(h){const y={};for(const v in h)y[v]=h[v];return y}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,y){let v,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(v in A)h[v]=A[v];for(let Q=0;Q<de.length;Q++)v=de[Q],Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}}function _e(h){this.src=h,this.g={},this.h=0}_e.prototype.add=function(h,y,v,A,F){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const le=we(h,y,A,F);return le>-1?(y=h[le],v||(y.fa=!1)):(y=new he(y,this.src,Q,!!A,F),y.fa=v,h.push(y)),y};function ke(h,y){const v=y.type;if(v in h.g){var A=h.g[v],F=Array.prototype.indexOf.call(A,y,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(A,F,1),Q&&(ve(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function we(h,y,v,A){for(let F=0;F<h.length;++F){const Q=h[F];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==A)return F}return-1}var Ht="closure_lm_"+(Math.random()*1e6|0),We={};function tr(h,y,v,A,F){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)tr(h,y[Q],v,A,F);return null}return v=Gc(v),h&&h[at]?h.J(y,v,d(A)?!!A.capture:!1,F):Ol(h,y,v,!1,A,F)}function Ol(h,y,v,A,F,Q){if(!y)throw Error("Invalid event type");const le=d(F)?!!F.capture:!!F;let xe=Vl(h);if(xe||(h[Ht]=xe=new _e(h)),v=xe.add(y,v,A,le,Q),v.proxy)return v;if(A=Ja(),v.proxy=A,A.src=h,A.listener=v,h.addEventListener)k||(F=le),F===void 0&&(F=!1),h.addEventListener(y.toString(),A,F);else if(h.attachEvent)h.attachEvent(eo(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ja(){function h(v){return y.call(h.src,h.listener,v)}const y=Zd;return h}function Za(h,y,v,A,F){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Za(h,y[Q],v,A,F);else A=d(A)?!!A.capture:!!A,v=Gc(v),h&&h[at]?(h=h.i,Q=String(y).toString(),Q in h.g&&(y=h.g[Q],v=we(y,v,A,F),v>-1&&(ve(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[Q],h.h--)))):h&&(h=Vl(h))&&(y=h.g[y.toString()],h=-1,y&&(h=we(y,v,A,F)),(v=h>-1?y[h]:null)&&Vs(v))}function Vs(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[at])ke(y.i,h);else{var v=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(v,A,h.capture):y.detachEvent?y.detachEvent(eo(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Vl(y))?(ke(v,h),v.h==0&&(v.src=null,y[Ht]=null)):ve(h)}}}function eo(h){return h in We?We[h]:We[h]="on"+h}function Zd(h,y){if(h.da)h=!0;else{y=new Ge(y,this);const v=h.listener,A=h.ha||h.src;h.fa&&Vs(h),h=v.call(A,y)}return h}function Vl(h){return h=h[Ht],h instanceof _e?h:null}var pn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gc(h){return typeof h=="function"?h:(h[pn]||(h[pn]=function(y){return h.handleEvent(y)}),h[pn])}function Ot(){P.call(this),this.i=new _e(this),this.M=this,this.G=null}T(Ot,P),Ot.prototype[at]=!0,Ot.prototype.removeEventListener=function(h,y,v,A){Za(this,h,y,v,A)};function Ut(h,y){var v,A=h.G;if(A)for(v=[];A;A=A.G)v.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var F=y;y=new O(A,h),ce(y,F)}F=!0;let Q,le;if(v)for(le=v.length-1;le>=0;le--)Q=y.g=v[le],F=qr(Q,A,!0,y)&&F;if(Q=y.g=h,F=qr(Q,A,!0,y)&&F,F=qr(Q,A,!1,y)&&F,v)for(le=0;le<v.length;le++)Q=y.g=v[le],F=qr(Q,A,!1,y)&&F}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let A=0;A<v.length;A++)ve(v[A]);delete h.g[y],h.h--}}this.G=null},Ot.prototype.J=function(h,y,v,A){return this.i.add(String(h),y,!1,v,A)},Ot.prototype.K=function(h,y,v,A){return this.i.add(String(h),y,!0,v,A)};function qr(h,y,v,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let Q=0;Q<y.length;++Q){const le=y[Q];if(le&&!le.da&&le.capture==v){const xe=le.listener,st=le.ha||le.src;le.fa&&ke(h.i,le),F=xe.call(st,A)!==!1&&F}}return F&&!A.defaultPrevented}function em(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Pl(h){h.g=em(()=>{h.g=null,h.i&&(h.i=!1,Pl(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class tm extends P{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Pl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(h){P.call(this),this.h=h,this.g={}}T(Ps,P);var bi=[];function Wt(h){ze(h.g,function(y,v){this.g.hasOwnProperty(v)&&Vs(y)},h),h.g={}}Ps.prototype.N=function(){Ps.Z.N.call(this),Wt(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=c.JSON.stringify,on=c.JSON.parse,nm=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Kc(){}function $c(){}var vr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wi(){O.call(this,"d")}T(wi,O);function nr(){O.call(this,"c")}T(nr,O);var Ln={},Ai=null;function to(){return Ai=Ai||new Ot}Ln.Ia="serverreachability";function Ml(h){O.call(this,Ln.Ia,h)}T(Ml,O);function Si(h){const y=to();Ut(y,new Ml(y))}Ln.STAT_EVENT="statevent";function no(h,y){O.call(this,Ln.STAT_EVENT,h),this.stat=y}T(no,O);function Et(h){const y=to();Ut(y,new no(y,h))}Ln.Ja="timingevent";function Qc(h,y){O.call(this,Ln.Ja,h),this.size=y}T(Qc,O);function Ii(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Ri(){this.g=!0}Ri.prototype.ua=function(){this.g=!1};function kl(h,y,v,A,F,Q){h.info(function(){if(h.g)if(Q){var le="",xe=Q.split("&");for(let Ke=0;Ke<xe.length;Ke++){var st=xe[Ke].split("=");if(st.length>1){const wt=st[0];st=st[1];const bn=wt.split("_");le=bn.length>=2&&bn[1]=="type"?le+(wt+"="+st+"&"):le+(wt+"=redacted&")}}}else le=null;else le=Q;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+y+`
`+v+`
`+le})}function Ll(h,y,v,A,F,Q,le){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+y+`
`+v+`
`+Q+" "+le})}function Hr(h,y,v,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Er(h,v)+(A?" "+A:"")})}function rm(h,y){h.info(function(){return"TIMEOUT: "+y})}Ri.prototype.info=function(){};function Er(h,y){if(!h.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var v=Q[h];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var F=A[0];if(F!="noop"&&F!="stop"&&F!="close")for(let le=1;le<A.length;le++)A[le]=""}}}}return kn(Q)}catch{return y}}var Tt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gr;function Ms(){}T(Ms,Kc),Ms.prototype.g=function(){return new XMLHttpRequest},Gr=new Ms;function ks(h){return encodeURIComponent(String(h))}function im(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function rr(h,y,v,A){this.j=h,this.i=y,this.l=v,this.S=A||1,this.V=new Ps(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xi}function xi(){this.i=null,this.g="",this.h=!1}var ro={},Tr={};function br(h,y,v){h.M=1,h.A=$r(ft(y)),h.u=v,h.R=!0,Ci(h,null)}function Ci(h,y){h.F=Date.now(),Ls(h),h.B=ft(h.A);var v=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Jc(v.i,"t",A),h.C=0,v=h.j.L,h.h=new xi,h.g=mo(h.j,v?y:null,!h.u),h.P>0&&(h.O=new tm(g(h.Y,h,h.g),h.P)),y=h.V,v=h.g,A=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(bi[0]=F.toString()),F=bi);for(let Q=0;Q<F.length;Q++){const le=tr(v,F[Q],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=h.J?re(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Si(),kl(h.i,h.v,h.B,h.l,h.S,h.u)}rr.prototype.ba=function(h){h=h.target;const y=this.O;y&&Jt(h)==3?y.j():this.Y(h)},rr.prototype.Y=function(h){try{if(h==this.g)e:{const xe=Jt(this.g),st=this.g.ya(),Ke=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||Qs(this.g)))){this.K||xe!=4||st==7||(st==8||Ke<=0?Si(3):Si(2)),Ar(this);var y=this.g.ca();this.X=y;var v=Di(this);if(this.o=y==200,Ll(this.i,this.v,this.B,this.l,this.S,xe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,F=this.g;if((A=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(A)){var Q=A;break t}}Q=null}if(h=Q)Hr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,io(this,h);else{this.o=!1,this.m=3,Et(12),Sr(this),Us(this);break e}}if(this.R){h=!0;let wt;for(;!this.K&&this.C<v.length;)if(wt=Yc(this,v),wt==Tr){xe==4&&(this.m=4,Et(14),h=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==ro){this.m=4,Et(15),Hr(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Hr(this.i,this.l,wt,null),io(this,wt);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||v.length!=0||this.h.h||(this.m=1,Et(16),h=!1),this.o=this.o&&h,!h)Hr(this.i,this.l,v,"[Invalid Chunked Response]"),Sr(this),Us(this);else if(v.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),$l(le),le.P=!0,Et(11))}}else Hr(this.i,this.l,v,null),io(this,v);xe==4&&Sr(this),this.o&&!this.K&&(xe==4?Ql(this.j,this):(this.o=!1,Ls(this)))}else Ys(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),Sr(this),Us(this)}}}catch{}finally{}};function Di(h){if(!bt(h))return h.g.la();const y=Qs(h.g);if(y==="")return"";let v="";const A=y.length,F=Jt(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Sr(h),Us(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<A;Q++)h.h.h=!0,v+=h.h.i.decode(y[Q],{stream:!(F&&Q==A-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function bt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Yc(h,y){var v=h.C,A=y.indexOf(`
`,v);return A==-1?Tr:(v=Number(y.substring(v,A)),isNaN(v)?ro:(A+=1,A+v>y.length?Tr:(y=y.slice(A,A+v),h.C=A+v,y)))}rr.prototype.cancel=function(){this.K=!0,Sr(this)};function Ls(h){h.T=Date.now()+h.H,wr(h,h.H)}function wr(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ii(g(h.aa,h),y)}function Ar(h){h.D&&(c.clearTimeout(h.D),h.D=null)}rr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(rm(this.i,this.B),this.M!=2&&(Si(),Et(17)),Sr(this),this.m=2,Us(this)):wr(this,this.T-h)};function Us(h){h.j.I==0||h.K||Ql(h.j,h)}function Sr(h){Ar(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Wt(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function io(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||zs(v.h,h))){if(!h.L&&zs(v.h,h)&&v.I==3){try{var A=v.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)fo(v),Ir(v);else break e;Kl(v),Et(18)}}else v.xa=F[1],0<v.xa-v.K&&F[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ii(g(v.Va,v),6e3));Un(v.h)<=1&&v.ta&&(v.ta=void 0)}else Xr(v,11)}else if((h.L||v.g==h)&&fo(v),!x(y))for(F=v.Ba.g.parse(y),y=0;y<F.length;y++){let Ke=F[y];const wt=Ke[0];if(!(wt<=v.K))if(v.K=wt,Ke=Ke[1],v.I==2)if(Ke[0]=="c"){v.M=Ke[1],v.ba=Ke[2];const bn=Ke[3];bn!=null&&(v.ka=bn,v.j.info("VER="+v.ka));const Rr=Ke[4];Rr!=null&&(v.za=Rr,v.j.info("SVER="+v.za));const ar=Ke[5];ar!=null&&typeof ar=="number"&&ar>0&&(A=1.5*ar,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const or=h.g;if(or){const lr=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lr){var Q=A.h;Q.g||lr.indexOf("spdy")==-1&&lr.indexOf("quic")==-1&&lr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(so(Q,Q.h),Q.h=null))}if(A.G){const Xl=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(A.wa=Xl,Je(A.J,A.G,Xl))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var le=h;if(A.na=oh(A,A.L?A.ba:null,A.W),le.L){Kr(A.h,le);var xe=le,st=A.O;st&&(xe.H=st),xe.D&&(Ar(xe),Ls(xe)),A.g=le}else rh(A);v.i.length>0&&Zs(v)}else Ke[0]!="stop"&&Ke[0]!="close"||Xr(v,7);else v.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Xr(v,7):Ws(v):Ke[0]!="noop"&&v.l&&v.l.qa(Ke),v.A=0)}}Si(4)}catch{}}var sm=class{constructor(h,y){this.g=h,this.map=y}};function Bs(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function js(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Un(h){return h.h?1:h.g?h.g.size:0}function zs(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function so(h,y){h.g?h.g.add(y):h.h=y}function Kr(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Bs.prototype.cancel=function(){if(this.i=ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ao(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return I(h.i)}var oo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function am(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const A=h[v].indexOf("=");let F,Q=null;A>=0?(F=h[v].substring(0,A),Q=h[v].substring(A+1)):F=h[v],y(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function ir(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ir?(this.l=h.l,Ni(this,h.j),this.o=h.o,this.g=h.g,Fs(this,h.u),this.h=h.h,Oi(this,Zc(h.i)),this.m=h.m):h&&(y=String(h).match(oo))?(this.l=!1,Ni(this,y[1]||"",!0),this.o=qs(y[2]||""),this.g=qs(y[3]||"",!0),Fs(this,y[4]),this.h=qs(y[5]||"",!0),Oi(this,y[6]||"",!0),this.m=qs(y[7]||"")):(this.l=!1,this.i=new Bn(null,this.l))}ir.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Bt(y,Bl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Bt(y,Bl,!0),"@"),h.push(ks(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Bt(v,v.charAt(0)=="/"?Vi:jl,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Bt(v,Wc)),h.join("")},ir.prototype.resolve=function(h){const y=ft(this);let v=!!h.j;v?Ni(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var A=h.h;if(v)Fs(y,h.u);else if(v=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var F=y.h.lastIndexOf("/");F!=-1&&(A=y.h.slice(0,F+1)+A)}if(F=A,F==".."||F==".")A="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){A=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let le=0;le<F.length;){const xe=F[le++];xe=="."?A&&le==F.length&&Q.push(""):xe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),A&&le==F.length&&Q.push("")):(Q.push(xe),A=!0)}A=Q.join("/")}else A=F}return v?y.h=A:v=h.i.toString()!=="",v?Oi(y,Zc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function ft(h){return new ir(h)}function Ni(h,y,v){h.j=v?qs(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Fs(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Oi(h,y,v){y instanceof Bn?(h.i=y,ql(h.i,h.l)):(v||(y=Bt(y,Xc)),h.i=new Bn(y,h.l))}function Je(h,y,v){h.i.set(y,v)}function $r(h){return Je(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function qs(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bt(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Ul),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ul(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Bl=/[#\/\?@]/g,jl=/[#\?:]/g,Vi=/[#\?]/g,Xc=/[#\?@]/g,Wc=/#/g;function Bn(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Qr(h){h.g||(h.g=new Map,h.h=0,h.i&&am(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=Bn.prototype,n.add=function(h,y){Qr(this),this.i=null,h=sr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function zl(h,y){Qr(h),y=sr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Fl(h,y){return Qr(h),y=sr(h,y),h.g.has(y)}n.forEach=function(h,y){Qr(this),this.g.forEach(function(v,A){v.forEach(function(F){h.call(y,F,A,this)},this)},this)};function lo(h,y){Qr(h);let v=[];if(typeof y=="string")Fl(h,y)&&(v=v.concat(h.g.get(sr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}n.set=function(h,y){return Qr(this),this.i=null,h=sr(this,h),Fl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=lo(this,h),h.length>0?String(h[0]):y):y};function Jc(h,y,v){zl(h,y),v.length>0&&(h.i=null,h.g.set(sr(h,y),I(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var v=y[A];const F=ks(v);v=lo(this,v);for(let Q=0;Q<v.length;Q++){let le=F;v[Q]!==""&&(le+="="+ks(v[Q])),h.push(le)}}return this.i=h.join("&")};function Zc(h){const y=new Bn;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function sr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ql(h,y){y&&!h.j&&(Qr(h),h.i=null,h.g.forEach(function(v,A){const F=A.toLowerCase();A!=F&&(zl(this,A),Jc(this,F,v))},h)),h.j=y}function Hl(h,y){const v=new Ri;if(c.Image){const A=new Image;A.onload=_(ln,v,"TestLoadImage: loaded",!0,y,A),A.onerror=_(ln,v,"TestLoadImage: error",!1,y,A),A.onabort=_(ln,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=_(ln,v,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function Pi(h,y){const v=new Ri,A=new AbortController,F=setTimeout(()=>{A.abort(),ln(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(Q=>{clearTimeout(F),Q.ok?ln(v,"TestPingServer: ok",!0,y):ln(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),ln(v,"TestPingServer: error",!1,y)})}function ln(h,y,v,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(v)}catch{}}function eh(){this.g=new nm}function Hs(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Hs,Kc),Hs.prototype.g=function(){return new Gs(this.i,this.h)};function Gs(h,y){Ot.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Gs,Ot),n=Gs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,un(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mi(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mi(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?un(this):Yr(this),this.readyState==3&&Mi(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,un(this))},n.Na=function(h){this.g&&(this.response=h,un(this))},n.ga=function(){this.g&&un(this)};function un(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Yr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ki(h){let y="";return ze(h,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function jn(h,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=ki(v),typeof h=="string"?v!=null&&ks(v):Je(h,y,v))}function rt(h){Ot.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(rt,Ot);var uo=/^https?$/i,th=["POST","PUT"];n=rt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gr.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){Ks(this,Q);return}if(h=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)v.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())v.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(th,y,void 0)>=0)||A||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of v)this.g.setRequestHeader(Q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){Ks(this,Q)}};function Ks(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,$s(h),Vt(h)}function $s(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Vt(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),rt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Gl(this):this.Xa())},n.Xa=function(){Gl(this)};function Gl(h){if(h.h&&typeof l<"u"){if(h.v&&Jt(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),Jt(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=Q===0){let le=String(h.D).match(oo)[1]||null;!le&&c.self&&c.self.location&&(le=c.self.location.protocol.slice(0,-1)),A=!uo.test(le?le.toLowerCase():"")}v=A}if(v)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var F=Jt(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",$s(h)}}finally{Vt(h)}}}}function Vt(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Ut(h,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Jt(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Jt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),on(y)}};function Qs(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ys(h){const y={};h=(h.g&&Jt(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(x(h[A]))continue;var v=im(h[A]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[F]||[];y[F]=Q,Q.push(v)}V(y,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function co(h){this.za=0,this.i=[],this.j=new Ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xs("baseRetryDelayMs",5e3,h),this.Za=Xs("retryDelaySeedMs",1e4,h),this.Ta=Xs("forwardChannelMaxRetries",2,h),this.va=Xs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Bs(h&&h.concurrentRequestLimit),this.Ba=new eh,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=co.prototype,n.ka=8,n.I=1,n.connect=function(h,y,v,A){Et(0),this.W=h,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=oh(this,null,this.W),Zs(this)};function Ws(h){if(Js(h),h.I==3){var y=h.V++,v=ft(h.J);if(Je(v,"SID",h.M),Je(v,"RID",y),Je(v,"TYPE","terminate"),ea(h,v),y=new rr(h,h.j,y),y.M=2,y.A=$r(ft(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=mo(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ls(y)}ah(h)}function Ir(h){h.g&&($l(h),h.g.cancel(),h.g=null)}function Js(h){Ir(h),h.v&&(c.clearTimeout(h.v),h.v=null),fo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Zs(h){if(!js(h.h)&&!h.m){h.m=!0;var y=h.Ea;ie||S(),fe||(ie(),fe=!0),D.add(y,h),h.D=0}}function om(h,y){return Un(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ii(g(h.Ea,h,y),sh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new rr(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=re(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=ho(this,F,y),v=ft(this.J),Je(v,"RID",h),Je(v,"CVER",22),this.G&&Je(v,"X-HTTP-Session-Id",this.G),ea(this,v),Q&&(this.R?y="headers="+ks(ki(Q))+"&"+y:this.u&&jn(v,this.u,Q)),so(this.h,F),this.Ra&&Je(v,"TYPE","init"),this.S?(Je(v,"$req",y),Je(v,"SID","null"),F.U=!0,br(F,v,null)):br(F,v,y),this.I=2}}else this.I==3&&(h?nh(this,h):this.i.length==0||js(this.h)||nh(this))};function nh(h,y){var v;y?v=y.l:v=h.V++;const A=ft(h.J);Je(A,"SID",h.M),Je(A,"RID",v),Je(A,"AID",h.K),ea(h,A),h.u&&h.o&&jn(A,h.u,h.o),v=new rr(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=ho(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),so(h.h,v),br(v,A,y)}function ea(h,y){h.H&&ze(h.H,function(v,A){Je(y,A,v)}),h.l&&ze({},function(v,A){Je(y,A,v)})}function ho(h,y,v){v=Math.min(h.i.length,v);const A=h.l?g(h.l.Ka,h.l,h):null;e:{var F=h.i;let xe=-1;for(;;){const st=["count="+v];xe==-1?v>0?(xe=F[0].g,st.push("ofs="+xe)):xe=0:st.push("ofs="+xe);let Ke=!0;for(let wt=0;wt<v;wt++){var Q=F[wt].g;const bn=F[wt].map;if(Q-=xe,Q<0)xe=Math.max(0,F[wt].g-100),Ke=!1;else try{Q="req"+Q+"_"||"";try{var le=bn instanceof Map?bn:Object.entries(bn);for(const[Rr,ar]of le){let or=ar;d(ar)&&(or=kn(ar)),st.push(Q+Rr+"="+encodeURIComponent(or))}}catch(Rr){throw st.push(Q+"type="+encodeURIComponent("_badmap")),Rr}}catch{A&&A(bn)}}if(Ke){le=st.join("&");break e}}le=void 0}return h=h.i.splice(0,v),y.G=h,le}function rh(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ie||S(),fe||(ie(),fe=!0),D.add(y,h),h.A=0}}function Kl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ii(g(h.Da,h),sh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ih(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ii(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Ir(this),ih(this))};function $l(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ih(h){h.g=new rr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=ft(h.na);Je(y,"RID","rpc"),Je(y,"SID",h.M),Je(y,"AID",h.K),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Je(y,"TO",h.ia),Je(y,"TYPE","xmlhttp"),ea(h,y),h.u&&h.o&&jn(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=$r(ft(y)),v.u=null,v.R=!0,Ci(v,h)}n.Va=function(){this.C!=null&&(this.C=null,Ir(this),Kl(this),Et(19))};function fo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Ql(h,y){var v=null;if(h.g==y){fo(h),$l(h),h.g=null;var A=2}else if(zs(h.h,y))v=y.G,Kr(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var F=h.D;A=to(),Ut(A,new Qc(A,v)),Zs(h)}else rh(h);else if(F=y.m,F==3||F==0&&y.X>0||!(A==1&&om(h,y)||A==2&&Kl(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),F){case 1:Xr(h,5);break;case 4:Xr(h,10);break;case 3:Xr(h,6);break;default:Xr(h,2)}}}function sh(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Xr(h,y){if(h.j.info("Error code "+y),y==2){var v=g(h.bb,h),A=h.Ua;const F=!A;A=new ir(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ni(A,"https"),$r(A),F?Hl(A.toString(),v):Pi(A.toString(),v)}else Et(2);h.I=0,h.l&&h.l.pa(y),ah(h),Js(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function ah(h){if(h.I=0,h.ja=[],h.l){const y=ao(h.h);(y.length!=0||h.i.length!=0)&&(B(h.ja,y),B(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function oh(h,y,v){var A=v instanceof ir?ft(v):new ir(v);if(A.g!="")y&&(A.g=y+"."+A.g),Fs(A,A.u);else{var F=c.location;A=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const Q=new ir(null);A&&Ni(Q,A),y&&(Q.g=y),F&&Fs(Q,F),v&&(Q.h=v),A=Q}return v=h.G,y=h.wa,v&&y&&Je(A,v,y),Je(A,"VER",h.ka),ea(h,A),A}function mo(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new rt(new Hs({ab:v})):new rt(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lh(){}n=lh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function po(){}po.prototype.g=function(h,y){return new cn(h,y)};function cn(h,y){Ot.call(this),this.g=new co(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!x(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Li(this)}T(cn,Ot),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Ws(this.g)},cn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=kn(h),h=v);y.i.push(new sm(y.Ya++,h)),y.I==3&&Zs(y)},cn.prototype.N=function(){this.g.l=null,delete this.j,Ws(this.g),delete this.g,cn.Z.N.call(this)};function Yl(h){wi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Yl,wi);function uh(){nr.call(this),this.status=1}T(uh,nr);function Li(h){this.g=h}T(Li,lh),Li.prototype.ra=function(){Ut(this.g,"a")},Li.prototype.qa=function(h){Ut(this.g,new Yl(h))},Li.prototype.pa=function(h){Ut(this.g,new uh)},Li.prototype.oa=function(){Ut(this.g,"b")},po.prototype.createWebChannel=po.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,fA=function(){return new po},hA=function(){return to()},cA=Ln,Lg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tt.NO_ERROR=0,Tt.TIMEOUT=8,Tt.HTTP_ERROR=6,If=Tt,Gt.COMPLETE="complete",uA=Gt,$c.EventType=vr,vr.OPEN="a",vr.CLOSE="b",vr.ERROR="c",vr.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Qu=$c,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,lA=rt}).apply(typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{});const E0="@firebase/firestore",T0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new vd("@firebase/firestore");function Zo(){return Ma.logLevel}function se(n,...e){if(Ma.logLevel<=Le.DEBUG){const t=e.map(Iy);Ma.debug(`Firestore (${Rl}): ${n}`,...t)}}function dn(n,...e){if(Ma.logLevel<=Le.ERROR){const t=e.map(Iy);Ma.error(`Firestore (${Rl}): ${n}`,...t)}}function ka(n,...e){if(Ma.logLevel<=Le.WARN){const t=e.map(Iy);Ma.warn(`Firestore (${Rl}): ${n}`,...t)}}function Iy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,dA(n,i,t)}function dA(n,e,t){let i=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw dn(i),new Error(i)}function ge(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||dA(e,a,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends er{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yt.UNAUTHENTICATED)))}shutdown(){}}class V2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class P2{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Lr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Lr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ge(typeof i.accessToken=="string",31837,{l:i}),new mA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class M2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class k2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new M2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class b0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);const i=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new b0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new b0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=U2(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ie(n,e){return n<e?-1:n>e?1:0}function Ug(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return hg(a)===hg(l)?Ie(a,l):hg(a)?1:-1}return Ie(n.length,e.length)}const B2=55296,j2=57343;function hg(n){const e=n.charCodeAt(0);return e>=B2&&e<=j2}function cl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}function pA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="__name__";class Vr{constructor(e,t,i){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&pe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Vr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ie(e.length,t.length)}static compareSegments(e,t){const i=Vr.isNumericId(e),a=Vr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Vr.extractNumericId(e).compare(Vr.extractNumericId(t)):Ug(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class He extends Vr{construct(e,t,i){return new He(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new oe(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new He(t)}static emptyPath(){return new He([])}}const z2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Vr{construct(e,t,i){return new mt(e,t,i)}static isValidIdentifier(e){return z2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===w0}static keyField(){return new mt([w0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new oe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new oe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new oe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(t)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(He.fromString(e))}static fromName(e){return new ue(He.fromString(e).popFirst(5))}static empty(){return new ue(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n,e,t){if(!t)throw new oe(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function F2(n,e,t,i){if(e===!0&&i===!0)throw new oe(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function A0(n){if(!ue.isDocumentKey(n))throw new oe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function S0(n){if(ue.isDocumentKey(n))throw new oe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Td(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pe(12329,{type:typeof n})}function Zn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Td(n);throw new oe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Vc(n,e){if(!yA(n))throw new oe(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new oe(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=-62135596800,R0=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*R0);return new Me(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<I0)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/R0}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-I0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:Dt("string",Me._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Me(0,0))}static max(){return new Ee(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;class Kf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Bg(n){return n.fields.find((e=>e.kind===2))}function va(n){return n.fields.filter((e=>e.kind!==2))}Kf.UNKNOWN_ID=-1;class Rf{constructor(e,t){this.fieldPath=e,this.kind=t}}class mc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mc(0,Mn.min())}}function q2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(i===1e9?new Me(t+1,0):new Me(t,i));return new Mn(a,ue.empty(),e)}function _A(n){return new Mn(n.readTime,n.key,dc)}class Mn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Mn(Ee.min(),ue.empty(),dc)}static max(){return new Mn(Ee.max(),ue.empty(),dc)}}function xy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:Ie(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==vA)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,i)=>{t(e)}))}static reject(e){return new j(((t,i)=>{i(e)}))}static waitFor(e){return new j(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>i(m)))})),c=!0,l===a&&t()}))}static or(e){let t=j.resolve(!1);for(const i of e)t=t.next((a=>a?j.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new j(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((_=>{c[g]=_,++d,d===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new j(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="SimpleDb";class bd{static open(e,t,i,a){try{return new bd(t,e.transaction(a,i))}catch(l){throw new ec(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Lr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ec(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=Cy(i.target.error);this.S.reject(new ec(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(se(Dn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new G2(t)}}class Es{static delete(e){return se(Dn,"Removing database:",e),Ta(Hw().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Ay())return!1;if(Es.F())return!0;const e=kt(),t=Es.M(e),i=0<t&&t<10,a=TA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Es.M(kt())===12.2&&dn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(se(Dn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new ec(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new oe(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new oe(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new ec(e,c))},a.onupgradeneeded=l=>{se(Dn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{se(Dn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=bd.open(this.db,e,l?"readonly":"readwrite",i),m=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),j.reject(g)))).toPromise();return m.catch((()=>{})),await d.D,m}catch(d){const m=d,g=m.name!=="FirebaseError"&&c<3;if(se(Dn,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function TA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class H2{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ta(this.U.delete())}}class ec extends oe{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ds(n){return n.name==="IndexedDbTransactionError"}class G2{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(se(Dn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(se(Dn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ta(i)}add(e){return se(Dn,"ADD",this.store.name,e,e),Ta(this.store.add(e))}get(e){return Ta(this.store.get(e)).next((t=>(t===void 0&&(t=null),se(Dn,"GET",this.store.name,e,t),t)))}delete(e){return se(Dn,"DELETE",this.store.name,e),Ta(this.store.delete(e))}count(){return se(Dn,"COUNT",this.store.name),Ta(this.store.count())}J(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new j(((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(i),c=[];return this.H(l,((d,m)=>{c.push(m)})).next((()=>c))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new j(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){se(Dn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}te(e){const t=this.cursor({});return new j(((i,a)=>{t.onerror=l=>{const c=Cy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}H(e,t){const i=[];return new j(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new H2(d),g=t(d.primaryKey,d.value,m);if(g instanceof j){const _=g.catch((T=>(m.done(),j.reject(T))));i.push(_)}m.isDone?a():m.G===null?d.continue():d.continue(m.G)}})).next((()=>j.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ta(n){return new j(((e,t)=>{n.onsuccess=i=>{const a=i.target.result;e(a)},n.onerror=i=>{const a=Cy(i.target.error);t(a)}}))}let x0=!1;function Cy(n){const e=Es.M(kt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return x0||(x0=!0,setTimeout((()=>{throw i}),0)),i}}return n}const tc="IndexBackfiller";class K2{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){se(tc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();se(tc,`Documents written: ${t}`)}catch(t){Ds(t)?se(tc,"Ignoring IndexedDB error during index backfill: ",t):await Ya(t)}await this.re(6e4)}))}}class $2{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return j.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return se(tc,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(se(tc,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=_A(l);xy(c,i)>0&&(i=c)})),new Mn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=-1;function wd(n){return n==null}function pc(n){return n===0&&1/n==-1/0}function Q2(n){return typeof n=="number"&&Number.isInteger(n)&&!pc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="";function an(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C0(e)),e=Y2(n.get(t),e);return C0(e)}function Y2(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case $f:t+="";break;default:t+=l}}return t}function C0(n){return n+$f+""}function Pr(n){const e=n.length;if(ge(e>=2,64408,{path:n}),e===2)return ge(n.charAt(0)===$f&&n.charAt(1)==="",56145,{path:n}),He.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=n.indexOf($f,l);switch((c<0||c>t)&&pe(50515,{path:n}),n.charAt(c+1)){case"":const d=n.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),i.push(m);break;case"":a+=n.substring(l,c),a+="\0";break;case"":a+=n.substring(l,c+1);break;default:pe(61167,{path:n})}l=c+2}return new He(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="remoteDocuments",Pc="owner",Ho="owner",gc="mutationQueues",X2="userId",fr="mutations",D0="batchId",Sa="userMutationsIndex",N0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(n,e){return[n,an(e)]}function bA(n,e,t){return[n,an(e),t]}const W2={},hl="documentMutations",Qf="remoteDocumentsV14",J2=["prefixPath","collectionGroup","readTime","documentId"],Cf="documentKeyIndex",Z2=["prefixPath","collectionGroup","documentId"],wA="collectionGroupIndex",eN=["collectionGroup","readTime","prefixPath","documentId"],yc="remoteDocumentGlobal",jg="remoteDocumentGlobalKey",fl="targets",AA="queryTargetsIndex",tN=["canonicalId","targetId"],dl="targetDocuments",nN=["targetId","path"],Dy="documentTargetsIndex",rN=["path","targetId"],Yf="targetGlobalKey",Da="targetGlobal",_c="collectionParents",iN=["collectionId","parent"],ml="clientMetadata",sN="clientId",Ad="bundles",aN="bundleId",Sd="namedQueries",oN="name",Ny="indexConfiguration",lN="indexId",zg="collectionGroupIndex",uN="collectionGroup",nc="indexState",cN=["indexId","uid"],SA="sequenceNumberIndex",hN=["uid","sequenceNumber"],rc="indexEntries",fN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],IA="documentKeyIndex",dN=["indexId","uid","orderedDocumentKey"],Id="documentOverlays",mN=["userId","collectionPath","documentId"],Fg="collectionPathOverlayIndex",pN=["userId","collectionPath","largestBatchId"],RA="collectionGroupOverlayIndex",gN=["userId","collectionGroup","largestBatchId"],Oy="globals",yN="name",xA=[gc,fr,hl,Ea,fl,Pc,Da,dl,ml,yc,_c,Ad,Sd],_N=[...xA,Id],CA=[gc,fr,hl,Qf,fl,Pc,Da,dl,ml,yc,_c,Ad,Sd,Id],DA=CA,Vy=[...DA,Ny,nc,rc],vN=Vy,NA=[...Vy,Oy],EN=NA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends EA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Lt(n,e){const t=Re(n);return Es.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ns(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function OA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new df(this.root,e,this.comparator,!1)}getReverseIterator(){return new df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new df(this.root,e,this.comparator,!0)}}class df{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Xt.RED,this.left=a??Xt.EMPTY,this.right=l??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Xt(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Xt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new V0(this.data.getIterator())}getIteratorFrom(e){return new V0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class V0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Go(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new vn([])}unionWith(e){let t=new Xe(mt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new VA("Invalid base64 string: "+l):l}})(e);return new Nt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const TN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(n){if(ge(!!n,39018),typeof n=="string"){let e=0;const t=TN.exec(n);if(ge(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:lt(n.seconds),nanos:lt(n.nanos)}}function lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _i(n){return typeof n=="string"?Nt.fromBase64String(n):Nt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="server_timestamp",MA="__type__",kA="__previous_value__",LA="__local_write_time__";function Py(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[MA])==null?void 0:i.stringValue)===PA}function Rd(n){const e=n.mapValue.fields[kA];return Py(e)?Rd(e):e}function vc(n){const e=yi(n.mapValue.fields[LA].timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t,i,a,l,c,d,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const Xf="(default)";class La{constructor(e,t){this.projectId=e,this.database=t||Xf}static empty(){return new La("","")}get isDefaultDatabase(){return this.database===Xf}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="__type__",UA="__max__",ms={mapValue:{fields:{__type__:{stringValue:UA}}}},ky="__vector__",pl="value",Df={nullValue:"NULL_VALUE"};function ws(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Py(n)?4:BA(n)?9007199254740991:xd(n)?10:11:pe(28295,{value:n})}function zr(n,e){if(n===e)return!0;const t=ws(n);if(t!==ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vc(n).isEqual(vc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=yi(a.timestampValue),d=yi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return _i(a.bytesValue).isEqual(_i(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return lt(a.geoPointValue.latitude)===lt(l.geoPointValue.latitude)&&lt(a.geoPointValue.longitude)===lt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return lt(a.integerValue)===lt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=lt(a.doubleValue),d=lt(l.doubleValue);return c===d?pc(c)===pc(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return cl(n.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(O0(c)!==O0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!zr(c[m],d[m])))return!1;return!0})(n,e);default:return pe(52216,{left:n})}}function Ec(n,e){return(n.values||[]).find((t=>zr(t,e)))!==void 0}function As(n,e){if(n===e)return 0;const t=ws(n),i=ws(e);if(t!==i)return Ie(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=lt(l.integerValue||l.doubleValue),m=lt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return P0(n.timestampValue,e.timestampValue);case 4:return P0(vc(n),vc(e));case 5:return Ug(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=_i(l),m=_i(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=Ie(d[g],m[g]);if(_!==0)return _}return Ie(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ie(lt(l.latitude),lt(c.latitude));return d!==0?d:Ie(lt(l.longitude),lt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return M0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,I,B,K;const d=l.fields||{},m=c.fields||{},g=(b=d[pl])==null?void 0:b.arrayValue,_=(I=m[pl])==null?void 0:I.arrayValue,T=Ie(((B=g==null?void 0:g.values)==null?void 0:B.length)||0,((K=_==null?void 0:_.values)==null?void 0:K.length)||0);return T!==0?T:M0(g,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ms.mapValue&&c===ms.mapValue)return 0;if(l===ms.mapValue)return 1;if(c===ms.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const b=Ug(m[T],_[T]);if(b!==0)return b;const I=As(d[m[T]],g[_[T]]);if(I!==0)return I}return Ie(m.length,_.length)})(n.mapValue,e.mapValue);default:throw pe(23264,{he:t})}}function P0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ie(n,e);const t=yi(n),i=yi(e),a=Ie(t.seconds,i.seconds);return a!==0?a:Ie(t.nanos,i.nanos)}function M0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=As(t[a],i[a]);if(l)return l}return Ie(t.length,i.length)}function gl(n){return Hg(n)}function Hg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=yi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return _i(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ue.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Hg(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Hg(t.fields[c])}`;return a+"}"})(n.mapValue):pe(61005,{value:n})}function Nf(n){switch(ws(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rd(n);return e?16+Nf(e):16;case 5:return 2*n.stringValue.length;case 6:return _i(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Nf(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ns(i.fields,((l,c)=>{a+=l.length+Nf(c)})),a})(n.mapValue);default:throw pe(13486,{value:n})}}function Tc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gg(n){return!!n&&"integerValue"in n}function bc(n){return!!n&&"arrayValue"in n}function k0(n){return!!n&&"nullValue"in n}function L0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Of(n){return!!n&&"mapValue"in n}function xd(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[My])==null?void 0:i.stringValue)===ky}function ic(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ns(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ic(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ic(n.arrayValue.values[t]);return e}return{...n}}function BA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===UA}const jA={mapValue:{fields:{[My]:{stringValue:ky},[pl]:{arrayValue:{}}}}};function wN(n){return"nullValue"in n?Df:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tc(La.empty(),ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?xd(n)?jA:{mapValue:{}}:pe(35942,{value:n})}function AN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tc(La.empty(),ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?jA:"mapValue"in n?xd(n)?{mapValue:{}}:ms:pe(61959,{value:n})}function U0(n,e){const t=As(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function B0(n,e){const t=As(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(t)}setAll(e){let t=mt.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=ic(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Of(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ns(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new rn(ic(this.value))}}function zA(n){const e=[];return Ns(n.fields,((t,i)=>{const a=new mt([t]);if(Of(i)){const l=zA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new yt(e,0,Ee.min(),Ee.min(),Ee.min(),rn.empty(),0)}static newFoundDocument(e,t,i,a){return new yt(e,1,t,Ee.min(),i,a,0)}static newNoDocument(e,t){return new yt(e,2,t,Ee.min(),Ee.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,Ee.min(),Ee.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t){this.position=e,this.inclusive=t}}function j0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=ue.comparator(ue.fromName(c.referenceValue),t.key):i=As(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function z0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function SN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{}class Ue extends FA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new IN(e,t,i):t==="array-contains"?new CN(e,i):t==="in"?new QA(e,i):t==="not-in"?new DN(e,i):t==="array-contains-any"?new NN(e,i):new Ue(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new RN(e,i):new xN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(As(t,this.value)):t!==null&&ws(this.value)===ws(t)&&this.matchesComparison(As(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends FA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ye(e,t)}matches(e){return _l(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _l(n){return n.op==="and"}function Kg(n){return n.op==="or"}function Ly(n){return qA(n)&&_l(n)}function qA(n){for(const e of n.filters)if(e instanceof Ye)return!1;return!0}function $g(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+gl(n.value);if(Ly(n))return n.filters.map((e=>$g(e))).join(",");{const e=n.filters.map((t=>$g(t))).join(",");return`${n.op}(${e})`}}function HA(n,e){return n instanceof Ue?(function(i,a){return a instanceof Ue&&i.op===a.op&&i.field.isEqual(a.field)&&zr(i.value,a.value)})(n,e):n instanceof Ye?(function(i,a){return a instanceof Ye&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&HA(c,a.filters[d])),!0):!1})(n,e):void pe(19439)}function GA(n,e){const t=n.filters.concat(e);return Ye.create(t,n.op)}function KA(n){return n instanceof Ue?(function(t){return`${t.field.canonicalString()} ${t.op} ${gl(t.value)}`})(n):n instanceof Ye?(function(t){return t.op.toString()+" {"+t.getFilters().map(KA).join(" ,")+"}"})(n):"Filter"}class IN extends Ue{constructor(e,t,i){super(e,t,i),this.key=ue.fromName(i.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class RN extends Ue{constructor(e,t){super(e,"in",t),this.keys=$A("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class xN extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=$A("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $A(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ue.fromName(i.referenceValue)))}class CN extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bc(t)&&Ec(t.arrayValue,this.value)}}class QA extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ec(this.value.arrayValue,t)}}class DN extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ec(this.value.arrayValue,t)}}class NN extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ec(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Qg(n,e=null,t=[],i=[],a=null,l=null,c=null){return new ON(n,e,t,i,a,l,c)}function Ua(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>$g(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),wd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>gl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>gl(i))).join(",")),e.Te=t}return e.Te}function Mc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!SN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z0(n.startAt,e.startAt)&&z0(n.endAt,e.endAt)}function Wf(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Jf(n,e){return n.filters.filter((t=>t instanceof Ue&&t.field.isEqual(e)))}function F0(n,e,t){let i=Df,a=!0;for(const l of Jf(n,e)){let c=Df,d=!0;switch(l.op){case"<":case"<=":c=wN(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Df}U0({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];U0({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function q0(n,e,t){let i=ms,a=!0;for(const l of Jf(n,e)){let c=ms,d=!0;switch(l.op){case">=":case">":c=AN(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ms}B0({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];B0({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VN(n,e,t,i,a,l,c,d){return new xl(n,e,t,i,a,l,c,d)}function Cd(n){return new xl(n)}function H0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YA(n){return n.collectionGroup!==null}function sc(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Xe(mt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new wc(l,i))})),t.has(mt.keyField().canonicalString())||e.Ie.push(new wc(mt.keyField(),i))}return e.Ie}function Wn(n){const e=Re(n);return e.Ee||(e.Ee=PN(e,sc(n))),e.Ee}function PN(n,e){if(n.limitType==="F")return Qg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new wc(a.field,l)}));const t=n.endAt?new yl(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new yl(n.startAt.position,n.startAt.inclusive):null;return Qg(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Yg(n,e){const t=n.filters.concat([e]);return new xl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xg(n,e,t){return new xl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dd(n,e){return Mc(Wn(n),Wn(e))&&n.limitType===e.limitType}function XA(n){return`${Ua(Wn(n))}|lt:${n.limitType}`}function el(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>KA(a))).join(", ")}]`),wd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>gl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>gl(a))).join(",")),`Target(${i})`})(Wn(n))}; limitType=${n.limitType})`}function kc(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ue.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of sc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,m){const g=j0(c,d,m);return c.inclusive?g<=0:g<0})(i.startAt,sc(i),a)||i.endAt&&!(function(c,d,m){const g=j0(c,d,m);return c.inclusive?g>=0:g>0})(i.endAt,sc(i),a))})(n,e)}function MN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WA(n){return(e,t)=>{let i=!1;for(const a of sc(n)){const l=kN(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function kN(n,e,t){const i=n.field.isKeyField()?ue.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?As(m,g):pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return OA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new ht(ue.comparator);function On(){return LN}const JA=new ht(ue.comparator);function Yu(...n){let e=JA;for(const t of n)e=e.insert(t.key,t);return e}function ZA(n){let e=JA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Mr(){return ac()}function eS(){return ac()}function ac(){return new Ei((n=>n.toString()),((n,e)=>n.isEqual(e)))}const UN=new ht(ue.comparator),BN=new Xe(ue.comparator);function Ne(...n){let e=BN;for(const t of n)e=e.add(t);return e}const jN=new Xe(Ie);function zN(){return jN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function tS(n){return{integerValue:""+n}}function FN(n,e){return Q2(e)?tS(e):Uy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this._=void 0}}function qN(n,e,t){return n instanceof Ac?(function(a,l){const c={fields:{[MA]:{stringValue:PA},[LA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Py(l)&&(l=Rd(l)),l&&(c.fields[kA]=l),{mapValue:c}})(t,e):n instanceof vl?rS(n,e):n instanceof El?iS(n,e):(function(a,l){const c=nS(a,l),d=G0(c)+G0(a.Ae);return Gg(c)&&Gg(a.Ae)?tS(d):Uy(a.serializer,d)})(n,e)}function HN(n,e,t){return n instanceof vl?rS(n,e):n instanceof El?iS(n,e):t}function nS(n,e){return n instanceof Sc?(function(i){return Gg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Ac extends Nd{}class vl extends Nd{constructor(e){super(),this.elements=e}}function rS(n,e){const t=sS(e);for(const i of n.elements)t.some((a=>zr(a,i)))||t.push(i);return{arrayValue:{values:t}}}class El extends Nd{constructor(e){super(),this.elements=e}}function iS(n,e){let t=sS(e);for(const i of n.elements)t=t.filter((a=>!zr(a,i)));return{arrayValue:{values:t}}}class Sc extends Nd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function G0(n){return lt(n.integerValue||n.doubleValue)}function sS(n){return bc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,t){this.field=e,this.transform=t}}function KN(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof vl&&a instanceof vl||i instanceof El&&a instanceof El?cl(i.elements,a.elements,zr):i instanceof Sc&&a instanceof Sc?zr(i.Ae,a.Ae):i instanceof Ac&&a instanceof Ac})(n.transform,e.transform)}class $N{constructor(e,t){this.version=e,this.transformResults=t}}class sn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Od{}function aS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vd(n.key,sn.none()):new Cl(n.key,n.data,sn.none());{const t=n.data,i=rn.empty();let a=new Xe(mt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Ti(n.key,i,new vn(a.toArray()),sn.none())}}function QN(n,e,t){n instanceof Cl?(function(a,l,c){const d=a.value.clone(),m=$0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ti?(function(a,l,c){if(!Vf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=$0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(oS(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function oc(n,e,t,i){return n instanceof Cl?(function(l,c,d,m){if(!Vf(l.precondition,c))return d;const g=l.value.clone(),_=Q0(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ti?(function(l,c,d,m){if(!Vf(l.precondition,c))return d;const g=Q0(l.fieldTransforms,m,c),_=c.data;return _.setAll(oS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(l,c,d){return Vf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function YN(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=nS(i.transform,a||null);l!=null&&(t===null&&(t=rn.empty()),t.set(i.field,l))}return t||null}function K0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&cl(i,a,((l,c)=>KN(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Cl extends Od{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ti extends Od{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function oS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function $0(n,e,t){const i=new Map;ge(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,HN(c,d,t[a]))}return i}function Q0(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,qN(l,c,e))}return i}class Vd extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lS extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&QN(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=oc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=oc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=eS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=aS(c,d);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,((t,i)=>K0(t,i)))&&cl(this.baseMutations,e.baseMutations,((t,i)=>K0(t,i)))}}class jy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ge(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return UN})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new jy(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,je;function WN(n){switch(n){case X.OK:return pe(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return pe(15467,{code:n})}}function uS(n){if(n===void 0)return dn("GRPC error has no .code"),X.UNKNOWN;switch(n){case Ct.OK:return X.OK;case Ct.CANCELLED:return X.CANCELLED;case Ct.UNKNOWN:return X.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return X.INTERNAL;case Ct.UNAVAILABLE:return X.UNAVAILABLE;case Ct.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Ct.NOT_FOUND:return X.NOT_FOUND;case Ct.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Ct.ABORTED:return X.ABORTED;case Ct.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Ct.DATA_LOSS:return X.DATA_LOSS;default:return pe(39323,{code:n})}}(je=Ct||(Ct={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new vs([4294967295,4294967295],0);function Y0(n){const e=JN().encode(n),t=new oA;return t.update(e),new Uint8Array(t.digest())}function X0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new vs([t,i],0),new vs([a,l],0)]}class Fy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Xu(`Invalid padding: ${t}`);if(i<0)throw new Xu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Xu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Xu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vs.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(vs.fromNumber(i)));return a.compare(ZN)===1&&(a=new vs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Y0(e),[i,a]=X0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Fy(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Y0(e),[i,a]=X0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Pd(Ee.min(),a,new ht(Ie),On(),Ne())}}class Lc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Lc(i,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class cS{constructor(e,t){this.targetId=e,this.Ce=t}}class hS{constructor(e,t,i=Nt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class W0{constructor(){this.ve=0,this.Fe=J0(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),i=Ne();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:pe(38017,{changeType:l})}})),new Lc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=J0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eO{constructor(e){this.Ge=e,this.ze=new Map,this.je=On(),this.Je=mf(),this.He=mf(),this.Ye=new ht(Ie)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Wf(l))if(i===0){const c=new ue(l.path);this.et(t,c,yt.newNoDocument(c,Ee.min()))}else ge(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=_i(i).toUint8Array()}catch(m){if(m instanceof VA)return ka("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Fy(c,a,l)}catch(m){return ka(m instanceof Xu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Wf(d.target)){const m=new ue(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,yt.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Ne();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Pd(e,t,this.Ye,this.je,i);return this.je=On(),this.Je=mf(),this.He=mf(),this.Ye=new ht(Ie),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new W0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xe(Ie),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xe(Ie),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new W0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function mf(){return new ht(ue.comparator)}function J0(){return new ht(ue.comparator)}const tO={asc:"ASCENDING",desc:"DESCENDING"},nO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rO={and:"AND",or:"OR"};class iO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wg(n,e){return n.useProto3Json||wd(e)?e:{value:e}}function Tl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sO(n,e){return Tl(n,e.toTimestamp())}function mn(n){return ge(!!n,49232),Ee.fromTimestamp((function(t){const i=yi(t);return new Me(i.seconds,i.nanos)})(n))}function qy(n,e){return Jg(n,e).canonicalString()}function Jg(n,e){const t=(function(a){return new He(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function dS(n){const e=He.fromString(n);return ge(bS(e),10190,{key:e.toString()}),e}function Zf(n,e){return qy(n.databaseId,e.path)}function Na(n,e){const t=dS(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(gS(t))}function mS(n,e){return qy(n.databaseId,e)}function pS(n){const e=dS(n);return e.length===4?He.emptyPath():gS(e)}function Zg(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gS(n){return ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Z0(n,e,t){return{name:Zf(n,e),fields:t.value.mapValue.fields}}function aO(n,e,t){const i=Na(n,e.name),a=mn(e.updateTime),l=e.createTime?mn(e.createTime):Ee.min(),c=new rn({mapValue:{fields:e.fields}}),d=yt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function oO(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:pe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(ge(_===void 0||typeof _=="string",58123),Nt.fromBase64String(_||"")):(ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Nt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?X.UNKNOWN:uS(g.code);return new oe(_,g.message||"")})(c);t=new hS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Na(n,i.document.name),l=mn(i.document.updateTime),c=i.document.createTime?mn(i.document.createTime):Ee.min(),d=new rn({mapValue:{fields:i.document.fields}}),m=yt.newFoundDocument(a,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new Pf(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Na(n,i.document),l=i.readTime?mn(i.readTime):Ee.min(),c=yt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Pf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Na(n,i.document),l=i.removedTargetIds||[];t=new Pf([],l,a,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new XN(a,l),d=i.targetId;t=new cS(d,c)}}return t}function ed(n,e){let t;if(e instanceof Cl)t={update:Z0(n,e.key,e.value)};else if(e instanceof Vd)t={delete:Zf(n,e.key)};else if(e instanceof Ti)t={update:Z0(n,e.key,e.data),updateMask:dO(e.fieldMask)};else{if(!(e instanceof lS))return pe(16599,{Vt:e.type});t={verify:Zf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof Ac)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof vl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof El)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Sc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw pe(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:sO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:pe(27497)})(n,e.precondition)),t}function ey(n,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?sn.updateTime(mn(l.updateTime)):l.exists!==void 0?sn.exists(l.exists):sn.none()})(e.currentDocument):sn.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let m=null;if("setToServerValue"in d)ge(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),m=new Ac;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new vl(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new El(_)}else"increment"in d?m=new Sc(c,d.increment):pe(16584,{proto:d});const g=mt.fromServerFormat(d.fieldPath);return new GN(g,m)})(n,a))):[];if(e.update){e.update.name;const a=Na(n,e.update.name),l=new rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new vn(g.map((_=>mt.fromServerFormat(_))))})(e.updateMask);return new Ti(a,l,c,t,i)}return new Cl(a,l,t,i)}if(e.delete){const a=Na(n,e.delete);return new Vd(a,t)}if(e.verify){const a=Na(n,e.verify);return new lS(a,t)}return pe(1463,{proto:e})}function lO(n,e){return n&&n.length>0?(ge(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?mn(a.updateTime):mn(l);return c.isEqual(Ee.min())&&(c=mn(l)),new $N(c,a.transformResults||[])})(t,e)))):[]}function yS(n,e){return{documents:[mS(n,e.path)]}}function _S(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=mS(n,a);const l=(function(g){if(g.length!==0)return TS(Ye.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:tl(b.field),direction:cO(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Wg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function vS(n){let e=pS(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ge(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const b=ES(T);return b instanceof Ye&&Ly(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((b=>(function(B){return new wc(nl(B.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let b;return b=typeof T=="object"?T.value:T,wd(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(T){const b=!!T.before,I=T.values||[];return new yl(I,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const b=!T.before,I=T.values||[];return new yl(I,b)})(t.endAt)),VN(e,a,c,l,d,"F",m,g)}function uO(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ES(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=nl(t.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=nl(t.unaryFilter.field);return Ue.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=nl(t.unaryFilter.field);return Ue.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=nl(t.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ue.create(nl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ye.create(t.compositeFilter.filters.map((i=>ES(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(n):pe(30097,{filter:n})}function cO(n){return tO[n]}function hO(n){return nO[n]}function fO(n){return rO[n]}function tl(n){return{fieldPath:n.canonicalString()}}function nl(n){return mt.fromServerFormat(n.fieldPath)}function TS(n){return n instanceof Ue?(function(t){if(t.op==="=="){if(L0(t.value))return{unaryFilter:{field:tl(t.field),op:"IS_NAN"}};if(k0(t.value))return{unaryFilter:{field:tl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(L0(t.value))return{unaryFilter:{field:tl(t.field),op:"IS_NOT_NAN"}};if(k0(t.value))return{unaryFilter:{field:tl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tl(t.field),op:hO(t.op),value:t.value}}})(n):n instanceof Ye?(function(t){const i=t.getFilters().map((a=>TS(a)));return i.length===1?i[0]:{compositeFilter:{op:fO(t.op),filters:i}}})(n):pe(54877,{filter:n})}function dO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function bS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t,i,a,l=Ee.min(),c=Ee.min(),d=Nt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.yt=e}}function mO(n,e){let t;if(e.document)t=aO(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ue.fromSegments(e.noDocument.path),a=ja(e.noDocument.readTime);t=yt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const i=ue.fromSegments(e.unknownDocument.path),a=ja(e.unknownDocument.version);t=yt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new Me(a[0],a[1]);return Ee.fromTimestamp(l)})(e.readTime)),t}function eb(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:td(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:Zf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Tl(l,c.version.toTimestamp()),createTime:Tl(l,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Ba(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Ba(e.version)}}return i}function td(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ba(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ja(n){const e=new Me(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function ba(n,e){const t=(e.baseMutations||[]).map((l=>ey(n.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>ey(n.yt,l))),a=Me.fromMillis(e.localWriteTimeMs);return new By(e.batchId,a,t,i)}function Wu(n){const e=ja(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ja(n.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=(function(l){return l.documents!==void 0})(n.query)?(function(l){const c=l.documents.length;return ge(c===1,1966,{count:c}),Wn(Cd(pS(l.documents[0])))})(n.query):(function(l){return Wn(vS(l))})(n.query),new hi(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Nt.fromBase64String(n.resumeToken))}function AS(n,e){const t=Ba(e.snapshotVersion),i=Ba(e.lastLimboFreeSnapshotVersion);let a;a=Wf(e.target)?yS(n.yt,e.target):_S(n.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ua(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function SS(n){const e=vS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xg(e,e.limit,"L"):e}function fg(n,e){return new zy(e.largestBatchId,ey(n.yt,e.overlayMutation))}function tb(n,e){const t=e.path.lastSegment();return[n,an(e.path.popLast()),t]}function nb(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ba(i.readTime),documentKey:an(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{getBundleMetadata(e,t){return rb(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:ja(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return rb(e).put((function(a){return{bundleId:a.id,createTime:Ba(mn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return ib(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:SS(l.bundledQuery),readTime:ja(l.readTime)}})(i)}))}saveNamedQuery(e,t){return ib(e).put((function(a){return{name:a.name,readTime:Ba(mn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function rb(n){return Lt(n,Ad)}function ib(n){return Lt(n,Sd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Md(e,i)}getOverlay(e,t){return zu(e).get(tb(this.userId,t)).next((i=>i?fg(this.serializer,i):null))}getOverlays(e,t){const i=Mr();return j.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new zy(t,c);a.push(this.St(e,d))})),j.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(an(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(zu(e).Z(Fg,d))})),j.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Mr(),l=an(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return zu(e).J(Fg,c).next((d=>{for(const m of d){const g=fg(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Mr();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zu(e).ee({index:RA,range:d},((m,g,_)=>{const T=fg(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()})).next((()=>l))}St(e,t){return zu(e).put((function(a,l,c){const[d,m,g]=tb(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:ed(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function zu(n){return Lt(n,Id)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{bt(e){return Lt(e,Oy)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?Nt.fromUint8Array(i):Nt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(lt(e.integerValue));else if("doubleValue"in e){const i=lt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),pc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=yi(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(_i(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?BA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):xd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):pe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){var c,d;const i=e.fields||{};this.Ft(t,53);const a=pl,l=((d=(c=i[a].arrayValue)==null?void 0:c.values)==null?void 0:d.length)||0;this.Ft(t,15),t.Mt(lt(l)),this.Ot(a,t),this.Ct(i[a],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ue.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}wa.Kt=new wa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=255;function yO(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function sb(n){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=yO(255&i[l]);if(a+=c,c!==8)break}return a})(n);return Math.ceil(e/8)}class _O{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),i=sb(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=sb(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Ko),this.sn(255)}_n(){this.an(Ko),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ko?(this.sn(Ko),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ko?(this.an(Ko),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class vO{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class EO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Fu{constructor(){this.cn=new _O,this.ln=new vO(this.cn),this.hn=new EO(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t,i,a){this.Tn=e,this.In=t,this.En=i,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Aa(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Mf(this.En),directionalValue:Mf(this.dn),orderedDocumentKey:Mf(t),documentKey:i.path.toArray()}}Vn(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ss(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=ab(n.En,e.En),t!==0?t:(t=ab(n.dn,e.dn),t!==0?t:ue.comparator(n.In,e.In)))}function ab(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Mf(n){return Zw()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(n):n}function ob(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(n)}class lb{constructor(e){this.mn=new Xe(((t,i)=>mt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(ge(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Bg(e);if(t!==void 0&&!this.wn(t))return!1;const i=va(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.wn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=i[l];if(!this.Sn(d,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new Xe(mt.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Rf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Rf(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Rf(i.field,i.dir==="asc"?0:1)));return new Kf(Kf.UNKNOWN_ID,this.collectionId,t,mc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(n){var t,i;if(ge(n instanceof Ue||n instanceof Ye,20012),n instanceof Ue){if(n instanceof QA){const a=((i=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((l=>Ue.create(n.field,"==",l))))||[];return Ye.create(a,"or")}return n}const e=n.filters.map((a=>IS(a)));return Ye.create(e,n.op)}function TO(n){if(n.getFilters().length===0)return[];const e=ry(IS(n));return ge(RS(e),7391),ty(e)||ny(e)?[e]:e.getFilters()}function ty(n){return n instanceof Ue}function ny(n){return n instanceof Ye&&Ly(n)}function RS(n){return ty(n)||ny(n)||(function(t){if(t instanceof Ye&&Kg(t)){for(const i of t.getFilters())if(!ty(i)&&!ny(i))return!1;return!0}return!1})(n)}function ry(n){if(ge(n instanceof Ue||n instanceof Ye,34018),n instanceof Ue)return n;if(n.filters.length===1)return ry(n.filters[0]);const e=n.filters.map((i=>ry(i)));let t=Ye.create(e,n.op);return t=nd(t),RS(t)?t:(ge(t instanceof Ye,64498),ge(_l(t),40251),ge(t.filters.length>1,57927),t.filters.reduce(((i,a)=>Hy(i,a))))}function Hy(n,e){let t;return ge(n instanceof Ue||n instanceof Ye,38388),ge(e instanceof Ue||e instanceof Ye,25473),t=n instanceof Ue?e instanceof Ue?(function(a,l){return Ye.create([a,l],"and")})(n,e):ub(n,e):e instanceof Ue?ub(e,n):(function(a,l){if(ge(a.filters.length>0&&l.filters.length>0,48005),_l(a)&&_l(l))return GA(a,l.getFilters());const c=Kg(a)?a:l,d=Kg(a)?l:a,m=c.filters.map((g=>Hy(g,d)));return Ye.create(m,"or")})(n,e),nd(t)}function ub(n,e){if(_l(e))return GA(e,n.getFilters());{const t=e.filters.map((i=>Hy(n,i)));return Ye.create(t,"or")}}function nd(n){if(ge(n instanceof Ue||n instanceof Ye,11850),n instanceof Ue)return n;const e=n.getFilters();if(e.length===1)return nd(e[0]);if(qA(n))return n;const t=e.map((a=>nd(a))),i=[];return t.forEach((a=>{a instanceof Ue?i.push(a):a instanceof Ye&&(a.op===n.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:Ye.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this.Cn=new Gy}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Mn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Mn.min())}updateCollectionGroup(e,t,i){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class Gy{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Xe(He.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Xe(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="IndexedDbIndexManager",pf=new Uint8Array(0);class wO{constructor(e,t){this.databaseId=t,this.vn=new Gy,this.Fn=new Ei((i=>Ua(i)),((i,a)=>Mc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:an(a)};return hb(e).put(l)}return j.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[pA(t),""],!1,!0);return hb(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Pr(c.parent))}return i}))}addFieldIndex(e,t){const i=qu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=Qo(e);return l.next((d=>{c.put(nb(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=qu(e),a=Qo(e),l=$o(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=qu(e),i=$o(e),a=Qo(e);return t.Z().next((()=>i.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return j.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new lb(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=$o(e);let a=!0;const l=new Map;return j.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Ne();const d=[];return j.forEach(l,((m,g)=>{se(cb,`Using index ${(function(Y){return`id=${Y.indexId}|cg=${Y.collectionGroup}|f=${Y.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(m)} to execute ${Ua(t)}`);const _=(function(Y,ae){const ie=Bg(ae);if(ie===void 0)return null;for(const fe of Jf(Y,ie.fieldPath))switch(fe.op){case"array-contains-any":return fe.value.arrayValue.values||[];case"array-contains":return[fe.value]}return null})(g,m),T=(function(Y,ae){const ie=new Map;for(const fe of va(ae))for(const D of Jf(Y,fe.fieldPath))switch(D.op){case"==":case"in":ie.set(fe.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return ie.set(fe.fieldPath.canonicalString(),D.value),Array.from(ie.values())}return null})(g,m),b=(function(Y,ae){const ie=[];let fe=!0;for(const D of va(ae)){const S=D.kind===0?F0(Y,D.fieldPath,Y.startAt):q0(Y,D.fieldPath,Y.startAt);ie.push(S.value),fe&&(fe=S.inclusive)}return new yl(ie,fe)})(g,m),I=(function(Y,ae){const ie=[];let fe=!0;for(const D of va(ae)){const S=D.kind===0?q0(Y,D.fieldPath,Y.endAt):F0(Y,D.fieldPath,Y.endAt);ie.push(S.value),fe&&(fe=S.inclusive)}return new yl(ie,fe)})(g,m),B=this.On(m,g,b),K=this.On(m,g,I),U=this.Nn(m,g,T),ne=this.Bn(m.indexId,_,B,b.inclusive,K,I.inclusive,U);return j.forEach(ne,(W=>i.Y(W,t.limit).next((Y=>{Y.forEach((ae=>{const ie=ue.fromSegments(ae.documentKey);c.has(ie)||(c=c.add(ie),d.push(ie))}))}))))})).next((()=>d))}return j.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=TO(Ye.create(e.filters,"and")).map((i=>Qg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(i.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const b=t?this.Ln(t[T/g]):pf,I=this.kn(e,b,i[T%g],a),B=this.qn(e,b,l[T%g],c),K=d.map((U=>this.kn(e,b,U,!0)));_.push(...this.createRange(I,B,K))}return _}kn(e,t,i,a){const l=new Aa(e,ue.empty(),t,i);return a?l:l.An()}qn(e,t,i,a){const l=new Aa(e,ue.empty(),t,i);return a?l.An():l}xn(e,t){const i=new lb(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.Mn(t);return j.forEach(a,(l=>this.xn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(m){let g=new Xe(mt.comparator),_=!1;for(const T of m.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:g=g.add(b.field));for(const T of m.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}Qn(e,t){const i=new Fu;for(const a of va(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.Pn(a.kind);wa.Kt.Dt(l,c)}return i.un()}Ln(e){const t=new Fu;return wa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Fu;return wa.Kt.Dt(Tc(this.databaseId,t),i.Pn((function(l){const c=va(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let a=[];a.push(new Fu);let l=0;for(const c of va(e)){const d=i[l++];for(const m of a)if(this.Un(t,c.fieldPath)&&bc(d))a=this.Kn(a,c,d);else{const g=m.Pn(c.kind);wa.Kt.Dt(d,g)}}return this.Wn(a)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const m=new Fu;m.seed(d.un()),wa.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof Ue&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=qu(e),a=Qo(e);return(t?i.J(zg,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const c=[];return j.forEach(l,(d=>a.get([d.indexId,this.uid]).next((m=>{c.push((function(_,T){const b=T?new mc(T.sequenceNumber,new Mn(ja(T.readTime),new ue(Pr(T.documentKey)),T.largestBatchId)):mc.empty(),I=_.fields.map((([B,K])=>new Rf(mt.fromServerFormat(B),K)));return new Kf(_.indexId,_.collectionGroup,I,b)})(d,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ie(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=qu(e),l=Qo(e);return this.Gn(e).next((c=>a.J(zg,IDBKeyRange.bound(t,t)).next((d=>j.forEach(d,(m=>l.put(nb(m.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return j.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),j.forEach(d,(m=>this.zn(e,a,m).next((g=>{const _=this.jn(l,m);return g.isEqual(_)?j.resolve():this.Jn(e,l,m,g,_)})))))))}))}Hn(e,t,i,a){return $o(e).put(a.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,a){return $o(e).delete(a.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const a=$o(e);let l=new Xe(ss);return a.ee({index:IA,range:IDBKeyRange.only([i.indexId,this.uid,Mf(this.$n(i,t))])},((c,d)=>{l=l.add(new Aa(i.indexId,t,ob(d.arrayValue),ob(d.directionalValue)))})).next((()=>l))}jn(e,t){let i=new Xe(ss);const a=this.Qn(t,e);if(a==null)return i;const l=Bg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(bc(c))for(const d of c.arrayValue.values||[])i=i.add(new Aa(t.indexId,e.key,this.Ln(d),a))}else i=i.add(new Aa(t.indexId,e.key,pf,a));return i}Jn(e,t,i,a,l){se(cb,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,_,T,b){const I=m.getIterator(),B=g.getIterator();let K=Go(I),U=Go(B);for(;K||U;){let ne=!1,W=!1;if(K&&U){const Y=_(K,U);Y<0?W=!0:Y>0&&(ne=!0)}else K!=null?W=!0:ne=!0;ne?(T(U),U=Go(B)):W?(b(K),K=Go(I)):(K=Go(I),U=Go(B))}})(a,l,ss,(d=>{c.push(this.Hn(e,t,i,d))}),(d=>{c.push(this.Yn(e,t,i,d))})),j.waitFor(c)}Gn(e){let t=1;return Qo(e).ee({index:SA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>ss(c,d))).filter(((c,d,m)=>!d||ss(c,m[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=ss(c,e),m=ss(c,t);if(d===0)a[0]=e.An();else if(d>0&&m<0)a.push(c),a.push(c.An());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,pf,ue.empty()),m=a[c+1].Vn(this.uid,pf,ue.empty());l.push(IDBKeyRange.bound(d,m))}return l}Zn(e,t){return ss(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fb)}getMinOffset(e,t){return j.mapArray(this.Mn(t),(i=>this.xn(e,i).next((a=>a||pe(44426))))).next(fb)}}function hb(n){return Lt(n,_c)}function $o(n){return Lt(n,rc)}function qu(n){return Lt(n,Ny)}function Qo(n){return Lt(n,nc)}function fb(n){ge(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;xy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Mn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xS=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(n,e,t){const i=n.store(fr),a=n.store(hl),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=i.ee({range:c},((_,T,b)=>(d++,b.delete())));l.push(m.next((()=>{ge(d===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const T=bA(e,_.key.path,t.batchId);l.push(a.delete(T)),g.push(_.key)}return j.waitFor(l).next((()=>g))}function rd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pe(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(xS,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class kd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Xn={}}static wt(e,t,i,a){ge(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new kd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return as(e).ee({index:Sa,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=rl(e),c=as(e);return c.add({}).next((d=>{ge(typeof d=="number",49019);const m=new By(d,t,i,a),g=(function(I,B,K){const U=K.baseMutations.map((W=>ed(I.yt,W))),ne=K.mutations.map((W=>ed(I.yt,W)));return{userId:B,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:U,mutations:ne}})(this.serializer,this.userId,m),_=[];let T=new Xe(((b,I)=>Ie(b.canonicalString(),I.canonicalString())));for(const b of a){const I=bA(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),_.push(c.put(g)),_.push(l.put(I,W2))}return T.forEach((b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Xn[d]=m.keys()})),j.waitFor(_).next((()=>m))}))}lookupMutationBatch(e,t){return as(e).get(t).next((i=>i?(ge(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),ba(this.serializer,i)):null))}er(e,t){return this.Xn[t]?j.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return as(e).ee({index:Sa,range:a},((c,d,m)=>{d.userId===this.userId&&(ge(d.batchId>=i,47524,{tr:i}),l=ba(this.serializer,d)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ca;return as(e).ee({index:Sa,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ca],[this.userId,Number.POSITIVE_INFINITY]);return as(e).J(Sa,t).next((i=>i.map((a=>ba(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=xf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return rl(e).ee({range:a},((c,d,m)=>{const[g,_,T]=c,b=Pr(_);if(g===this.userId&&t.path.isEqual(b))return as(e).get(T).next((I=>{if(!I)throw pe(61480,{nr:c,batchId:T});ge(I.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:I.userId,batchId:T}),l.push(ba(this.serializer,I))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xe(Ie);const a=[];return t.forEach((l=>{const c=xf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=rl(e).ee({range:d},((g,_,T)=>{const[b,I,B]=g,K=Pr(I);b===this.userId&&l.path.isEqual(K)?i=i.add(B):T.done()}));a.push(m)})),j.waitFor(a).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=xf(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new Xe(Ie);return rl(e).ee({range:c},((m,g,_)=>{const[T,b,I]=m,B=Pr(b);T===this.userId&&i.isPrefixOf(B)?B.length===a&&(d=d.add(I)):_.done()})).next((()=>this.rr(e,d)))}rr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(as(e).get(l).next((c=>{if(c===null)throw pe(35274,{batchId:l});ge(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(ba(this.serializer,c))})))})),j.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return CS(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),j.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return rl(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const m=Pr(l[1]);a.push(m)}else d.done()})).next((()=>{ge(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return DS(e,this.userId,t)}_r(e){return NS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ca,lastStreamToken:""}))}}function DS(n,e,t){const i=xf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return rl(n).ee({range:l,X:!0},((d,m,g)=>{const[_,T,b]=d;_===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function as(n){return Lt(n,fr)}function rl(n){return Lt(n,hl)}function NS(n){return Lt(n,gc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new za(0)}static cr(){return new za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new za(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new Me(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Yo(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(ge(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Yo(e).ee(((c,d)=>{const m=Wu(d);m.sequenceNumber<=t&&i.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>j.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Yo(e).ee(((i,a)=>{const l=Wu(a);t(l)}))}lr(e){return mb(e).get(Yf).next((t=>(ge(t!==null,2888),t)))}hr(e,t){return mb(e).put(Yf,t)}Pr(e,t){return Yo(e).put(AS(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Ua(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Yo(e).ee({range:a,index:AA},((c,d,m)=>{const g=Wu(d);Mc(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=us(e);return t.forEach((c=>{const d=an(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),j.waitFor(a)}removeMatchingKeys(e,t,i){const a=us(e);return j.forEach(t,(l=>{const c=an(l.path);return j.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=us(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=us(e);let l=Ne();return a.ee({range:i,X:!0},((c,d,m)=>{const g=Pr(c[1]),_=new ue(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=an(t.path),a=IDBKeyRange.bound([i],[pA(i)],!1,!0);let l=0;return us(e).ee({index:Dy,X:!0,range:a},(([c,d],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Yo(e).get(t).next((i=>i?Wu(i):null))}}function Yo(n){return Lt(n,fl)}function mb(n){return Lt(n,Da)}function us(n){return Lt(n,dl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="LruGarbageCollector",SO=1048576;function gb([n,e],[t,i]){const a=Ie(n,t);return a===0?Ie(e,i):a}class IO{constructor(e){this.Ir=e,this.buffer=new Xe(gb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();gb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OS{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(pb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ds(t)?se(pb,"Ignoring IndexedDB error during garbage collection: ",t):await Ya(t)}await this.Vr(3e5)}))}}class RO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Xn.ce);const i=new IO(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(db)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),db):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),Zo()<=Le.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function VS(n,e){return new RO(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t){this.db=e,this.garbageCollector=VS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,a)=>t(a)))}addReference(e,t,i){return gf(e,i)}removeReference(e,t,i){return gf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return gf(e,t)}br(e,t){return(function(a,l){let c=!1;return NS(a).te((d=>DS(a,d,l).next((m=>(m&&(c=!0),j.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,d)=>{if(d<=t){const m=this.br(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Ee.min()),us(e).delete((function(T){return[0,an(T.path)]})(c)))))}));a.push(m)}})).next((()=>j.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return gf(e,t)}Sr(e,t){const i=us(e);let a,l=Xn.ce;return i.ee({index:Dy},(([c,d],{path:m,sequenceNumber:g})=>{c===0?(l!==Xn.ce&&t(new ue(Pr(a)),l),l=g,a=m):l=Xn.ce})).next((()=>{l!==Xn.ce&&t(new ue(Pr(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gf(n,e){return us(n).put((function(i,a){return{targetId:0,path:an(i.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.changes=new Ei((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?j.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ga(e).put(i)}removeEntry(e,t,i){return ga(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],td(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=yt.newInvalidDocument(t);return ga(e).ee({index:Cf,range:IDBKeyRange.only(Hu(t))},((a,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:yt.newInvalidDocument(t)};return ga(e).ee({index:Cf,range:IDBKeyRange.only(Hu(t))},((a,l)=>{i={document:this.Cr(t,l),size:rd(l)}})).next((()=>i))}getEntries(e,t){let i=On();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c)})).next((()=>i))}Mr(e,t){let i=On(),a=new ht(ue.comparator);return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);i=i.insert(l,d),a=a.insert(l,rd(c))})).next((()=>({documents:i,Or:a})))}Fr(e,t,i){if(t.isEmpty())return j.resolve();let a=new Xe(vb);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(Hu(a.first()),Hu(a.last())),c=a.getIterator();let d=c.getNext();return ga(e).ee({index:Cf,range:l},((m,g,_)=>{const T=ue.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&vb(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?_.j(Hu(d)):_.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),td(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ga(e).J(IDBKeyRange.bound(d,m,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let _=On();for(const T of g){const b=this.Cr(ue.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(kc(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=On();const c=_b(t,i),d=_b(t,Mn.max());return ga(e).ee({index:wA,range:IDBKeyRange.bound(c,d,!0)},((m,g,_)=>{const T=this.Cr(ue.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new DO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return yb(e).get(jg).next((t=>(ge(!!t,20021),t)))}Dr(e,t){return yb(e).put(jg,t)}Cr(e,t){if(t){const i=mO(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return yt.newInvalidDocument(e)}}function MS(n){return new CO(n)}class DO extends PS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ei((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new Xe(((l,c)=>Ie(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=eb(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=rd(m);i+=g-d.size,t.push(this.Nr.addEntry(e,l,m))}else if(i-=d.size,this.trackRemovals){const m=eb(this.Nr.serializer,c.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),j.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function yb(n){return Lt(n,yc)}function ga(n){return Lt(n,Qf)}function Hu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _b(n,e){const t=e.documentKey.path.toArray();return[n,td(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vb(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Ie(t[l],i[l]),a)return a;return a=Ie(t.length,i.length),a||(a=Ie(t[t.length-2],i[i.length-2]),a||Ie(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&oc(i.mutation,a,vn.empty(),Me.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ne()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ne()){const a=Mr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Yu();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Mr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ne())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=On();const c=ac(),d=(function(){return ac()})();return t.forEach(((m,g)=>{const _=i.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Ti)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),oc(_.mutation,g,_.mutation.getFieldMask(),Me.now())):c.set(g.key,vn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new NO(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=ac();let a=new ht(((c,d)=>c-d)),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=i.get(m)||vn.empty();_=d.applyToLocalView(g,_),i.set(m,_);const T=(a.get(d.batchId)||Ne()).add(m);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,T=eS();_.forEach((b=>{if(!l.has(b)){const I=aS(t.get(b),i.get(b));I!==null&&T.set(b,I),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return j.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return ue.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):j.resolve(Mr());let d=dc,m=l;return c.next((g=>j.forEach(g,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?j.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Ne()))).next((_=>({batchId:d,changes:ZA(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next((i=>{let a=Yu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Yu();return this.indexManager.getCollectionParents(e,l).next((d=>j.forEach(d,(m=>{const g=(function(T,b){return new xl(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((_=>{_.forEach(((T,b)=>{c=c.insert(T,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,yt.newInvalidDocument(_)))}));let d=Yu();return c.forEach(((m,g)=>{const _=l.get(m);_!==void 0&&oc(_.mutation,g,vn.empty(),Me.now()),kc(t,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:mn(a.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:SS(a.bundledQuery),readTime:mn(a.readTime)}})(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.overlays=new ht(ue.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Mr();return j.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),j.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),j.resolve()}getOverlaysForCollection(e,t,i){const a=Mr(),l=t.length+1,c=new ue(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return j.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new ht(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=Mr(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Mr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return j.resolve(d)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new zy(t,i));let l=this.qr.get(t);l===void 0&&(l=Ne(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.Qr=new Xe(qt.$r),this.Ur=new Xe(qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new qt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new qt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ue(new He([])),i=new qt(t,e),a=new qt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ue(new He([])),i=new qt(t,e),a=new qt(t,e+1);let l=Ne();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new qt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ue.comparator(e.key,t.key)||Ie(e.Yr,t.Yr)}static Kr(e,t){return Ie(e.Yr,t.Yr)||ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(qt.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new By(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new qt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return j.resolve(c)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Ca:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new qt(t,0),a=new qt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xe(Ie);return t.forEach((a=>{const l=new qt(a,0),c=new qt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{i=i.add(d.Yr)}))})),j.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ue.isDocumentKey(l)||(l=l.child(""));const c=new qt(new ue(l),0);let d=new Xe(Ie);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Yr)),!0)}),c),j.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return j.forEach(t.mutations,(a=>{const l=new qt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new qt(t,0),a=this.Zr.firstAfterOrEqual(i);return j.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.ri=e,this.docs=(function(){return new ht(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return j.resolve(i?i.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let i=On();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():yt.newInvalidDocument(a))})),j.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=On();const c=t.path,d=new ue(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||xy(_A(_),i)<=0||(a.has(_.key)||kc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,i,a){pe(9500)}ii(e,t){return j.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new LO(this)}getSize(e){return j.resolve(this.size)}}class LO extends PS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.persistence=e,this.si=new Ei((t=>Ua(t)),Mc),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new Ky,this.targetCount=0,this.ai=za.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new za(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),j.waitFor(l).next((()=>a))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return j.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),j.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return j.resolve(i)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,t){this.ui={},this.overlays={},this.ci=new Xn(0),this.li=!1,this.li=!0,this.hi=new PO,this.referenceDelegate=e(this),this.Pi=new UO(this),this.indexManager=new bO,this.remoteDocumentCache=(function(a){return new kO(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new wS(t),this.Ii=new OO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new MO(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);const a=new BO(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return j.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class BO extends EA{constructor(e){super(),this.currentSequenceNumber=e}}class Ld{constructor(e){this.persistence=e,this.Ri=new Ky,this.Vi=null}static mi(e){return new Ld(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),j.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(i=>{const a=ue.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class id{constructor(e,t){this.persistence=e,this.pi=new Ei((i=>an(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=VS(this,t)}static mi(e,t){return new id(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return j.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?j.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Ee.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}br(e,t,i){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return j.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.serializer=e}k(e,t,i,a){const l=new bd("createOrUpgrade",t);i<1&&a>=1&&((function(m){m.createObjectStore(Pc)})(e),(function(m){m.createObjectStore(gc,{keyPath:X2}),m.createObjectStore(fr,{keyPath:D0,autoIncrement:!0}).createIndex(Sa,N0,{unique:!0}),m.createObjectStore(hl)})(e),Eb(e),(function(m){m.createObjectStore(Ea)})(e));let c=j.resolve();return i<3&&a>=3&&(i!==0&&((function(m){m.deleteObjectStore(dl),m.deleteObjectStore(fl),m.deleteObjectStore(Da)})(e),Eb(e)),c=c.next((()=>(function(m){const g=m.store(Da),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return g.put(Yf,_)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(m,g){return g.store(fr).J().next((T=>{m.deleteObjectStore(fr),m.createObjectStore(fr,{keyPath:D0,autoIncrement:!0}).createIndex(Sa,N0,{unique:!0});const b=g.store(fr),I=T.map((B=>b.put(B)));return j.waitFor(I)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(ml,{keyPath:sN})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.yi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore(yc)})(e),this.wi(l))))),i<7&&a>=7&&(c=c.next((()=>this.Si(l)))),i<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.Di(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(Ad,{keyPath:aN})})(e),(function(m){m.createObjectStore(Sd,{keyPath:oN})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(Id,{keyPath:mN});g.createIndex(Fg,pN,{unique:!1}),g.createIndex(RA,gN,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(Qf,{keyPath:J2});g.createIndex(Cf,Z2),g.createIndex(wA,eN)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(Ea)))),i<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore(Ny,{keyPath:lN,autoIncrement:!0}).createIndex(zg,uN,{unique:!1}),m.createObjectStore(nc,{keyPath:cN}).createIndex(SA,hN,{unique:!1}),m.createObjectStore(rc,{keyPath:fN}).createIndex(IA,dN,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(nc).clear()})).next((()=>{t.objectStore(rc).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(Oy,{keyPath:yN})})(e)}))),i<18&&a>=18&&Zw()&&(c=c.next((()=>{t.objectStore(nc).clear()})).next((()=>{t.objectStore(rc).clear()}))),c}wi(e){let t=0;return e.store(Ea).ee(((i,a)=>{t+=rd(a)})).next((()=>{const i={byteSize:t};return e.store(yc).put(jg,i)}))}yi(e){const t=e.store(gc),i=e.store(fr);return t.J().next((a=>j.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Ca],[l.userId,l.lastAcknowledgedBatchId]);return i.J(Sa,c).next((d=>j.forEach(d,(m=>{ge(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=ba(this.serializer,m);return CS(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(dl),i=e.store(Ea);return e.store(Da).get(Yf).next((a=>{const l=[];return i.ee(((c,d)=>{const m=new He(c),g=(function(T){return[0,an(T)]})(m);l.push(t.get(g).next((_=>_?j.resolve():(T=>t.put({targetId:0,path:an(T),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>j.waitFor(l)))}))}bi(e,t){e.createObjectStore(_c,{keyPath:iN});const i=t.store(_c),a=new Gy,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return i.put({collectionId:d,parent:an(m)})}};return t.store(Ea).ee({X:!0},((c,d)=>{const m=new He(c);return l(m.popLast())})).next((()=>t.store(hl).ee({X:!0},(([c,d,m],g)=>{const _=Pr(d);return l(_.popLast())}))))}Di(e){const t=e.store(fl);return t.ee(((i,a)=>{const l=Wu(a),c=AS(this.serializer,l);return t.put(c)}))}Ci(e,t){const i=t.store(Ea),a=[];return i.ee(((l,c)=>{const d=t.store(Qf),m=(function(T){return T.document?new ue(He.fromString(T.document.name).popFirst(5)):T.noDocument?ue.fromSegments(T.noDocument.path):T.unknownDocument?ue.fromSegments(T.unknownDocument.path):pe(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>j.waitFor(a)))}Fi(e,t){const i=t.store(fr),a=MS(this.serializer),l=new $y(Ld.mi,this.serializer.yt);return i.J().next((c=>{const d=new Map;return c.forEach((m=>{let g=d.get(m.userId)??Ne();ba(this.serializer,m).keys().forEach((_=>g=g.add(_))),d.set(m.userId,g)})),j.forEach(d,((m,g)=>{const _=new Yt(g),T=Md.wt(this.serializer,_),b=l.getIndexManager(_),I=kd.wt(_,this.serializer,b,l.referenceDelegate);return new kS(a,I,T,b).recalculateAndSaveOverlaysForDocumentKeys(new qg(t,Xn.ce),m).next()}))}))}}function Eb(n){n.createObjectStore(dl,{keyPath:nN}).createIndex(Dy,rN,{unique:!0}),n.createObjectStore(fl,{keyPath:"targetId"}).createIndex(AA,tN,{unique:!0}),n.createObjectStore(Da)}const os="IndexedDbPersistence",dg=18e5,mg=5e3,pg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zO="main";class Qy{constructor(e,t,i,a,l,c,d,m,g,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=c,this.document=d,this.xi=g,this.Oi=_,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=b=>Promise.resolve(),!Qy.v())throw new oe(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xO(this,a),this.$i=t+zO,this.serializer=new wS(m),this.Ui=new Es(this.$i,this.Ni,new jO(this.serializer)),this.hi=new gO,this.Pi=new AO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=MS(this.serializer),this.Ii=new pO,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&dn(os,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oe(X.FAILED_PRECONDITION,pg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Xn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>yf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ds(e))return se(os,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(os,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Gu(e).get(Ho).next((t=>j.resolve(this.es(t))))}ts(e){return yf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,dg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Lt(t,ml);return i.J().next((a=>{const l=this.ss(a,dg),c=a.filter((d=>l.indexOf(d)===-1));return j.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):Gu(e).get(Ho).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,mg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new oe(X.FAILED_PRECONDITION,pg);return!1}}return!(!this.networkEnabled||!this.inForeground)||yf(e).J().next((i=>this.ss(i,mg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&se(os,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Pc,ml],(e=>{const t=new qg(e,Xn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>yf(e).J().next((t=>this.ss(t,dg).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return kd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Md.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){se(os,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?EN:m===17?NA:m===16?vN:m===15?Vy:m===14?DA:m===13?CA:m===12?_N:m===11?xA:void pe(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(d=>(c=new qg(d,this.ci?this.ci.next():Xn.ce),t==="readwrite-primary"?this.Hi(c).next((m=>!!m||this.Yi(c))).next((m=>{if(!m)throw dn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new oe(X.FAILED_PRECONDITION,vA);return i(c)})).next((m=>this.Xi(c).next((()=>m)))):this.Is(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return Gu(e).get(Ho).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,mg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new oe(X.FAILED_PRECONDITION,pg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gu(e).put(Ho,t)}static v(){return Es.v()}Zi(e){const t=Gu(e);return t.get(Ho).next((i=>this.es(i)?(se(os,"Releasing primary lease."),t.delete(Ho)):j.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(dn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;Jw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const i=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return se(os,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return dn(os,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){dn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gu(n){return Lt(n,Pc)}function yf(n){return Lt(n,ml)}function FO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Ne(),a=Ne();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Yy(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Jw()?8:TA(kt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new qO;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(Zo()<=Le.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",el(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Zo()<=Le.DEBUG&&se("QueryEngine","Query:",el(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Zo()<=Le.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",el(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(t))):j.resolve())}ys(e,t){if(H0(t))return j.resolve(null);let i=Wn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Xg(t,null,"F"),i=Wn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Ne(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const g=this.Ds(t,d);return this.Cs(t,g,c,m.readTime)?this.ys(e,Xg(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,i,a){return H0(t)||a.isEqual(Ee.min())?j.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?j.resolve(null):(Zo()<=Le.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),el(t)),this.vs(e,c,t,q2(a,dc)).next((d=>d)))}))}Ds(e,t){let i=new Xe(WA(e));return t.forEach(((a,l)=>{kc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return Zo()<=Le.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",el(t)),this.ps.getDocumentsMatchingQuery(e,t,Mn.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="LocalStore",HO=3e8;class GO{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new ht(Ie),this.xs=new Ei((l=>Ua(l)),Mc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function US(n,e,t,i){return new GO(n,e,t,i)}async function BS(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let m=Ne();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(i,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function KO(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,_){const T=g.batch,b=T.keys();let I=j.resolve();return b.forEach((B=>{I=I.next((()=>_.getEntry(m,B))).next((K=>{const U=g.docVersions.get(B);ge(U!==null,48541),K.version.compareTo(U)<0&&(T.applyToRemoteDocument(K,g),K.isValidDocument()&&(K.setReadTime(g.commitVersion),_.addEntry(K)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=Ne();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function jS(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function $O(n,e){const t=Re(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const b=a.get(T);if(!b)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let I=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(Nt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),a=a.insert(T,I),(function(K,U,ne){return K.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=HO?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(b,I,_)&&d.push(t.Pi.updateTargetData(l,I))}));let m=On(),g=Ne();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(QO(l,c,e.documentUpdates).next((_=>{m=_.ks,g=_.qs}))),!i.isEqual(Ee.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return j.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function QO(n,e,t){let i=Ne(),a=Ne();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=On();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ee.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):se(Xy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function YO(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ca),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function XO(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,j.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new hi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function iy(n,e,t){const i=Re(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ds(c))throw c;se(Xy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function Tb(n,e,t){const i=Re(n);let a=Ee.min(),l=Ne();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,_){const T=Re(m),b=T.xs.get(_);return b!==void 0?j.resolve(T.Ms.get(b)):T.Pi.getTargetData(g,_)})(i,c,Wn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:Ne()))).next((d=>(WO(i,MN(e),d),{documents:d,Qs:l})))))}function WO(n,e,t){let i=n.Os.get(e)||Ee.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class bb{constructor(){this.activeTargetIds=zN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zS{constructor(){this.Mo=new bb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bb,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="ConnectivityMonitor";class Ab{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(wb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(wb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f=null;function sy(){return _f===null?_f=(function(){return 268435456+Math.round(2147483648*Math.random())})():_f++,"0x"+_f.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="RestConnection",ZO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Xf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=sy(),d=this.zo(e,t.toUriEncodedString());se(gg,`Sending RPC '${e}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(d),_=xs(g);return this.Jo(e,d,m,i,_).then((T=>(se(gg,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw ka(gg,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=ZO[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class nV extends eV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=sy();return new Promise(((d,m)=>{const g=new lA;g.setWithCredentials(!0),g.listenOnce(uA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case If.NO_ERROR:const T=g.getResponseJson();se(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case If.TIMEOUT:se(tn,`RPC '${e}' ${c} timed out`),m(new oe(X.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const b=g.getStatus();if(se(tn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const B=I==null?void 0:I.error;if(B&&B.status&&B.message){const K=(function(ne){const W=ne.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(W)>=0?W:X.UNKNOWN})(B.status);m(new oe(K,B.message))}else m(new oe(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new oe(X.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{se(tn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);se(tn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=sy(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=fA(),d=hA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const _=l.join("");se(tn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);this.I_(T);let b=!1,I=!1;const B=new tV({Yo:U=>{I?se(tn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(b||(se(tn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),b=!0),se(tn,`RPC '${e}' stream ${a} sending:`,U),T.send(U))},Zo:()=>T.close()}),K=(U,ne,W)=>{U.listen(ne,(Y=>{try{W(Y)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return K(T,Qu.EventType.OPEN,(()=>{I||(se(tn,`RPC '${e}' stream ${a} transport opened.`),B.o_())})),K(T,Qu.EventType.CLOSE,(()=>{I||(I=!0,se(tn,`RPC '${e}' stream ${a} transport closed`),B.a_(),this.E_(T))})),K(T,Qu.EventType.ERROR,(U=>{I||(I=!0,ka(tn,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),B.a_(new oe(X.UNAVAILABLE,"The operation could not be completed")))})),K(T,Qu.EventType.MESSAGE,(U=>{var ne;if(!I){const W=U.data[0];ge(!!W,16349);const Y=W,ae=(Y==null?void 0:Y.error)||((ne=Y[0])==null?void 0:ne.error);if(ae){se(tn,`RPC '${e}' stream ${a} received error:`,ae);const ie=ae.status;let fe=(function(R){const P=Ct[R];if(P!==void 0)return uS(P)})(ie),D=ae.message;fe===void 0&&(fe=X.INTERNAL,D="Unknown error status: "+ie+" with message "+ae.message),I=!0,B.a_(new oe(fe,D)),T.close()}else se(tn,`RPC '${e}' stream ${a} received:`,W),B.u_(W)}})),K(d,cA.STAT_EVENT,(U=>{U.stat===Lg.PROXY?se(tn,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===Lg.NOPROXY&&se(tn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(){return typeof window<"u"?window:null}function kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(n){return new iO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="PersistentStream";class qS{constructor(e,t,i,a,l,c,d,m){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(dn(t.toString()),dn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new oe(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(Sb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(se(Sb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iV extends qS{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oO(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?mn(c.readTime):Ee.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Zg(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Wf(m)?{documents:yS(l,m)}:{query:_S(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=fS(l,c.resumeToken);const g=Wg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ee.min())>0){d.readTime=Tl(l,c.snapshotVersion.toTimestamp());const g=Wg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=uO(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Zg(this.serializer),t.removeTarget=e,this.q_(t)}}class sV extends qS{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lO(e.writeResults,e.commitTime),i=mn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Zg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>ed(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{}class oV extends aV{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Jg(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(X.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Jg(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new oe(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class lV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dn(t),this.aa=!1):se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="RemoteStore";class uV{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Xa(this)&&(se(Fa,"Restarting streams for network reachability change."),await(async function(m){const g=Re(m);g.Ea.add(4),await Uc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Bd(g)})(this))}))})),this.Ra=new lV(i,a)}}async function Bd(n){if(Xa(n))for(const e of n.da)await e(!0)}async function Uc(n){for(const e of n.da)await e(!1)}function HS(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),e_(t)?Zy(t):Dl(t).O_()&&Jy(t,e))}function Wy(n,e){const t=Re(n),i=Dl(t);t.Ia.delete(e),i.O_()&&GS(t,e),t.Ia.size===0&&(i.O_()?i.L_():Xa(t)&&t.Ra.set("Unknown"))}function Jy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Dl(n).Y_(e)}function GS(n,e){n.Va.Ue(e),Dl(n).Z_(e)}function Zy(n){n.Va=new eO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Dl(n).start(),n.Ra.ua()}function e_(n){return Xa(n)&&!Dl(n).x_()&&n.Ia.size>0}function Xa(n){return Re(n).Ea.size===0}function KS(n){n.Va=void 0}async function cV(n){n.Ra.set("Online")}async function hV(n){n.Ia.forEach(((e,t)=>{Jy(n,e)}))}async function fV(n,e){KS(n),e_(n)?(n.Ra.ha(e),Zy(n)):n.Ra.set("Unknown")}async function dV(n,e,t){if(n.Ra.set("Online"),e instanceof hS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(i){se(Fa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await sd(n,i)}else if(e instanceof Pf?n.Va.Ze(e):e instanceof cS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ee.min()))try{const i=await jS(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Nt.EMPTY_BYTE_STRING,_.snapshotVersion)),GS(l,m);const T=new hi(_.target,m,g,_.sequenceNumber);Jy(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){se(Fa,"Failed to raise snapshot:",i),await sd(n,i)}}async function sd(n,e,t){if(!Ds(e))throw e;n.Ea.add(1),await Uc(n),n.Ra.set("Offline"),t||(t=()=>jS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{se(Fa,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Bd(n)}))}function $S(n,e){return e().catch((t=>sd(n,t,e)))}async function Bc(n){const e=Re(n),t=Ss(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ca;for(;mV(e);)try{const a=await YO(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,pV(e,a)}catch(a){await sd(e,a)}QS(e)&&YS(e)}function mV(n){return Xa(n)&&n.Ta.length<10}function pV(n,e){n.Ta.push(e);const t=Ss(n);t.O_()&&t.X_&&t.ea(e.mutations)}function QS(n){return Xa(n)&&!Ss(n).x_()&&n.Ta.length>0}function YS(n){Ss(n).start()}async function gV(n){Ss(n).ra()}async function yV(n){const e=Ss(n);for(const t of n.Ta)e.ea(t.mutations)}async function _V(n,e,t){const i=n.Ta.shift(),a=jy.from(i,e,t);await $S(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Bc(n)}async function vV(n,e){e&&Ss(n).X_&&await(async function(i,a){if((function(c){return WN(c)&&c!==X.ABORTED})(a.code)){const l=i.Ta.shift();Ss(i).B_(),await $S(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Bc(i)}})(n,e),QS(n)&&YS(n)}async function Ib(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),se(Fa,"RemoteStore received new credentials");const i=Xa(t);t.Ea.add(3),await Uc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Bd(t)}async function EV(n,e){const t=Re(n);e?(t.Ea.delete(2),await Bd(t)):e||(t.Ea.add(2),await Uc(t),t.Ra.set("Unknown"))}function Dl(n){return n.ma||(n.ma=(function(t,i,a){const l=Re(t);return l.sa(),new iV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:cV.bind(null,n),t_:hV.bind(null,n),r_:fV.bind(null,n),H_:dV.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),e_(n)?Zy(n):n.Ra.set("Unknown")):(await n.ma.stop(),KS(n))}))),n.ma}function Ss(n){return n.fa||(n.fa=(function(t,i,a){const l=Re(t);return l.sa(),new sV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:gV.bind(null,n),r_:vV.bind(null,n),ta:yV.bind(null,n),na:_V.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Bc(n)):(await n.fa.stop(),n.Ta.length>0&&(se(Fa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new t_(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n_(n,e){if(dn("AsyncQueue",`${e}: ${n}`),Ds(n))return new oe(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static emptySet(e){return new sl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ue.comparator(t.key,i.key):(t,i)=>ue.comparator(t.key,i.key),this.keyedMap=Yu(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new sl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.ga=new ht(ue.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class bl{constructor(e,t,i,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new bl(e,t,sl.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bV{constructor(){this.queries=xb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Re(t),l=a.queries;a.queries=xb(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(i)}))})(this,new oe(X.ABORTED,"Firestore shutting down"))}}function xb(){return new Ei((n=>XA(n)),Dd)}async function XS(n,e){const t=Re(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new TV,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=n_(c,`Initialization of query '${el(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&r_(t)}async function WS(n,e){const t=Re(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function wV(n,e){const t=Re(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&r_(t)}function AV(n,e,t){const i=Re(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function r_(n){n.Ca.forEach((e=>{e.next()}))}var ay,Cb;(Cb=ay||(ay={})).Ma="default",Cb.Cache="cache";class JS{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new bl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ay.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.key=e}}class eI{constructor(e){this.key=e}}class SV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=WA(e),this.tu=new sl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Rb,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,T)=>{const b=a.get(_),I=kc(this.query,T)?T:null,B=!!b&&this.mutatedKeys.has(b.key),K=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let U=!1;b&&I?b.data.isEqual(I.data)?B!==K&&(i.track({type:3,doc:I}),U=!0):this.su(b,I)||(i.track({type:2,doc:I}),U=!0,(m&&this.eu(I,m)>0||g&&this.eu(I,g)<0)&&(d=!0)):!b&&I?(i.track({type:0,doc:I}),U=!0):b&&!I&&(i.track({type:1,doc:b}),U=!0,(m||g)&&(d=!0)),U&&(I?(c=c.add(I),l=K?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(I,B){const K=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:U})}};return K(I)-K(B)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new bl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new eI(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new ZS(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const i_="SyncEngine";class IV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class RV{constructor(e){this.key=e,this.hu=!1}}class xV{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ei((d=>XA(d)),Dd),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ue.comparator),this.Au=new Map,this.Ru=new Ky,this.Vu={},this.mu=new Map,this.fu=za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CV(n,e,t=!0){const i=aI(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await tI(i,e,t,!0),a}async function DV(n,e){const t=aI(n);await tI(t,e,!0,!1)}async function tI(n,e,t,i){const a=await XO(n.localStore,Wn(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await NV(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&HS(n.remoteStore,a),d}async function NV(n,e,t,i,a){n.pu=(T,b,I)=>(async function(K,U,ne,W){let Y=U.view.ru(ne);Y.Cs&&(Y=await Tb(K.localStore,U.query,!1).then((({documents:D})=>U.view.ru(D,Y))));const ae=W&&W.targetChanges.get(U.targetId),ie=W&&W.targetMismatches.get(U.targetId)!=null,fe=U.view.applyChanges(Y,K.isPrimaryClient,ae,ie);return Nb(K,U.targetId,fe.au),fe.snapshot})(n,T,b,I);const l=await Tb(n.localStore,e,!0),c=new SV(e,l.Qs),d=c.ru(l.documents),m=Lc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,m);Nb(n,t,g.au);const _=new IV(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function OV(n,e,t){const i=Re(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Dd(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await iy(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Wy(i.remoteStore,a.targetId),oy(i,a.targetId)})).catch(Ya)):(oy(i,a.targetId),await iy(i.localStore,a.targetId,!0))}async function VV(n,e){const t=Re(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Wy(t.remoteStore,i.targetId))}async function PV(n,e,t){const i=oI(n);try{const a=await(function(c,d){const m=Re(c),g=Me.now(),_=d.reduce(((I,B)=>I.add(B.key)),Ne());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let B=On(),K=Ne();return m.Ns.getEntries(I,_).next((U=>{B=U,B.forEach(((ne,W)=>{W.isValidDocument()||(K=K.add(ne))}))})).next((()=>m.localDocuments.getOverlayedDocuments(I,B))).next((U=>{T=U;const ne=[];for(const W of d){const Y=YN(W,T.get(W.key).overlayedDocument);Y!=null&&ne.push(new Ti(W.key,Y,zA(Y.value.mapValue),sn.exists(!0)))}return m.mutationQueue.addMutationBatch(I,g,ne,d)})).next((U=>{b=U;const ne=U.applyToLocalDocumentSet(T,K);return m.documentOverlayCache.saveOverlays(I,U.batchId,ne)}))})).then((()=>({batchId:b.batchId,changes:ZA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new ht(Ie)),g=g.insert(d,m),c.Vu[c.currentUser.toKey()]=g})(i,a.batchId,t),await jc(i,a.changes),await Bc(i.remoteStore)}catch(a){const l=n_(a,"Failed to persist write");t.reject(l)}}async function nI(n,e){const t=Re(n);try{const i=await $O(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(ge(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ge(c.hu,14607):a.removedDocuments.size>0&&(ge(c.hu,42227),c.hu=!1))})),await jc(t,i,e)}catch(i){await Ya(i)}}function Db(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=Re(c);m.onlineState=d;let g=!1;m.queries.forEach(((_,T)=>{for(const b of T.Sa)b.va(d)&&(g=!0)})),g&&r_(m)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function MV(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new ht(ue.comparator);c=c.insert(l,yt.newNoDocument(l,Ee.min()));const d=Ne().add(l),m=new Pd(Ee.min(),new Map,new ht(Ie),c,d);await nI(i,m),i.du=i.du.remove(l),i.Au.delete(e),s_(i)}else await iy(i.localStore,e,!1).then((()=>oy(i,e,t))).catch(Ya)}async function kV(n,e){const t=Re(n),i=e.batch.batchId;try{const a=await KO(t.localStore,e);iI(t,i,null),rI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await jc(t,a)}catch(a){await Ya(a)}}async function LV(n,e,t){const i=Re(n);try{const a=await(function(c,d){const m=Re(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next((T=>(ge(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(g,T)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(i.localStore,e);iI(i,e,t),rI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await jc(i,a)}catch(a){await Ya(a)}}function rI(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function iI(n,e,t){const i=Re(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function oy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||sI(n,i)}))}function sI(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Wy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),s_(n))}function Nb(n,e,t){for(const i of t)i instanceof ZS?(n.Ru.addReference(i.key,e),UV(n,i)):i instanceof eI?(se(i_,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||sI(n,i.key)):pe(19791,{wu:i})}function UV(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(se(i_,"New document in limbo: "+t),n.Eu.add(i),s_(n))}function s_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ue(He.fromString(e)),i=n.fu.next();n.Au.set(i,new RV(t)),n.du=n.du.insert(t,i),HS(n.remoteStore,new hi(Wn(Cd(t.path)),i,"TargetPurposeLimboResolution",Xn.ce))}}async function jc(n,e,t){const i=Re(n),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{c.push(i.pu(m,e,t).then((g=>{var _;if((g||t)&&i.isPrimaryClient){const T=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(g){a.push(g);const T=Yy.As(m.targetId,g);l.push(T)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(m,g){const _=Re(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>j.forEach(g,(b=>j.forEach(b.Es,(I=>_.persistence.referenceDelegate.addReference(T,b.targetId,I))).next((()=>j.forEach(b.ds,(I=>_.persistence.referenceDelegate.removeReference(T,b.targetId,I)))))))))}catch(T){if(!Ds(T))throw T;se(Xy,"Failed to update sequence numbers: "+T)}for(const T of g){const b=T.targetId;if(!T.fromCache){const I=_.Ms.get(b),B=I.snapshotVersion,K=I.withLastLimboFreeSnapshotVersion(B);_.Ms=_.Ms.insert(b,K)}}})(i.localStore,l))}async function BV(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){se(i_,"User change. New user:",e.toKey());const i=await BS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new oe(X.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await jc(t,i.Ls)}}function jV(n,e){const t=Re(n),i=t.Au.get(e);if(i&&i.hu)return Ne().add(i.key);{let a=Ne();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function aI(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MV.bind(null,e),e.Pu.H_=wV.bind(null,e.eventManager),e.Pu.yu=AV.bind(null,e.eventManager),e}function oI(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LV.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ud(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return US(this.persistence,new LS,e.initialUser,this.serializer)}Cu(e){return new $y(Ld.mi,this.serializer)}Du(e){return new zS}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class zV extends Ic{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ge(this.persistence.referenceDelegate instanceof id,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new OS(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new $y((i=>id.mi(i,t)),this.serializer)}}class FV extends Ic{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await oI(this.xu.syncEngine),await Bc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return US(this.persistence,new LS,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new OS(i,e.asyncQueue,t)}Mu(e,t){const i=new $2(t,this.persistence);return new K2(e.asyncQueue,i)}Cu(e){const t=FO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Qy(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,rV(),kf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new zS}}class ad{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Db(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BV.bind(null,this.syncEngine),await EV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bV})()}createDatastore(e){const t=Ud(e.databaseInfo.databaseId),i=(function(l){return new nV(l)})(e.databaseInfo);return(function(l,c,d,m){return new oV(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new uV(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Db(this.syncEngine,t,0)),(function(){return Ab.v()?new Ab:new JO})())}createSyncEngine(e,t){return(function(a,l,c,d,m,g,_){const T=new xV(a,l,c,d,m,g);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Re(a);se(Fa,"RemoteStore shutting down."),l.Ea.add(5),await Uc(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ad.provider={build:()=>new ad};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class qV{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Yt.UNAUTHENTICATED,this.clientId=Ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{se(Is,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(se(Is,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=n_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function yg(n,e){n.asyncQueue.verifyOperationInProgress(),se(Is,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await BS(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Ob(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HV(n);se(Is,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Ib(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>Ib(e.remoteStore,a))),n._onlineComponents=e}async function HV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(Is,"Using user provided OfflineComponentProvider");try{await yg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;ka("Error using user provided cache. Falling back to memory cache: "+t),await yg(n,new Ic)}}else se(Is,"Using default OfflineComponentProvider"),await yg(n,new zV(void 0));return n._offlineComponents}async function uI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(Is,"Using user provided OnlineComponentProvider"),await Ob(n,n._uninitializedComponentsProvider._online)):(se(Is,"Using default OnlineComponentProvider"),await Ob(n,new ad))),n._onlineComponents}function GV(n){return uI(n).then((e=>e.syncEngine))}async function cI(n){const e=await uI(n),t=e.eventManager;return t.onListen=CV.bind(null,e.syncEngine),t.onUnlisten=OV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VV.bind(null,e.syncEngine),t}function KV(n,e,t={}){const i=new Lr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const _=new lI({next:b=>{_.Nu(),c.enqueueAndForget((()=>WS(l,T)));const I=b.docs.has(d);!I&&b.fromCache?g.reject(new oe(X.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&b.fromCache&&m&&m.source==="server"?g.reject(new oe(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new JS(Cd(d.path),_,{includeMetadataChanges:!0,qa:!0});return XS(l,T)})(await cI(n),n.asyncQueue,e,t,i))),i.promise}function $V(n,e,t={}){const i=new Lr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const _=new lI({next:b=>{_.Nu(),c.enqueueAndForget((()=>WS(l,T))),b.fromCache&&m.source==="server"?g.reject(new oe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new JS(d,_,{includeMetadataChanges:!0,qa:!0});return XS(l,T)})(await cI(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firestore.googleapis.com",Pb=!0;class Mb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fI,this.ssl=Pb}else this.host=e.host,this.ssl=e.ssl??Pb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SO)throw new oe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hI(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jd{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new O2;switch(i.type){case"firstParty":return new k2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new oe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Vb.get(t);i&&(se("ComponentProvider","Removing Datastore"),Vb.delete(t),i.terminate())})(this),Promise.resolve()}}function QV(n,e,t,i={}){var g;n=Zn(n,jd);const a=xs(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(by(`https://${d}`),wy("Firestore",!0)),l.host!==fI&&l.host!==d&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:i};if(!bs(m,c)&&(n._setSettings(m),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=Yt.MOCK_USER;else{_=Yw(i.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new oe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Yt(b)}n._authCredentials=new V2(new mA(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wa(this.firestore,e,this._query)}}class It{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Vc(t,It._jsonSchema))return new It(e,i||null,new ue(He.fromString(t.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:Dt("string",It._jsonSchemaVersion),referencePath:Dt("string")};class Ts extends Wa{constructor(e,t,i){super(e,t,Cd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new ue(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function ps(n,e,...t){if(n=ct(n),gA("collection","path",e),n instanceof jd){const i=He.fromString(e,...t);return S0(i),new Ts(n,null,i)}{if(!(n instanceof It||n instanceof Ts))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return S0(i),new Ts(n.firestore,null,i)}}function gs(n,e,...t){if(n=ct(n),arguments.length===1&&(e=Ry.newId()),gA("doc","path",e),n instanceof jd){const i=He.fromString(e,...t);return A0(i),new It(n,null,new ue(i))}{if(!(n instanceof It||n instanceof Ts))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(He.fromString(e,...t));return A0(i),new It(n.firestore,n instanceof Ts?n.converter:null,new ue(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="AsyncQueue";class Lb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FS(this,"async_queue_retry"),this._c=()=>{const i=kf();i&&se(kb,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=kf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Lr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ds(e))throw e;se(kb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,dn("INTERNAL UNHANDLED ERROR: ",Ub(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=t_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&pe(47125,{Pc:Ub(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ub(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Os extends jd{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Lb,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lb(e),this._firestoreClient=void 0,await e}}}function YV(n,e){const t=typeof n=="object"?n:Ed(),i=typeof n=="string"?n:Xf,a=Cs(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Kw("firestore");l&&QV(a,...l)}return a}function a_(n){if(n._terminated)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dI(n),n._firestoreClient}function dI(n){var i,a,l;const e=n._freezeSettings(),t=(function(d,m,g,_){return new bN(d,m,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,hI(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new qV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}function XV(n,e){ka("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return WV(n,ad.provider,{build:i=>new FV(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function WV(n,e,t){if((n=Zn(n,Os))._firestoreClient||n._terminated)throw new oe(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new oe(X.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},dI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(Nt.fromBase64String(e))}catch(t){throw new oe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Dt("string",Yn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ur._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,Ur._jsonSchema))return new Ur(e.latitude,e.longitude)}}Ur._jsonSchemaVersion="firestore/geoPoint/1.0",Ur._jsonSchema={type:Dt("string",Ur._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,Br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Br(e.vectorValues);throw new oe(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Br._jsonSchemaVersion="firestore/vectorValue/1.0",Br._jsonSchema={type:Dt("string",Br._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=/^__.*__$/;class ZV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cl(e,this.data,t,this.fieldTransforms)}}class mI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ti(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:n})}}class l_{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new l_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return od(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pI(this.Ac)&&JV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ud(e)}Cc(e,t,i,a=!1){return new l_({Ac:e,methodName:t,Dc:i,path:mt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fd(n){const e=n._freezeSettings(),t=Ud(n._databaseId);return new eP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gI(n,e,t,i,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);u_("Data must be an object, but it was:",c,i);const d=yI(i,c);let m,g;if(l.merge)m=new vn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const b=ly(e,T,t);if(!c.contains(b))throw new oe(X.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);vI(_,b)||_.push(b)}m=new vn(_),g=c.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,g=c.fieldTransforms;return new ZV(new rn(d),m,g)}class qd extends o_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qd}}function tP(n,e,t,i){const a=n.Cc(1,e,t);u_("Data must be an object, but it was:",a,i);const l=[],c=rn.empty();Ns(i,((m,g)=>{const _=c_(e,m,t);g=ct(g);const T=a.yc(_);if(g instanceof qd)l.push(_);else{const b=zc(g,T);b!=null&&(l.push(_),c.set(_,b))}}));const d=new vn(l);return new mI(c,d,a.fieldTransforms)}function nP(n,e,t,i,a,l){const c=n.Cc(1,e,t),d=[ly(e,i,t)],m=[a];if(l.length%2!=0)throw new oe(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(ly(e,l[b])),m.push(l[b+1]);const g=[],_=rn.empty();for(let b=d.length-1;b>=0;--b)if(!vI(g,d[b])){const I=d[b];let B=m[b];B=ct(B);const K=c.yc(I);if(B instanceof qd)g.push(I);else{const U=zc(B,K);U!=null&&(g.push(I),_.set(I,U))}}const T=new vn(g);return new mI(_,T,c.fieldTransforms)}function rP(n,e,t,i=!1){return zc(t,n.Cc(i?4:3,e))}function zc(n,e){if(_I(n=ct(n)))return u_("Unsupported field value:",e,n),yI(n,e);if(n instanceof o_)return(function(i,a){if(!pI(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let m=zc(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FN(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Me.fromDate(i);return{timestampValue:Tl(a.serializer,l)}}if(i instanceof Me){const l=new Me(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Tl(a.serializer,l)}}if(i instanceof Ur)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yn)return{bytesValue:fS(a.serializer,i._byteString)};if(i instanceof It){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:qy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Br)return(function(c,d){return{mapValue:{fields:{[My]:{stringValue:ky},[pl]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return Uy(d.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Td(i)}`)})(n,e)}function yI(n,e){const t={};return OA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(n,((i,a)=>{const l=zc(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function _I(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Me||n instanceof Ur||n instanceof Yn||n instanceof It||n instanceof o_||n instanceof Br)}function u_(n,e,t){if(!_I(t)||!yA(t)){const i=Td(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function ly(n,e,t){if((e=ct(e))instanceof zd)return e._internalPath;if(typeof e=="string")return c_(n,e);throw od("Field path arguments must be of type string or ",n,!1,void 0,t)}const iP=new RegExp("[~\\*/\\[\\]]");function c_(n,e,t){if(e.search(iP)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zd(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function od(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new oe(X.INVALID_ARGUMENT,d+n+m)}function vI(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sP extends EI{data(){return super.data()}}function Hd(n,e){return typeof e=="string"?c_(n,e):e instanceof zd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h_{}class TI extends h_{}function _g(n,e,...t){let i=[];e instanceof h_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((m=>m instanceof f_)).length,d=l.filter((m=>m instanceof Gd)).length;if(c>1||c>0&&d>0)throw new oe(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class Gd extends TI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Gd(e,t,i)}_apply(e){const t=this._parse(e);return bI(e._query,t),new Wa(e.firestore,e.converter,Yg(e._query,t))}_parse(e){const t=Fd(e.firestore);return(function(l,c,d,m,g,_,T){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new oe(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zb(T,_);const B=[];for(const K of T)B.push(jb(m,l,K));b={arrayValue:{values:B}}}else b=jb(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zb(T,_),b=rP(d,c,T,_==="in"||_==="not-in");return Ue.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ya(n,e,t){const i=e,a=Hd("where",n);return Gd._create(a,i,t)}class f_ extends h_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new f_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ye.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)bI(c,m),c=Yg(c,m)})(e._query,t),new Wa(e.firestore,e.converter,Yg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class d_ extends TI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new d_(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wc(l,c)})(e._query,this._field,this._direction);return new Wa(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new xl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Bb(n,e="asc"){const t=e,i=Hd("orderBy",n);return d_._create(i,t)}function jb(n,e,t){if(typeof(t=ct(t))=="string"){if(t==="")throw new oe(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YA(e)&&t.indexOf("/")!==-1)throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(He.fromString(t));if(!ue.isDocumentKey(i))throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Tc(n,new ue(i))}if(t instanceof It)return Tc(n,t._key);throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(t)}.`)}function zb(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class oP{convertValue(e,t="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ns(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[pl].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>lt(c.doubleValue)));return new Br(t)}convertGeoPoint(e){return new Ur(lt(e.latitude),lt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Rd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){const t=yi(e);return new Me(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=He.fromString(e);ge(bS(i),9688,{name:e});const a=new La(i.get(1),i.get(3)),l=new ue(i.popFirst(5));return a.isEqual(t)||dn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Ju{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oa extends EI{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Hd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Oa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oa._jsonSchema={type:Dt("string",Oa._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Lf extends Oa{data(e={}){return super.data(e)}}class al{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ju(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Lf(this._firestore,this._userDataWriter,i.key,i,new Ju(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new Lf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ju(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Lf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ju(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:lP(d.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=al._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(n){n=Zn(n,It);const e=Zn(n.firestore,Os);return KV(a_(e),n._key).then((t=>fP(e,n,t)))}al._jsonSchemaVersion="firestore/querySnapshot/1.0",al._jsonSchema={type:Dt("string",al._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class AI extends oP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}function vg(n){n=Zn(n,Wa);const e=Zn(n.firestore,Os),t=a_(e),i=new AI(e);return aP(n._query),$V(t,n._query).then((a=>new al(e,i,n,a)))}function vf(n,e,t){n=Zn(n,It);const i=Zn(n.firestore,Os),a=wI(n.converter,e,t);return Kd(i,[gI(Fd(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,sn.none())])}function cP(n,e,t,...i){n=Zn(n,It);const a=Zn(n.firestore,Os),l=Fd(a);let c;return c=typeof(e=ct(e))=="string"||e instanceof zd?nP(l,"updateDoc",n._key,e,t,i):tP(l,"updateDoc",n._key,e),Kd(a,[c.toMutation(n._key,sn.exists(!0))])}function hP(n){return Kd(Zn(n.firestore,Os),[new Vd(n._key,sn.none())])}function SI(n,e){const t=Zn(n.firestore,Os),i=gs(n),a=wI(n.converter,e);return Kd(t,[gI(Fd(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,sn.exists(!1))]).then((()=>i))}function Kd(n,e){return(function(i,a){const l=new Lr;return i.asyncQueue.enqueueAndForget((async()=>PV(await GV(i),a,l))),l.promise})(a_(n),e)}function fP(n,e,t){const i=t.docs.get(e._key),a=new AI(n);return new Oa(n,a,e._key,i,new Ju(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Rl=a})(Qa),gr(new Jn("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Os(new P2(i.getProvider("auth-internal")),new L2(c,i.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new oe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(g.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),En(E0,T0,e),En(E0,T0,"esm2020")})();function II(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dP=II,RI=new $a("auth","Firebase",II());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=new vd("@firebase/auth");function mP(n,...e){ld.logLevel<=Le.WARN&&ld.warn(`Auth (${Qa}): ${n}`,...e)}function Uf(n,...e){ld.logLevel<=Le.ERROR&&ld.error(`Auth (${Qa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n,...e){throw p_(n,...e)}function mr(n,...e){return p_(n,...e)}function m_(n,e,t){const i={...dP(),[e]:t};return new $a("auth","Firebase",i).create(e,{appName:n.name})}function Va(n){return m_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pP(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Fr(n,"argument-error"),m_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function p_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return RI.create(n,...e)}function Se(n,e,...t){if(!n)throw p_(e,...t)}function fi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Uf(e),new Error(e)}function vi(n,e){n||fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function gP(){return Fb()==="http:"||Fb()==="https:"}function Fb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gP()||Ww()||"connection"in navigator)?navigator.onLine:!0}function _P(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,vi(t>e,"Short delay should be less than long delay!"),this.isMobile=oD()||uD()}get(){return yP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(n,e){vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TP=new Fc(3e4,6e4);function y_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Nl(n,e,t,i,a={}){return CI(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Oc({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return lD()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&xs(n.emulatorConfig.host)&&(g.credentials="include"),xI.fetch()(await DI(n,n.config.apiHost,t,d),g)})}async function CI(n,e,t){n._canInitEmulator=!1;const i={...vP,...e};try{const a=new wP(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ef(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ef(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Ef(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Ef(n,"user-disabled",c);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw m_(n,_,g);Fr(n,_)}}catch(a){if(a instanceof er)throw a;Fr(n,"network-request-failed",{message:String(a)})}}async function bP(n,e,t,i,a={}){const l=await Nl(n,e,t,i,a);return"mfaPendingCredential"in l&&Fr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function DI(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?g_(n.config,a):`${n.config.apiScheme}://${a}`;return EP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class wP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mr(this.auth,"network-request-failed")),TP.get())})}}function Ef(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=mr(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(n,e){return Nl(n,"POST","/v1/accounts:delete",e)}async function ud(n,e){return Nl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SP(n,e=!1){const t=ct(n),i=await t.getIdToken(e),a=__(i);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:lc(Eg(a.auth_time)),issuedAtTime:lc(Eg(a.iat)),expirationTime:lc(Eg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Eg(n){return Number(n)*1e3}function __(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Uf("JWT malformed, contained fewer than 3 sections"),null;try{const a=qw(t);return a?JSON.parse(a):(Uf("Failed to decode base64 JWT payload"),null)}catch(a){return Uf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function qb(n){const e=__(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof er&&IP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function IP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(n){var T;const e=n.auth,t=await n.getIdToken(),i=await Rc(n,ud(e,{idToken:t}));Se(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=(T=a.providerUserInfo)!=null&&T.length?NI(a.providerUserInfo):[],c=CP(n.providerData,l),d=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new cy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function xP(n){const e=ct(n);await cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CP(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function NI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e){const t=await CI(n,{},async()=>{const i=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await DI(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&xs(n.emulatorConfig.host)&&(m.credentials="include"),xI.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function NP(n,e){return Nl(n,"POST","/v2/accounts:revokeToken",y_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=qb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await DP(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new ol;return i&&(Se(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Se(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ol,this.toJSON())}_performRefresh(){return fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dr{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new RP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new cy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Rc(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SP(this,e)}reload(){return xP(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await cd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Va(this.auth));const e=await this.getIdToken();return await Rc(this,AP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:b,isAnonymous:I,providerData:B,stsTokenManager:K}=t;Se(T&&K,e,"internal-error");const U=ol.fromJSON(this.name,K);Se(typeof T=="string",e,"internal-error"),ls(i,e.name),ls(a,e.name),Se(typeof b=="boolean",e,"internal-error"),Se(typeof I=="boolean",e,"internal-error"),ls(l,e.name),ls(c,e.name),ls(d,e.name),ls(m,e.name),ls(g,e.name),ls(_,e.name);const ne=new dr({uid:T,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:I,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:U,createdAt:g,lastLoginAt:_});return B&&Array.isArray(B)&&(ne.providerData=B.map(W=>({...W}))),m&&(ne._redirectEventId=m),ne}static async _fromIdTokenResponse(e,t,i=!1){const a=new ol;a.updateFromServerResponse(t);const l=new dr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await cd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?NI(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new ol;d.updateFromIdToken(i);const m=new dr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new cy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=new Map;function di(n){vi(n instanceof Function,"Expected a class definition");let e=Hb.get(n);return e?(vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Hb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OI.type="NONE";const Gb=OI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n,e,t){return`firebase:${n}:${e}:${t}`}class ll{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Bf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Bf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ud(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ll(di(Gb),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||di(Gb);const c=Bf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const b=await ud(e,{idToken:_}).catch(()=>{});if(!b)break;T=await dr._fromGetAccountInfoResponse(e,b,_)}else T=dr._fromJSON(e,_);g!==l&&(d=T),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new ll(l,e,i):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new ll(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UI(e))return"Blackberry";if(BI(e))return"Webos";if(PI(e))return"Safari";if((e.includes("chrome/")||MI(e))&&!e.includes("edge/"))return"Chrome";if(LI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function VI(n=kt()){return/firefox\//i.test(n)}function PI(n=kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MI(n=kt()){return/crios\//i.test(n)}function kI(n=kt()){return/iemobile/i.test(n)}function LI(n=kt()){return/android/i.test(n)}function UI(n=kt()){return/blackberry/i.test(n)}function BI(n=kt()){return/webos/i.test(n)}function v_(n=kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function OP(n=kt()){var e;return v_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function VP(){return cD()&&document.documentMode===10}function jI(n=kt()){return v_(n)||LI(n)||BI(n)||UI(n)||/windows phone/i.test(n)||kI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(n,e=[]){let t;switch(n){case"Browser":t=Kb(kt());break;case"Worker":t=`${Kb(kt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(n,e={}){return Nl(n,"GET","/v2/passwordPolicy",y_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=6;class LP{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??kP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $b(this),this.idTokenSubscription=new $b(this),this.beforeStateQueue=new PP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=di(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await ll.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ud(this,{idToken:e}),i=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Qn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(i=m.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_P()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Va(this));const t=e?ct(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MP(this),t=new LP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $a("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await NP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&di(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await ll.create(this,[di(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&mP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $d(n){return ct(n)}class $b{constructor(e){this.auth=e,this.observer=null,this.addObserver=gD(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BP(n){E_=n}function jP(n){return E_.loadJS(n)}function zP(){return E_.gapiScript}function FP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(n,e){const t=Cs(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(bs(l,e??{}))return a;Fr(a,"already-initialized")}return t.initialize({options:e})}function HP(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(di);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function GP(n,e,t){const i=$d(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=FI(e),{host:c,port:d}=KP(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(bs(g,i.config.emulator)&&bs(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,xs(c)?(by(`${l}//${c}${m}`),wy("Auth",!0)):$P()}function FI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KP(n){const e=FI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:Qb(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Qb(c)}}}function Qb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function $P(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fi("not implemented")}_getIdTokenResponse(e){return fi("not implemented")}_linkToIdToken(e,t){return fi("not implemented")}_getReauthenticationResolver(e){return fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n,e){return bP(n,"POST","/v1/accounts:signInWithIdp",y_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="http://localhost";class qa extends qI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new qa(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ul(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ul(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ul(e,t)}buildRequest(){const e={requestUri:QP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends T_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends qc{constructor(){super("facebook.com")}static credential(e){return qa._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qa._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ci.credential(t,i)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends qc{constructor(){super("github.com")}static credential(e){return qa._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.GITHUB_SIGN_IN_METHOD="github.com";hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends qc{constructor(){super("twitter.com")}static credential(e,t){return qa._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return fs.credential(t,i)}catch{return null}}}fs.TWITTER_SIGN_IN_METHOD="twitter.com";fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await dr._fromIdTokenResponse(e,i,a),c=Yb(i);return new wl({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Yb(i);return new wl({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Yb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends er{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,hd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new hd(e,t,i,a)}}function HI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?hd._fromErrorAndOperation(n,l,e,i):l})}async function YP(n,e,t=!1){const i=await Rc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return wl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(n,e,t=!1){const{auth:i}=n;if(Qn(i.app))return Promise.reject(Va(i));const a="reauthenticate";try{const l=await Rc(n,HI(i,a,e,n),t);Se(l.idToken,i,"internal-error");const c=__(l.idToken);Se(c,i,"internal-error");const{sub:d}=c;return Se(n.uid===d,i,"user-mismatch"),wl._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Fr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(n,e,t=!1){if(Qn(n.app))return Promise.reject(Va(n));const i="signIn",a=await HI(n,i,e),l=await wl._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(n,e){return ct(n).setPersistence(e)}function ZP(n,e,t,i){return ct(n).onIdTokenChanged(e,t,i)}function eM(n,e,t){return ct(n).beforeAuthStateChanged(e,t)}function tM(n,e,t,i){return ct(n).onAuthStateChanged(e,t,i)}function nM(n){return ct(n).signOut()}const fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fd,"1"),this.storage.removeItem(fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=1e3,iM=10;class KI extends GI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);VP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,iM):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},rM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}KI.type="LOCAL";const $I=KI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI extends GI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}QI.type="SESSION";const YI=QI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Qd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await sM(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=b_("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const b=T;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return window}function oM(n){jr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}async function lM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function cM(){return XI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="firebaseLocalStorageDb",hM=1,dd="firebaseLocalStorage",JI="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yd(n,e){return n.transaction([dd],e?"readwrite":"readonly").objectStore(dd)}function fM(){const n=indexedDB.deleteDatabase(WI);return new Hc(n).toPromise()}function hy(){const n=indexedDB.open(WI,hM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(dd,{keyPath:JI})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(dd)?e(i):(i.close(),await fM(),e(await hy()))})})}async function Xb(n,e,t){const i=Yd(n,!0).put({[JI]:e,value:t});return new Hc(i).toPromise()}async function dM(n,e){const t=Yd(n,!1).get(e),i=await new Hc(t).toPromise();return i===void 0?null:i.value}function Wb(n,e){const t=Yd(n,!0).delete(e);return new Hc(t).toPromise()}const mM=800,pM=3;class ZI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>pM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qd._getInstance(cM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await lM(),!this.activeServiceWorker)return;this.sender=new aM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hy();return await Xb(e,fd,"1"),await Wb(e,fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Xb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>dM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Yd(a,!1).getAll();return new Hc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZI.type="LOCAL";const gM=ZI;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(n,e){return e?di(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_ extends qI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yM(n){return WP(n.auth,new w_(n),n.bypassAuthState)}function _M(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),XP(t,new w_(n),n.bypassAuthState)}async function vM(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),YP(t,new w_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yM;case"linkViaPopup":case"linkViaRedirect":return vM;case"reauthViaPopup":case"reauthViaRedirect":return _M;default:Fr(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new Fc(2e3,1e4);async function TM(n,e,t){if(Qn(n.app))return Promise.reject(mr(n,"operation-not-supported-in-this-environment"));const i=$d(n);pP(n,e,T_);const a=eR(i,t);return new Ia(i,"signInViaPopup",e,a).executeNotNull()}class Ia extends tR{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Ia.currentPopupAction&&Ia.currentPopupAction.cancel(),Ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){vi(this.filter.length===1,"Popup operations only handle one event");const e=b_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EM.get())};e()}}Ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="pendingRedirect",jf=new Map;class wM extends tR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=jf.get(this.auth._key());if(!e){try{const i=await AM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}jf.set(this.auth._key(),e)}return this.bypassAuthState||jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AM(n,e){const t=RM(e),i=IM(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function SM(n,e){jf.set(n._key(),e)}function IM(n){return di(n._redirectPersistence)}function RM(n){return Bf(bM,n.config.apiKey,n.name)}async function xM(n,e,t=!1){if(Qn(n.app))return Promise.reject(Va(n));const i=$d(n),a=eR(i,e),c=await new wM(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=600*1e3;class DM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!nR(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jb(e))}saveEventToCache(e){this.cachedEventUids.add(Jb(e)),this.lastProcessedEventTime=Date.now()}}function Jb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(n,e={}){return Nl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PM=/^https?/;async function MM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await OM(n);for(const t of e)try{if(kM(t))return}catch{}Fr(n,"unauthorized-domain")}function kM(n){const e=uy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!PM.test(t))return!1;if(VM.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new Fc(3e4,6e4);function Zb(){const n=jr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function UM(n){return new Promise((e,t)=>{var a,l,c;function i(){Zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zb(),t(mr(n,"network-request-failed"))},timeout:LM.get()})}if((l=(a=jr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=jr().gapi)!=null&&c.load)i();else{const d=FP("iframefcb");return jr()[d]=()=>{gapi.load?i():t(mr(n,"network-request-failed"))},jP(`${zP()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw zf=null,e})}let zf=null;function BM(n){return zf=zf||UM(n),zf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new Fc(5e3,15e3),zM="__/auth/iframe",FM="emulator/auth/iframe",qM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GM(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?g_(e,FM):`https://${n.config.authDomain}/${zM}`,i={apiKey:e.apiKey,appName:n.name,v:Qa},a=HM.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Oc(i).slice(1)}`}async function KM(n){const e=await BM(n),t=jr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:GM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qM,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=mr(n,"network-request-failed"),d=jr().setTimeout(()=>{l(c)},jM.get());function m(){jr().clearTimeout(d),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QM=500,YM=600,XM="_blank",WM="http://localhost";class ew{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JM(n,e,t,i=QM,a=YM){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...$M,width:i.toString(),height:a.toString(),top:l,left:c},g=kt().toLowerCase();t&&(d=MI(g)?XM:t),VI(g)&&(e=e||WM,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[I,B])=>`${b}${I}=${B},`,"");if(OP(g)&&d!=="_self")return ZM(e||"",d),new ew(null);const T=window.open(e||"",d,_);Se(T,n,"popup-blocked");try{T.focus()}catch{}return new ew(T)}function ZM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="__/auth/handler",tk="emulator/auth/handler",nk=encodeURIComponent("fac");async function tw(n,e,t,i,a,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Qa,eventId:a};if(e instanceof T_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",pD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof qc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await n._getAppCheckToken(),g=m?`#${nk}=${encodeURIComponent(m)}`:"";return`${rk(n)}?${Oc(d).slice(1)}${g}`}function rk({config:n}){return n.emulator?g_(n,tk):`https://${n.authDomain}/${ek}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="webStorageSupport";class ik{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YI,this._completeRedirectFn=xM,this._overrideRedirectResult=SM}async _openPopup(e,t,i,a){var c;vi((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await tw(e,t,i,uy(),a);return JM(e,l,b_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await tw(e,t,i,uy(),a);return oM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(vi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await KM(e),i=new DM(e);return t.register("authEvent",a=>(Se(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tg,{type:Tg},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[Tg];l!==void 0&&t(!!l),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=MM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jI()||PI()||v_()}}const sk=ik;var nw="@firebase/auth",rw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lk(n){gr(new Jn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zI(n)},g=new UP(i,a,l,m);return HP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),gr(new Jn("auth-internal",e=>{const t=$d(e.getProvider("auth").getImmediate());return(i=>new ak(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(nw,rw,ok(n)),En(nw,rw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=300,ck=Qw("authIdTokenMaxAge")||uk;let iw=null;const hk=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ck)return;const a=t==null?void 0:t.token;iw!==a&&(iw=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function fk(n=Ed()){const e=Cs(n,"auth");if(e.isInitialized())return e.getImmediate();const t=qP(n,{popupRedirectResolver:sk,persistence:[gM,$I,YI]}),i=Qw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=hk(l.toString());eM(t,c,()=>c(t.currentUser)),ZP(t,d=>c(d))}}const a=Gw("auth");return a&&GP(t,`http://${a}`),t}function dk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}BP({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=mr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",dk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lk("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="firebasestorage.googleapis.com",iR="storageBucket",mk=120*1e3,pk=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt extends er{constructor(e,t,i=0){super(bg(e),`Firebase Storage: ${t} (${bg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _t;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_t||(_t={}));function bg(n){return"storage/"+n}function A_(){const n="An unknown error occurred, please check the error payload for server response.";return new vt(_t.UNKNOWN,n)}function gk(n){return new vt(_t.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function yk(n){return new vt(_t.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _k(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vt(_t.UNAUTHENTICATED,n)}function vk(){return new vt(_t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Ek(n){return new vt(_t.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Tk(){return new vt(_t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bk(){return new vt(_t.CANCELED,"User canceled the upload/download.")}function wk(n){return new vt(_t.INVALID_URL,"Invalid URL '"+n+"'.")}function Ak(n){return new vt(_t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Sk(){return new vt(_t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iR+"' property when initializing the app?")}function Ik(){return new vt(_t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Rk(){return new vt(_t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xk(n){return new vt(_t.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fy(n){return new vt(_t.INVALID_ARGUMENT,n)}function sR(){return new vt(_t.APP_DELETED,"The Firebase app was deleted.")}function Ck(n){return new vt(_t.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uc(n,e){return new vt(_t.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ku(n){throw new vt(_t.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Vn.makeFromUrl(e,t)}catch{return new Vn(e,"")}if(i.path==="")return i;throw Ak(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(ae){ae.path_=decodeURIComponent(ae.path)}const _="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",I=new RegExp(`^https?://${T}/${_}/b/${a}/o${b}`,"i"),B={bucket:1,path:3},K=t===rR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",ne=new RegExp(`^https?://${K}/${a}/${U}`,"i"),Y=[{regex:d,indices:m,postModify:l},{regex:I,indices:B,postModify:g},{regex:ne,indices:{bucket:1,path:2},postModify:g}];for(let ae=0;ae<Y.length;ae++){const ie=Y[ae],fe=ie.regex.exec(e);if(fe){const D=fe[ie.indices.bucket];let S=fe[ie.indices.path];S||(S=""),i=new Vn(D,S),ie.postModify(i);break}}if(i==null)throw wk(e);return i}}class Dk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(n,e,t){let i=1,a=null,l=null,c=!1,d=0;function m(){return d===2}let g=!1;function _(...U){g||(g=!0,e.apply(null,U))}function T(U){a=setTimeout(()=>{a=null,n(I,m())},U)}function b(){l&&clearTimeout(l)}function I(U,...ne){if(g){b();return}if(U){b(),_.call(null,U,...ne);return}if(m()||c){b(),_.call(null,U,...ne);return}i<64&&(i*=2);let Y;d===1?(d=2,Y=0):Y=(i+Math.random())*1e3,T(Y)}let B=!1;function K(U){B||(B=!0,b(),!g&&(a!==null?(U||(d=2),clearTimeout(a),T(0)):U||(d=1)))}return T(0),l=setTimeout(()=>{c=!0,K(!0)},t),K}function Ok(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(n){return n!==void 0}function Pk(n){return typeof n=="object"&&!Array.isArray(n)}function S_(n){return typeof n=="string"||n instanceof String}function sw(n){return I_()&&n instanceof Blob}function I_(){return typeof Blob<"u"}function aw(n,e,t,i){if(i<e)throw fy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw fy(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function aR(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var Pa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Pa||(Pa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t,i,a,l,c,d,m,g,_,T,b=!0,I=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=T,this.retry=b,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,K)=>{this.resolve_=B,this.reject_=K,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new Tf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Pa.NO_ERROR,m=l.getStatus();if(!d||Mk(m,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Pa.ABORT;i(!1,new Tf(!1,null,_));return}const g=this.successCodes_.indexOf(m)!==-1;i(!0,new Tf(g,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());Vk(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=A_();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(a.canceled){const m=this.appDelete_?sR():bk();c(m)}else{const m=Tk();c(m)}};this.canceled_?t(!1,new Tf(!1,null,!0)):this.backoffId_=Nk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ok(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Lk(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Uk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Bk(n,e){e&&(n["X-Firebase-GMPID"]=e)}function jk(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function zk(n,e,t,i,a,l,c=!0,d=!1){const m=aR(n.urlParams),g=n.url+m,_=Object.assign({},n.headers);return Bk(_,e),Lk(_,t),Uk(_,l),jk(_,i),new kk(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qk(...n){const e=Fk();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(I_())return new Blob(n);throw new vt(_t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Hk(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(n){if(typeof atob>"u")throw xk("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wg{constructor(e,t){this.data=e,this.contentType=t||null}}function Kk(n,e){switch(n){case kr.RAW:return new wg(oR(e));case kr.BASE64:case kr.BASE64URL:return new wg(lR(n,e));case kr.DATA_URL:return new wg(Qk(e),Yk(e))}throw A_()}function oR(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,c=n.charCodeAt(++t);i=65536|(l&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function $k(n){let e;try{e=decodeURIComponent(n)}catch{throw uc(kr.DATA_URL,"Malformed data URL.")}return oR(e)}function lR(n,e){switch(n){case kr.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw uc(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case kr.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw uc(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Gk(e)}catch(a){throw a.message.includes("polyfill")?a:uc(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}class uR{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw uc(kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Xk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Qk(n){const e=new uR(n);return e.base64?lR(kr.BASE64,e.rest):$k(e.rest)}function Yk(n){return new uR(n).contentType}function Xk(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){let i=0,a="";sw(e)?(this.data_=e,i=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(sw(this.data_)){const i=this.data_,a=Hk(i,e,t);return a===null?null:new ds(a)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new ds(i,!0)}}static getBlob(...e){if(I_()){const t=e.map(i=>i instanceof ds?i.data_:i);return new ds(qk.apply(null,t))}else{const t=e.map(c=>S_(c)?Kk(kr.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const a=new Uint8Array(i);let l=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)a[l++]=c[d]}),new ds(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(n){let e;try{e=JSON.parse(n)}catch{return null}return Pk(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Jk(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function hR(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(n,e){return e}class fn{constructor(e,t,i,a){this.server=e,this.local=t||e,this.writable=!!i,this.xform=a||Zk}}let bf=null;function e4(n){return!S_(n)||n.length<2?n:hR(n)}function fR(){if(bf)return bf;const n=[];n.push(new fn("bucket")),n.push(new fn("generation")),n.push(new fn("metageneration")),n.push(new fn("name","fullPath",!0));function e(l,c){return e4(c)}const t=new fn("name");t.xform=e,n.push(t);function i(l,c){return c!==void 0?Number(c):c}const a=new fn("size");return a.xform=i,n.push(a),n.push(new fn("timeCreated")),n.push(new fn("updated")),n.push(new fn("md5Hash",null,!0)),n.push(new fn("cacheControl",null,!0)),n.push(new fn("contentDisposition",null,!0)),n.push(new fn("contentEncoding",null,!0)),n.push(new fn("contentLanguage",null,!0)),n.push(new fn("contentType",null,!0)),n.push(new fn("metadata","customMetadata",!0)),bf=n,bf}function t4(n,e){function t(){const i=n.bucket,a=n.fullPath,l=new Vn(i,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function n4(n,e,t){const i={};i.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];i[c.local]=c.xform(i,e[c.server])}return t4(i,n),i}function dR(n,e,t){const i=cR(e);return i===null?null:n4(n,i,t)}function r4(n,e,t,i){const a=cR(e);if(a===null||!S_(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(g=>{const _=n.bucket,T=n.fullPath,b="/b/"+c(_)+"/o/"+c(T),I=R_(b,t,i),B=aR({alt:"media",token:g});return I+B})[0]}function i4(n,e){const t={},i=e.length;for(let a=0;a<i;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class mR{constructor(e,t,i,a){this.url=e,this.method=t,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(n){if(!n)throw A_()}function s4(n,e){function t(i,a){const l=dR(n,a,e);return pR(l!==null),l}return t}function a4(n,e){function t(i,a){const l=dR(n,a,e);return pR(l!==null),r4(l,a,n.host,n._protocol)}return t}function gR(n){function e(t,i){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=vk():a=_k():t.getStatus()===402?a=yk(n.bucket):t.getStatus()===403?a=Ek(n.path):a=i,a.status=t.getStatus(),a.serverResponse=i.serverResponse,a}return e}function o4(n){const e=gR(n);function t(i,a){let l=e(i,a);return i.getStatus()===404&&(l=gk(n.path)),l.serverResponse=a.serverResponse,l}return t}function l4(n,e,t){const i=e.fullServerUrl(),a=R_(i,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new mR(a,l,a4(n,t),c);return d.errorHandler=o4(e),d}function u4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function c4(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=u4(null,e)),i}function h4(n,e,t,i,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let Y="";for(let ae=0;ae<2;ae++)Y=Y+Math.random().toString().slice(2);return Y}const m=d();c["Content-Type"]="multipart/related; boundary="+m;const g=c4(e,i,a),_=i4(g,t),T="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,b=`\r
--`+m+"--",I=ds.getBlob(T,i,b);if(I===null)throw Ik();const B={name:g.fullPath},K=R_(l,n.host,n._protocol),U="POST",ne=n.maxUploadRetryTime,W=new mR(K,U,s4(n,t),ne);return W.urlParams=B,W.headers=c,W.body=I.uploadData(),W.errorHandler=gR(e),W}class f4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,a,l){if(this.sent_)throw Ku("cannot .send() more than once");if(xs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ku("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ku("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ku("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ku("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class d4 extends f4{initXhr(){this.xhr_.responseType="text"}}function yR(){return new d4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this._service=e,t instanceof Vn?this._location=t:this._location=Vn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ha(e,t)}get root(){const e=new Vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hR(this._location.path)}get storage(){return this._service}get parent(){const e=Wk(this._location.path);if(e===null)return null;const t=new Vn(this._location.bucket,e);return new Ha(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Ck(e)}}function m4(n,e,t){n._throwIfRoot("uploadBytes");const i=h4(n.storage,n._location,fR(),new ds(e,!0),t);return n.storage.makeRequestWithTokens(i,yR).then(a=>({metadata:a,ref:n}))}function p4(n){n._throwIfRoot("getDownloadURL");const e=l4(n.storage,n._location,fR());return n.storage.makeRequestWithTokens(e,yR).then(t=>{if(t===null)throw Rk();return t})}function g4(n,e){const t=Jk(n._location.path,e),i=new Vn(n._location.bucket,t);return new Ha(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(n){return/^[A-Za-z]+:\/\//.test(n)}function _4(n,e){return new Ha(n,e)}function _R(n,e){if(n instanceof x_){const t=n;if(t._bucket==null)throw Sk();const i=new Ha(t,t._bucket);return e!=null?_R(i,e):i}else return e!==void 0?g4(n,e):n}function v4(n,e){if(e&&y4(e)){if(n instanceof x_)return _4(n,e);throw fy("To use ref(service, url), the first argument must be a Storage instance.")}else return _R(n,e)}function ow(n,e){const t=e==null?void 0:e[iR];return t==null?null:Vn.makeFromBucketSpec(t,n)}function E4(n,e,t,i={}){n.host=`${e}:${t}`;const a=xs(e);a&&(by(`https://${n.host}/b`),wy("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:Yw(l,n.app.options.projectId))}class x_{constructor(e,t,i,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=rR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mk,this._maxUploadRetryTime=pk,this._requests=new Set,a!=null?this._bucket=Vn.makeFromBucketSpec(a,this._host):this._bucket=ow(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vn.makeFromBucketSpec(this._url,e):this._bucket=ow(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ha(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new Dk(sR());{const c=zk(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const lw="@firebase/storage",uw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="storage";function T4(n,e,t){return n=ct(n),m4(n,e,t)}function b4(n){return n=ct(n),p4(n)}function w4(n,e){return n=ct(n),v4(n,e)}function A4(n=Ed(),e){n=ct(n);const i=Cs(n,vR).getImmediate({identifier:e}),a=Kw("storage");return a&&S4(i,...a),i}function S4(n,e,t,i={}){E4(n,e,t,i)}function I4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new x_(t,i,a,e,Qa)}function R4(){gr(new Jn(vR,I4,"PUBLIC").setMultipleInstances(!0)),En(lw,uw,""),En(lw,uw,"esm2020")}R4();const ER="@firebase/installations",C_="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=1e4,bR=`w:${C_}`,wR="FIS_v2",x4="https://firebaseinstallations.googleapis.com/v1",C4=3600*1e3,D4="installations",N4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ga=new $a(D4,N4,O4);function AR(n){return n instanceof er&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR({projectId:n}){return`${x4}/projects/${n}/installations`}function IR(n){return{token:n.token,requestStatus:2,expiresIn:P4(n.expiresIn),creationTime:Date.now()}}async function RR(n,e){const i=(await e.json()).error;return Ga.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function xR({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function V4(n,{refreshToken:e}){const t=xR(n);return t.append("Authorization",M4(e)),t}async function CR(n){const e=await n();return e.status>=500&&e.status<600?n():e}function P4(n){return Number(n.replace("s","000"))}function M4(n){return`${wR} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=SR(n),a=xR(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={fid:t,authVersion:wR,appId:n.appId,sdkVersion:bR},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await CR(()=>fetch(i,d));if(m.ok){const g=await m.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:IR(g.authToken)}}else throw await RR("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=/^[cdef][\w-]{21}$/,dy="";function B4(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=j4(n);return U4.test(t)?t:dy}catch{return dy}}function j4(n){return L4(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Map;function OR(n,e){const t=Xd(n);VR(t,e),z4(t,e)}function VR(n,e){const t=NR.get(n);if(t)for(const i of t)i(e)}function z4(n,e){const t=F4();t&&t.postMessage({key:n,fid:e}),q4()}let Ra=null;function F4(){return!Ra&&"BroadcastChannel"in self&&(Ra=new BroadcastChannel("[Firebase] FID Change"),Ra.onmessage=n=>{VR(n.data.key,n.data.fid)}),Ra}function q4(){NR.size===0&&Ra&&(Ra.close(),Ra=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="firebase-installations-database",G4=1,Ka="firebase-installations-store";let Ag=null;function D_(){return Ag||(Ag=rA(H4,G4,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ka)}}})),Ag}async function md(n,e){const t=Xd(n),a=(await D_()).transaction(Ka,"readwrite"),l=a.objectStore(Ka),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&OR(n,e.fid),e}async function PR(n){const e=Xd(n),i=(await D_()).transaction(Ka,"readwrite");await i.objectStore(Ka).delete(e),await i.done}async function Wd(n,e){const t=Xd(n),a=(await D_()).transaction(Ka,"readwrite"),l=a.objectStore(Ka),c=await l.get(t),d=e(c);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!c||c.fid!==d.fid)&&OR(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(n){let e;const t=await Wd(n.appConfig,i=>{const a=K4(i),l=$4(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===dy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function K4(n){const e=n||{fid:B4(),registrationStatus:0};return MR(e)}function $4(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Ga.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Q4(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Y4(n)}:{installationEntry:e}}async function Q4(n,e){try{const t=await k4(n,e);return md(n.appConfig,t)}catch(t){throw AR(t)&&t.customData.serverCode===409?await PR(n.appConfig):await md(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Y4(n){let e=await cw(n.appConfig);for(;e.registrationStatus===1;)await DR(100),e=await cw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await N_(n);return i||t}return e}function cw(n){return Wd(n,e=>{if(!e)throw Ga.create("installation-not-found");return MR(e)})}function MR(n){return X4(n)?{fid:n.fid,registrationStatus:0}:n}function X4(n){return n.registrationStatus===1&&n.registrationTime+TR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4({appConfig:n,heartbeatServiceProvider:e},t){const i=J4(n,t),a=V4(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={installation:{sdkVersion:bR,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await CR(()=>fetch(i,d));if(m.ok){const g=await m.json();return IR(g)}else throw await RR("Generate Auth Token",m)}function J4(n,{fid:e}){return`${SR(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O_(n,e=!1){let t;const i=await Wd(n.appConfig,l=>{if(!kR(l))throw Ga.create("not-registered");const c=l.authToken;if(!e&&tL(c))return l;if(c.requestStatus===1)return t=Z4(n,e),l;{if(!navigator.onLine)throw Ga.create("app-offline");const d=rL(l);return t=eL(n,d),d}});return t?await t:i.authToken}async function Z4(n,e){let t=await hw(n.appConfig);for(;t.authToken.requestStatus===1;)await DR(100),t=await hw(n.appConfig);const i=t.authToken;return i.requestStatus===0?O_(n,e):i}function hw(n){return Wd(n,e=>{if(!kR(e))throw Ga.create("not-registered");const t=e.authToken;return iL(t)?{...e,authToken:{requestStatus:0}}:e})}async function eL(n,e){try{const t=await W4(n,e),i={...e,authToken:t};return await md(n.appConfig,i),t}catch(t){if(AR(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await PR(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await md(n.appConfig,i)}throw t}}function kR(n){return n!==void 0&&n.registrationStatus===2}function tL(n){return n.requestStatus===2&&!nL(n)}function nL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+C4}function rL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function iL(n){return n.requestStatus===1&&n.requestTime+TR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(n){const e=n,{installationEntry:t,registrationPromise:i}=await N_(e);return i?i.catch(console.error):O_(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(n,e=!1){const t=n;return await oL(t),(await O_(t,e)).token}async function oL(n){const{registrationPromise:e}=await N_(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(n){if(!n||!n.options)throw Sg("App Configuration");if(!n.name)throw Sg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Sg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Sg(n){return Ga.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="installations",uL="installations-internal",cL=n=>{const e=n.getProvider("app").getImmediate(),t=lL(e),i=Cs(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},hL=n=>{const e=n.getProvider("app").getImmediate(),t=Cs(e,LR).getImmediate();return{getId:()=>sL(t),getToken:a=>aL(t,a)}};function fL(){gr(new Jn(LR,cL,"PUBLIC")),gr(new Jn(uL,hL,"PRIVATE"))}fL();En(ER,C_);En(ER,C_,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="analytics",dL="firebase_id",mL="origin",pL=60*1e3,gL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",V_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new vd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pn=new $a("analytics","Analytics",yL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(n){if(!n.startsWith(V_)){const e=Pn.create("invalid-gtag-resource",{gtagURL:n});return Tn.warn(e.message),""}return n}function UR(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function vL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function EL(n,e){const t=vL("firebase-js-sdk-policy",{createScriptURL:_L}),i=document.createElement("script"),a=`${V_}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function TL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function bL(n,e,t,i,a,l){const c=i[a];try{if(c)await e[c];else{const m=(await UR(t)).find(g=>g.measurementId===a);m&&await e[m.appId]}}catch(d){Tn.error(d)}n("config",a,l)}async function wL(n,e,t,i,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const d=await UR(t);for(const m of c){const g=d.find(T=>T.measurementId===m),_=g&&e[g.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",i,a||{})}catch(l){Tn.error(l)}}function AL(n,e,t,i){async function a(l,...c){try{if(l==="event"){const[d,m]=c;await wL(n,e,t,d,m)}else if(l==="config"){const[d,m]=c;await bL(n,e,t,i,d,m)}else if(l==="consent"){const[d,m]=c;n("consent",d,m)}else if(l==="get"){const[d,m,g]=c;n("get",d,m,g)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){Tn.error(d)}}return a}function SL(n,e,t,i,a){let l=function(...c){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=AL(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function IL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(V_)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=30,xL=1e3;class CL{constructor(e={},t=xL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const BR=new CL;function DL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function NL(n){var c;const{appId:e,apiKey:t}=n,i={method:"GET",headers:DL(t)},a=gL.replace("{app-id}",e),l=await fetch(a,i);if(l.status!==200&&l.status!==304){let d="";try{const m=await l.json();(c=m.error)!=null&&c.message&&(d=m.error.message)}catch{}throw Pn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:d})}return l.json()}async function OL(n,e=BR,t){const{appId:i,apiKey:a,measurementId:l}=n.options;if(!i)throw Pn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw Pn.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new ML;return setTimeout(async()=>{d.abort()},pL),jR({appId:i,apiKey:a,measurementId:l},c,d,e)}async function jR(n,{throttleEndTimeMillis:e,backoffCount:t},i,a=BR){var d;const{appId:l,measurementId:c}=n;try{await VL(i,e)}catch(m){if(c)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:l,measurementId:c};throw m}try{const m=await NL(n);return a.deleteThrottleMetadata(l),m}catch(m){const g=m;if(!PL(g)){if(a.deleteThrottleMetadata(l),c)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:l,measurementId:c};throw m}const _=Number((d=g==null?void 0:g.customData)==null?void 0:d.httpStatus)===503?c0(t,a.intervalMillis,RL):c0(t,a.intervalMillis),T={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return a.setThrottleMetadata(l,T),Tn.debug(`Calling attemptFetch again in ${_} millis`),jR(n,T,i,a)}}function VL(n,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),i(Pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function PL(n){if(!(n instanceof er)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class ML{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function kL(n,e,t,i,a){if(a&&a.global){n("event",t,i);return}else{const l=await e,c={...i,send_to:l};n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(){if(Ay())try{await eA()}catch(n){return Tn.warn(Pn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Tn.warn(Pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function UL(n,e,t,i,a,l,c){const d=OL(n);d.then(b=>{t[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>Tn.error(b)),e.push(d);const m=LL().then(b=>{if(b)return i.getId()}),[g,_]=await Promise.all([d,m]);IL(l)||EL(l,g.measurementId),a("js",new Date);const T=(c==null?void 0:c.config)??{};return T[mL]="firebase",T.update=!0,_!=null&&(T[dL]=_),a("config",g.measurementId,T),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.app=e}_delete(){return delete cc[this.app.options.appId],Promise.resolve()}}let cc={},fw=[];const dw={};let Ig="dataLayer",jL="gtag",mw,zR,pw=!1;function zL(){const n=[];if(Ww()&&n.push("This is a browser extension environment."),hD()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=Pn.create("invalid-analytics-context",{errorInfo:e});Tn.warn(t.message)}}function FL(n,e,t){zL();const i=n.options.appId;if(!i)throw Pn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Pn.create("no-api-key");if(cc[i]!=null)throw Pn.create("already-exists",{id:i});if(!pw){TL(Ig);const{wrappedGtag:l,gtagCore:c}=SL(cc,fw,dw,Ig,jL);zR=l,mw=c,pw=!0}return cc[i]=UL(n,fw,dw,e,mw,Ig,t),new BL(n)}function qL(n=Ed()){n=ct(n);const e=Cs(n,pd);return e.isInitialized()?e.getImmediate():HL(n)}function HL(n,e={}){const t=Cs(n,pd);if(t.isInitialized()){const a=t.getImmediate();if(bs(e,t.getOptions()))return a;throw Pn.create("already-initialized")}return t.initialize({options:e})}function GL(n,e,t,i){n=ct(n),kL(zR,cc[n.app.options.appId],e,t,i).catch(a=>Tn.error(a))}const gw="@firebase/analytics",yw="0.10.18";function KL(){gr(new Jn(pd,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return FL(i,a,t)},"PUBLIC")),gr(new Jn("analytics-internal",n,"PRIVATE")),En(gw,yw),En(gw,yw,"esm2020");function n(e){try{const t=e.getProvider(pd).getImmediate();return{logEvent:(i,a,l)=>GL(t,i,a,l)}}catch(t){throw Pn.create("interop-component-reg-failed",{reason:t})}}}KL();const $L={apiKey:"AIzaSyA6nJyQhMFBLWWVHnTlUehun8de0BMjTZk",authDomain:"rsvp-system-2f6de.firebaseapp.com",projectId:"rsvp-system-2f6de",storageBucket:"rsvp-system-2f6de.firebasestorage.app",messagingSenderId:"59287727345",appId:"1:59287727345:web:273abf36e76a2cb68f8d50",measurementId:"G-8PKQMC1M49"},Jd=iA($L),Nn=YV(Jd),$u=fk(Jd),QL=A4(Jd);qL(Jd);class YL{constructor(){this.initializePersistence()}async initializePersistence(){try{await JP($u,$I)}catch(e){console.error("Failed to set auth persistence:",e)}}async signInWithGoogle(){const e=new ci;e.addScope("email"),e.addScope("profile"),e.setCustomParameters({prompt:"select_account"});const t=await TM($u,e),i=this.mapFirebaseUser(t.user);if(!this.isAuthorized(i))throw await this.signOut(),new Error("Access denied. Only sodaworld.tv email addresses are allowed.");return i}async signOut(){await nM($u)}getCurrentUser(){const e=$u.currentUser;return e?this.mapFirebaseUser(e):null}isAuthorized(e){return e.domain.toLowerCase()==="sodaworld.tv"}onAuthStateChanged(e){return tM($u,t=>{const i=t?this.mapFirebaseUser(t):null;e(i)})}mapFirebaseUser(e){const t=e.email||"",i=t.split("@")[1]||"";return{uid:e.uid,email:t,displayName:e.displayName||void 0,photoURL:e.photoURL||void 0,domain:i,lastLogin:new Date}}}const wf=new YL,XL=({children:n})=>{const[e,t]=H.useState(null),[i,a]=H.useState(!0),[l,c]=H.useState(null);H.useEffect(()=>wf.onAuthStateChanged(B=>{t(B),a(!1)}),[]);const d=async()=>{try{c(null),a(!0);const I=await wf.signInWithGoogle();return t(I),I}catch(I){const B=I instanceof Error?I.message:"Authentication failed";throw c(B),I}finally{a(!1)}},m=async()=>{try{c(null),await wf.signOut(),t(null)}catch(I){const B=I instanceof Error?I.message:"Sign out failed";throw c(B),I}},g=()=>{c(null)},_=e?wf.isAuthorized(e):!1,b={user:e,loading:i,error:l,signIn:d,signOut:m,clearError:g,isAuthorized:_,isAuthenticated:e!==null};return N.jsx(jw.Provider,{value:b,children:n})},WL=({children:n,fallback:e})=>{const{user:t,loading:i,isAuthorized:a}=Nc();return i?N.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#6B46C1",color:"white"},children:N.jsx("div",{children:"Loading..."})}):!t||!a?e?N.jsx(N.Fragment,{children:e}):N.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#6B46C1",color:"white",padding:"20px",textAlign:"center"},children:[N.jsx("h2",{children:"Access Denied"}),N.jsx("p",{children:"You need to sign in with a sodaworld.tv email address to access this page."})]}):N.jsx(N.Fragment,{children:n})};class JL extends H.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error boundary caught an error:",e,t)}render(){return this.state.hasError?N.jsx("div",{className:"min-h-screen bg-[#8A2BE2] flex items-center justify-center p-4",children:N.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[N.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),N.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please refresh the page or try again later."}),N.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold py-2 px-4 rounded-xl transition-colors",children:"Refresh Page"})]})}):this.props.children}}var Ff=(n=>(n.VR="VR",n.IRL="IRL",n.Online="Online",n))(Ff||{}),xc=(n=>(n.RAINBOW_HOP="rainbow_hop",n))(xc||{});const ZL=n=>{const e=[];return!n.title||n.title.trim().length===0?e.push({field:"title",message:"Event title is required"}):n.title.trim().length>100&&e.push({field:"title",message:"Event title must be 100 characters or less"}),n.datetime?new Date(n.datetime)<=new Date&&e.push({field:"datetime",message:"Event date must be in the future"}):e.push({field:"datetime",message:"Event date and time is required"}),(!n.createdBy||!e6(n.createdBy))&&e.push({field:"createdBy",message:"Valid creator email is required"}),n.description&&n.description.length>500&&e.push({field:"description",message:"Event description must be 500 characters or less"}),n.gameType&&!Object.values(xc).includes(n.gameType)&&e.push({field:"gameType",message:"Invalid game type selected"}),{isValid:e.length===0,errors:e}},e6=n=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),t6=n=>["image/png","image/jpeg","image/jpg","image/gif"].includes(n.type)&&n.size<=5242880,n6=({onSubmit:n,eventId:e})=>{const[t,i]=H.useState({name:"",email:"",connectionMethod:null,eventId:e||"default-event"}),[a,l]=H.useState(""),[c,d]=H.useState(!1);ww.useEffect(()=>{i(T=>({...T,eventId:e||"default-event"}))},[e]);const m=T=>{const{name:b,value:I}=T.target;i(B=>({...B,[b]:I}))},g=T=>{i(b=>({...b,connectionMethod:T}))},_=async T=>{if(T.preventDefault(),!c){if(!t.name.trim()){l("Please enter your name.");return}if(!t.email.trim()||!/^\S+@\S+\.\S+$/.test(t.email)){l("Please enter a valid email.");return}if(!t.connectionMethod){l("Please select how you will connect.");return}l(""),d(!0);try{const b=await SI(ps(Nn,"rsvps"),{...t,submittedAt:new Date});console.log("Document written with ID: ",b.id),n()}catch(b){console.error("Error adding document: ",b),l("Failed to submit RSVP. Please try again later.")}finally{d(!1)}}};return N.jsxs("form",{onSubmit:_,className:"space-y-6",children:[N.jsxs("div",{children:[N.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),N.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:m,className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-purple-500 focus:border-purple-500 transition duration-300 text-lg",placeholder:"Your Name"})]}),N.jsxs("div",{children:[N.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),N.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:m,className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-purple-500 focus:border-purple-500 transition duration-300 text-lg",placeholder:"your@email.com"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How will you connect?"}),N.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.keys(Ff).map(T=>N.jsxs("div",{children:[N.jsx("input",{type:"radio",id:T,name:"connectionMethod",value:T,className:"sr-only peer",checked:t.connectionMethod===T,onChange:()=>g(Ff[T])}),N.jsx("label",{htmlFor:T,className:"flex items-center justify-center w-full p-4 border-2 border-slate-300 rounded-xl cursor-pointer transition-all duration-300 peer-checked:bg-purple-500 peer-checked:text-white peer-checked:border-purple-500 hover:border-purple-400",children:Ff[T]})]},T))})]}),a&&N.jsx("p",{className:"text-red-500 text-center",children:a}),N.jsx("button",{type:"submit",disabled:c,className:"w-full bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold text-2xl py-4 px-4 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300 ease-in-out disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none",children:c?"Submitting...":"Submit RSVP"})]})},_w=400,Xo=200,vw=30,Wo=30,r6=.5,i6=-10,Rg=20,xg=40,s6=4,a6=({onPlayAgain:n})=>{const[e,t]=H.useState(Xo-Wo),[i,a]=H.useState(0),[l,c]=H.useState([]),[d,m]=H.useState(0),[g,_]=H.useState(!1),[T,b]=H.useState(!1),I=H.useRef(null),B=H.useRef(null),K=H.useRef(0),U=H.useRef(0),ne=()=>N.jsx("div",{style:{width:vw,height:Wo},className:"bg-gradient-to-b from-red-500 via-yellow-400 to-blue-500 rounded-md flex items-center justify-center",children:N.jsx("div",{className:"text-xl",children:"🌈"})}),W=()=>N.jsx("div",{style:{width:Rg,height:xg},className:"bg-green-600 border-2 border-green-800 rounded-t-md flex items-center justify-center text-white",children:"🌵"}),Y=H.useCallback(D=>{if(!B.current){B.current=D,I.current=requestAnimationFrame(Y);return}const S=D-B.current;a(P=>{const O=P+r6;return t(k=>Math.min(k+O,Xo-Wo)),O});let R=!1;if(c(P=>{const O=P.map(x=>({...x,x:x.x-s6})).filter(x=>x.x>-Rg),k={x:50,y:e,width:vw,height:Wo};for(const x of O){const Ge={x:x.x,y:Xo-xg,width:Rg,height:xg};k.x<Ge.x+Ge.width&&k.x+k.width>Ge.x&&k.y<Ge.y+Ge.height&&k.y+k.height>Ge.y&&(R=!0)}return O}),R){_(!0),b(!1),cancelAnimationFrame(I.current);return}U.current-=S,U.current<=0&&(c(P=>[...P,{x:_w,id:K.current++}]),U.current=1e3+Math.random()*1500),m(P=>P+1),B.current=D,I.current=requestAnimationFrame(Y)},[e]),ae=H.useCallback(()=>{t(Xo-Wo),a(0),c([]),m(0),_(!1),b(!0),K.current=0,U.current=1500+Math.random()*1e3,B.current=void 0,I.current=requestAnimationFrame(D=>Y(D))},[Y]),ie=H.useCallback(()=>{ae()},[ae]),fe=H.useCallback(()=>{!g&&e>=Xo-Wo&&a(i6)},[g,e]);return H.useEffect(()=>{const D=R=>{(R.code==="Space"||R.key==="ArrowUp")&&(R.preventDefault(),!T&&!g?ie():fe())},S=R=>{R.preventDefault(),!T&&!g?ie():fe()};return window.addEventListener("keydown",D),window.addEventListener("touchstart",S),()=>{window.removeEventListener("keydown",D),window.removeEventListener("touchstart",S),I.current&&cancelAnimationFrame(I.current)}},[T,g,fe,ie]),N.jsxs("div",{className:"flex flex-col items-center text-center",children:[N.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Thanks for your RSVP!"}),N.jsx("p",{className:"text-gray-600 mb-4",children:"Have some fun while you wait!"}),N.jsxs("div",{className:"relative bg-gray-100 border-4 border-gray-300 rounded-lg overflow-hidden cursor-pointer",style:{width:_w,height:Xo},onClick:()=>{!T&&!g?ie():fe()},children:[N.jsx("div",{className:"absolute left-[50px] transition-transform duration-100",style:{transform:`translateY(${e}px)`},children:N.jsx(ne,{})}),l.map(D=>N.jsx("div",{className:"absolute bottom-0",style:{transform:`translateX(${D.x}px)`},children:N.jsx(W,{})},D.id)),N.jsxs("div",{className:"absolute top-2 right-2 text-lg font-bold text-gray-500",children:["Score: ",Math.floor(d/10)]}),!T&&!g&&N.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-30 text-white",children:[N.jsx("h3",{className:"text-3xl font-bold",children:"Rainbow Hop!"}),N.jsx("p",{children:"Click or Press Space to Start"})]}),g&&N.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-50 text-white",children:[N.jsx("h3",{className:"text-4xl font-bold mb-2",children:"Game Over"}),N.jsx("button",{onClick:ie,className:"mt-4 bg-yellow-400 hover:bg-yellow-500 text-slate-800 font-bold py-2 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300",children:"Play Again"})]})]}),N.jsx("button",{onClick:n,className:"mt-6 text-sm text-gray-500 hover:text-purple-600 underline",children:"Back to RSVP Form"})]})},FR=()=>N.jsx("div",{className:"relative w-full h-full",children:N.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:[N.jsx("defs",{children:N.jsx("style",{children:`
                    @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Luckiest+Guy&display=swap');
                `})}),N.jsx("circle",{cx:"100",cy:"100",r:"98",fill:"white",stroke:"black",strokeWidth:"3"}),N.jsx("path",{d:"M 2 100 A 98 98 0 0 1 198 100 L 2 100",fill:"#FBBF24"}),N.jsxs("text",{x:"100",y:"45",textAnchor:"middle",style:{fontFamily:"Fredoka One, cursive"},fontSize:"11",fill:"black",fontWeight:"500",children:[N.jsx("tspan",{x:"100",dy:"0",children:"You are invited to play in"}),N.jsx("tspan",{x:"100",dy:"1.3em",children:"the soda labs. An all day music,"}),N.jsx("tspan",{x:"100",dy:"1.3em",children:"culture and tech experiment"})]}),N.jsxs("g",{children:[N.jsx("circle",{cx:"100",cy:"100",r:"25",fill:"white",stroke:"black",strokeWidth:"0.5"}),N.jsx("circle",{cx:"100",cy:"100",r:"23",fill:"#FBBF24",stroke:"black",strokeWidth:"0.5"}),N.jsx("text",{x:"100",y:"105",textAnchor:"middle",style:{fontFamily:"Fredoka One, cursive"},fontSize:"12",fill:"black",fontWeight:"bold",children:"RSVP"})]}),N.jsx("text",{x:"100",y:"165",textAnchor:"middle",style:{fontFamily:"Luckiest Guy, cursive"},fontSize:"24",fill:"#FBBF24",stroke:"black",strokeWidth:"1.5",strokeLinejoin:"round",letterSpacing:"0.5",children:"prototype sessions"})]})}),o6=({onContinue:n})=>N.jsxs("div",{className:"min-h-screen w-full flex flex-col bg-[#8A2BE2] text-white cursor-pointer",onClick:n,role:"button",tabIndex:0,onKeyPress:e=>e.key==="Enter"&&n(),"aria-label":"Continue to RSVP form",children:[N.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:N.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center",children:[N.jsx("div",{className:"w-full max-w-xs sm:max-w-sm transform hover:scale-105 transition-transform duration-300 ease-in-out",children:N.jsx(FR,{})}),N.jsx("p",{className:"mt-8 text-2xl",style:{fontFamily:"'Fredoka One', cursive"},children:"Click anywhere to RSVP"})]})}),N.jsx("footer",{className:"text-center text-white text-opacity-70 text-sm p-4 pb-6",children:N.jsx("p",{children:"Created with fun by a World-Class React Engineer"})})]}),Ew=()=>{const{eventId:n}=rC(),[e,t]=H.useState(!1),[i,a]=H.useState(!1),l=H.useCallback(()=>{t(!0)},[]),c=H.useCallback(()=>{a(!0)},[]),d=H.useCallback(()=>{a(!1)},[]);return e?N.jsxs("div",{className:"min-h-screen w-full flex flex-col bg-[#8A2BE2] text-slate-800",children:[N.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:N.jsx("div",{className:"w-full max-w-md mx-auto",children:N.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden transition-all duration-500",children:[N.jsx("div",{className:"bg-yellow-400 p-6",children:N.jsx("div",{className:"w-48 h-48 mx-auto",children:N.jsx(FR,{})})}),N.jsx("div",{className:"p-8",children:i?N.jsx(a6,{onPlayAgain:d}):N.jsx(n6,{onSubmit:c,eventId:n})})]})})}),N.jsx("footer",{className:"text-center text-white text-opacity-70 text-sm p-4 pb-6",children:N.jsx("p",{children:"Created with fun by a World-Class React Engineer"})})]}):N.jsx(o6,{onContinue:l})};class l6{constructor(){this.collectionName="events"}async createEvent(e){const t=new Date,i={...e,datetime:Me.fromDate(e.datetime),createdAt:Me.fromDate(t),updatedAt:Me.fromDate(t)},a=await SI(ps(Nn,this.collectionName),i);return{...e,id:a.id,createdAt:t,updatedAt:t}}async getEventsByUser(e){const t=_g(ps(Nn,this.collectionName),ya("createdBy","==",e),ya("isActive","==",!0),Bb("datetime","desc"));return(await vg(t)).docs.map(a=>this.mapDocToEvent(a))}async getActiveEvents(){const e=new Date,t=_g(ps(Nn,this.collectionName),ya("isActive","==",!0),ya("datetime",">",Me.fromDate(e)),Bb("datetime","asc"));return(await vg(t)).docs.map(a=>this.mapDocToEvent(a))}async getEventsForReminders(){const e=new Date;e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const t=new Date(e);t.setDate(t.getDate()+1);const i=_g(ps(Nn,this.collectionName),ya("isActive","==",!0),ya("datetime",">=",Me.fromDate(e)),ya("datetime","<",Me.fromDate(t)));return(await vg(i)).docs.map(l=>this.mapDocToEvent(l))}async getEventById(e){const t=gs(Nn,this.collectionName,e),i=await uP(t);return i.exists()?this.mapDocToEvent(i):null}async updateEvent(e,t){const i=gs(Nn,this.collectionName,e),a={...t,updatedAt:Me.fromDate(new Date)};t.datetime&&(a.datetime=Me.fromDate(t.datetime)),await cP(i,a)}async deleteEvent(e){const t=gs(Nn,this.collectionName,e);await hP(t)}async uploadEventLogo(e){const i=`event-logos/${Date.now()}-${e.name}`,a=w4(QL,i);return await T4(a,e),await b4(a)}mapDocToEvent(e){const t=e.data();return{id:e.id,title:t.title,description:t.description,datetime:t.datetime.toDate(),createdBy:t.createdBy,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate(),logoUrl:t.logoUrl,gameType:t.gameType||xc.RAINBOW_HOP,isActive:t.isActive??!0}}}const xa=new l6,u6=n=>{const[e,t]=H.useState([]),[i,a]=H.useState(!0),[l,c]=H.useState(null);return H.useEffect(()=>{if(!n){a(!1);return}(async()=>{try{a(!0);const T=await xa.getEventsByUser(n);t(T),c(null)}catch(T){console.error("Error fetching events:",T),c("Failed to load events")}finally{a(!1)}})()},[n]),{events:e,loading:i,error:l,createEvent:async _=>{try{const T=await xa.createEvent(_);return t(b=>[T,...b]),T}catch(T){throw console.error("Error creating event:",T),T}},updateEvent:async(_,T)=>{try{await xa.updateEvent(_,T),t(b=>b.map(I=>I.id===_?{...I,...T}:I))}catch(b){throw console.error("Error updating event:",b),b}},deleteEvent:async _=>{try{await xa.deleteEvent(_),t(T=>T.filter(b=>b.id!==_))}catch(T){throw console.error("Error deleting event:",T),T}}}},c6=({showSignOut:n=!0,className:e,style:t})=>{const{user:i,signOut:a,loading:l}=Nc();if(!i)return null;const c=async()=>{try{await a()}catch(d){console.error("Sign out failed:",d)}};return N.jsxs("div",{className:e,style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",...t},children:[i.photoURL&&N.jsx("img",{src:i.photoURL,alt:i.displayName||"User",style:{width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover"}}),N.jsxs("div",{style:{flex:1,minWidth:0},children:[N.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"white",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.displayName||"User"}),N.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.email})]}),n&&N.jsx("button",{onClick:c,disabled:l,style:{backgroundColor:"transparent",color:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",cursor:l?"not-allowed":"pointer",opacity:l?.7:1,transition:"all 0.2s ease"},children:l?"...":"Sign Out"})]})},h6=({event:n,onEdit:e,onDelete:t,showDeleteConfirm:i,onDeleteConfirm:a,onDeleteCancel:l})=>{const c=T=>new Intl.DateTimeFormat("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(T),d=n.datetime>new Date,m=n.datetime<new Date,g=()=>m?"text-gray-500":d?"text-green-600":"text-blue-600",_=()=>m?"Past Event":d?"Upcoming":"Active";return N.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:[N.jsxs("div",{className:"h-48 bg-gradient-to-br from-[#8A2BE2] to-[#6B46C1] relative",children:[n.logoUrl?N.jsx("img",{src:n.logoUrl,alt:n.title,className:"w-full h-full object-cover"}):N.jsx("div",{className:"flex items-center justify-center h-full",children:N.jsx("div",{className:"text-white text-6xl",children:"📅"})}),N.jsx("div",{className:"absolute top-4 right-4",children:N.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium bg-white ${g()}`,children:_()})})]}),N.jsxs("div",{className:"p-6",children:[N.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.title}),n.description&&N.jsx("p",{className:"text-gray-600 text-sm mb-3 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:n.description}),N.jsxs("div",{className:"space-y-2 mb-4",children:[N.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[N.jsx("span",{className:"mr-2",children:"🕒"}),N.jsx("span",{children:c(n.datetime)})]}),N.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[N.jsx("span",{className:"mr-2",children:"🎮"}),N.jsx("span",{className:"capitalize",children:n.gameType.replace("_"," ")})]})]}),i?N.jsxs("div",{className:"space-y-2",children:[N.jsx("p",{className:"text-sm text-red-600 font-medium text-center",children:"Delete this event?"}),N.jsxs("div",{className:"flex gap-2",children:[N.jsx("button",{onClick:a,className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors text-sm",children:"Yes, Delete"}),N.jsx("button",{onClick:l,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold py-2 px-4 rounded-xl transition-colors text-sm",children:"Cancel"})]})]}):N.jsxs("div",{className:"flex gap-2",children:[N.jsx("button",{onClick:e,className:"flex-1 bg-[#FFD700] hover:bg-[#FFC700] text-black font-semibold py-2 px-4 rounded-xl transition-colors text-sm",children:"Edit"}),N.jsx("button",{onClick:t,className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors text-sm",children:"Delete"})]}),N.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[N.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"RSVP Link:"}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("input",{type:"text",value:`${window.location.origin}/rsvp/${n.id}`,readOnly:!0,className:"flex-1 text-xs bg-gray-100 px-2 py-1 rounded border text-gray-600"}),N.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/rsvp/${n.id}`)},className:"text-xs bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded transition-colors",title:"Copy link",children:"📋"})]})]})]})]})},f6=({events:n,loading:e,onEditEvent:t,onDeleteEvent:i,onCreateEvent:a})=>{const[l,c]=H.useState(null),d=_=>{c(_)},m=_=>{i(_),c(null)},g=()=>{c(null)};return e?N.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8 text-slate-800",children:N.jsxs("div",{className:"flex items-center justify-center py-12",children:[N.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#8A2BE2]"}),N.jsx("span",{className:"ml-4 text-lg",children:"Loading events..."})]})}):N.jsxs("div",{className:"space-y-6",children:[N.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8 text-slate-800",children:N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsxs("div",{children:[N.jsx("h2",{className:"text-2xl font-bold",children:"Your Events"}),N.jsx("p",{className:"text-gray-600 mt-1",children:n.length===0?"No events created yet":`${n.length} event${n.length===1?"":"s"} created`})]}),N.jsx("button",{onClick:a,className:"bg-[#FFD700] hover:bg-[#FFC700] text-black font-semibold py-3 px-6 rounded-2xl transition-colors",children:"Create New Event"})]})}),n.length===0?N.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-8 text-slate-800 text-center",children:N.jsxs("div",{className:"py-12",children:[N.jsx("div",{className:"text-6xl mb-4",children:"📅"}),N.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Events Yet"}),N.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by creating your first event. You'll be able to manage RSVPs and track attendance."}),N.jsx("button",{onClick:a,className:"bg-[#FFD700] hover:bg-[#FFC700] text-black font-semibold py-3 px-6 rounded-2xl transition-colors",children:"Create Your First Event"})]})}):N.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(_=>N.jsx(h6,{event:_,onEdit:()=>t(_),onDelete:()=>d(_.id),showDeleteConfirm:l===_.id,onDeleteConfirm:()=>m(_.id),onDeleteCancel:g},_.id))})]})},d6=({event:n,onSubmit:e,onCancel:t,userEmail:i})=>{const[a,l]=H.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",datetime:n!=null&&n.datetime?n.datetime.toISOString().slice(0,16):"",gameType:(n==null?void 0:n.gameType)||xc.RAINBOW_HOP}),[c,d]=H.useState(null),[m,g]=H.useState((n==null?void 0:n.logoUrl)??null),[_,T]=H.useState(!1),[b,I]=H.useState({}),B=ne=>{const{name:W,value:Y}=ne.target;l(ae=>({...ae,[W]:Y})),b[W]&&I(ae=>({...ae,[W]:""}))},K=ne=>{var ae;const W=(ae=ne.target.files)==null?void 0:ae[0];if(!W)return;if(!t6(W)){I(ie=>({...ie,logo:"Please select a valid image file (PNG, JPG, JPEG, GIF) under 5MB"}));return}d(W),I(ie=>({...ie,logo:""}));const Y=new FileReader;Y.onload=ie=>{var fe;g((fe=ie.target)==null?void 0:fe.result)},Y.readAsDataURL(W)},U=async ne=>{ne.preventDefault(),T(!0),I({});try{const W={...a,datetime:new Date(a.datetime),createdBy:i,isActive:!0},Y=ZL(W);if(!Y.isValid){const D={};Y.errors.forEach(S=>{D[S.field]=S.message}),I(D);return}let ae=(n==null?void 0:n.logoUrl)??void 0;c&&(ae=await xa.uploadEventLogo(c));const ie={...W};ae&&(ie.logoUrl=ae);let fe;n?(await xa.updateEvent(n.id,ie),fe={...n,...ie}):fe=await xa.createEvent(ie),e(fe)}catch(W){console.error("Error saving event:",W),console.error("Error details:",{message:W instanceof Error?W.message:"Unknown error",stack:W instanceof Error?W.stack:void 0,eventData:finalEventData}),I({submit:`Failed to save event: ${W instanceof Error?W.message:"Unknown error"}`})}finally{T(!1)}};return N.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 text-slate-800",children:[N.jsx("h2",{className:"text-2xl font-bold mb-6",children:n?"Edit Event":"Create New Event"}),N.jsxs("form",{onSubmit:U,className:"space-y-6",children:[N.jsxs("div",{children:[N.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),N.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:B,className:`w-full px-4 py-3 border rounded-2xl focus:ring-2 focus:ring-[#8A2BE2] focus:border-transparent ${b.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter event title",maxLength:100}),b.title&&N.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.title})]}),N.jsxs("div",{children:[N.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),N.jsx("textarea",{id:"description",name:"description",value:a.description,onChange:B,rows:3,className:`w-full px-4 py-3 border rounded-2xl focus:ring-2 focus:ring-[#8A2BE2] focus:border-transparent ${b.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter event description",maxLength:500}),b.description&&N.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.description})]}),N.jsxs("div",{children:[N.jsx("label",{htmlFor:"datetime",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time *"}),N.jsx("input",{type:"datetime-local",id:"datetime",name:"datetime",value:a.datetime,onChange:B,className:`w-full px-4 py-3 border rounded-2xl focus:ring-2 focus:ring-[#8A2BE2] focus:border-transparent ${b.datetime?"border-red-500":"border-gray-300"}`}),b.datetime&&N.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.datetime})]}),N.jsxs("div",{children:[N.jsx("label",{htmlFor:"gameType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Game Type"}),N.jsx("select",{id:"gameType",name:"gameType",value:a.gameType,onChange:B,className:"w-full px-4 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-[#8A2BE2] focus:border-transparent",children:N.jsx("option",{value:xc.RAINBOW_HOP,children:"Rainbow Hop"})})]}),N.jsxs("div",{children:[N.jsx("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Logo (Optional)"}),N.jsx("input",{type:"file",id:"logo",accept:"image/png,image/jpeg,image/jpg,image/gif",onChange:K,className:"w-full px-4 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-[#8A2BE2] focus:border-transparent"}),b.logo&&N.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.logo}),m&&N.jsxs("div",{className:"mt-4",children:[N.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Logo Preview:"}),N.jsx("img",{src:m,alt:"Logo preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"})]})]}),b.submit&&N.jsx("div",{className:"p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:b.submit}),N.jsxs("div",{className:"flex gap-4 pt-4",children:[N.jsx("button",{type:"submit",disabled:_,className:"flex-1 bg-[#FFD700] hover:bg-[#FFC700] text-black font-semibold py-3 px-6 rounded-2xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Saving...":n?"Update Event":"Create Event"}),N.jsx("button",{type:"button",onClick:t,disabled:_,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold py-3 px-6 rounded-2xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})},m6=()=>{const{user:n}=Nc(),{events:e,loading:t,createEvent:i,updateEvent:a,deleteEvent:l}=u6(n==null?void 0:n.email),[c,d]=H.useState("list"),[m,g]=H.useState(null),_=()=>{g(null),d("create")},T=K=>{g(K),d("edit")},b=async K=>{try{await l(K)}catch(U){console.error("Failed to delete event:",U)}},I=async K=>{try{m?await a(K.id,K):await i(K),d("list"),g(null)}catch(U){console.error("Failed to save event:",U)}},B=()=>{d("list"),g(null)};return N.jsxs("div",{className:"min-h-screen bg-[#8A2BE2] text-white",children:[N.jsx("header",{className:"bg-[#6B46C1] shadow-lg",children:N.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:N.jsxs("div",{className:"flex justify-between items-center py-6",children:[N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsx("h1",{className:"text-3xl font-bold",children:"Event Dashboard"}),c!=="list"&&N.jsx("button",{onClick:()=>d("list"),className:"text-sm bg-white/20 hover:bg-white/30 px-3 py-1 rounded-lg transition-colors",children:"← Back to Events"})]}),N.jsx(c6,{})]})})}),N.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c==="list"&&N.jsx(f6,{events:e,loading:t,onCreateEvent:_,onEditEvent:T,onDeleteEvent:b}),(c==="create"||c==="edit")&&n&&N.jsx(d6,{event:m||void 0,onSubmit:I,onCancel:B,userEmail:n.email})]})]})},p6=({className:n,style:e})=>{const{signIn:t,loading:i,error:a,clearError:l}=Nc(),c=async()=>{try{l(),await t()}catch(d){console.error("Login failed:",d)}};return N.jsxs("div",{children:[N.jsx("button",{onClick:c,disabled:i,className:n,style:{backgroundColor:"#FCD34D",color:"#1F2937",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:i?"not-allowed":"pointer",opacity:i?.7:1,transition:"all 0.2s ease",...e},children:i?"Signing in...":"Sign in with Google"}),a&&N.jsx("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#FEE2E2",color:"#DC2626",borderRadius:"6px",fontSize:"14px"},children:a})]})},g6=()=>{const{user:n,loading:e,isAuthorized:t}=Nc();return e?N.jsx("div",{className:"min-h-screen bg-[#8A2BE2] flex items-center justify-center",children:N.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):n&&t?N.jsx(Dg,{to:"/dashboard",replace:!0}):N.jsx("div",{className:"min-h-screen bg-[#8A2BE2] flex items-center justify-center p-4",children:N.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center",children:[N.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Event Dashboard Login"}),N.jsx("p",{className:"text-gray-600 mb-8",children:"Sign in with your sodaworld.tv Google account to access the event management dashboard."}),N.jsx(p6,{}),n&&!t&&N.jsx("div",{className:"mt-6 p-4 bg-red-100 rounded-lg",children:N.jsx("p",{className:"text-red-800 text-sm",children:"Access denied. You must use a sodaworld.tv email address to access the dashboard."})})]})})};class il{constructor(){}static getInstance(){return il.instance||(il.instance=new il),il.instance}async initializeDatabase(){this.enablePersistenceAsync(),this.createCollectionStructureAsync(),console.log("Database initialization started (non-blocking)")}async enablePersistenceAsync(){try{await XV(Nn),console.log("Database persistence enabled")}catch(e){e.code==="failed-precondition"?console.warn("Database persistence failed: Multiple tabs open"):e.code==="unimplemented"?console.warn("Database persistence not supported in this browser"):console.error("Error enabling database persistence:",e)}}async createCollectionStructureAsync(){try{await this.createCollectionStructure(),console.log("Database collection structure created")}catch(e){console.error("Error creating collection structure:",e)}}async createCollectionStructure(){try{const e=ps(Nn,"events"),t=gs(e,"_sample_event_for_indexing");await vf(t,{title:"Sample Event",description:"This is a sample event for index creation",datetime:new Date,createdBy:"system@sodaworld.tv",createdAt:new Date,updatedAt:new Date,logoUrl:null,gameType:"rainbow_hop",isActive:!0,_isSample:!0});const i=ps(Nn,"rsvps"),a=gs(i,"_sample_rsvp_for_indexing");await vf(a,{eventId:"_sample_event_for_indexing",name:"Sample User",email:"sample@example.com",connectionMethod:"VR",submittedAt:new Date,reminderSent:!1,_isSample:!0});const l=ps(Nn,"users"),c=gs(l,"_sample_user_for_indexing");await vf(c,{uid:"sample_uid",email:"sample@sodaworld.tv",displayName:"Sample User",photoURL:null,domain:"sodaworld.tv",lastLogin:new Date,_isSample:!0}),console.log("Collection structure created successfully")}catch(e){throw console.error("Error creating collection structure:",e),e}}async cleanupSampleData(){try{const e=["events","rsvps","users"];for(const t of e){const i=gs(Nn,t,`_sample_${t.slice(0,-1)}_for_indexing`);await vf(i,{_deleted:!0},{merge:!0})}console.log("Sample data cleanup complete")}catch(e){console.error("Error cleaning up sample data:",e)}}async validateSchema(){try{return{collections:["events","rsvps","users"],indexesRequired:["events: (createdBy, isActive, datetime) - Compound index","events: (isActive, datetime) - Compound index for public queries","rsvps: (eventId, submittedAt) - Compound index","rsvps: (email) - Single field index","rsvps: (eventId, reminderSent) - Compound index for reminder queries","users: (email) - Single field index","users: (domain, lastLogin) - Compound index"],status:"ready"}}catch(e){return console.error("Error validating schema:",e),{collections:[],indexesRequired:[],status:"error"}}}async getDatabaseStats(){try{return{eventsCount:0,rsvpsCount:0,usersCount:0,lastUpdated:new Date}}catch(e){throw console.error("Error getting database stats:",e),e}}}const Tw=il.getInstance();async function y6(){try{console.log("Initializing database in background..."),await Tw.initializeDatabase(),setTimeout(async()=>{try{const n=await Tw.validateSchema();console.log("Database validation:",n),n.status==="ready"?console.log("Database is ready for use"):console.warn("Database needs setup. Please check the configuration.")}catch(n){console.warn("Database validation failed:",n)}},100)}catch(n){console.error("Failed to initialize database:",n)}}const _6=()=>(H.useEffect(()=>{(async()=>{try{await y6(),console.log("Database initialization completed in background")}catch(e){console.error("Database initialization failed:",e)}})()},[]),N.jsx(JL,{children:N.jsx(XL,{children:N.jsx(zC,{children:N.jsxs(_C,{children:[N.jsx(Jo,{path:"/",element:N.jsx(Ew,{})}),N.jsx(Jo,{path:"/rsvp/:eventId",element:N.jsx(Ew,{})}),N.jsx(Jo,{path:"/login",element:N.jsx(g6,{})}),N.jsx(Jo,{path:"/dashboard",element:N.jsx(WL,{fallback:N.jsx(Dg,{to:"/login",replace:!0}),children:N.jsx(m6,{})})}),N.jsx(Jo,{path:"*",element:N.jsx(Dg,{to:"/",replace:!0})})]})})})})),qR=document.getElementById("root");if(!qR)throw new Error("Could not find root element to mount to");const v6=Rx.createRoot(qR);v6.render(N.jsx(ww.StrictMode,{children:N.jsx(_6,{})}));
